<!DOCTYPE html>
<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="google-site-verification" content="drUiN1FHdS_E7EWM7TtT28Sro8_hzEGAFj5tOjwcYJw">
<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css">
<link rel="stylesheet" href="//fonts.loli.net/css?family=Lato:300,300italic,400,400italic,700,700italic|16:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css">
<link rel="stylesheet" href="/css/main.css?v=6.7.0">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.7.0">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.7.0">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.7.0">
<link rel="mask-icon" href="/images/logo.svg?v=6.7.0" color="#222">
<script id="hexo.configurations">
var NexT = window.NexT || {};
var CONFIG = {
root: '/',
scheme: 'Gemini',
version: '6.7.0',
sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
fancybox: true,
fastclick: true,
lazyload: false,
tabs: true,
motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
algolia: {
applicationID: '',
apiKey: '',
indexName: '',
hits: {"per_page":10},
labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
}
};
</script>
<link rel="stylesheet" href="/lib/waifu/waifu.css">
<meta name="description" content="实用教程：树莓派使用 RFID RC522 芯片进行数据的读写  在这个 Raspberry Pi RFID RC522 教程中，我将介绍如何设置和连接 Raspberry Pi 和 RFID RC522 芯片。这是一个很实用的教程，以便于你之后各种不同的项目，例如使用它作为考勤系统、使用它来打开一个锁。In this Raspberry Pi RFID RC522 tutorial, I wil">
<meta name="keywords" content="Hexo">
<meta property="og:type" content="article">
<meta property="og:title" content="树莓派使用 RFID RC522 芯片">
<meta property="og:url" content="https://zhangshuqiao.org/2019-01/树莓派使用RFID RC522芯片/index.html">
<meta property="og:site_name" content="米米的博客">
<meta property="og:description" content="实用教程：树莓派使用 RFID RC522 芯片进行数据的读写  在这个 Raspberry Pi RFID RC522 教程中，我将介绍如何设置和连接 Raspberry Pi 和 RFID RC522 芯片。这是一个很实用的教程，以便于你之后各种不同的项目，例如使用它作为考勤系统、使用它来打开一个锁。In this Raspberry Pi RFID RC522 tutorial, I wil">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://zhangshuqiao.org/images/2019-01/raspberry-pi-RFID-Reader.jpg">
<meta property="og:image" content="https://zhangshuqiao.org/images/2019-01/RFID-Fritz-v2.png">
<meta property="og:image" content="https://zhangshuqiao.org/images/2019-01/RFID-GPIO-Connection.jpg">
<meta property="og:updated_time" content="2019-01-22T13:59:43.894Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="树莓派使用 RFID RC522 芯片">
<meta name="twitter:description" content="实用教程：树莓派使用 RFID RC522 芯片进行数据的读写  在这个 Raspberry Pi RFID RC522 教程中，我将介绍如何设置和连接 Raspberry Pi 和 RFID RC522 芯片。这是一个很实用的教程，以便于你之后各种不同的项目，例如使用它作为考勤系统、使用它来打开一个锁。In this Raspberry Pi RFID RC522 tutorial, I wil">
<meta name="twitter:image" content="https://zhangshuqiao.org/images/2019-01/raspberry-pi-RFID-Reader.jpg">
<link rel="alternate" href="/atom.xml" title="米米的博客" type="application/atom+xml">
<link rel="canonical" href="https://zhangshuqiao.org/2019-01/树莓派使用RFID RC522芯片/">
<script id="page.configurations">
CONFIG.page = {
sidebar: "",
};
</script>
<title>树莓派使用 RFID RC522 芯片 | 米米的博客</title>
<noscript>
<style>
.use-motion .motion-element,
.use-motion .brand,
.use-motion .menu-item,
.sidebar-inner,
.use-motion .post-block,
.use-motion .pagination,
.use-motion .comments,
.use-motion .post-header,
.use-motion .post-body,
.use-motion .collection-title { opacity: initial; }
.use-motion .logo,
.use-motion .site-title,
.use-motion .site-subtitle {
opacity: initial;
top: initial;
}
.use-motion .logo-line-before i { left: initial; }
.use-motion .logo-line-after i { right: initial; }
</style>
</noscript>
</head>
<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN">
<div class="container sidebar-position-left page-post-detail">
<div class="headband"></div>
<header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
<div class="header-inner"><div class="site-brand-wrapper">
<div class="site-meta">
<div class="custom-logo-site-title">
<a href="/" class="brand" rel="start">
<span class="logo-line-before"><i></i></span>
<span class="site-title">米米的博客</span>
<span class="logo-line-after"><i></i></span>
</a>
</div>
<p class="site-subtitle">做了一点微小的工作</p>
</div>
<div class="site-nav-toggle">
<button aria-label="切换导航栏">
<span class="btn-bar"></span>
<span class="btn-bar"></span>
<span class="btn-bar"></span>
</button>
</div>
</div>
<nav class="site-nav">
<ul id="menu" class="menu">
<li class="menu-item menu-item-home">
<a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>
</li>
<li class="menu-item menu-item-about">
<a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-rocket"></i> <br>关于</a>
</li>
<li class="menu-item menu-item-tags">
<a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>
</li>
<li class="menu-item menu-item-categories">
<a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>
</li>
<li class="menu-item menu-item-archives">
<a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>
</li>
<li class="menu-item menu-item-friends">
<a href="/friends/" rel="section"><i class="menu-item-icon fa fa-fw fa-globe-asia"></i> <br>朋友们</a>
</li>
<li class="menu-item menu-item-lab">
<a href="/lab/" rel="section"><i class="menu-item-icon fa fa-fw fa-flask"></i> <br>实验室</a>
</li>
<li class="menu-item menu-item-search">
<a href="javascript:;" class="popup-trigger">
<i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
</li>
</ul>
<div class="site-search">
<div class="popup search-popup local-search-popup">
<div class="local-search-header clearfix">
<span class="search-icon">
<i class="fa fa-search"></i>
</span>
<span class="popup-btn-close">
<i class="fa fa-times-circle"></i>
</span>
<div class="local-search-input-wrapper">
<input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
</div>
</div>
<div id="local-search-result"></div>
</div>
</div>
</nav>
</div>
</header>
<main id="main" class="main">
<div class="main-inner">
<div class="content-wrap">
<div id="content" class="content">
<div id="posts" class="posts-expand">
<article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
<div class="post-block">
<link itemprop="mainEntityOfPage" href="https://zhangshuqiao.org/2019-01/树莓派使用RFID RC522芯片/">
<span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<meta itemprop="name" content="张书樵">
<meta itemprop="description" content="力电声光热，涵尽学海无涯">
<meta itemprop="image" content="/images/icon.gif">
</span>
<span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta itemprop="name" content="米米的博客">
</span>
<header class="post-header">
<h1 class="post-title" itemprop="name headline">树莓派使用 RFID RC522 芯片
</h1>
<div class="post-meta">
<span class="post-time">
<span class="post-meta-item-icon">
<i class="far fa-calendar"></i>
</span>
<span class="post-meta-item-text">发表于</span>
<time title="创建时间：2019-01-21 12:06:22" itemprop="dateCreated datePublished" datetime="2019-01-21T12:06:22+08:00">2019-01-21</time>
</span>
<span class="post-category">
<span class="post-meta-divider">|</span>
<span class="post-meta-item-icon">
<i class="far fa-folder"></i>
</span>
<span class="post-meta-item-text">分类于</span>
<span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/程序设计/" itemprop="url" rel="index"><span itemprop="name">程序设计</span></a></span>
</span>
<span class="post-comments-count">
<span class="post-meta-divider">|</span>
<span class="post-meta-item-icon">
<i class="far fa-comment"></i>
</span>
<a href="/2019-01/树莓派使用RFID RC522芯片/#comments" itemprop="discussionUrl">
<span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2019-01/树莓派使用RFID RC522芯片/" itemprop="commentCount"></span>
</a>
</span>
<span class="post-meta-divider">|</span>
<span class="post-meta-item-icon">
<i class="fa fa-file"></i>
阅读次数：
<span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
</span>
<div class="post-symbolscount">
<span class="post-meta-item-icon">
<i class="far fa-file-word"></i>
</span>
<span class="post-meta-item-text">本文字数：</span>
<span title="本文字数">23k</span>
<span class="post-meta-divider">|</span>
<span class="post-meta-item-icon">
<i class="far fa-clock"></i>
</span>
<span class="post-meta-item-text">阅读时长 &asymp;</span>
<span title="阅读时长">21 分钟</span>
</div>
</div>
</header>
<div class="post-body" itemprop="articleBody">
<p>实用教程：树莓派使用 RFID RC522 芯片进行数据的读写</p>
<p><img src="/images/2019-01/raspberry-pi-RFID-Reader.jpg" alt=""></p>
<p>在这个 Raspberry Pi RFID RC522 教程中，我将介绍如何设置和连接 Raspberry Pi 和 RFID RC522 芯片。这是一个很实用的教程，以便于你之后各种不同的项目，例如使用它作为考勤系统、使用它来打开一个锁。<br>In this Raspberry Pi RFID RC522 tutorial, I will be walking you through the steps on how to set up and wire the RFID RC522 chip with your Raspberry Pi. This project is a cool circuit to play around with and opens you up to quite a wide variety of different projects from using it as an attendance system to using it to open a lock.</p>
<p>RFID RC522 是基于 MFRC522 微控制器的非常低成本的 RFID（射频识别）读写器。该微控制器通过 SPI 协议提供数据，并通过创建一个 13.56MHz 的电磁场来工作，该电磁场用于与 RFID 卡片进行通信。<br>The RFID RC522 is a very low-cost RFID (Radio-frequency identification) reader and writer that is based on the MFRC522 microcontroller. This microcontroller provides its data through the SPI protocol and works by creating a 13.56MHz electromagnetic field that it uses to communicate with the RFID tags.</p>
<p>确保你的 RFID RC522 购买的卡片在 13.56MHz 的频率上运行，否则将无法读取。<br>Make sure that the tags you purchase for your RFID RC522 operate on the 13.56MHz frequency otherwise we will fail to read them.</p>
<p>本教程将示范如何连接 RC522 以及编写 Python 脚本以与芯片进行交互，以便读取和写入 RFID 卡片。如果你想展示一些数据信息，你可以使用像 <a href="https://pimylifeup.com/raspberry-pi-lcd-16x2" target="_blank" rel="noopener">16×2 液晶显示器</a> 扩展这个教程。<br>We will be showing you how to wire up the RC522 as well as showing you how to write Python scripts to interact with the chip so you can both read and write your RFID Tags. You can extend this tutorial to use something like a <a href="https://pimylifeup.com/raspberry-pi-lcd-16x2" target="_blank" rel="noopener">16×2 LCD for the Raspberry Pi</a>, handy if you want to show some information.</p>
<h2 id="设备清单"><a href="#设备清单" class="headerlink" title="设备清单"></a>设备清单</h2><p>Equipment List</p>
<p>下面列出的是我在这个教程中使用的东西。<br>Below are all the bits and pieces that I used for this Raspberry Pi RFID RC522 tutorial.</p>
<p>推荐：<br>Recommended:</p>
<ul>
<li><p>树莓派 2 或 3<br>Raspberry Pi 2 or 3</p>
</li>
<li><p>Micro SD 卡<br>Micro SD Card</p>
</li>
<li><p>电源供应<br>Power Supply</p>
</li>
<li><p>RC522 RFID 读卡器<br>RC522 RFID Reader</p>
</li>
<li><p>面包板<br>Breadboard</p>
</li>
<li><p>面包板接线<br>Breadboard Wire</p>
</li>
</ul>
<p>可选：<br>Optional:</p>
<ul>
<li><p>树莓派外壳<br>Raspberry Pi Case</p>
</li>
<li><p>以太网或 Wifi 适配（树莓派 3 自带了）<br>Ethernet Network Connection or Wifi dongle (The Pi 3 has WiFi inbuilt)</p>
</li>
</ul>
<a id="more"></a>
<h2 id="组装-RFID-RC522"><a href="#组装-RFID-RC522" class="headerlink" title="组装 RFID RC522"></a>组装 RFID RC522</h2><p>Assembling the RFID RC522</p>
<p>购买 RFID RC522 读卡器时你会注意到的一件事情是，其中 90％的人没有使用已经焊接好的插头引脚。这意味着你必须自己做，幸运的是，焊接插头引脚是一个相当简单的任务，即使是对于初学者。<br>One thing you will notice when purchasing an RFID RC522 Reader is that 90% of them don’t come with the header pins already soldered in. The missing pins mean you will have to do it yourself, luckily soldering header pins is a rather simple task, even for beginners.</p>
<p>首先，如果你使用 RC522 收到的插头引脚不是正确的大小，那么你只有一行 8 个引脚。<br>First off, if the header pins you received with your RC522 isn’t the correct size, then snap them down, so you only have a single row of eight pins.</p>
<p>将插头引脚向上穿过 RC522 的孔。一个小窍门是把插头引脚的长边插入面包板，然后把电路放在接头引脚的顶部。面包板将固定住引脚，使其更容易焊接到 RFID RC522 电路。<br>Place the header pins up through the holes of your RC522. One handy trick is to put the long side of the header pins into a breadboard and then putting the circuit over the top of the header pins. The breadboard will hold the pins tightly making it easier to solder them to the RFID RC522 circuit.</p>
<p>现在使用热的烙铁和一些焊锡，慢慢地焊接每个引脚。请记住，在焊接之前，最好稍微加热接头，这样可以确保焊锡更多地粘附在接头上，并减少了形成冷接头的机会。我们还建议小心使用焊锡，避免过量。<br>Now using a hot soldering iron and some solder, slowly solder each of the pins. Remember it is best to heat the joint slightly before applying solder to it, this will ensure that the solder will adhere more to the joint and reduce the chances of creating a cold joint. We also recommend being careful with the amount of solder you apply.</p>
<p>现在插头引脚已经焊接到你的 RFID 电路上，现在可以使用了，你可以跟着这个教程继续。<br>With the header pins now soldered to your RFID circuit, it is now ready to use, and you can continue with the tutorial.</p>
<h2 id="连接-RFID-RC522"><a href="#连接-RFID-RC522" class="headerlink" title="连接 RFID RC522"></a>连接 RFID RC522</h2><p>Wiring the RFID RC522</p>
<p>在你的 RFID RC522 上，你会发现，它有 8 个可能的引脚，这分别是 <strong>SDA</strong>（串行数据信号），<strong>SCK</strong>（串行时钟），<strong>MOSI</strong>（主出从入），<strong>MISO</strong>（主入从出），<strong>IRQ</strong>（中断请求），<strong>GND</strong>（地面电源），<strong>RST</strong>（复位电路）和 <strong>3.3V</strong>（3.3V 电源输入）。我们需要把所有这些引脚，除了 <strong>IRQ</strong> 之外，都连接到 Raspberry Pi 的 GPIO 引脚。<br>On your RFID RC522 you will notice that there are 8 possible connections on it, these being <strong>SDA</strong> (Serial Data Signal), <strong>SCK</strong> (Serial Clock), <strong>MOSI</strong> (Master Out Slave In), <strong>MISO</strong> (Master In Slave Out), <strong>IRQ</strong> (Interrupt Request), <strong>GND</strong> (Ground Power), <strong>RST</strong> (Reset-Circuit) and <strong>3.3v</strong> (3.3v Power In). We will need to wire all of these but the <strong>IRQ</strong> to our Raspberry Pi’s GPIO pins.</p>
<p>你可以将这些直接连接到 GPIO 引脚，或者像我们在本教程中所做的那样，将 RFID RC522 插入我们的面包板，然后从那里连接到我们的 Raspberry Pi 的 GPIO 引脚。<br>You can either wire these directly to the GPIO Pins or like we did in this tutorial, plug the RFID RC522 into our Breadboard then wire from there to our Raspberry Pi’s GPIO Pins.</p>
<p>将 RFID RC522 连接到 Raspberry Pi 相当简单，只需要将 7 个 GPIO 引脚直接连接到 RFID 读卡器。请遵循下表，并查阅我们的 GPIO 指南，查看连接 RC522 所需的 GPIO 引脚位置。<br>Wiring your RFID RC522 to your Raspberry Pi is fairly simple, with it requiring you to connect just 7 of the GPIO Pins directly to the RFID reader. Follow the table below, and check out our GPIO guide to see the positions of the GPIO pins that you need to connect your RC522 to.</p>
<ul>
<li><p><strong>SDA</strong> 连接到引脚 24。<br><strong>SDA</strong> connects to Pin 24.</p>
</li>
<li><p><strong>SCK</strong> 连接到引脚 23。<br><strong>SCK</strong> connects to Pin 23.</p>
</li>
<li><p><strong>MOSI</strong> 连接到引脚 19。<br><strong>MOSI</strong> connects to Pin 19.</p>
</li>
<li><p><strong>MISO</strong> 连接到引脚 21。<br><strong>MISO</strong> connects to Pin 21.</p>
</li>
<li><p><strong>GND</strong> 连接到引脚 6。<br><strong>GND</strong> connects to Pin 6.</p>
</li>
<li><p><strong>RST</strong> 连接到引脚 22。<br><strong>RST</strong> connects to Pin 22.</p>
</li>
<li><p><strong>3.3V</strong> 连接到引脚 1。<br><strong>3.3v</strong> connects to Pin 1.</p>
</li>
</ul>
<p><img src="/images/2019-01/RFID-Fritz-v2.png" alt=""></p>
<p><img src="/images/2019-01/RFID-GPIO-Connection.jpg" alt=""></p>
<h2 id="为-RFID-RC522-设置-Raspbian"><a href="#为-RFID-RC522-设置-Raspbian" class="headerlink" title="为 RFID RC522 设置 Raspbian"></a>为 RFID RC522 设置 Raspbian</h2><p>Setting up Raspbian for the RFID RC522</p>
<p>在我们开始在 Raspberry Pi 上使用 RFID RC522 之前，我们将首先对其配置进行更改。默认情况下，树莓派的 SPI（串行外设接口）是被禁用的。<br>Before we begin the process of utilizing the RFID RC522 on our Raspberry Pi, we will first have to make changes to its configuration. By default, the Raspberry Pi has the SPI (Serial Peripheral Interface) disabled, which is a bit of a problem as that is what our RFID reader circuit runs through.<br>不要担心，因为重新启用此接口非常简单，只需按照以下步骤配置 Raspberry Pi 和 Raspbian 即可使用 SPI 接口。<br>Don’t worry though as it is fairly simple to re-enable this interface, just follow our steps below to configure your Raspberry Pi and Raspbian to utilize the SPI interface.</p>
<p>首先打开 <strong>raspi-config</strong> 工具，打开终端并运行以下命令：<br>Let’s begin by first opening the <strong>raspi-config</strong> tool, and we can do this by opening the terminal and running the following command.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo raspi-config</span><br></pre></td></tr></table></figure></p>
<p>该工具将加载一个显示各种不同选项的界面。如果你想深入了解这些选项，可以参阅我们的<a href="https://pimylifeup.com/raspi-config-tool" target="_blank" rel="noopener">raspi-config 指南</a>。<br>This tool will load up a screen showing a variety of different options. If you want a more in-depth look into these options, you can check <a href="https://pimylifeup.com/raspi-config-tool" target="_blank" rel="noopener">out our raspi-config guide</a>.</p>
<p>在这里使用 <strong> 方向键 </strong> 选择『<strong>5 Interfacing Options</strong>』。选中此选项后，按 <strong> 回车 </strong>。<br>On here use the <strong>arrow keys</strong> to select <strong>“5 Interfacing Options”</strong>. Once you have this option selected, press <strong>Enter</strong>.</p>
<p>现在在下一个界面上，你需要使用 <strong> 方向键 </strong> 选择『<strong>P4 SPI</strong>』，再次按回车选择高亮显示的选项。<br>Now on this next screen, you want to use your <strong>arrow keys</strong> to select <strong>“P4 SPI”</strong>, again press Enter to select the option once it is highlighted.</p>
<p>现在将询问你是否要启用 SPI 接口，使用 <strong> 方向键 </strong> 选择 <strong>Yes</strong>，然后按 <strong>Enter</strong> 继续。你需要等一会儿，<strong>raspi-config</strong> 工具会启用 SPI。<br>You will now be asked if you want to enable the SPI Interface, select <strong>Yes</strong> with your <strong>arrow keys</strong> and press <strong>Enter</strong> to proceed. You will need to wait a little bit while the <strong>raspi-config</strong> tool does its thing in enabling SPI.</p>
<p>一旦通过 <strong>raspi-config</strong> 工具成功启用了 SPI 接口，你应该会看到屏幕上出现以下文本：『<strong>The SPI interface is enabled</strong>』。<br>Once the SPI interface has been successfully enabled by the <strong>raspi-config</strong> tool you should see the following text appear on the screen, <strong>“The SPI interface is enabled”</strong>.</p>
<p>在 SPI 接口完全启用之前，我们将首先重新启动 Raspberry Pi。要做到这一点首先回到终端按 <strong> 回车 </strong>，然后按 <strong>ESC</strong>。<br>Before the SPI Interface is fully enabled we will first have to restart the Raspberry Pi. To do this first get back to the terminal by pressing <strong>Enter</strong> and then <strong>ESC</strong>.</p>
<p>在 Raspberry Pi 的终端中输入以下的 <a href="https://pimylifeup.com/linux-commands-cheat-sheet" target="_blank" rel="noopener">Linux 命令</a> 来重启你的 Raspberry Pi。<br>Type the following <a href="https://pimylifeup.com/linux-commands-cheat-sheet" target="_blank" rel="noopener">Linux command into the terminal</a> on your Raspberry Pi to restart your Raspberry Pi.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo reboot</span><br></pre></td></tr></table></figure></p>
<p>在 Raspberry Pi 完成重启后，我们现在可以检查确认它已经被启用。最简单的方法是运行以下命令，查看是否列出了 <strong>spi_bcm2835</strong>。<br>Once your Raspberry Pi has finished rebooting, we can now check to make sure that it has in fact been enabled. The easiest way to do this is to run the following command to see if <strong>spi_bcm2835</strong> is listed.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmod | grep spi</span><br></pre></td></tr></table></figure></p>
<p>如果你看到 <strong>spi_bcm2835</strong>，那么你可以继续，直接跳到下一节。如果由于某种原因，当你输入上一个命令时没有出现，请尝试执行以下 3 个步骤。<br>If you see <strong>spi_bcm2835</strong>, then you can proceed on with this tutorial and skip on to the next section. If for some reason it had not appeared when you entered the previous command, try following the next three steps.</p>
<p>如果由于某种原因 SPI 模块没有激活，我们可以通过在我们的 Raspberry Pi 上运行以下命令来手动编辑启动配置文件。<br>If for some reason the SPI module has not activated, we can edit the boot configuration file manually by running the following command on our Raspberry Pi.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /boot/config.txt</span><br></pre></td></tr></table></figure></p>
<p>在配置文件中，使用 <code>Ctrl + W</code> 查找『<strong>dtparam=spi=on</strong>』。<br>Within the configuration file, use <code>Ctrl + W</code> to find <strong>“dtparam=spi=on”</strong>.</p>
<p>如果你找到了，请检查前面是否有 <code>#</code> 号。如果有，就删除它，因为这是用来注释一行代码的。如果找不到该行，只需在文件底部添加『dtparam = spi = on』即可。<br>If you have found it, check to see if there is a # in front of it. If there is, remove it as this is commenting out the activation line. If you can’t find the line at all, add”dtparam=spi=on” to the bottom of the file.</p>
<p>完成更改后，可以按 <code>Ctrl + X</code>，然后按 Y，然后按 Enter 以保存更改。<br>Once you have made the changes, you can press <code>Ctrl + X</code> then pressing Y and then Enter to save the changes.</p>
<p>现在，你可以回到前面的步骤，重新启动 Raspberry Pi，然后检查模块是否已启用。<br>You can now proceed from Step 5 again, rebooting your Raspberry Pi then checking to see if the module has been enabled.</p>
<h2 id="为-RFID-RC522-准备好-Python"><a href="#为-RFID-RC522-准备好-Python" class="headerlink" title="为 RFID RC522 准备好 Python"></a>为 RFID RC522 准备好 Python</h2><p>Getting Python ready for the RFID RC522</p>
<p>现在我们已经将 RFID RC522 电路连接到 Raspberry Pi。我们可以启动它，开始编写简单的 Python 脚本以与芯片进行交互。<br>Now that we have wired up our RFID RC522 circuit to the Raspberry Pi we can now power it on and begin the process of programming simple scripts in Python to interact with the chip.</p>
<p>我们将向你展示如何编写脚本，以及脚本如何从 RFID 芯片读取和写入数据。这将为你提供处理数据的基本概念，并将成为更多 RFID RC522 教程的基础。<br>The scripts that we will be showing you how to write will show you how to read data from the RFID chips and how to write to them. These will give you the basic idea of how data is dealt with and will be the basis of further RFID RC522 tutorials.</p>
<p>在开始编程之前，我们首先需要更新我们的 Raspberry Pi，以确保其运行所有软件的最新版本。在 Raspberry Pi 上运行以下两个命令来更新它。<br>Before we start programming, we first need to update our Raspberry Pi to ensure it’s running the latest version of all the software. Run the following two commands on your Raspberry Pi to update it.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt upgrade</span><br></pre></td></tr></table></figure></p>
<p>现在我们需要做的最后一件事是安装 python2.7-dev 包，只需在 Raspberry Pi 上运行以下命令即可安装它。<br>Now the final thing we need before we can proceed is to install the python2.7-dev package, simply run the following command on your Raspberry Pi to install it.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install python2.7-dev</span><br></pre></td></tr></table></figure></p>
<p>首先，我们必须首先克隆 Python Library SPI Py 并将其安装到我们的 Raspberry Pi。这个库有助于处理与 SPI 的交互，并且是本教程的关键组件，因为我们需要 Raspberry Pi 与 RFID RC522 进行交互。<br>To begin, we must first clone the Python Library SPI Py and install it to our Raspberry Pi. This library helps handle interactions with the SPI and is a key component to this tutorial as we need it for the Raspberry Pi to interact with the RFID RC522.</p>
<p>在 Raspberry Pi 上运行以下两个命令来克隆源代码。<br>Run the following two commands on your Raspberry Pi to clone the source code.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/lthiery/SPI-Py.git</span><br></pre></td></tr></table></figure></p>
<p>现在将 Python Py Python 库克隆到我们的 Raspberry Pi 中，我们需要安装它，这是非常简单的，因为我们需要做的就是更改它的目录并在 Raspberry Pi 上运行一个简单的 Python 命令。<br>With the SPI Py Python Library now cloned to our Raspberry Pi, we need to install it, this is incredibly simple, as all we need to do is change into its directory and run a simple Python command on our Raspberry Pi.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/SPI-Py</span><br><span class="line">sudo python setup.py install</span><br></pre></td></tr></table></figure></p>
<p>现在我们已经安装了 SPI-Py，现在我们可以从 PiMyLifeUp 的 Github 仓库中克隆我们的 RFID RC522 Python 代码。这个仓库中包含两个文件：<br>Now that we have installed SPI-Py we can now clone our RFID RC522 Python code from the PiMyLifeUp Github. There are two files included in this repository:</p>
<ul>
<li><p>MFRC522.py 是 RFID RC522 电路的一个实现。<br>MFRC522.py which is an implementation of the RFID RC522 circuit.</p>
</li>
<li><p>SimpleMFRC522.py 采用 MFRC522.py 文件，并大大简化它。<br>SimpleMFRC522.py that takes the MFRC522.py file and greatly simplifies it.</p>
</li>
</ul>
<p>为了克隆这个仓库，你可以在 Raspberry Pi 中输入以下两个命令。<br>To clone this repository, you can type the following two commands into your Raspberry Pi.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/pimylifeup/MFRC522-python.git</span><br></pre></td></tr></table></figure></p>
<p>现在将存储库保存到我们的 Raspberry Pi 中，我们可以开始为我们的 RFID RC522 进行编程。首先，我们将向你展示如何使用 RC522 将数据写入 RFID 卡。只需进入下一节开始编程我们的第一个 Python 脚本。<br>With the repository now saved to our Raspberry Pi, we can begin programming for our RFID RC522. To start off with we will be showing you how to write data to your RFID cards by using the RC522. Simply go onto our next section to begin programming our first Python script.</p>
<h2 id="用-RFID-RC522-写入"><a href="#用-RFID-RC522-写入" class="headerlink" title="用 RFID RC522 写入"></a>用 RFID RC522 写入</h2><p>Writing with the RFID RC522</p>
<p>对于我们的第一个 Python 脚本，我们将向你展示如何将数据通过 RC522 写入你的 RFID 卡片。借助于 SimpleMFRC522 脚本，这相对来说是很简单的，但我们仍然会进入每个代码片段详细解释。<br>For our first Python script, we will be showing you how to write data from the RC522 to your RFID tags. Thanks to the SimpleMFRC522 script this will be relatively simple, but we will still go into how each part of the code words.</p>
<p>首先将目录切换到我们新克隆的文件夹，然后开始编写我们的 Write.py Python 脚本。<br>Begin by changing directory into our newly cloned folder, and begin writing our Write.py Python script.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/MFRC522-python</span><br><span class="line">sudo nano Write.py</span><br></pre></td></tr></table></figure></p>
<p>在这个文件中，写下面几行代码。这会要求你输入文字，然后将文字写入 RFID 卡片。<br>Within this file, write the following lines of code. This code will basically ask you for text to input and then write that text to the RFID Tag.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> RPi.GPIO <span class="keyword">as</span> GPIO</span><br><span class="line"><span class="keyword">import</span> SimpleMFRC522</span><br></pre></td></tr></table></figure></p>
<p>这段代码的第一行有助于告诉终端如何解释文件，它让它知道它应该在执行时使用 Python，而不是其他的东西，如 Bash。<br>The first line of this segment of code helps tell the terminal how to interpret the file, and it lets it know that it should use Python when executing it and not something else such as Bash.</p>
<p>我们的第一个 <code>import</code>，RPi.GPIO 具有与 GPIO 引脚交互所需的所有功能，我们需要这个来确保在脚本运行完成后它们被清除。<br>Our first import, RPi.GPIO has all the functions needed to interact with the GPIO Pins, and we need this to make sure they are cleared when the script finishes running.</p>
<p>第二个 <code>import</code>，导入了 SimpleMFRC522 库，这是我们将用来实际与 RFID RC522 进行通信的地方，与基本的 MFRC522 库相比，它极大地简化了处理芯片。<br>The second import, imports in our SimpleMFRC522 library, this is what we will use actually to talk with the RFID RC522, it greatly simplifies dealing with the chip compared to the base MFRC522 library.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reader = SimpleMFRC522.SimpleMFRC522()</span><br></pre></td></tr></table></figure></p>
<p>这一行创建一个 SimpleMFRC522 作为对象的副本，运行它的设置功能，然后将它存储在我们的 reader 变量中。<br>This line creates a copy of the SimpleMFRC522 as an object, runs its setup function then stores it all in our reader variable.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    text = raw_input(<span class="string">'New data:'</span>)</span><br><span class="line">    print(<span class="string">"Now place your tag to write"</span>)</span><br><span class="line">    reader.write(text)</span><br><span class="line">    print(<span class="string">"Written"</span>)</span><br></pre></td></tr></table></figure></p>
<p>我们的下一个代码块保存在一个 try 语句中，这样我们就可以捕获任何异常并正确处理。确保在输入时正确地使用 <code>tab</code> 或者空格缩进：因为 Python 对缩进敏感，并且缩进是用来区分代码块的。<br>Our next block of code we keep within a try statement, this is so we can catch any exceptions and clean up properly. Make sure that you retain the ‘tabs’ after try: as Python is whitespace sensitive, and it is how it differs between blocks of code.</p>
<p>这里的第二行是从命令行读入一个输入，我们使用 Python 2.7 中的 raw_input 来读入所有的输入并将其存储在 <code>text</code> 变量中。<br>The second line here reads in an input from the command line, and we use raw_input in Python 2.7 to read in all input and store it in our text variable.</p>
<p>通过第三行，我们利用 <code>print()</code> 来通知用户，他们现在可以将 RFID 卡片放在读卡器上进行书写。<br>With the third line, we utilize print() to notify the user that they can now place their RFID tag down onto the reader for writing.</p>
<p>之后，在我们的第四行代码中，我们使用 <code>reader</code> 对象将存储在文本变量中的值写入 RFID 卡片，这基本上告诉 RFID RC522 电路将文本值写入某个扇区。<br>Afterward, on our fourth line of code we use our reader object to write the values we stored in the text variable to the RFID tag, this will tell the RFID RC522 Circuit to write the text values to a certain sector.</p>
<p>最后在第五行代码中，我们再次使用 <code>print()</code> 来通知用户我们已经成功写入 RFID 卡片。<br>Finally, on the 5th line of code, we use print() again to notify the user that we have successfully written to the RFID tag.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    GPIO.cleanup()</span><br></pre></td></tr></table></figure></p>
<p>我们最后的两行代码处理脚本的退出。<code>finally</code> 总是在 <code>try</code> 语句之后出现，意思是不管发生什么错误，都运行 <code>GPIO.cleanup()</code> 函数。这是至关重要的，因为清理失败可能会阻止其他脚本正常工作。<br>Our final two lines of code handle exiting of the script. Finally, always occurs after the try statement, meaning no matter what we run the GPIO.cleanup() function. These lines are crucial as failing to clean up can prevent other scripts from working correctly.</p>
<p>一旦你完成了你的脚本的编写，它应该看起来如下所示。<br>Once you have finished writing in your script, it should look something like below.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> RPi.GPIO <span class="keyword">as</span> GPIO</span><br><span class="line"><span class="keyword">import</span> SimpleMFRC522</span><br><span class="line"></span><br><span class="line">reader = SimpleMFRC522.SimpleMFRC522()</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    text = raw_input(<span class="string">'New data:'</span>)</span><br><span class="line">    print(<span class="string">"Now place your tag to write"</span>)</span><br><span class="line">    reader.write(text)</span><br><span class="line">    print(<span class="string">"Written"</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    GPIO.cleanup()</span><br></pre></td></tr></table></figure></p>
<p>一旦你感到代码看起来是正确的，你可以通过按下 <code>Ctrl + X</code> 然后按下 Y，然后最后按回车来保存文件。<br>Once you are happy that the code looks correct, you can save the file by pressing <code>Ctrl + X</code> then pressing Y and then finally hitting Enter.</p>
<p>现在我们已经写好了脚本，是时候来测试一下了。在测试脚本之前，确保你有一个可用的 RFID 卡片。准备好之后，在 Raspberry Pi 的终端中输入以下命令。<br>Now that we have written our script, we will want to test it out. Before testing out the script make sure that you have an RFID tag handy. Once ready, type the following command into your Raspberry Pi’s terminal.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo python Write.py</span><br></pre></td></tr></table></figure></p>
<p>你将被要求写入新的数据，在我们的例子中，我们只是简单地输入 pimylifeup。当你对自己写的东西满意的时候，按下回车键。<br>You will be asked to write in the new data, in our case we are going to just type in pimylifeup as its short and simple. Press Enter when you are happy with what you have written.</p>
<p>完成后，将 RFID 卡片放在 RFID RC522 电路的读卡区域上。一旦检测到，它会立即将新数据写入卡片。如果成功，你应该看到『Written』出现在你的命令行中。<br>With that done, simply place your RFID Tag on top of your RFID RC522 circuit. As soon as it detects it, it will immediately write the new data to the tag. You should see “Written” appear in your command line if it was successful.</p>
<p>你可以查看下面的示例输出以查看成功运行的样子。<br>You can look at our example output below to see what a successful run looks like.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pi@raspberrypi:~/MFRC522-python $ sudo python Write.py</span><br><span class="line">New data:pimylifeup</span><br><span class="line">Now place your tag to write</span><br><span class="line">Written</span><br></pre></td></tr></table></figure></p>
<p>现在，你已经成功编写了你的 Write.py 脚本，现在我们可以继续向你展示如何在本教程的下一部分中从 RFID RC522 读取数据。<br>You have now successfully written your Write.py script, and we can now proceed to show you how to read data from the RFID RC522 in the next segment of this tutorial.</p>
<h2 id="用-RFID-RC522-读取"><a href="#用-RFID-RC522-读取" class="headerlink" title="用 RFID RC522 读取"></a>用 RFID RC522 读取</h2><p>Reading with the RFID RC522</p>
<p>现在我们已经写了我们的脚本来使用我们的 RC522 来写入 RFID 卡片，现在我们可以编写一个脚本来读取这个数据。<br>Now that we have written our script to write to RFID tags using our RC522 we can now write a script that will read this data back off the tag.</p>
<p>首先，通过更改目录来确保我们位于正确的位置，然后运行 nano 开始编写 Read.py 脚本。<br>Let’s start off by changing the directory to make sure we are in the right place, and then we can run nano to begin writing our Read.py script.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/MFRC522-python</span><br><span class="line">sudo nano Read.py</span><br></pre></td></tr></table></figure></p>
<p>在这个文件中，写下面几行代码。这个脚本会一直等待，直到你将你的 RFID 卡片放在 RFID RC522 读卡器上，它将输出卡片上读取的数据。<br>Within this file, write the following lines of code. This script will basically sit and wait till you put your RFID tag on the RFID RC522 reader, it will then output the data it reads off the tag.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> RPi.GPIO <span class="keyword">as</span> GPIO</span><br><span class="line"><span class="keyword">import</span> SimpleMFRC522</span><br></pre></td></tr></table></figure></p>
<p>当用户执行它时，第一行代码告诉操作系统如何处理文件。否则，它会尝试运行它作为一个普通的脚本文件，而不是一个 Python 文件。<br>The first line of code tells the operating system how to handle the file when a user executes it. Otherwise, it will try and just run it as a regular script file and not a Python file.</p>
<p>第一个导入是 RPi.GPIO。这个库包含了所有处理 Raspberry Pi 的 GPIO 引脚的函数，我们导入这个主要是来确保在脚本执行完成后进行清理。<br>The first import is, RPi.GPIO. This library contains all the functions to deal with the Raspberry Pi’s GPIO pins, and we mainly import this to ensure that we clean up when the script finishes executing.</p>
<p>第二个导入是 SimpleMFRC522。这个脚本包含一些帮助功能，使得从 RFID RC522 的写入和读取处理变得非常容易，没有它，我们简单的脚本将变得相当长。<br>The second import is, SimpleMFRC522. This script contains a few helper functions to make it an awful lot easier to deal with writing and reading from the RFID RC522, without it the scripts would become quite long.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reader = SimpleMFRC522.SimpleMFRC522()</span><br></pre></td></tr></table></figure></p>
<p>这一行非常重要，因为它调用 SimpleMFRC522 的创建函数，然后将其作为对象存储到我们的 reader 变量中，以便稍后与之交互。<br>This line is quite important as it calls SimpleMFRC522’s creation function and then stores that into our reader variable as an object so we can interact with it later.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    id, text = reader.read()</span><br><span class="line">    print(id)</span><br><span class="line">    print(text)</span><br></pre></td></tr></table></figure></p>
<p>下一个代码块包含在一个 try 语句中，我们使用它来捕获可能发生的异常，并很好地处理它们。你需要确保在 try 之后使用 <code>tab</code> 或者空格缩进，因为 Python 对缩进敏感。<br>This next block of code is contained within a try statement, and we use this so we can catch any exceptions that might occur and deal with them nicely. You need to ensure that you use the ‘tabs‘ as shown after try: as Python is whitespace sensitive.</p>
<p>这段代码中的第二行调用我们的读卡器对象，在这种情况下，它告诉电路开始读取放置在 RC522 读卡器顶部的任何 RFID 卡片。<br>The second line in this block of code makes a call to our reader object, in this case, it tells the circuit to begin reading any RFID tag that is placed on top of the RC522 reader.</p>
<p>通过第三行和第四行，我们利用 <code>print()</code> 打印出读取 RFID 芯片时收到的信息，其中包括与 RFID 卡片关联的 ID 和存储在卡片上的文本。<br>With the third and fourth lines we utilize print() to print out the information that we received from reading the RFID Chip, this includes the ID associated with the RFID tag and the text that is stored on the tag.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    GPIO.cleanup()</span><br></pre></td></tr></table></figure></p>
<p>最后两行代码处理脚本的终止。<code>finally</code> 语句总是在 <code>try</code> 语句之后触发，即使我们得到一个异常。<br>The two last lines of code handle the termination of the script. The finally statement always triggers after the try statement even if we get an exception.</p>
<p>这个 <code>try</code> 语句可以确保不管发生什么，都会运行 <code>GPIO.cleanup()</code> 函数。这非常重要，因为如果未能清除 GPIO，其他脚本将无法正常工作。<br>This try statement ensures that no matter what we run the GPIO.cleanup() function. It is quite crucial as failing to clean up the GPIO can prevent other scripts from working correctly.</p>
<p>现在你已经完成了为你的 RFID RC522 编写 Read.py 脚本，它应该看起来如下所示：<br>Now that you have finished writing your Read.py script for your RFID RC522 it should look something like what is shown below.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> RPi.GPIO <span class="keyword">as</span> GPIO</span><br><span class="line"><span class="keyword">import</span> SimpleMFRC522</span><br><span class="line"></span><br><span class="line">reader = SimpleMFRC522.SimpleMFRC522()</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    id, text = reader.read()</span><br><span class="line">    print(id)</span><br><span class="line">    print(text)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    GPIO.cleanup()</span><br></pre></td></tr></table></figure></p>
<p>一旦你确定你已经输入了正确的代码，你可以通过按 <code>Ctrl + X</code> 然后按 Y，然后最后按回车来保存文件。<br>Once you are sure you have entered the code correctly, you can save the file by pressing <code>Ctrl + X</code> then pressing Y and then finally hitting Enter.</p>
<p>现在我们已经完成了我们的 Read.py 脚本，我们需要测试它。在我们测试脚本之前，准备一个你想读的 RFID 卡片。一旦你准备好了，在 Raspberry Pi 的终端中输入以下命令。<br>Now that we have finally finished our Read.py script we need to test it out. Before we test out the script, grab one of the RFID tags that you want to read. Once that you are ready, type the following command into your Raspberry Pi’s terminal.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo python Read.py</span><br></pre></td></tr></table></figure></p>
<p>现在脚本正在运行，你只需将你的 RFID 卡片放在 RFID RC522 电路的顶部。一旦 Python 脚本检测到 RFID 卡片被放置在顶部，它将立即读取数据并将其打印回给你。<br>With the script now running, all you need to do is place your RFID Tag on top of your RFID RC522 circuit. As soon as the Python script detects the RFID tag being placed on top, it will immediately read the data and print it back out to you.</p>
<p>下面显示了一个成功输出的例子。<br>An example of what a successful output would look like is displayed below.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pi@raspberrypi:~/MFRC522-python $ sudo python Read.py</span><br><span class="line">7843705425</span><br><span class="line">pimylifeup</span><br></pre></td></tr></table></figure></p>
<p>如果你成功从你的 Read.py 脚本接收到数据，并使用你的 Write.py 脚本将文本推送到卡上，那么你已经成功设置了 Raspberry Pi 来连接 RFID RC522 电路。<br>If you successfully receive data back from your Read.py script with the text that you pushed to the card using your Write.py script then you have successfully set up your Raspberry Pi to connect with your RFID RC522 Circuit.</p>
<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>在稍后的教程中，我们将会深入探讨这些脚本和 RFID 芯片。这包括探索如何在其他酷派 DIY Pi 项目中设置考勤系统。<br>We will be going into more depth with these scripts and the RFID chip in later tutorials. It will include exploring how to set up an attendance system among other cool DIY Pi projects.</p>
<p>如果你喜欢这款 Raspberry RFID RC522 教程，或有任何反馈，请随时在下面留言！<br>If you have enjoyed this Raspberry RFID RC522 tutorial or have any feedback, then feel free to drop a comment over at our forum.</p>
<p>本文翻译自：<a href="https://pimylifeup.com/raspberry-pi-rfid-rc522" target="_blank" rel="noopener">How to setup a Raspberry Pi RFID RC522 Chip</a></p>
</div>
<div>
<div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
<div>🍭支持一根棒棒糖！</div>
<button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
<span>打赏</span>
</button>
<div id="QR" style="display: none;">
<div id="wechat" style="display: inline-block">
<img id="wechat_qr" src="/images/wechatpay.png" alt="张书樵 微信支付">
<p>微信支付</p>
</div>
<div id="alipay" style="display: inline-block">
<img id="alipay_qr" src="/images/alipay.png" alt="张书樵 支付宝">
<p>支付宝</p>
</div>
<div id="bitcoin" style="display: inline-block">
<img id="bitcoin_qr" src="/images/bitcoin.png" alt="张书樵 比特币">
<p>比特币</p>
</div>
</div>
</div>
</div>
<div>
<ul class="post-copyright">
<li class="post-copyright-author">
<strong>本文作者： </strong>张书樵</li>
<li class="post-copyright-link">
<strong>本文链接：</strong>
<a href="https://zhangshuqiao.org/2019-01/树莓派使用RFID RC522芯片/" title="树莓派使用 RFID RC522 芯片">https://zhangshuqiao.org/2019-01/树莓派使用RFID RC522芯片/</a>
</li>
<li class="post-copyright-license">
<strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li>
</ul>
</div>
<footer class="post-footer">
<div class="post-tags">
<a href="/tags/Hexo/" rel="tag"># Hexo</a>
</div>
<div class="post-nav">
<div class="post-nav-next post-nav-item">
<a href="/2019-01/如何进行曲线拟合/" rel="next" title="如何进行曲线拟合">
<i class="fa fa-chevron-left"></i> 如何进行曲线拟合
</a>
</div>
<span class="post-nav-divider"></span>
<div class="post-nav-prev post-nav-item">
</div>
</div>
</footer>
</div>
</article>
</div>
</div>
<div class="comments" id="comments">
</div>
</div>
<div class="sidebar-toggle">
<div class="sidebar-toggle-line-wrap">
<span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
<span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
<span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
</div>
</div>
<aside id="sidebar" class="sidebar">
<div class="sidebar-inner">
<ul class="sidebar-nav motion-element">
<li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
文章目录
</li>
<li class="sidebar-nav-overview" data-target="site-overview-wrap">
站点概览
</li>
</ul>
<div class="site-overview-wrap sidebar-panel">
<div class="site-overview">
<div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<img class="site-author-image" itemprop="image" src="/images/icon.gif" alt="张书樵">
<p class="site-author-name" itemprop="name">张书樵</p>
<p class="site-description motion-element" itemprop="description">力电声光热，涵尽学海无涯</p>
</div>
<nav class="site-state motion-element">
<div class="site-state-item site-state-posts">
<a href="/archives/">
<span class="site-state-item-count">91</span>
<span class="site-state-item-name">日志</span>
</a>
</div>
<div class="site-state-item site-state-categories">
<a href="/categories/index.html">
<span class="site-state-item-count">7</span>
<span class="site-state-item-name">分类</span>
</a>
</div>
<div class="site-state-item site-state-tags">
<a href="/tags/index.html">
<span class="site-state-item-count">23</span>
<span class="site-state-item-name">标签</span>
</a>
</div>
</nav>
<div class="feed-link motion-element">
<a href="/atom.xml" rel="alternate">
<i class="fa fa-rss"></i>
RSS
</a>
</div>
<div class="links-of-blogroll motion-element links-of-blogroll-block">
<div class="links-of-blogroll-title">
<i class="fa  fa-fw fa-university"></i>
主站
</div>
<ul class="links-of-blogroll-list">
<li class="links-of-blogroll-item">
<a href="https://galaxymimi.com" title="https://galaxymimi.com" rel="noopener" target="_blank">Galaxy Mimi</a>
</li>
</ul>
</div>
</div>
</div>
<!--noindex-->
<div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
<div class="post-toc">
<div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#设备清单"><span class="nav-number">1.</span> <span class="nav-text">设备清单</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#组装-RFID-RC522"><span class="nav-number">2.</span> <span class="nav-text">组装 RFID RC522</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#连接-RFID-RC522"><span class="nav-number">3.</span> <span class="nav-text">连接 RFID RC522</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#为-RFID-RC522-设置-Raspbian"><span class="nav-number">4.</span> <span class="nav-text">为 RFID RC522 设置 Raspbian</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#为-RFID-RC522-准备好-Python"><span class="nav-number">5.</span> <span class="nav-text">为 RFID RC522 准备好 Python</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用-RFID-RC522-写入"><span class="nav-number">6.</span> <span class="nav-text">用 RFID RC522 写入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用-RFID-RC522-读取"><span class="nav-number">7.</span> <span class="nav-text">用 RFID RC522 读取</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#后记"><span class="nav-number">8.</span> <span class="nav-text">后记</span></a></li></ol></div>
</div>
</div>
<!--/noindex-->
</div>
</aside>
</div>
</main>
<footer id="footer" class="footer">
<div class="footer-inner">
<div class="copyright">&copy; 2017 – <span itemprop="copyrightYear">2019</span>
<span class="with-love" id="animate">
<i class="fa fa-heart"></i>
</span>
<span class="author" itemprop="copyrightHolder">张书樵</span>
</div>
<div class="busuanzi-count">
<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span class="post-meta-item-icon">
<i class="fa fa-user"></i>
</span>
<span class="site-uv" title="总访客量">
<span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
</span>
<span class="post-meta-divider">|</span>
<span class="post-meta-item-icon">
<i class="fa fa-eye"></i>
</span>
<span class="site-pv" title="总访问量">
<span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
</span>
</div>
</div>
</footer>
<div class="back-to-top">
<i class="fa fa-arrow-up"></i>
<span id="scrollpercent"><span>0</span>%</span>
</div>
</div>
<script>
if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
window.Promise = null;
}
</script>
<script id="ribbon" size="300" alpha="0.6" zindex="-1" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>
<script src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/fastclick/lib/fastclick.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/velocity-animate/velocity.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/velocity-animate/velocity.ui.min.js"></script>
<script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js"></script>
<script src="/lib/waifu/live2d.min.js"></script>
<script src="/lib/waifu/waifu-tips.js"></script>
<script src="/lib/custom.js"></script>
<script src="/js/src/utils.js?v=6.7.0"></script>
<script src="/js/src/motion.js?v=6.7.0"></script>
<script src="/js/src/affix.js?v=6.7.0"></script>
<script src="/js/src/schemes/pisces.js?v=6.7.0"></script>
<script src="/js/src/scrollspy.js?v=6.7.0"></script>
<script src="/js/src/post-details.js?v=6.7.0"></script>
<script src="/js/src/bootstrap.js?v=6.7.0"></script>
<script src="//cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js"></script>
<script src="/lib/Valine.min.js"></script>
<script>
var GUEST = ['nick', 'mail', 'link'];
var guest = 'nick,mail,link';
guest = guest.split(',').filter(function(item) {
return GUEST.indexOf(item) > -1;
});
new Valine({
el: '#comments',
verify: true,
notify: false,
appId: '2L2N30Kyi18K1DjU0qxMGALD-gzGzoHsz',
appKey: 'Bwrec8XDJon2rocQ5ScFcFWl',
placeholder: '您可以在这里输入评论哟～',
avatar: 'mm',
meta: guest,
pageSize: '12' || 10,
visitor: false
});
</script>
<script>
// Popup Window;
var isfetched = false;
var isXml = true;
// Search DB path;
var search_path = "search.xml";
if (search_path.length === 0) {
search_path = "search.xml";
} else if (/json$/i.test(search_path)) {
isXml = false;
}
var path = "/" + search_path;
// monitor main search box;
var onPopupClose = function (e) {
$('.popup').hide();
$('#local-search-input').val('');
$('.search-result-list').remove();
$('#no-result').remove();
$(".local-search-pop-overlay").remove();
$('body').css('overflow', '');
}
function proceedsearch() {
$("body")
.append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
.css('overflow', 'hidden');
$('.search-popup-overlay').click(onPopupClose);
$('.popup').toggle();
var $localSearchInput = $('#local-search-input');
$localSearchInput.attr("autocapitalize", "none");
$localSearchInput.attr("autocorrect", "off");
$localSearchInput.focus();
}
// search function;
var searchFunc = function(path, search_id, content_id) {
'use strict';
// start loading animation
$("body")
.append('<div class="search-popup-overlay local-search-pop-overlay">' +
'<div id="search-loading-icon">' +
'<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
'</div>' +
'</div>')
.css('overflow', 'hidden');
$("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');
// ref: https://github.com/ForbesLindesay/unescape-html
var unescapeHtml = function(html) {
return String(html)
.replace(/&quot;/g, '"')
.replace(/&#39;/g, '\'')
.replace(/&#x3A;/g, ':')
// replace all the other &#x; chars
.replace(/&#(\d+);/g, function (m, p) { return String.fromCharCode(p); })
.replace(/&lt;/g, '<')
.replace(/&gt;/g, '>')
.replace(/&amp;/g, '&');
};
$.ajax({
url: path,
dataType: isXml ? "xml" : "json",
async: true,
success: function(res) {
// get the contents from search data
isfetched = true;
$('.popup').detach().appendTo('.header-inner');
var datas = isXml ? $("entry", res).map(function() {
return {
title: $("title", this).text(),
content: $("content",this).text(),
url: $("url" , this).text()
};
}).get() : res;
var input = document.getElementById(search_id);
var resultContent = document.getElementById(content_id);
var inputEventFunction = function() {
var searchText = input.value.trim().toLowerCase();
var keywords = searchText.split(/[\s\-]+/);
if (keywords.length > 1) {
keywords.push(searchText);
}
var resultItems = [];
if (searchText.length > 0) {
// perform local searching
datas.forEach(function(data) {
var isMatch = false;
var hitCount = 0;
var searchTextCount = 0;
var title = data.title.trim();
var titleInLowerCase = title.toLowerCase();
var content = data.content.trim().replace(/<[^>]+>/g,"");
content = unescapeHtml(content);
var contentInLowerCase = content.toLowerCase();
var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
var indexOfTitle = [];
var indexOfContent = [];
// only match articles with not empty titles
if(title != '') {
keywords.forEach(function(keyword) {
function getIndexByWord(word, text, caseSensitive) {
var wordLen = word.length;
if (wordLen === 0) {
return [];
}
var startPosition = 0, position = [], index = [];
if (!caseSensitive) {
text = text.toLowerCase();
word = word.toLowerCase();
}
while ((position = text.indexOf(word, startPosition)) > -1) {
index.push({position: position, word: word});
startPosition = position + wordLen;
}
return index;
}
indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
});
if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
isMatch = true;
hitCount = indexOfTitle.length + indexOfContent.length;
}
}
// show search results
if (isMatch) {
// sort index by position of keyword
[indexOfTitle, indexOfContent].forEach(function (index) {
index.sort(function (itemLeft, itemRight) {
if (itemRight.position !== itemLeft.position) {
return itemRight.position - itemLeft.position;
} else {
return itemLeft.word.length - itemRight.word.length;
}
});
});
// merge hits into slices
function mergeIntoSlice(text, start, end, index) {
var item = index[index.length - 1];
var position = item.position;
var word = item.word;
var hits = [];
var searchTextCountInSlice = 0;
while (position + word.length <= end && index.length != 0) {
if (word === searchText) {
searchTextCountInSlice++;
}
hits.push({position: position, length: word.length});
var wordEnd = position + word.length;
// move to next position of hit
index.pop();
while (index.length != 0) {
item = index[index.length - 1];
position = item.position;
word = item.word;
if (wordEnd > position) {
index.pop();
} else {
break;
}
}
}
searchTextCount += searchTextCountInSlice;
return {
hits: hits,
start: start,
end: end,
searchTextCount: searchTextCountInSlice
};
}
var slicesOfTitle = [];
if (indexOfTitle.length != 0) {
slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
}
var slicesOfContent = [];
while (indexOfContent.length != 0) {
var item = indexOfContent[indexOfContent.length - 1];
var position = item.position;
var word = item.word;
// cut out 100 characters
var start = position - 20;
var end = position + 80;
if(start < 0){
start = 0;
}
if (end < position + word.length) {
end = position + word.length;
}
if(end > content.length){
end = content.length;
}
slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
}
// sort slices in content by search text's count and hits' count
slicesOfContent.sort(function (sliceLeft, sliceRight) {
if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
return sliceRight.searchTextCount - sliceLeft.searchTextCount;
} else if (sliceLeft.hits.length !== sliceRight.hits.length) {
return sliceRight.hits.length - sliceLeft.hits.length;
} else {
return sliceLeft.start - sliceRight.start;
}
});
// select top N slices in content
var upperBound = parseInt('1');
if (upperBound >= 0) {
slicesOfContent = slicesOfContent.slice(0, upperBound);
}
// highlight title and content
function highlightKeyword(text, slice) {
var result = '';
var prevEnd = slice.start;
slice.hits.forEach(function (hit) {
result += text.substring(prevEnd, hit.position);
var end = hit.position + hit.length;
result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
prevEnd = end;
});
result += text.substring(prevEnd, slice.end);
return result;
}
var resultItem = '';
if (slicesOfTitle.length != 0) {
resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
} else {
resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
}
slicesOfContent.forEach(function (slice) {
resultItem += "<a href='" + articleUrl + "'>" +
"<p class=\"search-result\">" + highlightKeyword(content, slice) +
"...</p>" + "</a>";
});
resultItem += "</li>";
resultItems.push({
item: resultItem,
searchTextCount: searchTextCount,
hitCount: hitCount,
id: resultItems.length
});
}
})
};
if (keywords.length === 1 && keywords[0] === "") {
resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
} else if (resultItems.length === 0) {
resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
} else {
resultItems.sort(function (resultLeft, resultRight) {
if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
return resultRight.searchTextCount - resultLeft.searchTextCount;
} else if (resultLeft.hitCount !== resultRight.hitCount) {
return resultRight.hitCount - resultLeft.hitCount;
} else {
return resultRight.id - resultLeft.id;
}
});
var searchResultList = '<ul class=\"search-result-list\">';
resultItems.forEach(function (result) {
searchResultList += result.item;
})
searchResultList += "</ul>";
resultContent.innerHTML = searchResultList;
}
}
if ('auto' === 'auto') {
input.addEventListener('input', inputEventFunction);
} else {
$('.search-icon').click(inputEventFunction);
input.addEventListener('keypress', function (event) {
if (event.keyCode === 13) {
inputEventFunction();
}
});
}
// remove loading animation
$(".local-search-pop-overlay").remove();
$('body').css('overflow', '');
proceedsearch();
}
});
}
// handle and trigger popup window;
$('.popup-trigger').click(function(e) {
e.stopPropagation();
if (isfetched === false) {
searchFunc(path, 'local-search-input', 'local-search-result');
} else {
proceedsearch();
};
});
$('.popup-btn-close').click(onPopupClose);
$('.popup').click(function(e){
e.stopPropagation();
});
$(document).on('keyup', function (event) {
var shouldDismissSearchPopup = event.which === 27 &&
$('.search-popup').is(':visible');
if (shouldDismissSearchPopup) {
onPopupClose();
}
});
</script>
<style>
.copy-btn {
display: inline-block;
padding: 6px 12px;
font-size: 13px;
font-weight: 700;
line-height: 20px;
color: #333;
white-space: nowrap;
vertical-align: middle;
cursor: pointer;
background-color: #eee;
background-image: linear-gradient(#fcfcfc, #eee);
border: 1px solid #d5d5d5;
border-radius: 3px;
user-select: none;
outline: 0;
}
.highlight-wrap .copy-btn {
transition: opacity .3s ease-in-out;
opacity: 0;
padding: 2px 6px;
position: absolute;
right: 4px;
top: 8px;
}
.highlight-wrap:hover .copy-btn,
.highlight-wrap .copy-btn:focus {
opacity: 1
}
.highlight-wrap {
position: relative;
}
</style>
<script>
$('.highlight').each(function(i, e) {
var $wrap = $('<div>').addClass('highlight-wrap');
$(e).after($wrap);
$wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function(e) {
var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
return $(e).text();
}).toArray().join('\n');
var ta = document.createElement('textarea');
var range = document.createRange(); //For Chrome
var sel = window.getSelection(); //For Chrome
var yPosition = window.pageYOffset || document.documentElement.scrollTop;
ta.style.top = yPosition + 'px'; //Prevent page scroll
ta.style.position = 'absolute';
ta.style.opacity = '0';
ta.value = code;
ta.textContent = code; //For FireFox
ta.contentEditable = true;
ta.readOnly = false;
document.body.appendChild(ta);
range.selectNode(ta);
sel.removeAllRanges();
sel.addRange(range);
ta.setSelectionRange(0, code.length);
var result = document.execCommand('copy');
if (result) $(this).text('复制成功');
else $(this).text('复制失败');
ta.blur(); //For iOS
$(this).blur();
})).on('mouseleave', function(e) {
var $b = $(this).find('.copy-btn');
setTimeout(function() {
$b.text('复制');
}, 300);
}).append(e);
})
</script>
</body>
</html>
