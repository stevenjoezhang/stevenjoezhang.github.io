<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>米米的博客</title>
  
  <subtitle>做了一点微小的工作</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://zhangshuqiao.org/"/>
  <updated>2018-11-27T15:59:14.607Z</updated>
  <id>https://zhangshuqiao.org/</id>
  
  <author>
    <name>张书樵</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Safari顶栏彩虹效果</title>
    <link href="https://zhangshuqiao.org/2018-11/Safari%E9%A1%B6%E6%A0%8F%E5%BD%A9%E8%99%B9%E6%95%88%E6%9E%9C/"/>
    <id>https://zhangshuqiao.org/2018-11/Safari顶栏彩虹效果/</id>
    <published>2018-11-27T05:53:11.000Z</published>
    <updated>2018-11-27T15:59:14.607Z</updated>
    
    <content type="html"><![CDATA[<p>从OS X Yosemite系统开始，Safari浏览器的顶部工具栏已经有了类似iOS中的半透明毛玻璃效果了。Safari会自动根据页面的颜色来显示工具栏的毛玻璃特效颜色，而通过CSS中的<code>body:before</code>类，我们可以将其定制一下。具体代码如下：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2147483647</span>;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">translateY</span>(-99.99px);</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(124deg,</span><br><span class="line">    #FF0000,</span><br><span class="line">    #FF7F00,</span><br><span class="line">    #FFFF00,</span><br><span class="line">    #7FFF00,</span><br><span class="line">    #00FF00,</span><br><span class="line">    #00FF7F,</span><br><span class="line">    #00FFFF,</span><br><span class="line">    #007FFF,</span><br><span class="line">    #0000FF,</span><br><span class="line">    #7F00FF,</span><br><span class="line">    #FF00FF,</span><br><span class="line">    #FF007F,</span><br><span class="line">    #FF0000);</span><br><span class="line">    <span class="attribute">animation</span>: rainbow <span class="number">15s</span> ease infinite;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">1000%</span> <span class="number">1000%</span>;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">keyframes</span> rainbow &#123;</span><br><span class="line">    0% &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">80%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    50% &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">20%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    100% &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">80%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>将它们添加到页面中的<code>&lt;style&gt;</code>标签内，并在<code>&lt;body&gt;</code>中加入适当的内容。当使用Safari浏览器打开时，<strong>略微向下滚动页面</strong>，便可以看到顶部栏出现炫酷的彩虹效果。快去试试吧！</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;从OS X Yosemite系统开始，Safari浏览器的顶部工具栏已经有了类似iOS中的半透明毛玻璃效果了。Safari会自动根据页面的颜色来显示工具栏的毛玻璃特效颜色，而通过CSS中的&lt;code&gt;body:before&lt;/code&gt;类，我们可以将其定制一下。具体代码如下
      
    
    </summary>
    
      <category term="Web开发" scheme="https://zhangshuqiao.org/categories/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="Mac" scheme="https://zhangshuqiao.org/tags/Mac/"/>
    
      <category term="CSS" scheme="https://zhangshuqiao.org/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>国际单位制基本单位的重新定义</title>
    <link href="https://zhangshuqiao.org/2018-11/%E5%9B%BD%E9%99%85%E5%8D%95%E4%BD%8D%E5%88%B6%E5%9F%BA%E6%9C%AC%E5%8D%95%E4%BD%8D%E7%9A%84%E9%87%8D%E6%96%B0%E5%AE%9A%E4%B9%89/"/>
    <id>https://zhangshuqiao.org/2018-11/国际单位制基本单位的重新定义/</id>
    <published>2018-11-22T02:58:01.000Z</published>
    <updated>2018-11-29T05:23:25.859Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>国际单位制以一组基本单位为基础，所有其他单位都是用基本单位建立起来的。麦克斯韦最初提出一致单位制的概念时，列出了三个可用的基本单位：质量、长度及时间单位。之后，吉奥尔吉提倡加入电的基本单位。理论上，电流、电势、电阻、电荷等物理量的单位都可以做基本单位，当选定其中一个做基本单位后，其余的电单位都可以通过物理定律从基本单位推导得出；国际单位制最终选择了使用电流。后期又加入了三个分别量度物质的量、温度及发光强度的基本单位。<br>国际单位制希望其单位定义的基准是源自于对自然的测量。但此单位制于1799在法国被引入时，由当时技术上的限制，因此利用了米原器与千克原器做为米与千克的定义。<br>1960年，米的定义被改写为由特定光源所发出的光波长（后又改为根据真空光速定义），因此米定义的基准也成为了对自然测量的结果。现今，只留下了千克还是以人造的物品做为定义的基准。<br><strong>2018年11月16日，第26届国际计量大会一致通过了新国际单位制基本单位定义的提案。新的定义将于2019年5月20日生效。</strong><br>国际度量衡局提案，除了光速以外，下列所示的四个自然常数也应被定义为确定的数值：</p><ul><li>普朗克常数$h=6.62607015\times10^{−34}(J\cdot s)$</li><li>基本电荷$e=1.602176634\times10^{−19}(C)$</li><li>玻尔兹曼常数$k=1.380649\times10^{−23}(J\cdot K^{−1})$</li><li>阿伏伽德罗常量$N_A=6.02214076\times10^{23}(mol^{−1})$</li></ul><p>这些常数在2006年版的SI指南就已经出现，但在此版本中后三个常数被定义为“由实验所得的常数”，而不是直接的“定义常数”。<br>国际度量衡局也提案，以下这些自然常数的数值应继续保持不变。</p><ul><li>光速$c=299,792,458(m\cdot s^{-1})$</li><li>铯133原子基态超精细能级分裂频率$\Delta\nu(^{133}Cs)_{hfs}=9,192,631,770(Hz)$</li><li>频率为$540\times10^{12}Hz$辐射的发光效率$K_{cd}=683(lm\cdot W^{-1})$</li></ul><p>这是以上七个定义改写为以基本单位表示的形式：</p><ul><li>$\Delta\nu(^{133}Cs)_{hfs}=9,192,631,770(s^{−1})$</li><li>$c=299,792,458(m\cdot s^{−1})$</li><li>$h=6.62607015\times10^{−34}(kg\cdot m^2\cdot s^{−1})$</li><li>$e=1.602176634\times10^{−19}(A\cdot s)$</li><li>$k=1.380649\times10^{−23}(kg\cdot m^2\cdot K^{−1}\cdot s^{−2})$</li><li>$N_A=6.02214076\times1023(mol^{−1})$</li><li>$K_{cd}=683(cd\cdot sr\cdot s^3\cdot kg^{−1}\cdot m^{−2})$</li></ul><p>此外国际度量衡局也要求：</p><ul><li>目前千克的定义应废除并使国际千克原器退休</li><li>目前安培的定义应废除</li><li>目前开尔文的定义应废除</li><li>目前摩尔的定义应修改</li></ul><p>这些改变会影响到基本单位的定义，但对于导出单位的表达形式则不会有所影响。</p><a id="more"></a><h2 id="改变历史"><a href="#改变历史" class="headerlink" title="改变历史"></a>改变历史</h2><p>我们可以回顾国际单位制基本单位定义的改变历史。</p><h3 id="米"><a href="#米" class="headerlink" title="米"></a>米</h3><p>最初（1793年）：从北极至赤道经过巴黎的子午线长度的一千万分之一。（法国政府）<br>过渡（1799年）：国际米原器的长度。<br>过渡（1960年）：氪-86原子在$2p^{10}$和$5d^5$量子能级之间跃迁所发出的电磁波在真空中的波长的1,650,763.73倍。<br>目前（1983年）：光在$\frac{1}{299,792,458}$秒内在真空中行进的距离。</p><h3 id="千克"><a href="#千克" class="headerlink" title="千克"></a>千克</h3><p>最初（1793年）：最初法文名为grave，定义为在冰点下体积为一立方分米的纯水的重量（质量）。（法国政府）<br>目前（1889年）：国际千克原器的质量。<br>未来（2019年）：由精确的普朗克常数$h=6.62607015\times10^{−34}(kg\cdot m^2\cdot s^{−1})$、米和秒所定义。</p><h3 id="秒"><a href="#秒" class="headerlink" title="秒"></a>秒</h3><p>最初（中世纪）：一天时长的86,400分之一。<br>过渡（1956年）：1900年1月0日历书时12时算起的回归年时长的$\frac{1}{31,556,925.9747}$。<br>目前（1967年）：铯-133原子基态的两个超精细能级之间跃迁所对应的辐射周期时长的9,192,631,770倍。</p><h3 id="安培"><a href="#安培" class="headerlink" title="安培"></a>安培</h3><p>最初（1881年）：CGS电磁单位制中电流单位的十分之一。CGS电流单位的定义是，在半径为1厘米、长度为1厘米的圆弧上流通，并在圆心产生1奥斯特电场的电流。（国际电工委员会）<br>目前（1946年）：在真空中相距1米的两根横截面为圆形、粗度可忽略不计的无限长平行直导线，各通上相等的恒定电流，当两根导线之间每米长度所受力为$2\times10^{−7}$牛顿时，各导线上的电流定义为1安培。<br>未来（2019年）：由新的元电荷$e=1.602176634\times10^{−19}(A\cdot s)$和秒所定义。</p><h3 id="开尔文"><a href="#开尔文" class="headerlink" title="开尔文"></a>开尔文</h3><p>最初（1743年）：摄氏温标将0°C和100°C分别定义为水的熔点和沸点。<br>过渡（1954年）：273.16K定义为水的三相点（0.01°C）。<br>目前（1967年）：水的三相点热力学温度的$\frac{1}{273.16}$。<br>未来（2019年）：由新的玻尔兹曼常数$k=1.380649\times10^{−23}(kg\cdot m^2\cdot K^{−1}\cdot s^{−2})$、千克、米和秒所定义。</p><h3 id="摩尔"><a href="#摩尔" class="headerlink" title="摩尔"></a>摩尔</h3><p>最初（1900年）：物质的克数等于其分子量时的数量。（国际原子量委员会）<br>目前（1967年）：物质所含的粒子数量相等于0.012千克碳-12所含的原子数量。<br>未来（2019年）：1摩尔包含$6.02214076×10^{23}$个基本实体，这一数字是新的阿伏伽德罗常数。</p><h3 id="坎德拉"><a href="#坎德拉" class="headerlink" title="坎德拉"></a>坎德拉</h3><p>最初（1946年）：整个辐射体在铂凝固温度下的亮度，定义为60新坎德拉每平方厘米。<br>目前（1979年）：频率为$5.4×10^{14}$赫兹的单色光源在特定方向辐射强度为$\frac{1}{683}W/sr$时的发光强度。</p><h2 id="依赖关系"><a href="#依赖关系" class="headerlink" title="依赖关系"></a>依赖关系</h2><p>由于定义的变化，这些单位之间的依赖关系也发生了改变。<br><img src="/images/2018-11/Unit_relations_in_the_old_SI.svg" alt=""><br><img src="/images/2018-11/Unit_relations_in_the_new_SI.svg" alt=""></p><h2 id="不确定度"><a href="#不确定度" class="headerlink" title="不确定度"></a>不确定度</h2><p>同样，由于定义的变化，一些物理量的不确定度也发生了改变。例如，真空磁导率$\mu_0$将不再具有定义值$4\pi\times10^{-7}m\cdot kg\cdot s^{-2}\cdot A^{-2}$，水的三相点温度也不再严格地等于273.16K。下表给出了它们在改动后的影响：</p><div style="overflow-x: scroll !important; white-space: nowrap;"><table><thead><tr><th>Constant</th><th>Symbol</th><th>Relation to directly measured and fixed constants (Previous)</th><th>Significant factor(s) in uncertainty (Previous)</th><th>Relative uncertainty (Previous)</th><th>Relation to directly measured and fixed constants (2019)</th><th>Significant factor(s) in uncertainty (2019)</th><th>Relative uncertainty (2019)</th></tr></thead><tbody><tr><td>Mass of IPK</td><td>$m(\mathcal{K})$</td><td>1&nbsp;kg</td><td>None</td><td>Exact</td><td>$m(\mathcal{K})$</td><td>$m(\mathcal{K})$</td><td>$1.2 \times 10^{-8} = u_\text{r}(m(\mathcal{K}))$</td></tr><tr><td>Planck constant</td><td>$h$</td><td>$\frac{8 \alpha}{c \mu_0 K_\text{J}^2}$</td><td>$K_\text{J}^2$</td><td>$1.2 \times 10^{-8} \approx 2 u_\text{r}(K_\text{J})$</td><td>$6.62607015\times10^{-34} kg\cdot m^2\cdot s^{−1}$</td><td>None</td><td>Exact</td></tr><tr><td>Josephson constant</td><td>$K_\text{J}$</td><td>$K_\text{J}$</td><td>$K_\text{J}$</td><td>$6.1 \times 10^{-9} = u_\text{r}(K_\text{J})$</td><td>$\frac{2 e}{h}$</td><td>None</td><td>Exact</td></tr><tr><td>Von Klitzing constant</td><td>$R_\text{K}$</td><td>$\frac{c \mu_0}{2 \alpha}$</td><td>$\alpha$</td><td>$2.3 \times 10^{-10} = u_\text{r}(\alpha)$</td><td>$\frac{h}{e^2}$</td><td>None</td><td>Exact</td></tr><tr><td>Elementary charge</td><td>$e$</td><td>$\frac{4 \alpha}{c \mu_0 K_\text{J}}$</td><td>$K_\text{J}$</td><td>$6.1 \times 10^{-9} \approx u_\text{r}(K_\text{J})$</td><td>$1.602176634\times10^{-19} A\cdot s$</td><td>None</td><td>Exact</td></tr><tr><td>Magnetic constant</td><td>$\mu_0$</td><td>$4\pi\times10^{-7} m\cdot kg\cdot s^{−2}\cdot A^{−2} $</td><td>None</td><td>Exact</td><td>$\frac{2 h \alpha}{c e^2}$</td><td>$\alpha$</td><td>$2.3 \times 10^{-10} = u_\text{r}(\alpha)$</td></tr><tr><td>Vacuum permittivity</td><td>$\varepsilon_0$</td><td>$\frac{1}{c^2 \mu_0}$</td><td>None</td><td>Exact</td><td>$\frac{e^2}{2 h c \alpha}$</td><td>$\alpha$</td><td>$2.3 \times 10^{-10} = u_\text{r}(\alpha)$</td></tr><tr><td>Impedance of free space</td><td>$Z_0$</td><td>$c \mu_0$</td><td>None</td><td>Exact</td><td>$\frac{2 h \alpha}{e^2}$</td><td>$\alpha$</td><td>$2.3 \times 10^{-10} = u_\text{r}(\alpha)$</td></tr><tr><td>Electron mass</td><td>$m_\text{e}$</td><td>$\frac{16 R_{\infty}}{c^2 \alpha \mu_0 K_\text{J}^2}$</td><td>$K_\text{J}^2$</td><td>$1.2 \times 10^{-8} \approx 2 u_\text{r}(K_\text{J})$</td><td>$\frac{2 h R_{\infty}}{c \alpha^2}$</td><td>$\alpha^2$</td><td>$4.7 \times 10^{-10} \approx 2 u_\text{r}(\alpha)$</td></tr><tr><td>Electron molar mass</td><td>$M(\text{e})$</td><td>$A_\text{r}(\text{e}) M_\text{u}$</td><td>$A_\text{r}(\text{e})$</td><td>$2.9 \times 10^{-11} = u_\text{r}(A_\text{r}(\text{e}))$</td><td>$\frac{2 h R_{\infty} N_\text{A}}{c \alpha^2}$</td><td>$\alpha^2$</td><td>$4.7 \times 10^{-10} \approx 2 u_\text{r}(\alpha)$</td></tr><tr><td>Unified atomic mass unit or dalton</td><td>\begin{align*}m_u &amp; = 1u \\ &amp; = 1Da\end{align*}</td><td>$\frac{16 R_{\infty}}{c^2 \alpha \mu_0 K_\text{J}^2 A_\text{r}(\text{e})}$</td><td>$K_\text{J}^2$</td><td>$1.2 \times 10^{-8} \approx 2 u_\text{r}(K_\text{J})$</td><td>$\frac{2 h R_{\infty}}{c \alpha^2 A_\text{r}(\text{e})}$</td><td>$\alpha^2$</td><td>$4.7 \times 10^{-10} \approx 2 u_\text{r}(\alpha)$</td></tr><tr><td>Molar mass constant</td><td>$M_\text{u}$</td><td>$0.001kg\cdot mol^{−1}$</td><td>None</td><td>Exact</td><td>$\frac{2 h R_{\infty} N_\text{A}}{c \alpha^2 A_\text{r}(\text{e})}$</td><td>$\alpha^2$</td><td>$4.7 \times 10^{-10} \approx 2 u_\text{r}(\alpha)$</td></tr><tr><td>Avogadro constant</td><td>$N_\text{A}$</td><td>$\frac{c^2 \alpha \mu_0 K_\text{J}^2 A_\text{r}(\text{e}) M_\text{u}}{16 R_{\infty}}$</td><td>$K_\text{J}^2$</td><td>$1.2 \times 10^{-8} \approx 2 u_\text{r}(K_\text{J})$</td><td>$6.02214076\times10^{23} mol^{−1}$</td><td>None</td><td>Exact</td></tr><tr><td>Atomic mass of carbon-12</td><td>$m(^{12}\text{C})$</td><td>$\frac{192 R_{\infty}}{c^2 \alpha \mu_0 K_\text{J}^2 A_\text{r}(\text{e})}$</td><td>$K_\text{J}^2$</td><td>$1.2 \times 10^{-8} \approx 2 u_\text{r}(K_\text{J})$</td><td>$\frac{24 h R_{\infty}}{c \alpha^2 A_\text{r}(\text{e})}$</td><td>$\alpha^2$</td><td>$4.7 \times 10^{-10} \approx 2 u_\text{r}(\alpha)$</td></tr><tr><td>Molar mass of carbon-12</td><td>$M(^{12}\text{C})$</td><td>$0.012kg\cdot mol^{−1}$</td><td>None</td><td>Exact</td><td>$\frac{24 h R_{\infty} N_\text{A}}{c \alpha^2 A_\text{r}(\text{e})}$</td><td>$\alpha^2$</td><td>$4.7 \times 10^{-10} \approx 2 u_\text{r}(\alpha)$</td></tr><tr><td>Faraday constant</td><td>$F$</td><td>$\frac{c \alpha^2 K_\text{J} A_\text{r}(\text{e}) M_\text{u}}{4 R_{\infty}}$</td><td>$K_\text{J}, \alpha^2$</td><td>$6.2 \times 10^{-9} \approx u_\text{r}(K_\text{J})$</td><td>$e N_\text{A}$</td><td>None</td><td>Exact</td></tr><tr><td>Temperature of triple point of water</td><td>$T_\text{TPW}$</td><td>273.16 K</td><td>None</td><td>Exact</td><td>$T_\text{TPW}$</td><td>$T_\text{TPW}$</td><td>$5.7 \times 10^{-7} = u_\text{r}(T_\text{TPW})$</td></tr><tr><td>Molar gas constant</td><td>$R$</td><td>$R$</td><td>$R$</td><td>$5.7 \times 10^{-7} = u_\text{r}(R)$</td><td>$k N_\text{A}$</td><td>None</td><td>Exact</td></tr><tr><td>Boltzmann constant</td><td>$k$</td><td>$\frac{16 R R_{\infty}}{c^2 \alpha \mu_0 K_\text{J}^2 A_\text{r}(\text{e}) M_\text{u}}$</td><td>$R$</td><td>$5.7 \times 10^{-7} \approx u_\text{r}(R)$</td><td>$1.380649\times10^{-23} kg\cdot m^2\cdot K^{−1} \cdot s^{−2}$</td><td>None</td><td>Exact</td></tr><tr><td>Stefan–Boltzmann constant</td><td>$\sigma$</td><td>$\frac{256 \pi^5 R^4 R_{\infty}^4}{15 c^7 \alpha^7 \mu_0 K_\text{J}^2 A_\text{r}(\text{e})^4 M_\text{u}^4}$</td><td>$R^4$</td><td>$2.3 \times 10^{-6} \approx 4 u_\text{r}(R)$</td><td>$\frac{2 \pi^5 k^4}{15 h^3 c^2}$</td><td>None</td><td>Exact</td></tr></tbody></table><p></p></div><br>注：其中，$c$为光速（speed of light），$\alpha$为精细结构常数（fine-structure constant），$R_\infty$为里德伯常量（Rydberg constant）。<p></p><p>参考文章：<br><a href="https://en.wikipedia.org/wiki/2019_redefinition_of_SI_base_units" target="_blank" rel="noopener">Redefinition of SI base units</a><br><a href="https://en.wikipedia.org/wiki/International_System_of_Units" target="_blank" rel="noopener">国际单位制</a></p><p>拓展阅读：<br><a href="https://mp.weixin.qq.com/s/bYIHtP3B33rPAHYWIvNatQ" target="_blank" rel="noopener">刚刚，“千克”被重新定义！大K从此成为历史</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;国际单位制以一组基本单位为基础，所有其他单位都是用基本单位建立起来的。麦克斯韦最初提出一致单位制的概念时，列出了三个可用的基本单位：质量、长度及时间单位。之后，吉奥尔吉提倡加入电的基本单位。理论上，电流、电势、电阻、电荷等物理量的单位都可以做基本单位，当选定其中一个做基本单位后，其余的电单位都可以通过物理定律从基本单位推导得出；国际单位制最终选择了使用电流。后期又加入了三个分别量度物质的量、温度及发光强度的基本单位。&lt;br&gt;国际单位制希望其单位定义的基准是源自于对自然的测量。但此单位制于1799在法国被引入时，由当时技术上的限制，因此利用了米原器与千克原器做为米与千克的定义。&lt;br&gt;1960年，米的定义被改写为由特定光源所发出的光波长（后又改为根据真空光速定义），因此米定义的基准也成为了对自然测量的结果。现今，只留下了千克还是以人造的物品做为定义的基准。&lt;br&gt;&lt;strong&gt;2018年11月16日，第26届国际计量大会一致通过了新国际单位制基本单位定义的提案。新的定义将于2019年5月20日生效。&lt;/strong&gt;&lt;br&gt;国际度量衡局提案，除了光速以外，下列所示的四个自然常数也应被定义为确定的数值：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;普朗克常数$h=6.62607015\times10^{−34}(J\cdot s)$&lt;/li&gt;
&lt;li&gt;基本电荷$e=1.602176634\times10^{−19}(C)$&lt;/li&gt;
&lt;li&gt;玻尔兹曼常数$k=1.380649\times10^{−23}(J\cdot K^{−1})$&lt;/li&gt;
&lt;li&gt;阿伏伽德罗常量$N_A=6.02214076\times10^{23}(mol^{−1})$&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这些常数在2006年版的SI指南就已经出现，但在此版本中后三个常数被定义为“由实验所得的常数”，而不是直接的“定义常数”。&lt;br&gt;国际度量衡局也提案，以下这些自然常数的数值应继续保持不变。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;光速$c=299,792,458(m\cdot s^{-1})$&lt;/li&gt;
&lt;li&gt;铯133原子基态超精细能级分裂频率$\Delta\nu(^{133}Cs)_{hfs}=9,192,631,770(Hz)$&lt;/li&gt;
&lt;li&gt;频率为$540\times10^{12}Hz$辐射的发光效率$K_{cd}=683(lm\cdot W^{-1})$&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这是以上七个定义改写为以基本单位表示的形式：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$\Delta\nu(^{133}Cs)_{hfs}=9,192,631,770(s^{−1})$&lt;/li&gt;
&lt;li&gt;$c=299,792,458(m\cdot s^{−1})$&lt;/li&gt;
&lt;li&gt;$h=6.62607015\times10^{−34}(kg\cdot m^2\cdot s^{−1})$&lt;/li&gt;
&lt;li&gt;$e=1.602176634\times10^{−19}(A\cdot s)$&lt;/li&gt;
&lt;li&gt;$k=1.380649\times10^{−23}(kg\cdot m^2\cdot K^{−1}\cdot s^{−2})$&lt;/li&gt;
&lt;li&gt;$N_A=6.02214076\times1023(mol^{−1})$&lt;/li&gt;
&lt;li&gt;$K_{cd}=683(cd\cdot sr\cdot s^3\cdot kg^{−1}\cdot m^{−2})$&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;此外国际度量衡局也要求：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;目前千克的定义应废除并使国际千克原器退休&lt;/li&gt;
&lt;li&gt;目前安培的定义应废除&lt;/li&gt;
&lt;li&gt;目前开尔文的定义应废除&lt;/li&gt;
&lt;li&gt;目前摩尔的定义应修改&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这些改变会影响到基本单位的定义，但对于导出单位的表达形式则不会有所影响。&lt;/p&gt;
    
    </summary>
    
      <category term="物理" scheme="https://zhangshuqiao.org/categories/%E7%89%A9%E7%90%86/"/>
    
    
  </entry>
  
  <entry>
    <title>在网页上实现3D Touch效果</title>
    <link href="https://zhangshuqiao.org/2018-11/%E5%9C%A8%E7%BD%91%E9%A1%B5%E4%B8%8A%E5%AE%9E%E7%8E%B03D%20Touch%E6%95%88%E6%9E%9C/"/>
    <id>https://zhangshuqiao.org/2018-11/在网页上实现3D Touch效果/</id>
    <published>2018-11-18T12:52:12.000Z</published>
    <updated>2018-11-19T05:06:51.916Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/2018-11/3d_touch_cover_.jpg" alt=""></p><p>2016年9月14日凌晨，iOS 10正式版开始向用户推送更新，而iOS 10搭载的Safari10亦带来了不少新特性，其中就有3D Touch事件的支持（官方文档<a href="https://developer.apple.com/library/prerelease/content/releasenotes/General/WhatsNewInSafari/Articles/Safari_10_0.html" target="_blank" rel="noopener">《What’s New in Safari 10》</a>）。</p><h2 id="Force-Touch与3D-Touch"><a href="#Force-Touch与3D-Touch" class="headerlink" title="Force Touch与3D Touch"></a>Force Touch与3D Touch</h2><p>说到3D Touch不能不提与之相似的Force Touch。Force Touch是苹果公司在2014年9月公布的一项压力敏感屏幕技术，最早用于Apple Watch，可识别轻点、轻按两种操作。随后Force Touch于2015年9月在iPhone 6S上得到改进并更名为3D Touch，提供了更高灵敏度的触控力度识别、及更强的触感反馈，支持轻点、轻按及重按三个维度。</p><p>支持3D Touch的设备，目前有iPhone 6S、iPhone 6S Plus、iPhone 7以及iPhone 7 Plus（注：截止2018年，还要加上iPhone 8和iPhone X等）。这是后文的硬件要求。</p><h2 id="感受3D-Touch"><a href="#感受3D-Touch" class="headerlink" title="感受3D Touch"></a>感受3D Touch</h2><p>3D Touch最为典型的交互有Quick Actions和Peek and Pop两种。在APP图标上重按呼出一组快捷操作菜单，这即是典型的Quick Actions：</p><p><img src="/images/2018-11/quick_actions.jpg" alt=""></p><p>而使用Peek and Pop则可以快速地对内容进行预览，以及后续的其他操作：</p><p><img src="/images/2018-11/peek_and_pop.jpg" alt=""></p><p>如上图所示，在系统的邮件APP中，以一定的力度按压邮件列表中的某一项，会触发Peek弹出一个内容预览窗口（在Peek状态下上滑还能触发Quick Actions调出一些快捷操作项哦），如果继续加大按压力度，则会触发Pop进入邮件内容界面，这整个过程就称之为Peek and Pop。</p><p>除了邮件APP以外，信息、照片等多个系统APP以及一些第三方APP（如微信、Facebook、Twitter等）也都很好的支持了Peek and Pop这种3D Touch交互形式。</p><h2 id="网页中的3D-Touch"><a href="#网页中的3D-Touch" class="headerlink" title="网页中的3D Touch"></a>网页中的3D Touch</h2><p>要在网页中实现3D Touch，需要用到以下两个知识点：</p><ul><li><p>touch.force<br>在touch对象中包含有一个名为<code>force</code>的只读属性，它的取值从0到1，表示的是触碰点的按压力度，0表示没有检测到压力，而1则是设备能识别出的最大压力。</p></li><li><p>touchforcechange<br><code>touchforcechange</code>是Safari 10新增的事件，该事件会在按压力度改变时被触发。</p></li></ul><p>（注：在MacOS Safari上也有与之对应的<code>webkitmouseforcechanged</code>事件，该事件会在支持Force Touch的Trackpad上反应出按压力度值force的变化，但本文仅讨论手机设备的情况）</p><h2 id="实现3D-Touch效果"><a href="#实现3D-Touch效果" class="headerlink" title="实现3D Touch效果"></a>实现3D Touch效果</h2><p>要实现3D Touch效果，关键在于实时地获取touch.force的值。而由于网页上的3D Touch很大程度上受限于设备及浏览器的支持情况，因此我们划分以下3种情况，分别来看看要如何实现：</p><ul><li><p>支持3D Touch且升级到了iOS 10的设备<br>在这种最为理想的情况下，只需要监听touchforcechange事件即可获取到force的当前值，将force值的变化以适当的形式反馈在界面上以实现3D Touch效果。</p></li><li><p>支持3D Touch但系统版本低于iOS 10的设备<br>这种情况虽然无法监听touchforcechange事件，但Touch对象的force属性仍然可以反应出正确的按压力度，可以巧妙地设置一个定时器，以轮询的方式获取force的当前值。</p></li><li><p>不支持3D Touch的设备<br>这种情况下touch.force的取值始终为0，虽然可以用长按的交互形式来代替，但建议还是以优雅降级的方式，索性就不处理了吧。</p></li></ul><h2 id="一个3D-Touch的例子"><a href="#一个3D-Touch的例子" class="headerlink" title="一个3D Touch的例子"></a>一个3D Touch的例子</h2><p>看到这里你肯定想说”Shut up and show me the code…”。好的，那我们来看一个例子，在这个事例页面，用支持3D Touch的设备按压蓝色按钮可以将树懒兄逗笑哦，嘿嘿嘿～</p><a id="more"></a><p><img src="/images/2018-11/demo.png" alt=""></p><p>你可扫描以上二维码，或<a href="http://jdc.jd.com/demo/3d-touch" target="_blank" rel="noopener">戳我进行预览</a>，<strong>注意请使用iOS Safari浏览器进行访问！使用iOS Safari浏览器！！使用iOS Safari浏览器！！！</strong>重要的事情要说三遍，因为目前微信WebView并不支持3D Touch。</p><p>实现思路其实比较简单，根据刚刚说到的知识，我们分别监听touchforcechange、touchstart、touchend、touchcancel事件：</p><ul><li>在touchstart事件中，启动一个定时器轮询地去获取touch.force的值；</li><li>在touchforcechange事件中获取当前touch.force的值，并清除touchstart事件中设置的定时器，因为支持touchforcechange事件的话就没必要轮询了；</li><li>在touchend及touchcancel事件中把touch.force重置为0，并清除定时器。</li></ul><p>而树懒兄大笑的动画则用的是以下这张雪碧图，根据当前touch.force值来设置background-position以显示对应的动画帧来实现的。</p><p><img src="/images/2018-11/sloth.png" alt=""></p><p>你可以访问这个<a href="https://github.com/hihuimin/3d-touch" target="_blank" rel="noopener">Github项目</a>来查看源码，核心代码位于ThreeDTouch.js，该文件封装了一个名为ThreeDTouch的类，事例化时传入一个DOM对象即可在callback中获取到按压力度值的变化。</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 3D Touch 事件处理器，传入要监听的 DOM 对象，在 callback 回调中获取当前 force 值</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param &#123; HTMLElement &#125; el - 要监听的 DOM 对象</span></span><br><span class="line"><span class="comment"> * @param &#123; Function &#125; callback - 带有 force 值的回调函数</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ThreeDTouch</span><span class="params">(el, callback)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.el = el</span><br><span class="line">    <span class="keyword">this</span>.callback = callback</span><br><span class="line">    <span class="keyword">this</span>._bindEvents()</span><br><span class="line">&#125;</span><br><span class="line">ThreeDTouch.prototype = &#123;</span><br><span class="line">    <span class="comment">//绑定相关 touch 事件</span></span><br><span class="line">    _bindEvents: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> events = [<span class="string">'touchforcechange'</span>, <span class="string">'touchstart'</span>, <span class="string">'touchend'</span>, <span class="string">'touchcancel'</span>]</span><br><span class="line">        events.forEach(<span class="function"><span class="keyword">function</span><span class="params">(event)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.el.addEventListener(event, <span class="keyword">this</span>, <span class="literal">false</span>)</span><br><span class="line">        &#125;.bind(<span class="keyword">this</span>))</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//分派 touch 事件</span></span><br><span class="line">    handleEvent: <span class="function"><span class="keyword">function</span><span class="params">(ev)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (ev.type) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'touchforcechange'</span>:</span><br><span class="line">                <span class="keyword">this</span>._touchForceDidChange(ev)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">case</span> <span class="string">'touchstart'</span>:</span><br><span class="line">                <span class="keyword">this</span>._touchDidStart(ev)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">case</span> <span class="string">'touchend'</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'touchcancel'</span>:</span><br><span class="line">                <span class="keyword">this</span>._touchDidEnd(ev)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//force 值改变时</span></span><br><span class="line">    _touchForceDidChange: <span class="function"><span class="keyword">function</span><span class="params">(ev)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> force = ev.touches[<span class="number">0</span>].force</span><br><span class="line">        <span class="keyword">this</span>.callback(force)</span><br><span class="line">        clearTimeout(<span class="keyword">this</span>.timeoutId) <span class="comment">//支持 touchforcechange 的话则取消轮询</span></span><br><span class="line">    &#125;,</span><br><span class="line">    _touchDidStart: <span class="function"><span class="keyword">function</span><span class="params">(ev)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> touch = ev.touches[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">this</span>._checkForce(touch)</span><br><span class="line">    &#125;,</span><br><span class="line">    _touchDidEnd: <span class="function"><span class="keyword">function</span><span class="params">(ev)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.callback(<span class="number">0</span>)</span><br><span class="line">        clearTimeout(<span class="keyword">this</span>.timeoutId)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//轮询地获取 force 值</span></span><br><span class="line">    _checkForce: <span class="function"><span class="keyword">function</span><span class="params">(touch)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.callback(touch.force)</span><br><span class="line">        <span class="keyword">this</span>.timeoutId = setTimeout(<span class="keyword">this</span>._checkForce.bind(<span class="keyword">this</span>, touch), <span class="number">16</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>本文转载自：<a href="https://aotu.io/notes/2016/09/28/3d-touch" target="_blank" rel="noopener">在网页上实现 3D Touch 效果 - 凹凸实验室</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/2018-11/3d_touch_cover_.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;2016年9月14日凌晨，iOS 10正式版开始向用户推送更新，而iOS 10搭载的Safari10亦带来了不少新特性，其中就有3D Touch事件的支持（官方文档&lt;a href=&quot;https://developer.apple.com/library/prerelease/content/releasenotes/General/WhatsNewInSafari/Articles/Safari_10_0.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;《What’s New in Safari 10》&lt;/a&gt;）。&lt;/p&gt;
&lt;h2 id=&quot;Force-Touch与3D-Touch&quot;&gt;&lt;a href=&quot;#Force-Touch与3D-Touch&quot; class=&quot;headerlink&quot; title=&quot;Force Touch与3D Touch&quot;&gt;&lt;/a&gt;Force Touch与3D Touch&lt;/h2&gt;&lt;p&gt;说到3D Touch不能不提与之相似的Force Touch。Force Touch是苹果公司在2014年9月公布的一项压力敏感屏幕技术，最早用于Apple Watch，可识别轻点、轻按两种操作。随后Force Touch于2015年9月在iPhone 6S上得到改进并更名为3D Touch，提供了更高灵敏度的触控力度识别、及更强的触感反馈，支持轻点、轻按及重按三个维度。&lt;/p&gt;
&lt;p&gt;支持3D Touch的设备，目前有iPhone 6S、iPhone 6S Plus、iPhone 7以及iPhone 7 Plus（注：截止2018年，还要加上iPhone 8和iPhone X等）。这是后文的硬件要求。&lt;/p&gt;
&lt;h2 id=&quot;感受3D-Touch&quot;&gt;&lt;a href=&quot;#感受3D-Touch&quot; class=&quot;headerlink&quot; title=&quot;感受3D Touch&quot;&gt;&lt;/a&gt;感受3D Touch&lt;/h2&gt;&lt;p&gt;3D Touch最为典型的交互有Quick Actions和Peek and Pop两种。在APP图标上重按呼出一组快捷操作菜单，这即是典型的Quick Actions：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2018-11/quick_actions.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;而使用Peek and Pop则可以快速地对内容进行预览，以及后续的其他操作：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2018-11/peek_and_pop.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;如上图所示，在系统的邮件APP中，以一定的力度按压邮件列表中的某一项，会触发Peek弹出一个内容预览窗口（在Peek状态下上滑还能触发Quick Actions调出一些快捷操作项哦），如果继续加大按压力度，则会触发Pop进入邮件内容界面，这整个过程就称之为Peek and Pop。&lt;/p&gt;
&lt;p&gt;除了邮件APP以外，信息、照片等多个系统APP以及一些第三方APP（如微信、Facebook、Twitter等）也都很好的支持了Peek and Pop这种3D Touch交互形式。&lt;/p&gt;
&lt;h2 id=&quot;网页中的3D-Touch&quot;&gt;&lt;a href=&quot;#网页中的3D-Touch&quot; class=&quot;headerlink&quot; title=&quot;网页中的3D Touch&quot;&gt;&lt;/a&gt;网页中的3D Touch&lt;/h2&gt;&lt;p&gt;要在网页中实现3D Touch，需要用到以下两个知识点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;touch.force&lt;br&gt;在touch对象中包含有一个名为&lt;code&gt;force&lt;/code&gt;的只读属性，它的取值从0到1，表示的是触碰点的按压力度，0表示没有检测到压力，而1则是设备能识别出的最大压力。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;touchforcechange&lt;br&gt;&lt;code&gt;touchforcechange&lt;/code&gt;是Safari 10新增的事件，该事件会在按压力度改变时被触发。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;（注：在MacOS Safari上也有与之对应的&lt;code&gt;webkitmouseforcechanged&lt;/code&gt;事件，该事件会在支持Force Touch的Trackpad上反应出按压力度值force的变化，但本文仅讨论手机设备的情况）&lt;/p&gt;
&lt;h2 id=&quot;实现3D-Touch效果&quot;&gt;&lt;a href=&quot;#实现3D-Touch效果&quot; class=&quot;headerlink&quot; title=&quot;实现3D Touch效果&quot;&gt;&lt;/a&gt;实现3D Touch效果&lt;/h2&gt;&lt;p&gt;要实现3D Touch效果，关键在于实时地获取touch.force的值。而由于网页上的3D Touch很大程度上受限于设备及浏览器的支持情况，因此我们划分以下3种情况，分别来看看要如何实现：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;支持3D Touch且升级到了iOS 10的设备&lt;br&gt;在这种最为理想的情况下，只需要监听touchforcechange事件即可获取到force的当前值，将force值的变化以适当的形式反馈在界面上以实现3D Touch效果。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;支持3D Touch但系统版本低于iOS 10的设备&lt;br&gt;这种情况虽然无法监听touchforcechange事件，但Touch对象的force属性仍然可以反应出正确的按压力度，可以巧妙地设置一个定时器，以轮询的方式获取force的当前值。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;不支持3D Touch的设备&lt;br&gt;这种情况下touch.force的取值始终为0，虽然可以用长按的交互形式来代替，但建议还是以优雅降级的方式，索性就不处理了吧。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;一个3D-Touch的例子&quot;&gt;&lt;a href=&quot;#一个3D-Touch的例子&quot; class=&quot;headerlink&quot; title=&quot;一个3D Touch的例子&quot;&gt;&lt;/a&gt;一个3D Touch的例子&lt;/h2&gt;&lt;p&gt;看到这里你肯定想说”Shut up and show me the code…”。好的，那我们来看一个例子，在这个事例页面，用支持3D Touch的设备按压蓝色按钮可以将树懒兄逗笑哦，嘿嘿嘿～&lt;/p&gt;
    
    </summary>
    
      <category term="Web开发" scheme="https://zhangshuqiao.org/categories/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="JavaScript" scheme="https://zhangshuqiao.org/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>使用示波器播放Bad Apple!!</title>
    <link href="https://zhangshuqiao.org/2018-11/%E4%BD%BF%E7%94%A8%E7%A4%BA%E6%B3%A2%E5%99%A8%E6%92%AD%E6%94%BEBad%20Apple!!/"/>
    <id>https://zhangshuqiao.org/2018-11/使用示波器播放Bad Apple!!/</id>
    <published>2018-11-14T02:09:01.000Z</published>
    <updated>2018-11-19T05:06:57.251Z</updated>
    
    <content type="html"><![CDATA[<p>本视频于某次物理竞赛集训时拍摄于华中科技大学，音频为后期加上。<br>为了对上音轨，前后各有一段黑屏，这是feature而非bug。</p><video src="/files/badapple.mp4" preload="metadata" controls playsinline="" poster="/images/2018-11/flandre_scarlet.jpg" style="max-width: 100%; display: block; margin-left: auto; margin-right: auto;"><br>Your browser does not support the video tag<br></video>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;本视频于某次物理竞赛集训时拍摄于华中科技大学，音频为后期加上。&lt;br&gt;为了对上音轨，前后各有一段黑屏，这是feature而非bug。&lt;/p&gt;
&lt;video src=&quot;/files/badapple.mp4&quot; preload=&quot;metadata&quot; controls plays
      
    
    </summary>
    
      <category term="物理" scheme="https://zhangshuqiao.org/categories/%E7%89%A9%E7%90%86/"/>
    
    
  </entry>
  
  <entry>
    <title>用Telnet观看Nyancat动画</title>
    <link href="https://zhangshuqiao.org/2018-11/%E7%94%A8Telnet%E8%A7%82%E7%9C%8BNyancat%E5%8A%A8%E7%94%BB/"/>
    <id>https://zhangshuqiao.org/2018-11/用Telnet观看Nyancat动画/</id>
    <published>2018-11-08T14:36:23.000Z</published>
    <updated>2018-11-25T02:36:06.546Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近在知乎上看到一个关于VPS有趣的用途的问题，<a href="https://www.zhihu.com/question/24284566/answer/27291403" target="_blank" rel="noopener">其中一个回答</a>提到了可以搭建Telnet服务器，成功运行后别人用Telnet连接你的主机将会看到Nyancat动画。大致效果如图所示：<br><img src="/images/2018-11/nyancat.png" alt=""><br>然而，回答中给出的Demo已经失效，<code>telnet nyancat.dakko.us</code>会返回一个<code>Connection refused</code>错误。不过值得庆幸的是，这个项目的官方网站<a href="http://nyancat.dakko.us" target="_blank" rel="noopener">Nyan Cat Telnet Server</a>和<a href="https://github.com/klange/nyancat" target="_blank" rel="noopener">GitHub项目地址</a>都还可以正常访问，因此可以尝试重新把它搭起来。你可以查看博主建立的镜像：<code>telnet zsq.im 8081</code>，这是按以下方法搭建好的结果。</p><h2 id="下载编译"><a href="#下载编译" class="headerlink" title="下载编译"></a>下载编译</h2><p>在命令行执行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/klange/nyancat.git</span><br><span class="line"><span class="built_in">cd</span> nyancat</span><br><span class="line">make &amp;&amp; <span class="built_in">cd</span> src</span><br><span class="line">mv nyancat usr/<span class="built_in">local</span>/bin <span class="comment">#or make install</span></span><br></pre></td></tr></table></figure></p><p>这时，通过<code>nyancat</code>或<code>nyancat -t</code>命令就可以查看效果。接下来把Telnet配置好就行了。</p><h2 id="配置Telnet"><a href="#配置Telnet" class="headerlink" title="配置Telnet"></a>配置Telnet</h2><p>使用包管理工具安装<code>xinetd</code>，例如<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install xinetd</span><br></pre></td></tr></table></figure></p><p>然后在<code>/etc/xinetd.d</code>目录下新建文件<code>nyancat</code>，内容为：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">service telnet</span><br><span class="line">&#123;</span><br><span class="line">    flags          = REUSE</span><br><span class="line">    socket_type    = stream</span><br><span class="line">    <span class="built_in">wait</span>           = no</span><br><span class="line">    user           = root</span><br><span class="line">    group          = root</span><br><span class="line">    server         = /usr/<span class="built_in">local</span>/bin/nyancat</span><br><span class="line">    server_args    = -t</span><br><span class="line">    log_on_failure += USERID</span><br><span class="line">    <span class="built_in">disable</span>        = no</span><br><span class="line">    instances      = 10</span><br><span class="line">    per_source     = 2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>其中<code>instances</code>和<code>per_source</code>限制了总的连接数和单个IP的连接数，以防止资源滥用（其实并没有什么用，DDOS攻击该来还是会来）。<br>接下来，重启<code>xinetd</code>服务：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart xinetd</span><br></pre></td></tr></table></figure></p><p>这时，你就可以通过<code>telnet localhost</code>查看是否一切正常。如果没有问题，配置防火墙开放23端口，就可以从公网访问了。试试用Telnet连接你的主机，效果是不是非常酷炫？<br>不过，博主在实践中发现，开放telnet的23端口可能会产生大量异常流量。解决方法是修改telnet的端口号，编辑<code>/etc/services</code>，找到telnet，将23改为一个你喜欢的数字（比如8081）；或者直接关闭这个服务，在<code>nyancat</code>中设置<code>disable: yes</code>即可。</p><h2 id="更多"><a href="#更多" class="headerlink" title="更多"></a>更多</h2><p>俗话说，有光的地方就有Bad Apple!!。博主目前正在尝试搭建一个Bad Apple!!版本的Telnet服务器，敬请期待。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;最近在知乎上看到一个关于VPS有趣的用途的问题，&lt;a href=&quot;https://www.zhihu.com/question/242845
      
    
    </summary>
    
      <category term="技术" scheme="https://zhangshuqiao.org/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="Linux" scheme="https://zhangshuqiao.org/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Heavens Above爬虫的实现</title>
    <link href="https://zhangshuqiao.org/2018-10/Heavens%20Above%E7%88%AC%E8%99%AB%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
    <id>https://zhangshuqiao.org/2018-10/Heavens Above爬虫的实现/</id>
    <published>2018-10-23T03:00:19.000Z</published>
    <updated>2018-11-18T08:49:51.244Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.heavens-above.com" target="_blank" rel="noopener">Heavens Above</a>是一个天文数据库网站，可以查询到诸如卫星过境的很多信息。虽然数据很全面，但是检索方式非常繁琐，在网站上需要依次打开多个链接进行比对，难以迅速地获取需要的信息。故博主决定写一个爬虫，以直观地展现所有数据。由于Heavens Above采取了大量的反爬虫措施，例如校验Cookie、限制单个IP的访问次数等，因此必须严格地模拟浏览器请求，才能正确爬取数据。<br>博主也参考了大量GitHub上已有的Heavens Above爬虫项目，不过它们大部分失去维护，停留在数年前，已经不再适用。具体的逻辑还是要自行测试。</p><p>项目地址：<a href="https://github.com/stevenjoezhang/heavens-above" target="_blank" rel="noopener">heavens-above</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://www.heavens-above.com&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Heavens Above&lt;/a&gt;是一个天文数据库网站，可以查询到诸如卫星过境的很多信息。虽然数据很全面，但是检索方式非常繁琐，在网
      
    
    </summary>
    
      <category term="程序设计" scheme="https://zhangshuqiao.org/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"/>
    
    
      <category term="GitHub" scheme="https://zhangshuqiao.org/tags/GitHub/"/>
    
      <category term="天文" scheme="https://zhangshuqiao.org/tags/%E5%A4%A9%E6%96%87/"/>
    
  </entry>
  
  <entry>
    <title>Thanks for inventing Javascript</title>
    <link href="https://zhangshuqiao.org/2018-10/Thanks%20for%20inventing%20Javascript/"/>
    <id>https://zhangshuqiao.org/2018-10/Thanks for inventing Javascript/</id>
    <published>2018-10-20T08:48:17.000Z</published>
    <updated>2018-11-15T13:36:17.101Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/2018-10/thanks-for-inventing-javascript.jpg" alt=""></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;/images/2018-10/thanks-for-inventing-javascript.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;

      
    
    </summary>
    
      <category term="Web开发" scheme="https://zhangshuqiao.org/categories/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="JavaScript" scheme="https://zhangshuqiao.org/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>使用OpenCV进行星轨的后期处理</title>
    <link href="https://zhangshuqiao.org/2018-10/%E4%BD%BF%E7%94%A8OpenCV%E8%BF%9B%E8%A1%8C%E6%98%9F%E8%BD%A8%E7%9A%84%E5%90%8E%E6%9C%9F%E5%A4%84%E7%90%86/"/>
    <id>https://zhangshuqiao.org/2018-10/使用OpenCV进行星轨的后期处理/</id>
    <published>2018-10-10T11:33:26.000Z</published>
    <updated>2018-11-21T04:54:48.823Z</updated>
    
    <content type="html"><![CDATA[<p>贴上代码，稍后填坑。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addImage</span><span class="params">(img1_path, img2_path, alpha = <span class="number">0.5</span>)</span>:</span></span><br><span class="line">    img1 = cv2.imread(img1_path)</span><br><span class="line">    img = cv2.imread(img2_path)</span><br><span class="line">    h, w, _ = img1.shape</span><br><span class="line">    beta = <span class="number">1</span> - alpha</span><br><span class="line">    gamma = <span class="number">0</span></span><br><span class="line">    img_add = cv2.addWeighted(img1, alpha, img2, beta, gamma)</span><br><span class="line">    <span class="keyword">return</span> img_add</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></span><br><span class="line">    img_root = <span class="string">''</span> <span class="comment">#这里写你的文件夹路径，比如：/home/youname/data/img/ 注意最后一个文件夹要有斜杠</span></span><br><span class="line">    fps = <span class="number">24</span> <span class="comment">#保存视频的FPS，可以适当调整</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#可以用(*'DVIX')或(*'X264')，如果都不行先装ffmepg: sudo apt install ffmepg</span></span><br><span class="line">    fourcc = cv2.VideoWriter_fourcc(*<span class="string">'MJPG'</span>)</span><br><span class="line">    videoWriter = cv2.VideoWriter(<span class="string">'saveVideo.mp4v'</span>, fourcc, fps, (<span class="number">3168</span>, <span class="number">4752</span>))<span class="comment">#最后一个是保存图片的尺寸</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">99</span>):</span><br><span class="line">        <span class="comment">#frame = cv2.imread(img_root+str(i+1)+'.jpg')</span></span><br><span class="line">        frame = addImage(<span class="string">'IMG_3866.jpg'</span>, <span class="string">'IMG_3869.jpg'</span>)</span><br><span class="line">        videoWriter.write(frame)</span><br><span class="line">    videoWriter.release()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    folder = input(<span class="string">"请输入照片所在文件夹"</span>) <span class="keyword">or</span> <span class="string">'.'</span></span><br><span class="line">    prefix = input(<span class="string">"请输入照片前缀"</span>) <span class="keyword">or</span> <span class="string">'IMG_'</span></span><br><span class="line">    suffix = input(<span class="string">"请输入照片后缀"</span>) <span class="keyword">or</span> <span class="string">'jpg'</span></span><br><span class="line">    digits = int(input(<span class="string">"请输入照片序号位数"</span>) <span class="keyword">or</span> <span class="number">4</span>)</span><br><span class="line">    start = int(input(<span class="string">"请输入第一张照片序号"</span>) <span class="keyword">or</span> <span class="number">0</span>)</span><br><span class="line">    end = int(input(<span class="string">"请输入最后一张照片序号"</span>) <span class="keyword">or</span> <span class="number">1</span>)</span><br><span class="line">    fps = int(input(<span class="string">"请输入视频帧率"</span>) <span class="keyword">or</span> <span class="number">24</span>)</span><br><span class="line">    fpp = int(input(<span class="string">"请输入每张照片持续的帧数"</span>) <span class="keyword">or</span> <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    imgArray = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(start, end + <span class="number">1</span>):</span><br><span class="line">        imgPath = folder + <span class="string">"/"</span> + prefix + i + <span class="string">"."</span> + suffix</span><br><span class="line">        <span class="keyword">if</span> os.path.exists(imgPath):</span><br><span class="line">            imgArray.append(imgPath)</span><br><span class="line"></span><br><span class="line">    h, w, _ = imgArray[<span class="number">0</span>].shape</span><br><span class="line">    fourcc = cv2.VideoWriter_fourcc(*<span class="string">'MJPG'</span>)</span><br><span class="line">    videoWriter = cv2.VideoWriter(<span class="string">'saveVideo.mp4v'</span>, fourcc, fps, (w, h))</span><br><span class="line">    frame = cv2.imread(imgArray[<span class="number">0</span>])</span><br><span class="line">    <span class="comment">#videoWriter.write(frame)</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(imgArray)):</span><br><span class="line">        <span class="comment">#frame = cv2.imread(img_root+str(i+1)+'.jpg')</span></span><br><span class="line">        frame = addImage(frame, imgArray[i], i / (i + <span class="number">1</span>))</span><br><span class="line">        videoWriter.write(frame)</span><br><span class="line">        print(i + <span class="string">'/'</span> + (i + <span class="number">1</span>))</span><br><span class="line">    videoWriter.release()</span><br></pre></td></tr></table></figure></p><p>参考文章：<br><a href="https://blog.csdn.net/zh_jessica/article/details/77992578" target="_blank" rel="noopener">Python-OpenCV 图像叠加or图像混合加权</a><br><a href="https://blog.csdn.net/aa846555831/article/details/53070314" target="_blank" rel="noopener">python + opencv 将图片保存为视频</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;贴上代码，稍后填坑。&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/sp
      
    
    </summary>
    
      <category term="程序设计" scheme="https://zhangshuqiao.org/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"/>
    
    
      <category term="Python" scheme="https://zhangshuqiao.org/tags/Python/"/>
    
      <category term="天文" scheme="https://zhangshuqiao.org/tags/%E5%A4%A9%E6%96%87/"/>
    
  </entry>
  
  <entry>
    <title>古惑狼游戏牵扯出的硬件bug</title>
    <link href="https://zhangshuqiao.org/2018-10/%E5%8F%A4%E6%83%91%E7%8B%BC%E6%B8%B8%E6%88%8F%E7%89%B5%E6%89%AF%E5%87%BA%E7%9A%84%E7%A1%AC%E4%BB%B6bug/"/>
    <id>https://zhangshuqiao.org/2018-10/古惑狼游戏牵扯出的硬件bug/</id>
    <published>2018-10-04T00:41:46.000Z</published>
    <updated>2018-11-18T08:49:51.248Z</updated>
    
    <content type="html"><![CDATA[<p>这篇文章翻译自：<a href="https://www.quora.com/Programming-Interviews/Whats-the-hardest-bug-youve-debugged/answer/Dave-Baggett" target="_blank" rel="noopener">What’s the hardest bug you’ve debugged?</a></p><p>It’s kind of painful to re-live this one. As a programmer, you learn to blame your code first, second, and third… and somewhere around 10,000th you blame the compiler. Well down the list after that, you blame the hardware.<br>回想起这个bug，仍然让我感觉有些痛苦。作为一个程序员，在发现bug时，你学会了首先在自己代码中找问题，一次、两次、三次……或许在测试一万次之后，你会把问题归咎于编译器。只有在这所有的都不起作用之后，你才会把问题归咎于硬件。</p><p>This is my hardware bug story.<br>这是我遭遇硬件bug的故事。</p><p>Among other things, I wrote the memory card (load/save) code for Crash Bandicoot. For a swaggering game coder, this is like a walk in the park; I expected it would take a few days. I ended up debugging that code for six weeks. I did other stuff during that time, but I kept coming back to this bug – a few hours every few days. It was agonizing.<br>抛开别的不说，我曾为古惑狼（Crash Bandicoot，PS1游戏）写存储卡（读写）代码。对于一个自大的游戏程序员，这就像是在公园里散步一样轻松愉快；我预计只要几天就可以写完。我最终用了六个礼拜把那些代码调试完毕。在此期间我也做过一些其他的事情，但却一直绕不开这个bug——每几天内就要花上好几个小时来处理。这个bug实在烦人。</p><p>The symptom was that you’d go to save your progress and it would access the memory card, and almost all the time, it worked normally… But every once in a while the write or read would time out… for no obvious reason. A short write would often corrupt the memory card. The player would go to save, and not only would we not save, we’d wipe their memory card. D’Oh.<br>这个bug的症状是，当你需要保存你的进度时，代码会访问存储卡，而大部分情况下没有什么问题…但是偶尔读写会超时…没有任何明显的原因。一个简短的写入经常毁掉存储卡。玩家要保存进度，我们不仅不保存，还擦除他们存储卡上的全部东西。天哪。</p><p>After a while, our producer at Sony, Connie Booth, began to panic. We obviously couldn’t ship the game with that bug, and after six weeks I still had no clue what the problem was. Via Connie we put the word out to other PlayStation 1 developers – had anybody seen anything like this? Nope. Absolutely nobody had any problems with the memory card system.<br>过了一段时间，我们在Sony的制作人Connie Booth慌了。我们显然不能发布带有这个bug游戏，而六个星期之后我对于问题出在哪一点线索都没有。通过Connie我们向其他PS1开发者求助：有没有人出现过像我们这样的情况？没有。绝对没有任何人在存储卡系统上出现任何问题。</p><p>About the only thing you can do when you run out of ideas debugging is divide and conquer: keep removing more and more of the errant program’s code until you’re left with something relatively small that still exhibits the problem. You keep carving parts away until the only stuff left is where the bug is.<br>在你绞尽脑汁之后，你能做的唯一一个调试方法就是分而治之：一点点去除错误程序中的代码，直到留下的代码相对很少，但仍然表现出问题。像雕刻一样去除没有问题的代码，留下的就是你的bug所在。</p><a id="more"></a><p>The challenge with this in the context of, say, a video game is that it’s very hard to remove pieces. How do you still run the game if you remove the code that simulates gravity in the game? Or renders the characters?<br>在这样的背景下挑战在于，视频游戏是很难去除某一部分的。在你删除模拟重力或者显示字符的代码后，如何运行游戏？</p><p>What you have to do is replace entire modules with stubs that pretend to do the real thing, but actually do something completely trivial that can’t be buggy. You have to write new scaffolding code just to keep things working at all. It is a slow, painful process.<br>你必须做的是用一个假装做真正的事情，但实际上只是做很简单的不会出现bug事情的东西来替换掉整个模块。你必须写新的支撑代码来让这些玩意正常工作。这是一个缓慢而痛苦的过程。</p><p>Long story short: I did this. I kept removing more and more hunks of code until I ended up, pretty much, with nothing but the startup code – just the code that set up the system to run the game, initialized the rendering hardware, etc. Of course, I couldn’t put up the load/save menu at that point because I’d stubbed out all the graphics code. But I could pretend the user used the (invisible) load/save screen and asked to save, then write to the card.<br>长话短说：我做完了。我移除了大片大片的代码，相当多，只留下了初始化代码——就是准备游戏运行系统，初始化渲染硬件等等。当然，我不能显示加载/保存菜单，因为我掐掉了所有的图像代码。但是我能够假装用户使用（不可见的）加载/保存屏幕并且请求保存，然后写入卡中。</p><p>I ultimately ended up with a pretty small amount of code that exhibited the problem – but still randomly! Most of the time, it would work, but every once in a while, it would fail. Almost all of the actual Crash Bandicoot code had been removed, but it still happened. This was really baffling: the code that remained wasn’t really doing anything.<br>我最终以一个带有这个bug的很少量的代码结束——但问题仍然随机出现！在大多数情况下没啥问题，但是偶尔会失效。基本上所有古惑狼游戏的实际代码都被移除了，但问题还是会复现。这实在是莫名其妙：留下来的代码基本上都没做什么事。</p><p>At some moment – it was probably 3 am – a thought entered my mind. Reading and writing (I/O) involves precise timing. Whether you’re dealing with a hard drive, a compact flash card, a Bluetooth transmitter – whatever – the low-level code that reads and writes has to do so according to a clock.<br>在那时——估计是凌晨3点——一个想法蹦了出来。读写（I/O）涉及精确定时。无论是硬盘、存储卡、蓝牙发送器——随便啥——做读写的底层代码都是根据时钟来的。</p><p>The clock lets the hardware device – which isn’t directly connected to the CPU – stay in sync with the code the CPU is running. The clock determines the baud rate – the rate at which data is sent from one side to the other. If the timing gets messed up, the hardware or the software – or both – get confused. This is really, really bad, and usually results in data corruption.<br>时钟让不直接连接到CPU的硬件设备和CPU运行的代码同步。时钟决定了波特率——数据从一头传到另一头的速率。如果计时有什么问题，硬件或者软件或者两者都会乱七八糟的。这真的，真的很糟糕，并且通常导致数据损坏。</p><p>What if something in our setup code was messing up the timing somehow? I looked again at the code in the test program for timing-related stuff, and noticed that we set the programmable timer on the PlayStation 1 to 1 kHz (1000 ticks/second). This is relatively fast; it was running at something like 100 Hz in its default state when the PlayStation 1 started up. Most games, therefore, would have this timer running at 100 Hz.<br>如果我们的初始化代码以某种方式弄乱了计时会怎么样？我又看了一遍测试程序中和计时有关的代码，并注意到我们将PS1上的可编程计时器设置到了1kHz（1000跳每秒）。这是比较快了，当PS1启动的时候，默认状态大概是100Hz。因此，大多数游戏将他们的计时器设置为100Hz。</p><p>Andy, the lead (and only other) developer on the game, set the timer to 1 kHz so that the motion calculations in Crash Bandicoot would be more accurate. Andy likes overkill, and if we were going to simulate gravity, we ought to do it as high-precision as possible!<br>这个游戏的带头（和除我外的唯一）开发者Andy，将计时器设置为1kHz，使得古惑狼的动作计算更加准确。Andy喜欢简单粗暴的做法，如果我们要模拟重力，我们应该尽可能的提高精度！</p><p>But what if increasing this timer somehow interfered with the overall timing of the program, and therefore with the clock used to set the baud rate for the memory card?<br>然而如果提高计时器频率莫名其妙的干扰了整个程序的计时，故而将这个计时器设置到存储卡的波特率上会怎样呢？</p><p>I commented the timer code out. I couldn’t make the error happen again. But this didn’t mean it was fixed; the problem only happened randomly. What if I was just getting lucky?<br>我将计时器代码注释掉。然后我就无法复现这个bug了。但是这并不表示bug被修复了，这个问题是随机发生的。万一我只是运气好呢？</p><p>As more days went on, I kept playing with my test program. The bug never happened again. I went back to the full Crash Bandicoot code base, and modified the load/save code to reset the programmable timer to its default setting (100 Hz) before accessing the memory card, then put it back to 1 kHz afterwards. We never saw the read/write problems again.<br>几天过去了，我还是在玩我的测试程序。Bug没有再出现。我又回到完整的古惑狼游戏代码中，修改了加载/保存代码，在访问存储卡之前将可编程计时器重置为默认设置（100Hz），之后设置回1kHz。从此之后没有发现问题再次出现。</p><p>But why?<br>但是…为什么？</p><p>I returned repeatedly to the test program, trying to detect some pattern to the errors that occurred when the timer was set to 1 kHz. Eventually, I noticed that the errors happened when someone was playing with the PlayStation 1 controller. Since I would rarely do this myself – why would I play with the controller when testing the load/save code? – I hadn’t noticed it. But one day one of the artists was waiting for me to finish testing – I’m sure I was cursing at the time – and he was nervously fiddling with the controller. It failed. “Wait, what? Hey, do that again!”<br>我重新回到测试程序上，试着检测当计时器设置为1kHz时出现的那些错误的模式。终于，我注意到这些错误出现在使用PS1手柄的人身上。因为我自己很少这样做，所以我没有注意到（为啥我要在测试加载/保存代码的时候用手柄）。但是有一天我们的美工等我去完成测试（我确定那时候我在爆粗口），而他紧张的摆弄着手柄。卡损坏了。“等下，怎么回事？喂，再来一次！”</p><p>Once I had the insight that the two things were correlated, it was easy to reproduce: start writing to memory card, wiggle controller, corrupt memory card. Sure looked like a hardware bug to me.<br>一旦我发现了这两件事是联系着的，就很容易重现bug：开始写入存储卡，动一下手柄，存储卡损坏。在我看来这完全是硬件bug。</p><p>I went back to Connie and told her what I’d found. She relayed this to one of the hardware engineers who had designed the PlayStation 1. “Impossible,” she was told. “This cannot be a hardware problem.” I told her to ask if I could speak with him.<br>我去找Connie告诉他我的发现。她转述给设计过PS1的硬件工程师。她被告知：“不可能，这不可能是硬件问题。”我跟她说问一下我能不能直接和硬件工程师交流。</p><p>He called me and, in his broken English and my (extremely) broken Japanese, we argued. I finally said, “just let me send you a 30-line test program that makes it happen when you wiggle the controller.” He relented. This would be a waste of time, he assured me, and he was extremely busy with a new project, but he would oblige because we were a very important developer for Sony. I cleaned up my little test program and sent it over.<br>那个工程师给我打电话了，我们争论了起来——他用着他的烂英语，我用着我更烂的日语。我最后说：“我给你一个30行的测试程序，让你在动手柄的时候能够出现这问题。”他答应了。“这是浪费时间”，他向我保证，而他正忙于一个新项目，但因为我们是Sony的重要开发者，他会帮忙看看的。我整理了这个测试程序，然后发送给了他。</p><p>The next evening (we were in LA and he was in Tokyo, so it was evening for me when he came in the next day) he called me and sheepishly apologized. It was a hardware problem.<br>第二天晚上（我们在洛杉矶，而他在东京，所以对于我来说是晚上而他是到了第二天），他给我打电话，很难为情地向我道歉。这确实是个硬件问题。</p><p>I’ve never been totally clear on what the exact problem was, but my impression from what I heard back from Sony HQ was that setting the programmable timer to a sufficiently high clock rate would interfere with things on the motherboard near the timer crystal. One of these things was the baud rate controller for the memory card, which also set the baud rate for the controllers. I’m not a hardware guy, so I’m pretty fuzzy on the details.<br>我还是没有完全搞清楚问题到底在哪，但是我的印象中，从Sony总部的反馈听到的是，如果将可编程计时器设置到足够高的时钟频率，会影响到主板上时钟晶振附近的一些东西。这些东西之一就是存储卡的波特率控制器，而它同时也设置手柄的波特率。我不是搞硬件的，所以对于细节我相当模糊。</p><p>But the gist of it was that crosstalk between individual parts on the motherboard, and the combination of sending data over both the controller port and the memory card port while running the timer at 1 kHz would cause bits to get dropped… and the data lost… and the card corrupted.<br>但是主旨是主板上两个独立部分的串扰，以及手柄接口和存储卡接口数据发送的结合在1kHz的时钟频率下会导致丢位，从而数据丢失，以致卡损坏。</p><p>This is the only time in my entire programming life that I’ve debugged a problem caused by quantum mechanics.<br>这是我整个编程生涯中，唯一一次因为量子力学而debug的问题。</p><p>Footnotes for posterity:<br>后记：</p><p>A few people have pointed out that this bug really wasn’t a product of quantum mechanical effects, any more than any other bug is. Of course I was being hyperbolic mentioning quantum mechanics. But this bug did feel different to me, in that the behavior was – at least at the level of the source code – non-deterministic.<br>有小部分人指出这个bug实际上不是量子力学的副效应，在这点上和其它bug也没什么不同。当然我提到量子力学确实是夸张了。不过这个bug给我的感觉很不相同，特别是它的行为——至少在源代码层面上——不是很具有确定性。</p><p>Some people have said I should have taken more electronics classes. That is absolutely true; I consider myself a “full stack” programmer, but my stack really only goes down to hand-writing assembly code, not to playing with transistors. Perhaps some day I will learn more about the “bare metal”…<br>有人说我应该学习更多的电子线路课程。这当然没毛病；我自称“全栈工程师”，但我的技术栈只开到了手写汇编代码，而没有涉及晶体管之类。也许有一天我会更多地了解“裸金属”。</p><p>Finally, a few have questioned whether a better development methodology would have prevented this kind of bug in the first place. I don’t think so, but it’s possible. I use test-driven development for some coding tasks these days, but it’s doubtful we could have usefully applied these techniques given the constraints of the systems and tools we were using.<br>最后，一些人质疑一种更好的开发方法是否能够首先防止这种错误。我不这么认为，但这是可能的。我现在使用测试驱动开发来完成某些编码任务，但考虑到我们使用的系统和工具的限制，我们可以有效地应用这些技术。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这篇文章翻译自：&lt;a href=&quot;https://www.quora.com/Programming-Interviews/Whats-the-hardest-bug-youve-debugged/answer/Dave-Baggett&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;What’s the hardest bug you’ve debugged?&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;It’s kind of painful to re-live this one. As a programmer, you learn to blame your code first, second, and third… and somewhere around 10,000th you blame the compiler. Well down the list after that, you blame the hardware.&lt;br&gt;回想起这个bug，仍然让我感觉有些痛苦。作为一个程序员，在发现bug时，你学会了首先在自己代码中找问题，一次、两次、三次……或许在测试一万次之后，你会把问题归咎于编译器。只有在这所有的都不起作用之后，你才会把问题归咎于硬件。&lt;/p&gt;
&lt;p&gt;This is my hardware bug story.&lt;br&gt;这是我遭遇硬件bug的故事。&lt;/p&gt;
&lt;p&gt;Among other things, I wrote the memory card (load/save) code for Crash Bandicoot. For a swaggering game coder, this is like a walk in the park; I expected it would take a few days. I ended up debugging that code for six weeks. I did other stuff during that time, but I kept coming back to this bug – a few hours every few days. It was agonizing.&lt;br&gt;抛开别的不说，我曾为古惑狼（Crash Bandicoot，PS1游戏）写存储卡（读写）代码。对于一个自大的游戏程序员，这就像是在公园里散步一样轻松愉快；我预计只要几天就可以写完。我最终用了六个礼拜把那些代码调试完毕。在此期间我也做过一些其他的事情，但却一直绕不开这个bug——每几天内就要花上好几个小时来处理。这个bug实在烦人。&lt;/p&gt;
&lt;p&gt;The symptom was that you’d go to save your progress and it would access the memory card, and almost all the time, it worked normally… But every once in a while the write or read would time out… for no obvious reason. A short write would often corrupt the memory card. The player would go to save, and not only would we not save, we’d wipe their memory card. D’Oh.&lt;br&gt;这个bug的症状是，当你需要保存你的进度时，代码会访问存储卡，而大部分情况下没有什么问题…但是偶尔读写会超时…没有任何明显的原因。一个简短的写入经常毁掉存储卡。玩家要保存进度，我们不仅不保存，还擦除他们存储卡上的全部东西。天哪。&lt;/p&gt;
&lt;p&gt;After a while, our producer at Sony, Connie Booth, began to panic. We obviously couldn’t ship the game with that bug, and after six weeks I still had no clue what the problem was. Via Connie we put the word out to other PlayStation 1 developers – had anybody seen anything like this? Nope. Absolutely nobody had any problems with the memory card system.&lt;br&gt;过了一段时间，我们在Sony的制作人Connie Booth慌了。我们显然不能发布带有这个bug游戏，而六个星期之后我对于问题出在哪一点线索都没有。通过Connie我们向其他PS1开发者求助：有没有人出现过像我们这样的情况？没有。绝对没有任何人在存储卡系统上出现任何问题。&lt;/p&gt;
&lt;p&gt;About the only thing you can do when you run out of ideas debugging is divide and conquer: keep removing more and more of the errant program’s code until you’re left with something relatively small that still exhibits the problem. You keep carving parts away until the only stuff left is where the bug is.&lt;br&gt;在你绞尽脑汁之后，你能做的唯一一个调试方法就是分而治之：一点点去除错误程序中的代码，直到留下的代码相对很少，但仍然表现出问题。像雕刻一样去除没有问题的代码，留下的就是你的bug所在。&lt;/p&gt;
    
    </summary>
    
      <category term="程序设计" scheme="https://zhangshuqiao.org/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"/>
    
    
  </entry>
  
  <entry>
    <title>关于黎曼猜想</title>
    <link href="https://zhangshuqiao.org/2018-09/%E5%85%B3%E4%BA%8E%E9%BB%8E%E6%9B%BC%E7%8C%9C%E6%83%B3/"/>
    <id>https://zhangshuqiao.org/2018-09/关于黎曼猜想/</id>
    <published>2018-09-25T02:48:48.000Z</published>
    <updated>2018-11-29T05:22:07.989Z</updated>
    
    <content type="html"><![CDATA[<p>前几日关于黎曼猜想（Riemann Hypothesis）被证明的消息在网络上炒得沸沸扬扬，菲尔兹奖、阿贝尔奖双料得主Michael Francis Atiyah爵士声称他证明了这个困扰了数学界160年的问题，且其目的是为了研究精细结构常数。然而，在他公布了他的Simple Proof后，却不被学界所看好，甚至遭到了一些尖锐的批评。毕竟，这篇只有五页纸的文章，刨去介绍等内容，并没有展示太多的细节；其证明过程，又依赖于一个存疑的Todd function。如果如证明中所说，黎曼猜想真的指向了精细结构常数，这对于由第一性原理出发构建物理学体系将有极大的启发性，其结果无疑是令人激动的。但是经过计算，却发现文中所声称的极限存在问题，整个理论的正确性难以得到证实。<br>有鉴于此，博主研究该证明过程的计划搁置了（毕竟没有什么价值，大概可以用来提升读Paper的能力#捂脸），还是写篇文章介绍下黎曼猜想本身吧。</p><h2 id="猜想的提出"><a href="#猜想的提出" class="headerlink" title="猜想的提出"></a>猜想的提出</h2><p>时间回到1859年，著名的德国数学家波恩哈德·黎曼（Bernhard Riemann）在他的论文《Über die Anzahl der Primzahlen unter einer gegebenen Größe》中提及了这个著名的猜想。黎曼本人在数学界颇有建树，但他却并没有试图对论文中的猜想给出证明。<br>这个猜想是关于黎曼$\zeta$函数的，该函数的定义为：<br>$$\zeta(s)=\frac{1}{1^s}+\frac{1}{2^s}+\frac{1}{3^s}+\frac{1}{4^s}+\cdots$$<br>注意，$\zeta$函数必须经过解析延拓，才能在全复平面上有定义，稍后将给出解析延拓的过程。<br>而黎曼猜想就是：$\zeta(s)$的所有非平凡零点的实部均为$\frac{1}{2}$。</p><h2 id="zeta-函数的解析延拓"><a href="#zeta-函数的解析延拓" class="headerlink" title="$\zeta$函数的解析延拓"></a>$\zeta$函数的解析延拓</h2><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>在中学数学中，我们所接触到的函数都是实变函数，即从实数集到实数集的映射，写为$f:\mathbb{R}\rightarrow\mathbb{R}$。在接触了虚数单位i和复数后，就可以开始定义复变函数，即复数集到复数集的映射，写为$f:\mathbb{C}\rightarrow\mathbb{C}$。实变函数的定义域被限制在了实轴上，而为了表示出一个与之对应的复变函数，就需要扩充其定义域到复平面上。这样，可以定义出复数域上的各种函数：指数、对数、三角函数等。由于复数的性质，还需要根据枝点规定割线、单值分支等，来确定出函数值。而原本定义域只在复平面上某一区域的复变函数，经过严格的数学推导（例如级数展开等），也可以扩充其定义域。这时，解析延拓的办法应运而生。对于$\zeta(s)$函数而言，非常明显，当$s$取在实轴上（即作为实变函数时），若$s\le 1$，其函数值发散；而$s&gt;1$时收敛。特别的，$s=1$时为调和级数，而$s=2$时由高斯最早计算出了其函数值$\frac{\pi^2}{6}$。<br>在复数域上，可以证明，$\zeta(s)$在$Re(s)&gt;1$上解析。接下来，我们需要将其定义域扩展到全复平面；之前的级数定义将不在对$Re(s)&lt;1$的情况使用，因为它不收敛，无法采用Cauchy和。</p><h3 id="梅林变换"><a href="#梅林变换" class="headerlink" title="梅林变换"></a>梅林变换</h3><p>梅林（Mellin）变换是一个积分变换，它把一个正实数域$\mathbb{R}^+$上的函数变换为一个复数域$\mathbb{C}$上的函数。设$f:\mathbb{R}^+\rightarrow\mathbb{C}$是一个函数，定义：<br>$$\mathcal{M}f(z)=\int_0^{+\infty}f(s)s^z\frac{ds}{s}$$<br>称$\mathcal{M}f:\mathbb{C}\rightarrow\mathbb{C}$为$f$的梅林变换。<br>取$f(s)$为$f_\lambda (s)=e^{-\lambda s}$，则有：<br>\begin{align*}<br>\mathcal{M}f(z)&amp;=\int_0^{+\infty}e^{-\lambda s}s^z\frac{ds}{s}\\<br>&amp;=\lambda^{-z}\int_0^{+\infty}e^{-s}s^{z-1}ds\\<br>&amp;=\lambda^{-z}\Gamma(z)<br>\end{align*}<br>这里的$\Gamma(z)$就是一般数理方程中会涉及到的$\Gamma$函数，其性质不再赘述。<br>记住以上结论，取$\lambda=\pi n^2$，继续构造函数：<br>$$f(s)=\sum_{n=1}^{\infty}f_{\pi n^2}(s)=\sum_{n=1}^{\infty}e^{-\pi n^2 s}$$<br>注意到梅林变换是线性的，这时，<br>\begin{align*}<br>\mathcal{M}f(z)&amp;=\sum_{n=1}^{\infty}\mathcal{M}f_{\pi n^2}(z)\\<br>&amp;=\sum_{n=1}^{\infty}(\pi n^2)^{-z}\Gamma(z)\\<br>&amp;=\pi^{-z}\sum_{n=1}^{\infty}n^{-2z}\Gamma(z)\\<br>&amp;=\pi^{-z}\zeta(2z)\Gamma(z)<br>\end{align*}<br>最后一个等号使用了$\zeta$函数的原始定义。考虑到：<br>$$\mathcal{M}f(z)=\int_0^{+\infty}(\sum_{n=1}^{\infty}e^{-\pi n^2 s})s^{z-1}ds$$<br>于是，利用$\mathcal{M}f(z)$的两个等价表达式，我们得到了一个重要结论：<br>$$\pi^{-z}\zeta(2z)\Gamma(z)=\int_0^{+\infty}(\sum_{n=1}^{\infty}e^{-\pi n^2 s})s^{z-1}ds$$<br>注意，这里的推导并非十分严谨，还需要证明其收敛性，才能交换积分与极限。这要求$Re(z)&gt;\frac{1}{2}$。</p><a id="more"></a><h3 id="泊松求和"><a href="#泊松求和" class="headerlink" title="泊松求和"></a>泊松求和</h3><p>再来看一下Fourier变换<br>$$\mathcal{F}f(x)=\int_{-\infty}^{+\infty}f(t)e^{ixt}dt$$<br>对于足够“好”的函数$f$，可以证明泊松（Poisson）求和公式<br>$$\sum_{n\in\mathbb{Z}}f(n)=\sum_{n\in\mathbb{Z}}\mathcal{F}f(n)$$<br>这部分我们就证明这个公式。<br>假设$f$足够“好”（要多好有多好），定义<br>$$F(t)=\sum_{n\in\mathbb{Z}}f(n+t)$$<br>则$F$是$\mathbb{R}$上周期为$1$的函数，于是可以构造$F$的Fourier级数：令<br>$$c_k=\int_0^1F(t)e^{-2\pi ikt}dt$$<br>是第$k$个Fourier系数，则<br>$$F(t)\sim\sum_{k\in\mathbb{Z}}c_ke^{2\pi ikt}$$<br>而这个系数<br>\begin{align*}<br>c_k&amp;=\int_0^1F(t)e^{-2\pi ikt}dt\\<br>&amp;=\int_0^1\sum_{n\in\mathbb{Z}}f(n+t)e^{-2\pi ik(n+t)}dt\\<br>&amp;=\int_{-\infty}^{+\infty}f(t)e^{-2\pi ikt}dt\\<br>&amp;=\mathcal{F}f(k)<br>\end{align*}<br>从而<br>$$\sum_{n\in\mathbb{Z}}f(n)=F(0)\sim\sum_{k\in\mathbb{Z}}c_k=\sum_{k\in\mathbb{Z}}\mathcal{F}f(k)$$<br>就得到了Poisson求和公式形式上的“证明”。<br>那么$f$究竟要满足什么条件呢？<br>如果周期函数$F\in C^2[0,1]$，就有$F(t)=\sum_{k\in\mathbb{Z}}c_ke^{2\pi ikt}$。因此，我们要求$f$二阶连续可导，并且<br>$$\sum_{n\in\mathbb{Z}}||f||_{[n.n+1],\infty}+||f’||_{[n.n+1],\infty}+||f’’||_{[n.n+1],\infty}&lt;+\infty$$<br>使用导数一致收敛的判别法则，就得到$F\in C^2[0,1]$啦。<br>也就是说，如果$f\in C^2(\mathbb{R})$，并且满足以上条件，就有Poisson求和公式<br>$$\sum_{n\in\mathbb{Z}}f(n)=\sum_{n\in\mathbb{Z}}\mathcal{F}f(n)$$</p><h3 id="解析延拓"><a href="#解析延拓" class="headerlink" title="解析延拓"></a>解析延拓</h3><p>设$\lambda&gt;0$，令<br>\begin{eqnarray*}<br>\theta(\lambda)&amp;=&amp;\sum_{n\in\mathbb{Z}}e^{-\pi n^2\lambda}\\<br>\psi(\lambda)&amp;=&amp;\sum_{n=1}^\infty e^{-\pi n^2\lambda}<br>\end{eqnarray*}<br>很显然$\theta(\lambda)=2\psi(\lambda)+1$。<br>考虑$f(t)=e^{-\pi t^2\lambda}$，计算得$\mathcal{F}f(x)=\frac{1}{\sqrt{\lambda}}e^{-\pi\frac{x^2}{\lambda}}$，而且满足相应条件，因此用Poisson求和公式，<br>$$\sum_{n\in\mathbb{Z}}e^{-\pi n^2\lambda}=\frac{1}{\sqrt{\lambda}}\sum_{n\in\mathbb{Z}}e^{-\pi\frac{n^2}{\lambda}}$$<br>即$\theta(\lambda)=\frac{1}{\sqrt{\lambda}}\theta\left(\frac{1}{\lambda}\right)$。<br>换成$\psi$就是$\psi\left(\frac{1}{\lambda}\right)=\sqrt{\lambda}\psi(\lambda)+\frac{\sqrt{\lambda}-1}{2}$。<br>第二部分的最后，得到了<br>\begin{align*}<br>\pi^{-z}\zeta(2z)\Gamma(z)&amp;=\int_0^{+\infty}\left(\sum_{n=1}^\infty e^{-\pi n^2s}\right)s^{z-1}ds\\<br>&amp;=\int_0^{+\infty}\psi(s)s^{z-1}ds<br>\end{align*}<br>因此<br>\begin{align*}<br>\pi^{-z}\zeta(2z)\Gamma(z)&amp;=\int_0^{+\infty}\psi(s)s^{z-1}ds\\<br>&amp;=\int_1^{+\infty}\psi(s)s^{z-1}ds+\int_0^1\psi(s)s^{z-1}ds\\<br>&amp;=\int_1^{+\infty}\psi(s)s^{z-1}ds+\int_1^{+\infty}\psi\left(\frac{1}{s}\right)s^{1-z}\frac{ds}{s^2}\\<br>&amp;=\int_1^{+\infty}\psi(s)s^{z-1}ds+\int_1^{+\infty}\left(\psi(s)\sqrt{s}+\frac{\sqrt{s}-1}{2}\right)s^{-1-z}ds\\<br>&amp;=\int_1^{+\infty}\psi(s)(s^{z-1}+s^{-z-\frac{1}{2}})ds+\int_1^{+\infty}\frac{s^{-z-\frac{1}{2}}-s^{-z-1}}{2}ds\\<br>&amp;=\int_1^{+\infty}\psi(s)(s^{z-1}+s^{-z-\frac{1}{2}})ds+\frac{1}{2z(2z-1)}<br>\end{align*}<br>以上计算的前提是$Re(z)&gt;\frac{1}{2}$。<br>令$w=2z$，则当$Re(w)&gt;1$时，<br>$$\sqrt{\pi}^{-w}\zeta(w)\Gamma\left(\frac{w}{2}\right)=\int_1^{+\infty}\psi(s)(\sqrt{s}^{w-2}+\sqrt{s}^{-w-1})ds-\frac{1}{w(1-w)}$$<br>现在观察：等号右边是一个亚纯函数（亚纯函数就是“能表示成两个解析函数的商”的函数，或者“没有本性奇点”的函数，两个亚纯函数经过四则运算仍然是亚纯函数），而等号左边的$\sqrt{\pi}^{-w}$、$\Gamma\left(\frac{w}{2}\right)$也都是亚纯函数。这样，上式相当于给出了$\zeta(w)$在$w\in\mathbb{C}$上的定义！</p><h2 id="所有自然数的“和”"><a href="#所有自然数的“和”" class="headerlink" title="所有自然数的“和”"></a>所有自然数的“和”</h2><p>这还没完，试试在等号右边把$w$换为$1-w$，你会发现式子根本没变。这就说明：<br>$$\sqrt{\pi}^{-w}\zeta(w)\Gamma\left(\frac{w}{2}\right)=\sqrt{\pi}^{w-1}\zeta(1-w)\Gamma\left(\frac{1-w}{2}\right)$$<br>现在让$w=-1$，就有<br>$$\sqrt{\pi}\zeta(-1)\Gamma\left(-\frac{1}{2}\right)=\sqrt{\pi}^{-2}\zeta(2)\Gamma(1)$$<br>我们知道<br>$$\zeta(2)=\sum_{n=1}^\infty\frac{1}{n^2}=\frac{\pi^2}{6}$$<br>并且，<br>\begin{eqnarray*}<br>\Gamma(1)&amp;=&amp;1\\<br>\Gamma\left(\frac{1}{2}\right)&amp;=&amp;\sqrt{\pi}\\<br>\Gamma\left(-\frac{1}{2}\right)&amp;=&amp;\frac{\Gamma\left(\frac{1}{2}\right)}{-\frac{1}{2}}=-2\sqrt{\pi}<br>\end{eqnarray*}<br>因此：<br>$$\zeta(-1)=\frac{\sqrt{\pi}^{-2}\zeta(2)\Gamma(1)}{\sqrt{\pi}\Gamma\left(-\frac{1}{2}\right)}=\frac{\frac{\pi^2}{6}}{\sqrt{\pi}^3(-2)\sqrt{\pi}}=-\frac{1}{12}$$<br>我们便得出了全体自然数的“和”为$-\frac{1}{12}$这一结论。</p><h2 id="黎曼猜想与素数"><a href="#黎曼猜想与素数" class="headerlink" title="黎曼猜想与素数"></a>黎曼猜想与素数</h2><h3 id="欧拉乘积公式"><a href="#欧拉乘积公式" class="headerlink" title="欧拉乘积公式"></a>欧拉乘积公式</h3><p>从$\zeta$函数的原始定义出发：<br>$$\zeta(s)=\frac{1}{1^s}+\frac{1}{2^s}+\frac{1}{3^s}+\cdots$$<br>在等式两边同时乘以第二项：<br>$$\frac{1}{2^s}\times\zeta(s)=\frac{1}{2^s}+\frac{1}{4^s}+\frac{1}{6^s}+\cdots$$<br>两式相减得：<br>$$(1-\frac{1}{2^s})\times\zeta(s)=\frac{1}{1^s}+\frac{1}{3^s}+\frac{1}{5^s}+\cdots$$<br>这时，等号右边的分母上已经没有2的倍数了。重复这一过程：<br>$$\frac{1}{3^s}\times(1-\frac{1}{2^s})\zeta(s)=\frac{1}{3^s}+\frac{1}{9^s}+\frac{1}{15^s}+\cdots$$<br>以上两式相减，又有：<br>$$(1-\frac{1}{3^s})(1-\frac{1}{2^s})\zeta(s)=\frac{1}{1^s}+\frac{1}{5^s}+\frac{1}{7^s}+\cdots$$<br>等号右边也没有3的倍数了。无限重复此过程，就有：<br>$$\cdots(1-\frac{1}{11^s})(1-\frac{1}{7^s})(1-\frac{1}{5^s})(1-\frac{1}{3^s})\zeta(s)=1$$<br>即：<br>$$\zeta(s)=\frac{1}{1-\frac{1}{2^s}}\times\frac{1}{1-\frac{1}{3^s}}\times\frac{1}{1-\frac{1}{5^s}}\times\frac{1}{1-\frac{1}{7^s}}\times\cdots$$<br>可以写成：<br>$$\zeta(s)=\sum_n\frac{1}{n^s}=\prod_p\frac{1}{1-p^{-s}}$$<br>这就是欧拉乘积公式，该表达式首先出现在1737年一篇题为《Variae observationes circa series infinitas》（无穷级数的各种观察）的论文中。<br>该恒等式展示了素数与$\zeta$函数间的联系。</p><h3 id="莫比乌斯函数"><a href="#莫比乌斯函数" class="headerlink" title="莫比乌斯函数"></a>莫比乌斯函数</h3><p>奥古斯特·费迪南德·莫比乌斯之后重写了欧拉乘积公式，创造了一个新的求和。首先引入莫比乌斯函数：<br>$$\mu(n)=<br>\begin{cases}<br>1 &amp; n是偶数个不同的素数相乘\\<br>-1 &amp; n是奇数个不同的素数相乘\\<br>0 &amp; n被某个素数的平方整除<br>\end{cases}<br>$$<br>和式用$\mu(n)$表示如下：<br>$$\frac{1}{\zeta(s)}=\sum_{n\in\mathbb{N}}\frac{\mu(n)}{n^s}$$</p><h3 id="素数计数函数"><a href="#素数计数函数" class="headerlink" title="素数计数函数"></a>素数计数函数</h3><p>定义为<br>$$\pi(x)=\sum_{p\le x}1$$<br>表示不超过x的素数个数。<br>在间断点处用左右平均代替更好，重新定义：<br>$$\pi(x)=\frac{1}{2}\left(\sum_{p\le x}1+\sum_{p&lt; x}1\right)$$<br>令<br>$$\Pi(x)=\sum_n\frac{1}{n}\pi(x^{\frac{1}{n}})$$<br>有莫比乌斯反转<br>$$\pi(x)=\sum_n\frac{\mu(n)}{n}\Pi(x^{\frac{1}{n}})$$</p><h3 id="素数定理"><a href="#素数定理" class="headerlink" title="素数定理"></a>素数定理</h3><p>素数定理由高斯和勒让德独立地阐述：<br>$$\mathop{\lim}_{x\rightarrow\infty}\frac{\pi(x)}{\frac{x}{\ln(x)}}=1$$<br>目前人类证明的素数定理的误差界是<br>$$\pi(x)=Li(x)+O\left(x\exp\left({-\frac{A(\ln x)^{0.6}}{(\ln\ln x)^{0.2}}}\right)\right)$$<br>从概率的角度来说，素数定理说明若你随机选择一个自然数$x$，那么该数字为素数的概率约为$\frac{1}{\ln(x)}$。这意味着前$x$个整数中相邻素数之间的平均间隙约为$\ln(x)$。</p><h3 id="对数积分函数"><a href="#对数积分函数" class="headerlink" title="对数积分函数"></a>对数积分函数</h3><p>定义<br>$$Li(x)=\int_2^x\frac{1}{\ln(t)}dt$$<br>称为对数积分函数。<br>那么<br>$$\Pi(x)=Li(x)-\sum_{\rho}Li(x^{\rho})-\ln 2+\int_x^\infty\frac{dt}{t(t^2-1)\ln t}$$<br>其中求和号的$\rho$取$\zeta(s)$的非平凡零点，求和之后通常表现为震荡。至于剩下的常数和积分，对较大的$x$可以忽略。</p><h2 id="未完待续"><a href="#未完待续" class="headerlink" title="未完待续"></a>未完待续</h2><p>敬请期待</p><p>参考文章：<br><a href="https://en.wikipedia.org/wiki/Riemann_hypothesis" target="_blank" rel="noopener">黎曼猜想</a><br><a href="https://zhuanlan.zhihu.com/p/35397224" target="_blank" rel="noopener">为什么全体自然数的和是负十二分之一？</a><br><a href="https://zhuanlan.zhihu.com/p/45240901" target="_blank" rel="noopener">黎曼猜想跟素数分布有怎样的联系</a><br><a href="https://zhuanlan.zhihu.com/p/25055731" target="_blank" rel="noopener">黎曼猜想，及其解释（上）</a><br><a href="https://zhuanlan.zhihu.com/p/25222934" target="_blank" rel="noopener">黎曼猜想，及其解释（下）</a></p><p>拓展阅读：<br><a href="https://terrytao.wordpress.com/2010/04/10/the-euler-maclaurin-formula-bernoulli-numbers-the-zeta-function-and-real-variable-analytic-continuation" target="_blank" rel="noopener">The Euler-Maclaurin formula, Bernoulli numbers, the zeta function, and real-variable analytic continuation</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;前几日关于黎曼猜想（Riemann Hypothesis）被证明的消息在网络上炒得沸沸扬扬，菲尔兹奖、阿贝尔奖双料得主Michael Francis Atiyah爵士声称他证明了这个困扰了数学界160年的问题，且其目的是为了研究精细结构常数。然而，在他公布了他的Simple Proof后，却不被学界所看好，甚至遭到了一些尖锐的批评。毕竟，这篇只有五页纸的文章，刨去介绍等内容，并没有展示太多的细节；其证明过程，又依赖于一个存疑的Todd function。如果如证明中所说，黎曼猜想真的指向了精细结构常数，这对于由第一性原理出发构建物理学体系将有极大的启发性，其结果无疑是令人激动的。但是经过计算，却发现文中所声称的极限存在问题，整个理论的正确性难以得到证实。&lt;br&gt;有鉴于此，博主研究该证明过程的计划搁置了（毕竟没有什么价值，大概可以用来提升读Paper的能力#捂脸），还是写篇文章介绍下黎曼猜想本身吧。&lt;/p&gt;
&lt;h2 id=&quot;猜想的提出&quot;&gt;&lt;a href=&quot;#猜想的提出&quot; class=&quot;headerlink&quot; title=&quot;猜想的提出&quot;&gt;&lt;/a&gt;猜想的提出&lt;/h2&gt;&lt;p&gt;时间回到1859年，著名的德国数学家波恩哈德·黎曼（Bernhard Riemann）在他的论文《Über die Anzahl der Primzahlen unter einer gegebenen Größe》中提及了这个著名的猜想。黎曼本人在数学界颇有建树，但他却并没有试图对论文中的猜想给出证明。&lt;br&gt;这个猜想是关于黎曼$\zeta$函数的，该函数的定义为：&lt;br&gt;$$\zeta(s)=\frac{1}{1^s}+\frac{1}{2^s}+\frac{1}{3^s}+\frac{1}{4^s}+\cdots$$&lt;br&gt;注意，$\zeta$函数必须经过解析延拓，才能在全复平面上有定义，稍后将给出解析延拓的过程。&lt;br&gt;而黎曼猜想就是：$\zeta(s)$的所有非平凡零点的实部均为$\frac{1}{2}$。&lt;/p&gt;
&lt;h2 id=&quot;zeta-函数的解析延拓&quot;&gt;&lt;a href=&quot;#zeta-函数的解析延拓&quot; class=&quot;headerlink&quot; title=&quot;$\zeta$函数的解析延拓&quot;&gt;&lt;/a&gt;$\zeta$函数的解析延拓&lt;/h2&gt;&lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;在中学数学中，我们所接触到的函数都是实变函数，即从实数集到实数集的映射，写为$f:\mathbb{R}\rightarrow\mathbb{R}$。在接触了虚数单位i和复数后，就可以开始定义复变函数，即复数集到复数集的映射，写为$f:\mathbb{C}\rightarrow\mathbb{C}$。实变函数的定义域被限制在了实轴上，而为了表示出一个与之对应的复变函数，就需要扩充其定义域到复平面上。这样，可以定义出复数域上的各种函数：指数、对数、三角函数等。由于复数的性质，还需要根据枝点规定割线、单值分支等，来确定出函数值。而原本定义域只在复平面上某一区域的复变函数，经过严格的数学推导（例如级数展开等），也可以扩充其定义域。这时，解析延拓的办法应运而生。对于$\zeta(s)$函数而言，非常明显，当$s$取在实轴上（即作为实变函数时），若$s\le 1$，其函数值发散；而$s&amp;gt;1$时收敛。特别的，$s=1$时为调和级数，而$s=2$时由高斯最早计算出了其函数值$\frac{\pi^2}{6}$。&lt;br&gt;在复数域上，可以证明，$\zeta(s)$在$Re(s)&amp;gt;1$上解析。接下来，我们需要将其定义域扩展到全复平面；之前的级数定义将不在对$Re(s)&amp;lt;1$的情况使用，因为它不收敛，无法采用Cauchy和。&lt;/p&gt;
&lt;h3 id=&quot;梅林变换&quot;&gt;&lt;a href=&quot;#梅林变换&quot; class=&quot;headerlink&quot; title=&quot;梅林变换&quot;&gt;&lt;/a&gt;梅林变换&lt;/h3&gt;&lt;p&gt;梅林（Mellin）变换是一个积分变换，它把一个正实数域$\mathbb{R}^+$上的函数变换为一个复数域$\mathbb{C}$上的函数。设$f:\mathbb{R}^+\rightarrow\mathbb{C}$是一个函数，定义：&lt;br&gt;$$\mathcal{M}f(z)=\int_0^{+\infty}f(s)s^z\frac{ds}{s}$$&lt;br&gt;称$\mathcal{M}f:\mathbb{C}\rightarrow\mathbb{C}$为$f$的梅林变换。&lt;br&gt;取$f(s)$为$f_\lambda (s)=e^{-\lambda s}$，则有：&lt;br&gt;\begin{align*}&lt;br&gt;\mathcal{M}f(z)&amp;amp;=\int_0^{+\infty}e^{-\lambda s}s^z\frac{ds}{s}\\&lt;br&gt;&amp;amp;=\lambda^{-z}\int_0^{+\infty}e^{-s}s^{z-1}ds\\&lt;br&gt;&amp;amp;=\lambda^{-z}\Gamma(z)&lt;br&gt;\end{align*}&lt;br&gt;这里的$\Gamma(z)$就是一般数理方程中会涉及到的$\Gamma$函数，其性质不再赘述。&lt;br&gt;记住以上结论，取$\lambda=\pi n^2$，继续构造函数：&lt;br&gt;$$f(s)=\sum_{n=1}^{\infty}f_{\pi n^2}(s)=\sum_{n=1}^{\infty}e^{-\pi n^2 s}$$&lt;br&gt;注意到梅林变换是线性的，这时，&lt;br&gt;\begin{align*}&lt;br&gt;\mathcal{M}f(z)&amp;amp;=\sum_{n=1}^{\infty}\mathcal{M}f_{\pi n^2}(z)\\&lt;br&gt;&amp;amp;=\sum_{n=1}^{\infty}(\pi n^2)^{-z}\Gamma(z)\\&lt;br&gt;&amp;amp;=\pi^{-z}\sum_{n=1}^{\infty}n^{-2z}\Gamma(z)\\&lt;br&gt;&amp;amp;=\pi^{-z}\zeta(2z)\Gamma(z)&lt;br&gt;\end{align*}&lt;br&gt;最后一个等号使用了$\zeta$函数的原始定义。考虑到：&lt;br&gt;$$\mathcal{M}f(z)=\int_0^{+\infty}(\sum_{n=1}^{\infty}e^{-\pi n^2 s})s^{z-1}ds$$&lt;br&gt;于是，利用$\mathcal{M}f(z)$的两个等价表达式，我们得到了一个重要结论：&lt;br&gt;$$\pi^{-z}\zeta(2z)\Gamma(z)=\int_0^{+\infty}(\sum_{n=1}^{\infty}e^{-\pi n^2 s})s^{z-1}ds$$&lt;br&gt;注意，这里的推导并非十分严谨，还需要证明其收敛性，才能交换积分与极限。这要求$Re(z)&amp;gt;\frac{1}{2}$。&lt;/p&gt;
    
    </summary>
    
      <category term="其他" scheme="https://zhangshuqiao.org/categories/%E5%85%B6%E4%BB%96/"/>
    
    
      <category term="数学" scheme="https://zhangshuqiao.org/tags/%E6%95%B0%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>月下独酌</title>
    <link href="https://zhangshuqiao.org/2018-09/%E6%9C%88%E4%B8%8B%E7%8B%AC%E9%85%8C/"/>
    <id>https://zhangshuqiao.org/2018-09/月下独酌/</id>
    <published>2018-09-24T10:15:20.000Z</published>
    <updated>2018-11-03T07:48:33.841Z</updated>
    
    <content type="html"><![CDATA[<p><strong>月下独酌</strong><br><em>李白</em><br>花间一壶酒，独酌无相亲。<br>举杯邀明月，对影成三人。<br>月既不解饮，影徒随我身。<br>暂伴月将影，行乐须及春。<br>我歌月徘徊，我舞影零乱。<br>醒时同交欢，醉后各分散。<br>永结无情游，相期邈云汉。</p><p><strong>八月十五夜月</strong><br><em>杜甫</em><br>满月飞明镜，归心折大刀。<br>转蓬行地远，攀桂仰天高。<br>水路疑霜雪，林栖见羽毛。<br>此时瞻白兔，直欲数秋毫。</p><p><strong>十五夜望月</strong><br><em>王建</em><br>中庭地白树栖鸦，冷露无声湿桂花。<br>今夜月明人尽望，不知秋思落谁家！</p><p><strong>南斋玩月</strong><br><em>王昌龄</em><br>高卧南斋时，开帷月初吐。<br>清辉澹水木，演漾在窗户。<br>荏苒几盈虚，澄澄变今古。<br>美人清江畔，是夜越吟苦。<br>千里共如何，微风吹兰杜。</p><p><strong>中秋月</strong><br><em>苏轼</em><br>暮云收尽溢清寒，银汉无声转玉盘。<br>此生此夜不长好，明月明年何处看。</p><p><strong>中秋月</strong><br><em>齐已</em><br>空碧无云露湿衣，众星光外涌清规。<br>东林莫碍渐高势，四海正看当路时。<br>还许分明吟皓魄，肯教幽暗取丹枝。<br>可怜关夜婵娟影，正对五候残酒卮。</p><a id="more"></a><p><strong>关山月</strong><br><em>李白</em><br>明月出天山，苍茫云海间。<br>长风几万里，吹度玉门关。<br>汉下白登道，胡窥青海湾。<br>由来征战地，不见有人还。<br>戍客望边色，思归多苦颜。<br>高楼当此夜，叹息未应闲。</p><p><strong>静夜思</strong><br><em>李白</em><br>床前明月光，疑是地上霜。<br>举头望明月，低头思故乡。</p><p><strong>月夜</strong><br><em>刘方平</em><br>更深月色半人家，北斗阑干南斗斜。<br>今夜偏知春气暖，虫声新透绿窗纱。</p><p><strong>嫦娥</strong><br><em>李商隐</em><br>云母屏风烛影深，长河渐落晓星沈。<br>嫦娥应悔偷灵药，碧海青天夜夜心。</p><p><strong>月夜忆舍弟</strong><br><em>杜甫</em><br>戍鼓断人行，秋边一雁声。<br>露从今夜白，月是故乡明。<br>有弟皆分散，无家问死生。<br>寄书长不达，况乃未休兵。</p><p><strong>望月怀远</strong><br><em>张九龄</em><br>海上生明月，天涯共此时。<br>情人怨遥夜，竟夕起相思！<br>灭烛怜光满，披衣觉露滋。<br>不堪盈手赠，还寝梦佳期。</p><p><strong>霜月</strong><br><em>李商隐</em><br>初闻征雁已无蝉，百尺楼高水接天。<br>青女素娥俱耐冷，月中霜里斗婵娟</p><p><strong>秋宵月下有怀</strong><br><em>孟浩然</em><br>秋空明月悬，光彩露沾湿。<br>惊鹊栖未定，飞萤卷帘入。<br>庭槐寒影疏，邻杵夜声急。<br>佳期旷何许！望望空伫立。</p><p><strong>中秋待月</strong><br><em>陆龟蒙</em><br>转缺霜输上转迟，好风偏似送佳期。<br>帘斜树隔情无限，烛暗香残坐不辞。<br>最爱笙调闻北里，渐看星潆失南箕。<br>何人为校清凉力，欲减初圆及午时。</p><p><strong>倪庄中秋</strong><br><em>元好问</em><br>强饭日逾瘦，狭衣秋已寒。<br>儿童漫相忆，行路岂知难。<br>露气入茅屋，溪声喧石滩。<br>山中夜来月，到晓不曾看。</p><p><strong>八月十五夜桃源玩月</strong><br><em>刘禹锡</em><br>尘中见月心亦闲，况是清秋仙府间。<br>凝光悠悠寒露坠，此时立在最高山。<br>碧虚无云风不起，山上长松山下水。<br>群动悠然一顾中，天高地平千万里。<br>少君引我升玉坛，礼空遥请真仙官。<br>云軿欲下星斗动，天乐一声肌骨寒。<br>金霞昕昕渐东上，轮欹影促犹频望。<br>绝景良时难再并，他年此日应惆怅。</p><p><strong>中秋月</strong><br><em>晏殊</em><br>十轮霜影转庭梧，此夕羁人独向隅。<br>未必素娥无怅恨，玉蟾清冷桂花孤。</p><p><strong>中秋月</strong><br><em>苏轼</em><br>暮云收尽溢清寒，银汉无声转玉盘。<br>此生此夜不长好，明月明年何处看。</p><p><strong>八月十五日夜湓亭望月</strong><br><em>白居易</em><br>昔年八月十五夜，曲江池畔杏园边。<br>今年八月十五夜，湓浦沙头水馆前。<br>西北望乡何处是，东南见月几回圆。<br>昨风一吹无人会，今夜清光似往年。</p><p><strong>天竺寺八月十五日夜桂子</strong><br><em>皮日休</em><br>玉颗珊珊下月轮，殿前拾得露华新。<br>至今不会天中事，应是嫦娥掷与人。</p><p><strong>中秋见月和子由</strong><br><em>苏轼</em><br>明月未出群山高，瑞光千丈生白毫。<br>一杯未尽银阙涌，乱云脱坏如崩涛。<br>谁为天公洗眸子，应费明河千斛水。<br>遂令冷看世间人，照我湛然心不起。<br>西南火星如弹丸，角尾奕奕苍龙蟠。<br>今宵注眼看不见，更许萤火争清寒。<br>何人舣舟昨古汴，千灯夜作鱼龙变。<br>曲折无心逐浪花，低昂赴节随歌板。<br>青荧灭没转山前，浪飐风回岂复坚。<br>明月易低人易散，归来呼酒更重看。<br>堂前月色愈清好，咽咽寒螀鸣露草。<br>卷帘推户寂无人，窗下咿哑唯楚老。<br>南都从事莫羞贫，对月题诗有几人。<br>明朝人事随日出，恍然一梦瑶台客。</p><p><strong>中秋登楼望月</strong><br><em>米芾</em><br>目穷淮海满如银，万道虹光育蚌珍。<br>天上若无修月户，桂枝撑损向西轮。</p><p><strong>明月何皎皎</strong><br><em>佚名</em><br>明月何皎皎，照我罗床帏。<br>夜愁不能寐，揽衣起徘徊。<br>客行虽云乐，不如早旋归。<br>出户独彷徨，愁思当告谁！<br>引领还入房，泪下沾裳衣。</p><p><strong>水调歌头</strong><br><em>苏轼</em><br>明月几时有，把酒问青天。<br>不知天上宫阙，今夕是何年。<br>我欲乘风归去，惟恐琼楼玉宇，高处不胜寒。<br>起舞弄清影，何似在人间。<br>转朱阁，低绮户，照无眠。<br>不应有恨，何事长向别时圆。<br>人有悲欢离合，月有阴晴圆缺，此事古难全。<br>但愿人长久，千里共婵娟。</p><p><strong>西江月</strong><br><em>苏轼</em><br>顷在黄州，春夜行蕲水中。过酒家饮酒，醉。乘月至一溪桥上，解鞍曲肱，醉卧少休。及觉已晓。乱山攒拥，流水铿然，疑非人世也。书此语桥柱上。<br>照野弥弥浅浪，横空隐隐层霄。障泥未解玉骢骄，我欲醉眠芳草。<br>可惜一溪风月，莫教踏碎琼瑶。解鞍欹枕绿杨桥，杜宇一声春晓。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;月下独酌&lt;/strong&gt;&lt;br&gt;&lt;em&gt;李白&lt;/em&gt;&lt;br&gt;花间一壶酒，独酌无相亲。&lt;br&gt;举杯邀明月，对影成三人。&lt;br&gt;月既不解饮，影徒随我身。&lt;br&gt;暂伴月将影，行乐须及春。&lt;br&gt;我歌月徘徊，我舞影零乱。&lt;br&gt;醒时同交欢，醉后各分散。&lt;br&gt;永结无情游，相期邈云汉。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;八月十五夜月&lt;/strong&gt;&lt;br&gt;&lt;em&gt;杜甫&lt;/em&gt;&lt;br&gt;满月飞明镜，归心折大刀。&lt;br&gt;转蓬行地远，攀桂仰天高。&lt;br&gt;水路疑霜雪，林栖见羽毛。&lt;br&gt;此时瞻白兔，直欲数秋毫。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十五夜望月&lt;/strong&gt;&lt;br&gt;&lt;em&gt;王建&lt;/em&gt;&lt;br&gt;中庭地白树栖鸦，冷露无声湿桂花。&lt;br&gt;今夜月明人尽望，不知秋思落谁家！&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;南斋玩月&lt;/strong&gt;&lt;br&gt;&lt;em&gt;王昌龄&lt;/em&gt;&lt;br&gt;高卧南斋时，开帷月初吐。&lt;br&gt;清辉澹水木，演漾在窗户。&lt;br&gt;荏苒几盈虚，澄澄变今古。&lt;br&gt;美人清江畔，是夜越吟苦。&lt;br&gt;千里共如何，微风吹兰杜。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;中秋月&lt;/strong&gt;&lt;br&gt;&lt;em&gt;苏轼&lt;/em&gt;&lt;br&gt;暮云收尽溢清寒，银汉无声转玉盘。&lt;br&gt;此生此夜不长好，明月明年何处看。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;中秋月&lt;/strong&gt;&lt;br&gt;&lt;em&gt;齐已&lt;/em&gt;&lt;br&gt;空碧无云露湿衣，众星光外涌清规。&lt;br&gt;东林莫碍渐高势，四海正看当路时。&lt;br&gt;还许分明吟皓魄，肯教幽暗取丹枝。&lt;br&gt;可怜关夜婵娟影，正对五候残酒卮。&lt;/p&gt;
    
    </summary>
    
      <category term="其他" scheme="https://zhangshuqiao.org/categories/%E5%85%B6%E4%BB%96/"/>
    
    
  </entry>
  
  <entry>
    <title>十个UI设计的基本原理</title>
    <link href="https://zhangshuqiao.org/2018-09/%E5%8D%81%E4%B8%AAUI%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/"/>
    <id>https://zhangshuqiao.org/2018-09/十个UI设计的基本原理/</id>
    <published>2018-09-16T01:52:56.000Z</published>
    <updated>2018-11-21T02:17:14.428Z</updated>
    
    <content type="html"><![CDATA[<p>这篇文章翻译自：<a href="https://blog.teamtreehouse.com/10-user-interface-design-fundamentals" target="_blank" rel="noopener">10 User Interface Design Fundamentals</a></p><p>It’s no great mystery that truly great user interfaces are the ones that are engineered to stay out of the way.<br>真正优秀的用户界面都是那些设计得“不挡路”的——这并不是什么奥秘。<br>‘Staying out of the way’ means not distracting your users. Rather, good UIs let your users complete goals. The result? A reduction in training and support costs, and happier, satisfied and highly engaged users.<br>“不挡路”意味着不会分散用户的注意力。事实上，良好的用户界面可以让你的用户完成目标。结果呢？减少培训和支持的成本，以及让用户更快乐、更满意并被深深吸引。<br>Check out our other <a href="https://teamtreehouse.com/library/topic:design" target="_blank" rel="noopener">design courses</a> at Treehouse.<br>在Treehouse查看我们的其他<a href="https://teamtreehouse.com/library/topic:design" target="_blank" rel="noopener">设计课程</a>。<br>When getting started on a new interface, make sure to remember these fundamentals:<br>在开始设计新的用户界面时，请务必记住以下原则：</p><h2 id="Know-your-user"><a href="#Know-your-user" class="headerlink" title="Know your user"></a>Know your user</h2><p>了解你的用户</p><blockquote><p>“Obsess over customers: when given the choice between obsessing over competitors or customers, always obsess over customers. Start with customers and work backward.” – Jeff Bezos<br>“对顾客的关注：当在关注竞争对手或顾客之间做出选择时，总是应该关注顾客。从顾客开始，用逆向思维工作。” —— Jeff Bezos</p></blockquote><p>Your user’s goals are your goals, so learn them. Restate them, repeat them. Then, learn about your user’s skills and experience, and what they need. Find out what interfaces they like and sit down and watch how they <em>use</em> them. Do not get carried away trying to keep up with the competition by mimicking trendy design styles or adding new features. By focusing on your user first, you will be able to create an interface that lets them achieve their goals.<br>你的用户的目标就是你的目标，因此请了解它们。重申它们，重复它们。然后，了解你的用户的技能和经验，以及他们需要什么。找出他们喜欢的界面，坐下来看看他们如何<em>使用</em>这些界面。不要试图通过模仿时尚的设计风格或添加新功能来跟上竞争对手，而忘乎所以。通过首先关注你的用户，你将能够创建一个让他们完成目标的界面。</p><h2 id="Pay-attention-to-patterns"><a href="#Pay-attention-to-patterns" class="headerlink" title="Pay attention to patterns"></a>Pay attention to patterns</h2><p>注意UI样式</p><p>Users spend the majority of their time on interfaces other than your own (Facebook, MySpace, Blogger, Bank of America, school/university, news websites, etc). There is no need to reinvent the wheel. Those interfaces may solve some of the same problems that users perceive within the one you are creating. By using familiar UI patterns, you will help your users feel at home.<br>用户会将大部分时间花在除你以外的其他界面上（Facebook，MySpace，Blogger，美国银行，学校/大学，新闻网站等等）。没有必要重新发明轮子。这些接口可以解决用户在你正在创建的问题中感知的一些相同问题。通过使用熟悉的UI模式，你将让你的用户有宾至如归的感觉。</p><h2 id="Stay-consistent"><a href="#Stay-consistent" class="headerlink" title="Stay consistent"></a>Stay consistent</h2><p>保持一致性</p><blockquote><p>“The more users’ expectations prove right, the more they will feel in control of the system and the more they will like it.” – Jakob Nielson<br>“越多用户的期望被证明是正确的，他们对系统的控制感越强，他们就会越喜欢它。” —— Jakob Nielson</p></blockquote><p>Your users <em>need</em> consistency. They need to know that once they learn to do something, they will be able to do it again. Language, layout, and design are just a few interface elements that need consistency. A consistent interface enables your users to have a better understanding of how things will work, increasing their efficiency.<br>你的用户<em>需要</em>一致性。他们需要知道，一旦他们学会做某事，他们就能再次做到。语言、布局和设计只是需要一致性的一些界面元素。一致的界面使你的用户能够更好地了解事物的运作方式，从而提高效率。</p><a id="more"></a><h2 id="Use-visual-hierarchy"><a href="#Use-visual-hierarchy" class="headerlink" title="Use visual hierarchy"></a>Use visual hierarchy</h2><p>使用视觉层次结构</p><blockquote><p>“Designers can create normalcy out of chaos; they can clearly communicate ideas through the organizing and manipulating of words and pictures.” – Jeffery Veen, <a href="http://veen.com/artsci" target="_blank" rel="noopener">The Art and Science of Web Design</a><br>“设计师可以摆脱混乱的局面；他们可以通过组织和操纵文字和图片清晰地传达思想。” —— Jeffery Veen，<a href="http://veen.com/artsci" target="_blank" rel="noopener">网页设计的艺术与科学</a></p></blockquote><p>Design your interface in a way that allows the user to focus on what is most important. The size, color, and placement of each element work together, creating a clear path to understanding your interface. A clear hierarchy will go great lengths in reducing the appearance of complexity (even when the actions themselves are complex).<br>以允许用户专注于最重要的方式设计界面。每个元素的大小、颜色和位置协同工作，为理解界面创建了清晰的途径。明确的层次结构将大大减少复杂性的出现（即使行动本身很复杂）。</p><h2 id="Provide-feedback"><a href="#Provide-feedback" class="headerlink" title="Provide feedback"></a>Provide feedback</h2><p>提供反馈信息</p><p>Your interface should at all times speak to your user, when his/her actions are both right and wrong or misunderstood. Always inform your users of actions, changes in state and errors, or exceptions that occur. Visual cues or simple messaging can show the user whether his or her actions have led to the expected result.<br>无论用户的行为正确、错误还是被误解时，你的界面应始终向你的用户提供反馈。始终通知用户操作、状态和错误的改变或发生的异常。视觉提示或简单消息可以向用户显示他或她的行为是否已导致预期结果。</p><h2 id="Be-forgiving"><a href="#Be-forgiving" class="headerlink" title="Be forgiving"></a>Be forgiving</h2><p>对用户宽容</p><p>No matter how clear your design is, people will make mistakes. Your UI should allow for and tolerate user error. Design ways for users to undo actions, and be forgiving with varied inputs (no one likes to start over because he/she put in the wrong birth date format). Also, if the user does cause an error, use your messaging as a teachable situation by showing what action was wrong, and ensure that she/he knows how to prevent the error from occurring again.<br>无论你的设计多么清晰，人们都会犯错误。你的UI应该允许并容忍用户错误。设计用户撤销操作的方式，并对不同的输入进行宽容（没有人希望因为他/她输错了出生日期的格式，就得全部重新输入）。此外，如果用户确实导致错误，请通过显示哪些操作出错来将你的消息传递作为可接受的情况，并确保他/她知道如何防止错误再次发生。<br>A great example can be seen in <a href="http://carsonified.com/blog/design/how-to-increase-sign-ups-with-easier-captchas" target="_blank" rel="noopener">How to increase signups with easier captchas</a>.<br>在<a href="http://carsonified.com/blog/design/how-to-increase-sign-ups-with-easier-captchas" target="_blank" rel="noopener">如何使用更简单的验证码增加注册</a>中可以看到一个很好的例子。</p><h2 id="Empower-your-user"><a href="#Empower-your-user" class="headerlink" title="Empower your user"></a>Empower your user</h2><p>为你的用户提供支持</p><p>Once a user has become experienced with your interface, reward him/her and take off the training wheels. The breakdown of complex tasks into simple steps will become cumbersome and distracting. Providing more abstract ways, like keyboard shortcuts, to accomplish tasks will allow your design to get out of the way.<br>一旦用户熟悉你的界面，奖励他/她并把“辅助轮”取下来（注：就像在学习骑自行车时那样）。将复杂任务分解为简单的步骤将变得麻烦和分散注意力。提供更抽象的方法，如键盘快捷键，来完成任务——这将使你的设计摆脱困境。</p><h2 id="Speak-their-language"><a href="#Speak-their-language" class="headerlink" title="Speak their language"></a>Speak their language</h2><p>说出他们的语言</p><blockquote><p>“If you think every pixel, every icon, every typeface matters, then you also need to believe every letter matters. “ – <a href="https://basecamp.com/books/getting-real" target="_blank" rel="noopener">Getting Real</a><br>“如果你认为每个像素，每个图标，每个字体都很重要，那么你还需要相信每个字母都很重要。” —— <a href="https://basecamp.com/books/getting-real" target="_blank" rel="noopener">Getting Real</a></p></blockquote><p>All interfaces require some level of copywriting. Keep things conversational, not sensational. Provide clear and concise labels for actions and keep your messaging simple. Your users will appreciate it, because they won’t hear you – they will hear themselves and/or their peers.<br>所有接口都需要一定程度的文案。让它们亲切随和，而不是耸人听闻。为操作提供清晰简洁的标签，并使你的消息保持简单。你的用户会很感激，因为他们不会听到你的声音——他们会听到自己和/或他们的同伴的声音。</p><h2 id="Keep-it-simple"><a href="#Keep-it-simple" class="headerlink" title="Keep it simple"></a>Keep it simple</h2><p>把事情简单化</p><blockquote><p>“A modern paradox is that it’s simpler to create complex interfaces because it’s so complex to simplify them.” – Pär Almqvist<br>“一个现代悖论是，创建复杂的界面更简单，因为简化这些界面非常复杂。” —— Pär Almqvist</p></blockquote><p>The best interface designs are <a href="http://www.uie.com/articles/experiencedesign" target="_blank" rel="noopener">invisible</a>. They do not contain UI-bling or unnecessary elements. Instead, the necessary elements are succinct and make sense. Whenever you are thinking about adding a new feature or element to your interface, ask the question, “Does the user really need this?” or “Why does the user want this very clever animated gif?” Are you adding things because you like or want them? Never let your UI ego steal the show.<br>最好的界面设计是<a href="http://www.uie.com/articles/experiencedesign" target="_blank" rel="noopener">无形</a>的。它们不包含UI-bling或不必要的元素。相反，必要的元素是简洁而有意义的。无论何时考虑在界面中添加新功能或元素，都要问“用户真的需要这个吗？”或“为什么用户想要这个巧妙的gif动图？”。你是否只是因为喜欢或想要而添加新东西？永远不要让你的UI自身抢了风头。</p><h2 id="Keep-moving-forward"><a href="#Keep-moving-forward" class="headerlink" title="Keep moving forward"></a>Keep moving forward</h2><p>不忘初心，继续前进</p><p><strong>Grandpa Bud</strong>: If I gave up every time I failed, I would never have invented my fireproof pants!<br>[Pants burn up, revealing his underwear]<br><strong>Grandpa Bud</strong>: Still working the kinks out a bit.<br>from <a href="https://www.imdb.com/title/tt0396555" target="_blank" rel="noopener">Meet the Robinsons</a></p><blockquote><p><strong>巴德爷爷</strong>：如果我每次失败就放弃了，我永远都不会发明我的防火裤！<br>[裤子烧了，露出他的内衣]<br><strong>巴德爷爷</strong>：仍然在努力解决问题。<br>来自<a href="https://www.imdb.com/title/tt0396555" target="_blank" rel="noopener">拜见罗宾逊一家</a></p></blockquote><p><em>Meet the Robinsons</em> is one of my all time favorite movies. Throughout the movie Lewis, the protagonist, is challenged to “keep moving forward.” This is a key principle in UI design.<br><em>拜见罗宾逊一家</em>是我最喜欢的电影之一。在整个电影中，主角刘易斯面临着“继续前进”的挑战。这是UI设计的关键原则。<br>It is often said when developing interfaces that you need to fail fast, and iterate often. When creating a UI, you <em>will</em> make mistakes. Just keep moving forward, and remember to keep your UI out of the way.<br>在开发接口时经常会说你需要快速失败，并经常迭代。在创建UI时，你<em>会</em>犯错误。继续前进，并记住保持你的UI不受影响。</p><p><em>本文由<a href="https://twitter.com/kyle" target="_blank" rel="noopener">Kyle Sollenberger</a>撰写。</em><br><em>This article was written by <a href="https://twitter.com/kyle" target="_blank" rel="noopener">Kyle Sollenberger</a>.</em></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这篇文章翻译自：&lt;a href=&quot;https://blog.teamtreehouse.com/10-user-interface-design-fundamentals&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;10 User Interface Design Fundamentals&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;It’s no great mystery that truly great user interfaces are the ones that are engineered to stay out of the way.&lt;br&gt;真正优秀的用户界面都是那些设计得“不挡路”的——这并不是什么奥秘。&lt;br&gt;‘Staying out of the way’ means not distracting your users. Rather, good UIs let your users complete goals. The result? A reduction in training and support costs, and happier, satisfied and highly engaged users.&lt;br&gt;“不挡路”意味着不会分散用户的注意力。事实上，良好的用户界面可以让你的用户完成目标。结果呢？减少培训和支持的成本，以及让用户更快乐、更满意并被深深吸引。&lt;br&gt;Check out our other &lt;a href=&quot;https://teamtreehouse.com/library/topic:design&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;design courses&lt;/a&gt; at Treehouse.&lt;br&gt;在Treehouse查看我们的其他&lt;a href=&quot;https://teamtreehouse.com/library/topic:design&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;设计课程&lt;/a&gt;。&lt;br&gt;When getting started on a new interface, make sure to remember these fundamentals:&lt;br&gt;在开始设计新的用户界面时，请务必记住以下原则：&lt;/p&gt;
&lt;h2 id=&quot;Know-your-user&quot;&gt;&lt;a href=&quot;#Know-your-user&quot; class=&quot;headerlink&quot; title=&quot;Know your user&quot;&gt;&lt;/a&gt;Know your user&lt;/h2&gt;&lt;p&gt;了解你的用户&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“Obsess over customers: when given the choice between obsessing over competitors or customers, always obsess over customers. Start with customers and work backward.” – Jeff Bezos&lt;br&gt;“对顾客的关注：当在关注竞争对手或顾客之间做出选择时，总是应该关注顾客。从顾客开始，用逆向思维工作。” —— Jeff Bezos&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Your user’s goals are your goals, so learn them. Restate them, repeat them. Then, learn about your user’s skills and experience, and what they need. Find out what interfaces they like and sit down and watch how they &lt;em&gt;use&lt;/em&gt; them. Do not get carried away trying to keep up with the competition by mimicking trendy design styles or adding new features. By focusing on your user first, you will be able to create an interface that lets them achieve their goals.&lt;br&gt;你的用户的目标就是你的目标，因此请了解它们。重申它们，重复它们。然后，了解你的用户的技能和经验，以及他们需要什么。找出他们喜欢的界面，坐下来看看他们如何&lt;em&gt;使用&lt;/em&gt;这些界面。不要试图通过模仿时尚的设计风格或添加新功能来跟上竞争对手，而忘乎所以。通过首先关注你的用户，你将能够创建一个让他们完成目标的界面。&lt;/p&gt;
&lt;h2 id=&quot;Pay-attention-to-patterns&quot;&gt;&lt;a href=&quot;#Pay-attention-to-patterns&quot; class=&quot;headerlink&quot; title=&quot;Pay attention to patterns&quot;&gt;&lt;/a&gt;Pay attention to patterns&lt;/h2&gt;&lt;p&gt;注意UI样式&lt;/p&gt;
&lt;p&gt;Users spend the majority of their time on interfaces other than your own (Facebook, MySpace, Blogger, Bank of America, school/university, news websites, etc). There is no need to reinvent the wheel. Those interfaces may solve some of the same problems that users perceive within the one you are creating. By using familiar UI patterns, you will help your users feel at home.&lt;br&gt;用户会将大部分时间花在除你以外的其他界面上（Facebook，MySpace，Blogger，美国银行，学校/大学，新闻网站等等）。没有必要重新发明轮子。这些接口可以解决用户在你正在创建的问题中感知的一些相同问题。通过使用熟悉的UI模式，你将让你的用户有宾至如归的感觉。&lt;/p&gt;
&lt;h2 id=&quot;Stay-consistent&quot;&gt;&lt;a href=&quot;#Stay-consistent&quot; class=&quot;headerlink&quot; title=&quot;Stay consistent&quot;&gt;&lt;/a&gt;Stay consistent&lt;/h2&gt;&lt;p&gt;保持一致性&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“The more users’ expectations prove right, the more they will feel in control of the system and the more they will like it.” – Jakob Nielson&lt;br&gt;“越多用户的期望被证明是正确的，他们对系统的控制感越强，他们就会越喜欢它。” —— Jakob Nielson&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Your users &lt;em&gt;need&lt;/em&gt; consistency. They need to know that once they learn to do something, they will be able to do it again. Language, layout, and design are just a few interface elements that need consistency. A consistent interface enables your users to have a better understanding of how things will work, increasing their efficiency.&lt;br&gt;你的用户&lt;em&gt;需要&lt;/em&gt;一致性。他们需要知道，一旦他们学会做某事，他们就能再次做到。语言、布局和设计只是需要一致性的一些界面元素。一致的界面使你的用户能够更好地了解事物的运作方式，从而提高效率。&lt;/p&gt;
    
    </summary>
    
      <category term="Web开发" scheme="https://zhangshuqiao.org/categories/Web%E5%BC%80%E5%8F%91/"/>
    
    
  </entry>
  
  <entry>
    <title>手机淘宝的flexible方案</title>
    <link href="https://zhangshuqiao.org/2018-09/%E6%89%8B%E6%9C%BA%E6%B7%98%E5%AE%9D%E7%9A%84flexible%E6%96%B9%E6%A1%88/"/>
    <id>https://zhangshuqiao.org/2018-09/手机淘宝的flexible方案/</id>
    <published>2018-09-15T11:20:25.000Z</published>
    <updated>2018-11-18T08:49:51.241Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>手机淘宝从2014年中开始，全面推行flexible设计。什么叫flexible呢？其实flexible就是responsive的低端形态和基础。对我们来说，最直观的感受就是，在超宽屏幕上，网页显示不会两边留白。以前pc时代大家经常讲的流体布局，其实就是一种flexible design。只不过，流体的表述角度是实现，flexible的表述角度是结果，为了跟高大上的responsive保持一致，我们这里使用了flexible这个说法。<br>讨论方案之前，需要先了解三个关键概念：</p><ul><li>单位英寸像素数（Pixel Per Inch，PPI）：现实世界的一英寸内像素数，决定了屏幕的显示质量</li><li>设备像素比率（Device Pixel Ratio，DPR）：物理像素与逻辑像素（px）的对应关系</li><li>分辨率（Resolution）：屏幕区域的宽高所占像素数</li></ul><p>当我们决定不同屏幕的字体和尺寸的单位时，屏幕的这几个参数非常重要。</p><h2 id="Resolution适配"><a href="#Resolution适配" class="headerlink" title="Resolution适配"></a>Resolution适配</h2><p>一张banner图片，当你面对不同的屏幕时你希望它的行为是怎样的？<br>在这个场景中，我们主要需要面对的是分辨率适配问题，考虑到多数网页都是纵向滚动的，在不同的屏幕尺寸下，banner的行为应该是总是铺满屏幕宽度以及总是保持宽高比。<br>最自然的思路是使用百分比宽度，但是假如使用百分比宽度，即width:100%，我们又有两种思路来实现固定宽高比：一是利用img标签的特性，只设宽度等图片加载完，这种方法会导致大量的重排，并且非固定高度会导致懒加载等功能难以实现，所以果断放弃；二是使用before伪元素的margin撑开高度，这种方法是比较干净的纯css实现，但是不具备任何复用性而且要求特定html结构，所以也只好放弃了。<br>于是，剩下最合适的办法是使用其它相对单位，本来最合适的单位是vw，它的含义是视口宽度，但是这个单位存在严重的兼容问题，所以也只好放弃。<br>最后我们只好配合js来做，硬算也是一条路，但是同样不具备任何可复用性，最终我们选择了rem，我们用js给html设置一个跟屏幕宽度成正比的font-size，然后把元素宽高都用rem作为单位。<br>这是我们目前的线上方案了，它是一个近乎Hack的用法，已知的问题包括：</p><ul><li>某些Android机型会丢掉rem小数部分</li><li>占用了rem单位</li><li>不是纯css方案</li></ul><h2 id="PPI适配"><a href="#PPI适配" class="headerlink" title="PPI适配"></a>PPI适配</h2><p>一段文字，当你面对不同的屏幕时你希望它的行为是怎样的？<br>显然，我们在iPhone3G和iPhone4的Retina屏下面，希望看到的文字尺寸是相同的，也就是说，我们不希望文字在Retina屏尺寸变小，此外，我们在大屏手机上，希望看到更多文字，以及，现在绝大多数的字体文件，是自带一些点阵尺寸的，通常是16px和24px，所以我们不希望出现13px、15px这样的奇葩尺寸。<br>这样的特征决定了，场景1中的rem方案，不适合用到段落文字上。所以段落文字应该使用px作为单位，考虑到Retina，我们利用media query来指定不同的字体，考虑到dpr判定的兼容性，我们用宽度替换来代替：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.a</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">media</span> (min-width: <span class="number">401px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.a</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">24px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>另一种场景，一些标题性文字，希望随着屏幕宽而增大的，我们可以仍然使用rem作为单位。超过35px（个人直观感受）的文字，已经不用太考虑点阵信息了，靠字体的矢量信息也能渲染的很好。</p><h2 id="DPR匹配"><a href="#DPR匹配" class="headerlink" title="DPR匹配"></a>DPR匹配</h2><p>一个区块，设计稿上有1像素边框，当你面对不同的屏幕时你希望它的行为是怎样的？<br>这个场景，需求很简单，设计师希望在任何屏幕上这条线都是1物理像素。<br>好吧，当然这个问题的答案不是写1px那么简单。在retina屏下面，如果你写了这样的meta：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>你将永远无法写出1px宽度的东西，除此之外，inline的SVG等元素，也会按照逻辑像素来渲染，整个页面的清晰度会打折。<br>所以，手机淘宝用JS来动态写meta标签，代码类似这样：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> metaEl = <span class="built_in">document</span>.createElement(<span class="string">'meta'</span>);</span><br><span class="line"><span class="keyword">var</span> scale = isRetina ? <span class="number">0.5</span> : <span class="number">1</span>;</span><br><span class="line">metaEl.setAttribute(<span class="string">'name'</span>, <span class="string">'viewport'</span>);</span><br><span class="line">metaEl.setAttribute(<span class="string">'content'</span>, <span class="string">'initial-scale='</span> + scale + <span class="string">', maximum-scale='</span> + scale + <span class="string">', minimum-scale='</span> + scale + <span class="string">', user-scalable=no'</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">document</span>.documentElement.firstElementChild) &#123;</span><br><span class="line">    <span class="built_in">document</span>.documentElement.firstElementChild.appendChild(metaEl);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> wrap = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">    wrap.appendChild(metaEl);</span><br><span class="line">    <span class="built_in">document</span>.write(wrap.innerHTML);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>总的来说，手机淘宝的flexible方案是综合运用rem和px两种单位+js设置scale和html字体。<br>这些JS的内容，可以在我们开源的库<a href="https://github.com/amfe/ml" target="_blank" rel="noopener">ml</a>中找到，也可以参考<a href="https://github.com/amfe/lib-flexible" target="_blank" rel="noopener">lib-flexible</a>。</p><p>参考文章：<br><a href="http://www.html-js.com/article/2402" target="_blank" rel="noopener">手机淘宝的flexible设计与实现</a><br><a href="http://www.html-js.com/article/2400" target="_blank" rel="noopener">关于webapp中的文字单位的一些捣腾</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;手机淘宝从2014年中开始，全面推行flexible设计。什么叫flexible呢？其实flexible就是responsive的低端形态和
      
    
    </summary>
    
      <category term="Web开发" scheme="https://zhangshuqiao.org/categories/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="CSS" scheme="https://zhangshuqiao.org/tags/CSS/"/>
    
      <category term="HTML" scheme="https://zhangshuqiao.org/tags/HTML/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript的函数调用与this</title>
    <link href="https://zhangshuqiao.org/2018-08/JavaScript%E7%9A%84%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E4%B8%8Ethis/"/>
    <id>https://zhangshuqiao.org/2018-08/JavaScript的函数调用与this/</id>
    <published>2018-08-25T03:54:18.000Z</published>
    <updated>2018-11-18T09:10:26.062Z</updated>
    
    <content type="html"><![CDATA[<p>JavaScript函数有4种调用方式。每种方式的不同方式在于this的初始化。对this关键字有解释：<em>一般而言，在JavaScript中，this指向函数执行时的当前对象。</em>注意this是保留关键字，你不能修改this的值。</p><h2 id="作为一个函数调用"><a href="#作为一个函数调用" class="headerlink" title="作为一个函数调用"></a>作为一个函数调用</h2><p>先看一个最简单的实例，在浏览器中：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line">alert(myFunction()); <span class="comment">// [object Window]</span></span><br></pre></td></tr></table></figure></p><p>而当函数没有被自身的对象调用时，this的值就会变成全局对象。在Web浏览器中全局对象是浏览器窗口（window 对象）。该实例返回this的值是window对象。也就是此函数即为window对象的函数，<code>myFunction()</code>等同于<code>window.myFunction()</code>。但是此处在使用内部函数时存在一个this指向的问题，看下面的例子：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注意此处在node环境和浏览器环境下值不同,</span></span><br><span class="line"><span class="comment">// node环境下必须去掉var使value成为全局变量。</span></span><br><span class="line">value = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myObject = &#123;</span><br><span class="line">    value: <span class="number">1</span>,</span><br><span class="line">    double: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//var that = this;</span></span><br><span class="line">        <span class="keyword">var</span> helper = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.value = add(<span class="keyword">this</span>.value, <span class="keyword">this</span>.value);</span><br><span class="line">        &#125;;</span><br><span class="line">        helper();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">myObject.double();</span><br><span class="line">alert(value); <span class="comment">// 8</span></span><br><span class="line">alert(myObject.value); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure></p><p>在这里的myObject对象中，我们在double这个函数中使用了内部函数并赋值给helper，<strong>但是此处的this.value的this指向了全局对象</strong>，所以在执行这个函数后全局变量value的值变了但Object中的value属性值仍然是1，这不是我们想要的结果。《js语言精粹》中指出这里是语言设计上的一个错误，this应该仍然绑定到外部函数的this变量中。这个设计错误的后果就是方法不能利用内部函数来帮助它工作，因为内部函数的this被绑定了错误的值，所以不能共享该方法对对象的访问权。但是我们可以有一个很容易的解决方案去解决这个问题，对myObject进行修改：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myObject = &#123;</span><br><span class="line">    value: <span class="number">1</span>,</span><br><span class="line">    double: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">var</span> helper = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            that.value = add(that.value, that.value);</span><br><span class="line">        &#125;;</span><br><span class="line">        helper();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">myObject.double();</span><br><span class="line">alert(value); <span class="comment">// 4</span></span><br><span class="line">alert(myObject.value); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure></p><p>这里使用了一个that变量来指向double方法中this的值即myObject本身，这样就可以对myObject对象的属性value进行修改。</p><h2 id="函数作为方法调用"><a href="#函数作为方法调用" class="headerlink" title="函数作为方法调用"></a>函数作为方法调用</h2><p>这种方式即为，一个函数被保存为一个对象的属性，在此时此函数被成为一个方法。调用时this关键字被绑定到该对象，即：<strong>函数作为对象方法调用，会使得this的值成为对象本身。</strong>实例如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myObject = &#123;</span><br><span class="line">    firstName: <span class="string">"John"</span>,</span><br><span class="line">    lastName: <span class="string">"Doe"</span>,</span><br><span class="line">    fullName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.firstName + <span class="string">" "</span> + <span class="keyword">this</span>.lastName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">myObject.fullName(); <span class="comment">//返回 "John Doe"</span></span><br></pre></td></tr></table></figure></p><p>另一个例子：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myObject = &#123;</span><br><span class="line">    value: <span class="number">0</span>,</span><br><span class="line">    increment: <span class="function"><span class="keyword">function</span> (<span class="params">inc</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value += <span class="keyword">typeof</span> inc === <span class="string">'number'</span> ? inc : <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">myObject.increment();</span><br><span class="line"><span class="built_in">console</span>.log(myObject.value); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">myObject.increment(<span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(myObject.value); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></p><p>在此例中，increment方法对myObject对象中的value属性进行增加操作，increment函数中的this即指向myObject对象本身。</p><a id="more"></a><h2 id="构造器调用模式"><a href="#构造器调用模式" class="headerlink" title="构造器调用模式"></a>构造器调用模式</h2><p>如果函数调用前使用了new关键字，则是调用了构造函数。这看起来就像创建了新的函数，但实际上JavaScript函数是重新创建的对象：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params">arg1, arg2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.firstName = arg1;</span><br><span class="line">    <span class="keyword">this</span>.lastName = arg2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// This creates a new object</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="keyword">new</span> myFunction(<span class="string">"John"</span>, <span class="string">"Doe"</span>);</span><br><span class="line">x.firstName; <span class="comment">//返回 "John"</span></span><br></pre></td></tr></table></figure></p><p>构造函数的调用会创建一个新的对象。新对象会继承构造函数的属性和方法。<br>构造函数中this关键字没有任何的值。this的值在函数调用时实例化对象(new object)时创建。</p><p>看另一个例子：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Quo = <span class="function"><span class="keyword">function</span> (<span class="params">string</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.status = string;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Quo.prototype.get_status = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.status;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myQuo = <span class="keyword">new</span> Quo(<span class="string">"confused"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(myQuo.get_status()); <span class="comment">// confused</span></span><br></pre></td></tr></table></figure></p><p>输出结果为confused。在这里使用new来调用时，会创建一个连接到该函数的prototype成员的新对象，同时this会被绑定到这个新对象上。即此时我们创建了myQuo对象，其连接到了Quo的prototype，且创建时的<code>this.status = string;</code>中的this指向这个创建的新对象，status为新对象myQuo的属性，而不是Quo函数prototype的属性，可以做如下验证：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(myQuo.hasOwnProperty(<span class="string">"status"</span>)); <span class="comment">//true</span></span><br></pre></td></tr></table></figure></p><p>作为对比，我们对Quo函数增加一个属性id：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Quo = <span class="function"><span class="keyword">function</span> (<span class="params">string</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.status = string;</span><br><span class="line">&#125;;</span><br><span class="line">Quo.prototype.id = <span class="number">1</span>;</span><br></pre></td></tr></table></figure></p><p>id为Quo构造器函数prototype对象的一个属性，然后再次进行测试：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myQuo = <span class="keyword">new</span> Quo(<span class="string">"confused"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(myQuo.id); <span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(myQuo.hasOwnProperty(<span class="string">"get_status"</span>)); <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(myQuo.hasOwnProperty(<span class="string">"id"</span>)); <span class="comment">//false</span></span><br></pre></td></tr></table></figure></p><p>这里可以看到在创建新对象myQuo时没有id属性和get_status函数，而这里myQuo继承了Quo的id属性，就通过原型链找到了Quo.prototype.id的值。</p><h2 id="Apply调用模式"><a href="#Apply调用模式" class="headerlink" title="Apply调用模式"></a>Apply调用模式</h2><p>在JavaScript中，函数是对象。JavaScript函数有它的属性和方法，<code>call()</code>和<code>apply()</code>就是预定义的函数方法。这两个方法可用于调用函数。<br>对于<code>apply</code>：</p><ul><li>在JavaScript严格模式(strict mode)下，在调用函数时第一个参数会成为this的值，即使该参数不是一个对象。</li><li>在JavaScript非严格模式(non-strict mode)下，如果第一个参数的值是null或undefined，它将使用全局对象替代。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a * b;</span><br><span class="line">&#125;</span><br><span class="line">myFunction.call(myFunction, <span class="number">10</span>, <span class="number">2</span>); <span class="comment">//返回20</span></span><br><span class="line"></span><br><span class="line">myArray = [<span class="number">10</span>,<span class="number">3</span>];</span><br><span class="line">myFunction.apply(<span class="literal">null</span>, myArray); <span class="comment">//返回30</span></span><br></pre></td></tr></table></figure><p>可见两者的区别在于第二个参数：apply传入的是一个参数数组，也就是将多个参数组合成为一个数组传入，而call则作为call的参数传入（从第二个参数开始）。<br>另外一个结合前面定义的Quo构造器调用模式使用的例子：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> statusObject = &#123;</span><br><span class="line">    status: <span class="string">'A-OK'</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> status = Quo.prototype.get_status.apply(statusObject);</span><br><span class="line"><span class="built_in">console</span>.log(status); <span class="comment">// A-OK</span></span><br></pre></td></tr></table></figure></p><p>在这里即使用了apply并将statusObject作为get_status的this，结果即为A-OK。</p><p>以上即为四种函数的调用方法。</p><p>参考文章：<br><a href="https://juejin.im/post/5a17c21bf265da43346f997e" target="_blank" rel="noopener">Javascript的函数调用与this</a><br><a href="https://www.runoob.com/js/js-function-invocation.html" target="_blank" rel="noopener">JavaScript 函数调用</a></p><p>拓展阅读：<br>闭包深入：<a href="https://www.cnblogs.com/onepixel/p/5062456.html" target="_blank" rel="noopener">让你分分钟理解 JavaScript 闭包</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;JavaScript函数有4种调用方式。每种方式的不同方式在于this的初始化。对this关键字有解释：&lt;em&gt;一般而言，在JavaScript中，this指向函数执行时的当前对象。&lt;/em&gt;注意this是保留关键字，你不能修改this的值。&lt;/p&gt;
&lt;h2 id=&quot;作为一个函数调用&quot;&gt;&lt;a href=&quot;#作为一个函数调用&quot; class=&quot;headerlink&quot; title=&quot;作为一个函数调用&quot;&gt;&lt;/a&gt;作为一个函数调用&lt;/h2&gt;&lt;p&gt;先看一个最简单的实例，在浏览器中：&lt;br&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;myFunction&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;alert(myFunction()); &lt;span class=&quot;comment&quot;&gt;// [object Window]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;而当函数没有被自身的对象调用时，this的值就会变成全局对象。在Web浏览器中全局对象是浏览器窗口（window 对象）。该实例返回this的值是window对象。也就是此函数即为window对象的函数，&lt;code&gt;myFunction()&lt;/code&gt;等同于&lt;code&gt;window.myFunction()&lt;/code&gt;。但是此处在使用内部函数时存在一个this指向的问题，看下面的例子：&lt;br&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 注意此处在node环境和浏览器环境下值不同,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// node环境下必须去掉var使value成为全局变量。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;value = &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; myObject = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    value: &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    double: &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//var that = this;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; helper = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.value = add(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.value, &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.value);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        helper();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;add&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;a, b&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; a + b;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;myObject.double();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;alert(value); &lt;span class=&quot;comment&quot;&gt;// 8&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;alert(myObject.value); &lt;span class=&quot;comment&quot;&gt;// 1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在这里的myObject对象中，我们在double这个函数中使用了内部函数并赋值给helper，&lt;strong&gt;但是此处的this.value的this指向了全局对象&lt;/strong&gt;，所以在执行这个函数后全局变量value的值变了但Object中的value属性值仍然是1，这不是我们想要的结果。《js语言精粹》中指出这里是语言设计上的一个错误，this应该仍然绑定到外部函数的this变量中。这个设计错误的后果就是方法不能利用内部函数来帮助它工作，因为内部函数的this被绑定了错误的值，所以不能共享该方法对对象的访问权。但是我们可以有一个很容易的解决方案去解决这个问题，对myObject进行修改：&lt;br&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; myObject = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    value: &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    double: &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; that = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; helper = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            that.value = add(that.value, that.value);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        helper();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;myObject.double();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;alert(value); &lt;span class=&quot;comment&quot;&gt;// 4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;alert(myObject.value); &lt;span class=&quot;comment&quot;&gt;// 2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这里使用了一个that变量来指向double方法中this的值即myObject本身，这样就可以对myObject对象的属性value进行修改。&lt;/p&gt;
&lt;h2 id=&quot;函数作为方法调用&quot;&gt;&lt;a href=&quot;#函数作为方法调用&quot; class=&quot;headerlink&quot; title=&quot;函数作为方法调用&quot;&gt;&lt;/a&gt;函数作为方法调用&lt;/h2&gt;&lt;p&gt;这种方式即为，一个函数被保存为一个对象的属性，在此时此函数被成为一个方法。调用时this关键字被绑定到该对象，即：&lt;strong&gt;函数作为对象方法调用，会使得this的值成为对象本身。&lt;/strong&gt;实例如下：&lt;br&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; myObject = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    firstName: &lt;span class=&quot;string&quot;&gt;&quot;John&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    lastName: &lt;span class=&quot;string&quot;&gt;&quot;Doe&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fullName: &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.firstName + &lt;span class=&quot;string&quot;&gt;&quot; &quot;&lt;/span&gt; + &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.lastName;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;myObject.fullName(); &lt;span class=&quot;comment&quot;&gt;//返回 &quot;John Doe&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;另一个例子：&lt;br&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; myObject = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    value: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    increment: &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;inc&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.value += &lt;span class=&quot;keyword&quot;&gt;typeof&lt;/span&gt; inc === &lt;span class=&quot;string&quot;&gt;&#39;number&#39;&lt;/span&gt; ? inc : &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;myObject.increment();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(myObject.value); &lt;span class=&quot;comment&quot;&gt;// 1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;myObject.increment(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(myObject.value); &lt;span class=&quot;comment&quot;&gt;// 3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在此例中，increment方法对myObject对象中的value属性进行增加操作，increment函数中的this即指向myObject对象本身。&lt;/p&gt;
    
    </summary>
    
      <category term="Web开发" scheme="https://zhangshuqiao.org/categories/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="JavaScript" scheme="https://zhangshuqiao.org/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>入手信达小黑天文望远镜</title>
    <link href="https://zhangshuqiao.org/2018-08/%E5%85%A5%E6%89%8B%E4%BF%A1%E8%BE%BE%E5%B0%8F%E9%BB%91%E5%A4%A9%E6%96%87%E6%9C%9B%E8%BF%9C%E9%95%9C/"/>
    <id>https://zhangshuqiao.org/2018-08/入手信达小黑天文望远镜/</id>
    <published>2018-08-20T15:44:29.000Z</published>
    <updated>2018-11-04T17:10:54.002Z</updated>
    
    <content type="html"><![CDATA[<p>2018年的暑期，诸多天文奇观轮番上演：火星冲日、日偏食、英仙座流星雨，这对天文爱好者来说是绝佳的观测机会。在好基友的怂恿下，博主也正式踏入了天文摄影的巨坑。<br>博主在小学时曾拥有一台700/60入门级伽利略式天文望远镜，但是其使用的经纬仪是纯手动的，调节精度较差；且望远镜本身存在明显的色差，成像效果不佳。为了满足行星摄影的要求，需要入手一台更为可靠的天文望远镜。目前市面上常见的天文望远镜，一般由三部分组成：三脚架（底座），赤道仪（经纬仪），以及望远镜镜筒。镜筒主体根据成像原理划分，有牛顿反射式、马克苏托夫-卡塞格林式和复消色差（APO）式等等。基于其他成像原理的望远镜也能在市面上买到，不过从销量和评价上来看，前文提到的这三种望远镜占主流。在查阅了大量资料，并参考了天文相关贴吧、论坛后，博主决定入手信达小黑天文望远镜。这是一款入门级牛顿反射式望远镜，其焦距750mm，口径150mm，等效光圈较大，适合摄影；赤道仪采用EQ3D，搭配双轴电跟，在通过北极星校准极轴后，即可进行长时间曝光。<br>这是望远镜组装完成的状态：<br><img src="/images/2018-08/IMG_0272.jpg" alt=""><br>安装EF卡口转接环，就可以连接单反相机了：<br><img src="/images/2018-08/IMG_0199.jpg" alt=""><br>8月11日拍摄的日偏食：<br><img src="/images/2018-08/IMG_5639.jpg" alt=""><br>由于望远镜自带的巴罗镜只适用于目镜，为了增加拍照的放大率，博主还购买了一个EF卡口的增倍镜。这是使用增倍镜后拍摄的月球：<br><img src="/images/2018-08/IMG_5767.jpg" alt=""><br>由于视宁度不佳（以及可能的对焦问题），虽然也成功拍摄了土星，但是土星环的辨识度较差：<br><img src="/images/2018-08/IMG_5758.jpg" alt=""><br>仙后座（以及划过天空的飞机航行灯）：<br><img src="/images/2018-08/IMG_5680.jpg" alt=""></p><p>本文更新于2018年9月28日：<br>与学校的青年天文爱好者协会部分（矿里有家的）前辈交流后，发现EQ3D赤道仪和双轴电跟仍有许多不足，可能并不是天文摄影的入门首选。如果有足够多的预算，可以购买NEQ6搭配GOTO，该赤道仪的稳定性与鲁棒性都更胜一筹（当然价格也略高）。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;2018年的暑期，诸多天文奇观轮番上演：火星冲日、日偏食、英仙座流星雨，这对天文爱好者来说是绝佳的观测机会。在好基友的怂恿下，博主也正式踏入了天文摄影的巨坑。&lt;br&gt;博主在小学时曾拥有一台700/60入门级伽利略式天文望远镜，但是其使用的经纬仪是纯手动的，调节精度较差；且望
      
    
    </summary>
    
      <category term="物理" scheme="https://zhangshuqiao.org/categories/%E7%89%A9%E7%90%86/"/>
    
    
      <category term="摄影" scheme="https://zhangshuqiao.org/tags/%E6%91%84%E5%BD%B1/"/>
    
      <category term="天文" scheme="https://zhangshuqiao.org/tags/%E5%A4%A9%E6%96%87/"/>
    
  </entry>
  
  <entry>
    <title>膜法大赛预赛</title>
    <link href="https://zhangshuqiao.org/2018-08/%E8%86%9C%E6%B3%95%E5%A4%A7%E8%B5%9B%E9%A2%84%E8%B5%9B/"/>
    <id>https://zhangshuqiao.org/2018-08/膜法大赛预赛/</id>
    <published>2018-08-17T13:35:23.000Z</published>
    <updated>2018-11-09T04:04:18.736Z</updated>
    
    <content type="html"><![CDATA[<p><a href="/files/膜法大赛预赛.pdf"></a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;/files/膜法大赛预赛.pdf&quot;&gt;&lt;/a&gt;&lt;/p&gt;

      
    
    </summary>
    
      <category term="其他" scheme="https://zhangshuqiao.org/categories/%E5%85%B6%E4%BB%96/"/>
    
    
  </entry>
  
  <entry>
    <title>自己打造一台恩尼格玛密码机</title>
    <link href="https://zhangshuqiao.org/2018-08/%E8%87%AA%E5%B7%B1%E6%89%93%E9%80%A0%E4%B8%80%E5%8F%B0%E6%81%A9%E5%B0%BC%E6%A0%BC%E7%8E%9B%E5%AF%86%E7%A0%81%E6%9C%BA/"/>
    <id>https://zhangshuqiao.org/2018-08/自己打造一台恩尼格玛密码机/</id>
    <published>2018-08-05T05:18:39.000Z</published>
    <updated>2018-11-29T05:21:33.730Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/2018-08/F5YSP9KHMF6R1PD.LARGE.jpg" alt=""></p><p>这篇文章翻译自：<a href="https://www.instructables.com/id/Make-your-own-Enigma-Replica" target="_blank" rel="noopener">MAKE YOUR OWN ENIGMA REPLICA</a><br>在对称加密学当中，恩尼格玛机绝对是承前启后的存在。它将密码学研究从以前的语言文字学中心完全转移到了数学身上。在这里牵涉的密码并不是我们平时邮箱、银行帐号那种狭义概念，那种顶多叫做口令。这里说的密码就是通过某种映射方式，把一篇文章变得面目全非，以达到保密效果；只有特定的转换规律才能将其解密。这篇文章适于电脑控、军事控、历史控、数学控阅读，请做好烧脑准备。</p><p>EDIT: This Instructable has won Second prize in the 2013 Radio Shack Microcontroller Contest. Thank You to all who voted!<br>按：这个作品是2013年无线电单片机竞赛的亚军。感谢所有支持这个作品的你们！<br>EDIT2: An Open Enigma with fake Standup Nixie Tubes like the ones pictured in this Instructable will soon be available as a Special Kickstarter edition.</p><p>This is our very first Instructable and this step by step guide will show you how to build a fully functional electronic replica of the world famous German Enigma machine. This Arduino based Open Source project is able to encrypt &amp; decrypt any Enigma M4 encoded message.<br>这是我们的初号机。以下教程将手把手教你如何完美复刻史上著名的德国恩尼格玛密码机。这个基于Arduino的开源程序能够加解密任何Enigma机M4型（海军型）的信息。<br>This first ever fully functional Open Source Enigma “exact” Replica was inspired by the Kid’s Game to Arduino Enigma Machine by sketchsk3tch.<br>这个第一台全功能开源完美Enigma机复制品是根据sketchsk3tch写的《Kid’s Game to Arduino Enigma Machine（从儿童玩具到Arduino恩尼格玛机）》所作。<br>Using Multiplexing for the LEDs, this circuit with 115 light emitting diodes uses only 38 pins and the 36 push buttons use only 4 pins total thanks to properly placed resistors (and the P-Channel MOSFETs) in the keyboard loop. These 4 16-Segment displays &amp; an LED for each keyboard button would add up quickly the total number of pins required and even the Arduino Mega would have ran out of pins without the 2 methods mentioned above….<br>采用多路复用LED电路，仅用38个针脚的115个发光二极管和4个针脚的36个按键所连接的整个电路，全靠在键盘回路里准确放置的电阻以及P沟道场效应晶体管得以实现。要不然，4个16段显示器，以及每个按键上的LED将大幅增加所需针脚总量——即使用了Arduino Mega板，但如果没用上述两个方法，电路也不能如此简洁。<br>In response to the overwhelming demand, we designed the PCB and made it available through <a href="http://www.stgeotronics.com" target="_blank" rel="noopener">www.stgeotronics.com</a>. Skip to Step 10 &amp; beyond for more info. We also offer it as a complete electronics kit &amp; an assembled &amp; tested complete product.<br>面对电路的超额需求，我们在 <a href="http://www.stgeotronics.com" target="_blank" rel="noopener">http://www.stgeotronics.com</a> 设计了专用的PCB板。直接跳到第10步和以后的步骤可以找到更多信息。同时，我们也发布了测试过的完整电子组装套装。</p><h2 id="Step-1-Proof-of-Concept-on-Breadboard"><a href="#Step-1-Proof-of-Concept-on-Breadboard" class="headerlink" title="Step 1: Proof of Concept on Breadboard"></a>Step 1: Proof of Concept on Breadboard</h2><p>第一步：面包板上的论证<br><img src="/images/2018-08/F3ULXLHHMEXSREA.LARGE.jpg" alt=""><br><img src="/images/2018-08/FQHGSW5HMF6R1XF.LARGE.jpg" alt=""></p><p>Before going all out on the development of this electronic Enigma replica, we wanted to make sure we could properly drive the 16 Segment LEDs. If we can do that, than we will be able to do everything as the rest is only Math…<br>在开始制作电子Enigma机之前，我们先要确保能驱动16段LED显示。如果成功，我们就能做接下来的所有步骤——除了数学上的问题，一切都是浮云。</p><a id="more"></a><h2 id="Step-2-Gather-the-Raw-Materials…"><a href="#Step-2-Gather-the-Raw-Materials…" class="headerlink" title="Step 2: Gather the Raw Materials…"></a>Step 2: Gather the Raw Materials…</h2><p>第二步：万事具备<br><img src="/images/2018-08/FCU4XAXHMEXSQH3.LARGE.jpg" alt=""></p><p>You will need:</p><ul><li>1 Arduino Mega</li><li>26 Alpha Buttons</li><li>26 1/4” Jacks Mono</li><li>10 1/4” Plugs Mono</li><li>36 Pushbuttons</li><li>1 On/Off/On Switch</li><li>4 16Segment Orange</li><li>4 Injection molded 2-Liter Soda Bottle preform (test tubes)</li><li>1 Case Plywood</li><li>1 Hinge &amp; Hooks</li><li>1 Half-Mortise Lock</li><li>1 Perfboard</li><li>38 Resistors 470 Ohms</li><li>40 Resistors 1K Ohms</li><li>7 IRF9Z24N P-Channel MOSFET</li><li>1 Piece of Metal &amp; Spray paint</li></ul><p>你所需要的是：</p><ul><li>1个Arduino Mega 2560板</li><li>26个字母按键</li><li>26个1/4英寸单通道母接口</li><li>10个1/4英寸单通道公接口</li><li>36个机械按钮</li><li>1个单刀三掷开关</li><li>4个16段橙色LED显示</li><li>4个注塑2升汽水瓶罩子</li><li>1个胶合板盒子</li><li>一个铰链</li><li>一个半榫接锁</li><li>一个接线盘</li><li>38个470欧电阻</li><li>40个1千欧电阻</li><li>7个IRF9Z24N P沟道场效应晶体管</li><li>1块金属片以及喷漆。</li></ul><p>Optional:</p><ul><li>Battery Case</li><li>Rechargeable Batteries</li><li>Battery Charger/Connectors</li></ul><p>可选项：</p><ul><li>电池盒</li><li>充电电池</li><li>充电器/充电接头</li></ul><p>If we were to do it again, we wouldn’t use 1/4” Jacks &amp; Plugs as these are pretty big and tend to overwhelm the whole Enigma. Banana plugs &amp; jacks are smaller &amp; closer to the original connectors used by the real German Enigmas.<br>我们真要做的时候，是不会用1/4英寸接口的。它们太大的体积几乎要超过整个恩尼格玛机。香蕉插头体积较小，而且比原版德国Enigma机结合得更紧密些。</p><h2 id="Step-3-Lay-the-Components-Down"><a href="#Step-3-Lay-the-Components-Down" class="headerlink" title="Step 3: Lay the Components Down"></a>Step 3: Lay the Components Down</h2><p>第三步：布置零件<br><img src="/images/2018-08/FVPK1ITHMEXSQHU.LARGE.jpg" alt=""><br><img src="/images/2018-08/FG3UNNCHMEXWMFY.LARGE.jpg" alt=""><br><img src="/images/2018-08/F177H22HM8CXMUF.LARGE.jpg" alt=""><br><img src="/images/2018-08/F5QWPPFHMFQJEKZ.LARGE.jpg" alt=""><br><img src="/images/2018-08/FJ4B8MDHM8CVVF4.LARGE.jpg" alt=""><br><img src="/images/2018-08/FSSAE2EHM8CVVF3.LARGE.jpg" alt=""></p><p>The Radio Shack 6” x 8” Micro Perboard is the perfect size to host all components as it provides just the right amount of space to fit everything on &amp; will fit perfectly inside the Enigma box.<br>6*8寸无线电面包版是最适合放置所有元件的，既不多余也不拥挤，而且和Enigma机盒子内部完美吻合。<br>We started dividing the space on the Perfboard equally between the 3 regions, but realized soon that this would make the electonic Enigma longer than the real one, so we compressed everything down to the proper spacing.<br>最初我们将面包板等分为三块区域，但很快意识到，如此一来，电子版Enigma机将比原版的机械Enigma机长。于是我们将所有零件缩放到正好够占用的空间。<br>Once satisfied with the positioning of each components, next step is soldering.<br>每个元件位置就绪，下一步就是焊接。</p><h2 id="Step-4-Soldering-Soldering-amp-a-Little-More-Soldering"><a href="#Step-4-Soldering-Soldering-amp-a-Little-More-Soldering" class="headerlink" title="Step 4: Soldering, Soldering &amp; a Little More Soldering"></a>Step 4: Soldering, Soldering &amp; a Little More Soldering</h2><p>第四步：我焊，我焊，我焊焊焊……<br><img src="/images/2018-08/FL8IEWNHMFQJENI.LARGE.jpg" alt=""><br><img src="/images/2018-08/F1UE3SZHMFQJENK.LARGE.jpg" alt=""><br><img src="/images/2018-08/F5B1IDKHM8D0839.LARGE.jpg" alt=""><br><img src="/images/2018-08/FCJKFP3HMEXWMPC.LARGE.jpg" alt=""><br><img src="/images/2018-08/FB9KU3WHM8CXMUR.LARGE.jpg" alt=""><br><img src="/images/2018-08/F6ZOVZKHMF6R1YM.LARGE.jpg" alt=""></p><p>OK, this proved to be the most solder I have used on a single project ever. With 18 pins per 16 Segment, times 4 plus 26 keyboard keys + 26 keyboard lamps + a few LEDs &amp; 1 SPDT on/off/on switch, that was a lot of solder.<br>好吧，在单一作品身上，我从没焊接如此多次。16段显示的18个针脚，还有26个字母键乘以每个4个脚，外加26个键盘灯，一些其他LED，一个三掷开关，真乃“成吉思焊”。<br>Our decision to raise the 16 Segment displays up to make them look like old-time Nixie tubes certainly added a lot of solder points!<br>当初我们的决定是使这些16段LED显示看起来像老式电子管的感觉，增加了不少焊点，“巨焊”！<br>Our Arduino Mega Pin assignment:<br>Arduino Mega板上针脚的分配：</p><p>17 Segments:<br>Seg Pin Wire DuinoPin<br>a   2   blue  24<br>b   1   white 22<br>c   16  wh-bl 25<br>d   13  green 31<br>e   9   wh-br 38<br>f   8   brown 36<br>g   6   green 32<br>h   5   wh-or 30<br>k   4   orang 28<br>m   3   wh-bl 26<br>n   17  blue  23<br>p   15  orang 27<br>r   12  wh-gr 33<br>s   11  brown 35<br>t   7   wh-gr 34<br>u   14  wh-or 29<br>dp  10  wh-br 37<br>anode1 18 red 39<br>anode2 18 red 41<br>anode3 18 red 43<br>anode4 18 red 45</p><p>LEDs:<br>1  40<br>2  42<br>3  44<br>4  46<br>5  48</p><p>Lamps:<br>QAP 10<br>WSY 9<br>EDX 8<br>RFC 7<br>TGV 6<br>ZHB 5<br>UJN 4<br>IKM 3<br>OL  2<br>anode1 (First Row)  11<br>anode2 (Second Row) 12<br>anode3 (Third Row)  13</p><p>Function Keys:<br>A0</p><p>Keyboard:<br>First Row A1<br>Second Row A2<br>Third Row A3</p><h2 id="Step-5-Make-a-Box-and-Cut-amp-Drill-the-Top-Plate"><a href="#Step-5-Make-a-Box-and-Cut-amp-Drill-the-Top-Plate" class="headerlink" title="Step 5: Make a Box and Cut &amp; Drill the Top Plate."></a>Step 5: Make a Box and Cut &amp; Drill the Top Plate.</h2><p>第五步：门面工夫——做个盒子钻出面板<br><img src="/images/2018-08/FDK4HNYHMF6R1Z8.LARGE.jpg" alt=""><br><img src="/images/2018-08/FDHCE6MHM8CXMUW.LARGE.jpg" alt=""><br><img src="/images/2018-08/FOTHEI2HM8D527O.LARGE.jpg" alt=""><br><img src="/images/2018-08/FNLRDOJHMEXWMW4.LARGE.jpg" alt=""></p><p>After obtaining the exact dimensions of the original M4 wooden box, we purchased a sheet of plywood &amp; cut it in pieces so we could assemble our case.<br>在原版M4型木盒内得到确定位置数据后，我们买了一块胶合板，将它切块，然后砌盒子。<br>We decided to cut a steel plate from an obsolete rack mounted server as it had just the right thickness of metal for our needs. After making a transparency that showed where every button/lamp was located &amp; cutting it out, we were able to superimpose it on the metal piece and draw each required hole with a sharpie.<br>我们从旧服务器机架上卸了一块钢板，厚度正合需要。将模具（上面早已画好每个按键和灯位，并切好了洞洞）盖在钢板上，然后用记号笔画出需要切出的洞洞。<br>We then spray painted it textured black to look like the real Enigma.<br>接着，我们用喷漆把它涂黑，就像真的Enigma机那样。</p><h2 id="Step-6-Integration-Tests"><a href="#Step-6-Integration-Tests" class="headerlink" title="Step 6: Integration Tests"></a>Step 6: Integration Tests</h2><p>第六步：组装测试<br><img src="/images/2018-08/F9FF43UHMEXWN47.LARGE.jpg" alt=""><br><img src="/images/2018-08/FIITQ0JHM8D083S.LARGE.jpg" alt=""><br><img src="/images/2018-08/F7CENKBHM8D8Z2S.LARGE.jpg" alt=""><br><img src="/images/2018-08/FB7E7EEHM8CVVHM.LARGE.jpg" alt=""><br><img src="/images/2018-08/FHT2F7HHM8D8Z2M.LARGE.jpg" alt=""><br><img src="/images/2018-08/FGQWASPHMFQJERA.LARGE.jpg" alt=""><br><img src="/images/2018-08/FIPCQX8HM8CVVHJ.LARGE.jpg" alt=""></p><p>First is the permanent fitting of the metal plate on top of the perfboard making sure every button is working and every LED can shine.<br>首先把金属板在面包版上永久固定，确保所有按键正常工作，所有LED都能发光。<br>Then is the fitting of this solid assembly into the wooden case ensuring we didn’t introduce a short anywhere.<br>接着就是把这一大坨东东装入木盒，确保没有空隙位置。</p><h2 id="Step-7-Software-Ohhhh…-Ouch"><a href="#Step-7-Software-Ohhhh…-Ouch" class="headerlink" title="Step 7: Software - Ohhhh…. Ouch!"></a>Step 7: Software - Ohhhh…. Ouch!</h2><p>第七步：软件啊，日完软啊！<br><img src="/images/2018-08/FFJ9BVGHMEXSRM6.LARGE.jpg" alt=""><br><img src="/images/2018-08/FHM5VLKHM8D6Q8D.LARGE.jpg" alt=""></p><p>During each hardware assembly phase, we had created small Arduino sketches that would test the specific individual section we were working on:<br>在组装硬件过程中，我们也写了个小型Arduino程序框架，用以测试特定几个需要关注的部分：<br>A code that tests that each keyboard button is read accurately.<br>A second code that tests each of the 10 function buttons.<br>用来测试每个按键信号能准确读取，还有测试10个功能按键的代码。<br>An Enigma_POST (Power On Self Test) sketch that tests that each keyboard lamp can be lit precisely and move each LED through each mode, with some modifications to the original breadboard code to ensure each segment of the 4 16-Segment LEDs is working perfectly.<br>Enigma_POST（上电自检）确保在每种模式下所有键盘等都能准确亮起，在每种模式下每个LED信号都能传送。我们对原本面包板上的代码做了修正，确保4个16段LED显示的每个部件无懈可击。<br>But, even with all these sample codes on hand that tested every piece of hardware on the machine, the task of reproducing the encrypting/decrypting functionality of a real M4 Enigma was a Mathematics tour-de-force!<br>但，即使所有手上的程序片段都说明机器状态完好，重现M4海军型Enigma机加解密功能，数学方面居功至伟。<br>All Arduino sketches will be available on our Github that we are currently setting up.<br>所有的Arduino程序片段即将在我们刚刚建好的<a href="https://github.com/ST-Geotronics" target="_blank" rel="noopener">Github组织</a>中发布。<br>Here is the Enigma_POST sketch:<br>以下是Enigma_POST程序片段（上电自检）：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Enigma Development Code to Test each of the 4 Nixies, the 5 LEDs,</span></span><br><span class="line"><span class="comment">   then Turn On each Lamp in sequence.</span></span><br><span class="line"><span class="comment">   Written by Marc Tessier &amp; James Sanderson 9/8/13</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Define the 16-Segments Pins</span></span><br><span class="line"><span class="keyword">int</span> segment[<span class="number">17</span>] = &#123; <span class="number">24</span>,<span class="number">22</span>,<span class="number">25</span>,<span class="number">31</span>,<span class="number">38</span>,<span class="number">36</span>,<span class="number">32</span>,<span class="number">30</span>,<span class="number">28</span>,<span class="number">26</span>,<span class="number">23</span>,<span class="number">27</span>,<span class="number">33</span>,<span class="number">35</span>,<span class="number">34</span>,<span class="number">29</span>,<span class="number">37</span> &#125;;</span><br><span class="line"><span class="keyword">int</span> anode[<span class="number">4</span>] = &#123; <span class="number">39</span>,<span class="number">41</span>,<span class="number">43</span>,<span class="number">45</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Define the 9 lamps Pins</span></span><br><span class="line"><span class="keyword">int</span> lamp[<span class="number">9</span>] = &#123; <span class="number">10</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">int</span> lanode[<span class="number">3</span>] = &#123; <span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// LTP587P Segments: A,B,C,D,E,F,G,H,K,M,N,P,R,S,T,U,dp              </span></span><br><span class="line">boolean segmentvals[<span class="number">39</span>][<span class="number">17</span>] = &#123;</span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = A</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = B</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = C</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = D</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = E</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = F</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = G</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = H</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = I</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = J</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = K</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = L</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = M</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = N</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = O</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = P</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = Q</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = R</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = S</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = T</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = U</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = V</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = W</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = X</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = Y</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = Z</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = 0</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = 1</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 2</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = 3</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 4</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 5</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 6</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = 7</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 8</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 9</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = Space</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span> &#125;, <span class="comment">// = Full Lit</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;  <span class="comment">// = SS</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// LTP587P Segments: A,B,C,D,E,F,G,H,K,M,N,P,R,S,T,U,dp</span></span><br><span class="line"></span><br><span class="line">boolean lampvals[<span class="number">9</span>][<span class="number">9</span>] = &#123;</span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = Q or A or P</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = W or S or Y</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = E or D or X</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = R or F or C</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = T or G or V</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = Z or H or B</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = U or J or N</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = I or K or M</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span> &#125;  <span class="comment">// = O or L</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> value_row1 = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> value_row2 = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> value_row3 = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">char</span> key = <span class="number">91</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> led1 = <span class="number">40</span>;</span><br><span class="line"><span class="keyword">int</span> led2 = <span class="number">42</span>;</span><br><span class="line"><span class="keyword">int</span> led3 = <span class="number">44</span>;</span><br><span class="line"><span class="keyword">int</span> led4 = <span class="number">46</span>;</span><br><span class="line"><span class="keyword">int</span> led5 = <span class="number">48</span>;</span><br><span class="line"><span class="keyword">int</span> wait = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt;= <span class="number">3</span>; index++) &#123;</span><br><span class="line">        pinMode(anode[index], OUTPUT);</span><br><span class="line">        digitalWrite(anode[index], <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt;= <span class="number">16</span>; index++) &#123;</span><br><span class="line">        pinMode(segment[index], OUTPUT);</span><br><span class="line">        digitalWrite(segment[index], <span class="number">1</span>);</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="comment">// initialize the digital pins as an output.</span></span><br><span class="line">    pinMode(led1, OUTPUT);</span><br><span class="line">    pinMode(led2, OUTPUT);</span><br><span class="line">    pinMode(led3, OUTPUT);</span><br><span class="line">    pinMode(led4, OUTPUT);</span><br><span class="line">    pinMode(led5, OUTPUT);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt;= <span class="number">2</span>; index++) &#123;</span><br><span class="line">        pinMode (lanode[index], OUTPUT);</span><br><span class="line">        digitalWrite (lanode[index], <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt;= <span class="number">8</span>; index++) &#123;</span><br><span class="line">        pinMode(lamp[index], OUTPUT);</span><br><span class="line">        digitalWrite(lamp[index], <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    sixteenSegWrite(<span class="number">0</span>, <span class="number">38</span>);</span><br><span class="line">    sixteenSegWrite(<span class="number">1</span>, <span class="number">38</span>);</span><br><span class="line">    sixteenSegWrite(<span class="number">2</span>, <span class="number">38</span>);</span><br><span class="line">    sixteenSegWrite(<span class="number">3</span>, <span class="number">38</span>);</span><br><span class="line"></span><br><span class="line">    digitalWrite(led1, HIGH); <span class="comment">// turn the LED on (HIGH is the voltage level)</span></span><br><span class="line">    delay(<span class="number">200</span>);               <span class="comment">// wait for a second</span></span><br><span class="line">    digitalWrite(led1, LOW);  <span class="comment">// turn the LED off by making the voltage LOW</span></span><br><span class="line">    delay(wait);              <span class="comment">// wait for a second</span></span><br><span class="line">    digitalWrite(led2, HIGH); <span class="comment">// turn the LED on (HIGH is the voltage level)</span></span><br><span class="line">    delay(<span class="number">200</span>);               <span class="comment">// wait for a second</span></span><br><span class="line">    digitalWrite(led2, LOW);  <span class="comment">// turn the LED off by making the voltage LOW</span></span><br><span class="line">    delay(wait);              <span class="comment">// wait for a second</span></span><br><span class="line">    digitalWrite(led3, HIGH); <span class="comment">// turn the LED on (HIGH is the voltage level)</span></span><br><span class="line">    delay(<span class="number">200</span>);               <span class="comment">// wait for a second</span></span><br><span class="line">    digitalWrite(led3, LOW);  <span class="comment">// turn the LED off by making the voltage LOW</span></span><br><span class="line">    delay(wait);              <span class="comment">// wait for a second</span></span><br><span class="line">    digitalWrite(led4, HIGH); <span class="comment">// turn the LED on (HIGH is the voltage level)</span></span><br><span class="line">    delay(<span class="number">200</span>);               <span class="comment">// wait for a second</span></span><br><span class="line">    digitalWrite(led4, LOW);  <span class="comment">// turn the LED off by making the voltage LOW</span></span><br><span class="line">    delay(wait);              <span class="comment">// wait for a second</span></span><br><span class="line">    digitalWrite(led5, HIGH); <span class="comment">// turn the LED on (HIGH is the voltage level)</span></span><br><span class="line">    delay(<span class="number">200</span>);               <span class="comment">// wait for a second</span></span><br><span class="line">    digitalWrite(led5, LOW);  <span class="comment">// turn the LED off by making the voltage LOW</span></span><br><span class="line">    delay(wait);              <span class="comment">// wait for a second</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt;= <span class="number">2</span>; index++) &#123;</span><br><span class="line">        digitalWrite(lanode[index], <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> mychar = <span class="number">0</span>; mychar &lt; <span class="number">9</span>; mychar++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> sindex = <span class="number">0</span>; sindex &lt; <span class="number">9</span>; sindex++) &#123;</span><br><span class="line">                digitalWrite(lamp[sindex], lampvals[mychar][sindex]);</span><br><span class="line">                delay(<span class="number">30</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        digitalWrite(lanode[index], <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sixteenSegWrite</span><span class="params">(<span class="keyword">int</span> digit, <span class="keyword">int</span> character)</span> </span>&#123;</span><br><span class="line">    digitalWrite(anode[digit],<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; <span class="number">17</span>; index++) &#123;</span><br><span class="line">        digitalWrite(segment[index], segmentvals[character][index]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="Step-8-More-Software"><a href="#Step-8-More-Software" class="headerlink" title="Step 8: More Software!"></a>Step 8: More Software!</h2><p>第八步：再多一些软件！<br><img src="/images/2018-08/FE72PL9HMFQJEWD.LARGE.jpg" alt=""><br><img src="/images/2018-08/FV4474FHMF6R23U.LARGE.jpg" alt=""><br><img src="/images/2018-08/F0WOJNDHM8D085H.LARGE.jpg" alt=""><br><img src="/images/2018-08/FNWA7V2HMEXWNHT.LARGE.jpg" alt=""><br><img src="/images/2018-08/FXVDU5LHMEXSRP2.LARGE.jpg" alt=""><br><img src="/images/2018-08/FEM6HKTHMF6R23W.LARGE.jpg" alt=""><br><img src="/images/2018-08/F0LV9DXHMFQJEWH.LARGE.jpg" alt=""><br><img src="/images/2018-08/F3FLAQIHMF6R23V.LARGE.jpg" alt=""><br><img src="/images/2018-08/FS9DTJ4HMEXSROL.LARGE.jpg" alt=""></p><p>So we first created a function for each mode the Enigma operates in:<br>首先，我们写了个函数，给每个Enigma机工作模式用。<br>In Mode 0, Default Mode, the Enigma is nothing but a simple typewriter with a Marquee that displays its Model Number.<br>在模式0、默认模式，Enigma机仅仅是一台普通打字机，以跑马灯方式显示它的型号。<br>Mode 1 allows the user to select the 3 (out of 8) Rotors he will use along with which one (of the 2) Reflector he wants to use.<br>模式1下，允许用户从八个转子中选取三个，两个反射器中选择一个进行使用。<br>In Mode 2, the user can select the Internal position of each Rotor.<br>模式2下，允许用户排列转子次序。<br>Mode 3 is used to specify the starting (external) position of each Rotor.<br>模式3用于自定义转子初始字母排列。<br>In Mode 4, a user can enter up to 10 Swapped pairs of letters.<br>选择模式4，用户最多可以使用接线板上10对交换字母排列。<br>Mode 5 is Run mode and at that point, the Enigma will encrypt or decrypt any letter typed on the keyboard.<br>模式5是运行模式，此时Enigma机能加解密任何从键盘录入的信息。<br>Here is the Complete sketch that runs the whole Enigma:<br>以下是整个Enigma机工作流程完整程序片段：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* S&amp;T GeoTronics Enigma Code. This Arduino Mega custom shield is programmed to replicate</span></span><br><span class="line"><span class="comment">   exactly the behavior of a true German M4 Enigma machine.</span></span><br><span class="line"><span class="comment">   It uses 4 16-Segment units, 5 LEDs, 26 Lamps setup as keyboard, 26 keyboard buttons</span></span><br><span class="line"><span class="comment">   &amp; 10 Function keys. The 115 light emitting diodes are charlie-plexed to minimize the</span></span><br><span class="line"><span class="comment">   amount of pins needed down to 38 and all 36 pushbuttons keys are sharing a total of 4 pins.</span></span><br><span class="line"><span class="comment">   Designed, assembled &amp; programmed by Marc Tessier &amp; James Sanderson 9/20/13</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// Define the variables</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">long</span> time = millis();</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">long</span> otime = time;</span><br><span class="line"><span class="keyword">int</span> inpin[<span class="number">4</span>] = &#123; A0, A1, A2, A3 &#125;;</span><br><span class="line"><span class="keyword">int</span> inval[<span class="number">4</span>] = &#123; <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span> &#125;;</span><br><span class="line"><span class="keyword">int</span> keyval = <span class="number">100</span>;</span><br><span class="line">boolean windex = <span class="number">0</span>;</span><br><span class="line">boolean windex1 = <span class="number">0</span>;</span><br><span class="line">boolean windex2 = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> lampval = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> procesval = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> procesvala = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> mode = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">long</span> mtime;</span><br><span class="line"><span class="keyword">int</span> mdex = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Define each Nixie character</span></span><br><span class="line"><span class="keyword">int</span> dig1 = <span class="number">37</span>;</span><br><span class="line"><span class="keyword">int</span> dig2 = <span class="number">37</span>;</span><br><span class="line"><span class="keyword">int</span> dig3 = <span class="number">37</span>;</span><br><span class="line"><span class="keyword">int</span> dig4 = <span class="number">37</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> data[<span class="number">36</span>] = &#123; <span class="number">36</span>,<span class="number">36</span>,<span class="number">36</span>,<span class="number">36</span>,<span class="number">18</span>,<span class="number">39</span>,<span class="number">19</span>,<span class="number">36</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">14</span>,<span class="number">19</span>,<span class="number">17</span>,<span class="number">14</span>,<span class="number">13</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">18</span>,<span class="number">36</span>,<span class="number">4</span>,<span class="number">13</span>,<span class="number">8</span>,<span class="number">6</span>,<span class="number">12</span>,<span class="number">0</span>,<span class="number">36</span>,<span class="number">12</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">10</span>,<span class="number">36</span>,<span class="number">30</span>,<span class="number">36</span>,<span class="number">36</span>,<span class="number">36</span>,<span class="number">36</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Define the 16-Segments Pins as 2 Arrays</span></span><br><span class="line"><span class="keyword">int</span> segment[<span class="number">17</span>] = &#123; <span class="number">24</span>,<span class="number">22</span>,<span class="number">25</span>,<span class="number">31</span>,<span class="number">38</span>,<span class="number">36</span>,<span class="number">32</span>,<span class="number">30</span>,<span class="number">28</span>,<span class="number">26</span>,<span class="number">23</span>,<span class="number">27</span>,<span class="number">33</span>,<span class="number">35</span>,<span class="number">34</span>,<span class="number">29</span>,<span class="number">37</span> &#125;; <span class="comment">//cathode array</span></span><br><span class="line"><span class="keyword">int</span> anode[<span class="number">4</span>] = &#123; <span class="number">39</span>,<span class="number">41</span>,<span class="number">43</span>,<span class="number">45</span> &#125;; <span class="comment">//annode array commin annode</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Define the 26 Lamps as a 2D Array</span></span><br><span class="line"><span class="keyword">int</span> lamparray[<span class="number">26</span>][<span class="number">2</span>] = &#123;</span><br><span class="line">    &#123;<span class="number">12</span>,<span class="number">10</span>&#125;, &#123;<span class="number">13</span>,<span class="number">5</span>&#125;, &#123;<span class="number">13</span>,<span class="number">7</span>&#125;, &#123;<span class="number">12</span>,<span class="number">8</span>&#125;, &#123;<span class="number">11</span>,<span class="number">8</span>&#125;, &#123;<span class="number">12</span>,<span class="number">7</span>,&#125;, &#123;<span class="number">12</span>,<span class="number">6</span>&#125;, &#123;<span class="number">12</span>,<span class="number">5</span>&#125;, &#123;<span class="number">11</span>,<span class="number">3</span>&#125;,</span><br><span class="line">    &#123;<span class="number">12</span>,<span class="number">4</span>&#125;, &#123;<span class="number">12</span>,<span class="number">3</span>&#125;, &#123;<span class="number">13</span>,<span class="number">2</span>&#125;, &#123;<span class="number">13</span>,<span class="number">3</span>&#125;, &#123;<span class="number">13</span>,<span class="number">4</span>&#125;, &#123;<span class="number">11</span>,<span class="number">2</span>&#125;, &#123;<span class="number">13</span>,<span class="number">10</span>&#125;, &#123;<span class="number">11</span>,<span class="number">10</span>&#125;, &#123;<span class="number">11</span>,<span class="number">7</span>&#125;,</span><br><span class="line">    &#123;<span class="number">12</span>,<span class="number">9</span>&#125;, &#123;<span class="number">11</span>,<span class="number">6</span>&#125;, &#123;<span class="number">11</span>,<span class="number">4</span>&#125;, &#123;<span class="number">13</span>,<span class="number">6</span>&#125;, &#123;<span class="number">11</span>,<span class="number">9</span>&#125;, &#123;<span class="number">13</span>,<span class="number">8</span>&#125;, &#123;<span class="number">13</span>,<span class="number">9</span>&#125;, &#123;<span class="number">11</span>,<span class="number">5</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  Define the 12 Lamp Pins for initialization</span></span><br><span class="line"><span class="keyword">int</span> lamppin[<span class="number">12</span>] = &#123; <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span> &#125;; <span class="comment">//2 to 10 cathode, 11 to 13 common annode</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Define each LTP587P Segments: A,B,C,D,E,F,G,H,K,M,N,P,R,S,T,U,dp              </span></span><br><span class="line">boolean segmentvals[<span class="number">40</span>][<span class="number">17</span>] = &#123;</span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = A 0</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = B 1</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = C 2</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = D 3</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = E 4</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = F 5</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = G 6</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = H 7</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = I 8</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = J 9</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = K 10</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = L 11</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = M 12</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = N 13</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = O 14</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = P 15</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = Q 16</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = R 17</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = S 18</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = T 19</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = U 20</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = V 21</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = W 22</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = X 23</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = Y 24</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = Z 25</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = 0 26</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = 1 27</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 2 28</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = 3 29</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 4 30</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 5 31</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 6 32</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = 7 33</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 8 34</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 9 35</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = Space 36</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span> &#125;, <span class="comment">// = Full Lit 37</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = SS 38</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;  <span class="comment">// = &amp; 39</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// LTP587P Segments: A,B,C,D,E,F,G,H,K,M,N,P,R,S,T,U,dp</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Define the 5 Mode LEDs</span></span><br><span class="line"><span class="keyword">int</span> led1 = <span class="number">40</span>;</span><br><span class="line"><span class="keyword">int</span> led2 = <span class="number">42</span>;</span><br><span class="line"><span class="keyword">int</span> led3 = <span class="number">44</span>;</span><br><span class="line"><span class="keyword">int</span> led4 = <span class="number">46</span>;</span><br><span class="line"><span class="keyword">int</span> led5 = <span class="number">48</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//4,10,12,5,11,6,3,16,21,25,13,19,14,22,24,7,23,20,18,15,0,8,1,17,2,9</span></span><br><span class="line"><span class="comment">//Define the rotor values A B C D E F G H I J K L M N O P Q</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> rotorvals[<span class="number">12</span>][<span class="number">78</span>] = &#123;</span><br><span class="line">    &#123; <span class="number">4</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">5</span>,<span class="number">11</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">16</span>,<span class="number">21</span>,<span class="number">25</span>,<span class="number">13</span>,<span class="number">19</span>,<span class="number">14</span>,<span class="number">22</span>,<span class="number">24</span>,<span class="number">7</span>,<span class="number">123</span>,<span class="number">20</span>,<span class="number">18</span>,<span class="number">15</span>,<span class="number">0</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">17</span>,<span class="number">2</span>,<span class="number">9</span>,</span><br><span class="line">      <span class="number">4</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">5</span>,<span class="number">11</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">16</span>,<span class="number">21</span>,<span class="number">25</span>,<span class="number">13</span>,<span class="number">19</span>,<span class="number">14</span>,<span class="number">22</span>,<span class="number">24</span>,<span class="number">7</span>,<span class="number">123</span>,<span class="number">20</span>,<span class="number">18</span>,<span class="number">15</span>,<span class="number">0</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">17</span>,<span class="number">2</span>,<span class="number">9</span>,</span><br><span class="line">      <span class="number">4</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">5</span>,<span class="number">11</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">16</span>,<span class="number">21</span>,<span class="number">25</span>,<span class="number">13</span>,<span class="number">19</span>,<span class="number">14</span>,<span class="number">22</span>,<span class="number">24</span>,<span class="number">7</span>,<span class="number">123</span>,<span class="number">20</span>,<span class="number">18</span>,<span class="number">15</span>,<span class="number">0</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">17</span>,<span class="number">2</span>,<span class="number">9</span> &#125;, <span class="comment">// wheel 1</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">118</span>,<span class="number">8</span>,<span class="number">17</span>,<span class="number">20</span>,<span class="number">23</span>,<span class="number">1</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">22</span>,<span class="number">19</span>,<span class="number">12</span>,<span class="number">2</span>,<span class="number">16</span>,<span class="number">6</span>,<span class="number">25</span>,<span class="number">13</span>,<span class="number">15</span>,<span class="number">24</span>,<span class="number">5</span>,<span class="number">21</span>,<span class="number">14</span>,<span class="number">4</span>,</span><br><span class="line">      <span class="number">0</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">118</span>,<span class="number">8</span>,<span class="number">17</span>,<span class="number">20</span>,<span class="number">23</span>,<span class="number">1</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">22</span>,<span class="number">19</span>,<span class="number">12</span>,<span class="number">2</span>,<span class="number">16</span>,<span class="number">6</span>,<span class="number">25</span>,<span class="number">13</span>,<span class="number">15</span>,<span class="number">24</span>,<span class="number">5</span>,<span class="number">21</span>,<span class="number">14</span>,<span class="number">4</span>,</span><br><span class="line">      <span class="number">0</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">118</span>,<span class="number">8</span>,<span class="number">17</span>,<span class="number">20</span>,<span class="number">23</span>,<span class="number">1</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">22</span>,<span class="number">19</span>,<span class="number">12</span>,<span class="number">2</span>,<span class="number">16</span>,<span class="number">6</span>,<span class="number">25</span>,<span class="number">13</span>,<span class="number">15</span>,<span class="number">24</span>,<span class="number">5</span>,<span class="number">21</span>,<span class="number">14</span>,<span class="number">4</span> &#125;, <span class="comment">// wheel 2</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">11</span>,<span class="number">2</span>,<span class="number">15</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">23</span>,<span class="number">21</span>,<span class="number">25</span>,<span class="number">13</span>,<span class="number">24</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">22</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">10</span>,<span class="number">112</span>,<span class="number">20</span>,<span class="number">18</span>,<span class="number">16</span>,<span class="number">14</span>,</span><br><span class="line">      <span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">11</span>,<span class="number">2</span>,<span class="number">15</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">23</span>,<span class="number">21</span>,<span class="number">25</span>,<span class="number">13</span>,<span class="number">24</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">22</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">10</span>,<span class="number">112</span>,<span class="number">20</span>,<span class="number">18</span>,<span class="number">16</span>,<span class="number">14</span>,</span><br><span class="line">      <span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">11</span>,<span class="number">2</span>,<span class="number">15</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">23</span>,<span class="number">21</span>,<span class="number">25</span>,<span class="number">13</span>,<span class="number">24</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">22</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">10</span>,<span class="number">112</span>,<span class="number">20</span>,<span class="number">18</span>,<span class="number">16</span>,<span class="number">14</span> &#125;, <span class="comment">// wheel 3</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">4</span>,<span class="number">18</span>,<span class="number">14</span>,<span class="number">21</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">9</span>,<span class="number">0</span>,<span class="number">24</span>,<span class="number">116</span>,<span class="number">20</span>,<span class="number">8</span>,<span class="number">17</span>,<span class="number">7</span>,<span class="number">23</span>,<span class="number">11</span>,<span class="number">13</span>,<span class="number">5</span>,<span class="number">19</span>,<span class="number">6</span>,<span class="number">10</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">12</span>,<span class="number">22</span>,<span class="number">1</span>,</span><br><span class="line">      <span class="number">4</span>,<span class="number">18</span>,<span class="number">14</span>,<span class="number">21</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">9</span>,<span class="number">0</span>,<span class="number">24</span>,<span class="number">116</span>,<span class="number">20</span>,<span class="number">8</span>,<span class="number">17</span>,<span class="number">7</span>,<span class="number">23</span>,<span class="number">11</span>,<span class="number">13</span>,<span class="number">5</span>,<span class="number">19</span>,<span class="number">6</span>,<span class="number">10</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">12</span>,<span class="number">22</span>,<span class="number">1</span>,</span><br><span class="line">      <span class="number">4</span>,<span class="number">18</span>,<span class="number">14</span>,<span class="number">21</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">9</span>,<span class="number">0</span>,<span class="number">24</span>,<span class="number">116</span>,<span class="number">20</span>,<span class="number">8</span>,<span class="number">17</span>,<span class="number">7</span>,<span class="number">23</span>,<span class="number">11</span>,<span class="number">13</span>,<span class="number">5</span>,<span class="number">19</span>,<span class="number">6</span>,<span class="number">10</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">12</span>,<span class="number">22</span>,<span class="number">1</span> &#125;, <span class="comment">// wheel 4</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">21</span>,<span class="number">25</span>,<span class="number">1</span>,<span class="number">17</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">19</span>,<span class="number">24</span>,<span class="number">20</span>,<span class="number">15</span>,<span class="number">18</span>,<span class="number">3</span>,<span class="number">13</span>,<span class="number">7</span>,<span class="number">11</span>,<span class="number">23</span>,<span class="number">0</span>,<span class="number">22</span>,<span class="number">12</span>,<span class="number">9</span>,<span class="number">16</span>,<span class="number">14</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">110</span>,</span><br><span class="line">      <span class="number">21</span>,<span class="number">25</span>,<span class="number">1</span>,<span class="number">17</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">19</span>,<span class="number">24</span>,<span class="number">20</span>,<span class="number">15</span>,<span class="number">18</span>,<span class="number">3</span>,<span class="number">13</span>,<span class="number">7</span>,<span class="number">11</span>,<span class="number">23</span>,<span class="number">0</span>,<span class="number">22</span>,<span class="number">12</span>,<span class="number">9</span>,<span class="number">16</span>,<span class="number">14</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">110</span>,</span><br><span class="line">      <span class="number">21</span>,<span class="number">25</span>,<span class="number">1</span>,<span class="number">17</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">19</span>,<span class="number">24</span>,<span class="number">20</span>,<span class="number">15</span>,<span class="number">18</span>,<span class="number">3</span>,<span class="number">13</span>,<span class="number">7</span>,<span class="number">11</span>,<span class="number">23</span>,<span class="number">0</span>,<span class="number">22</span>,<span class="number">12</span>,<span class="number">9</span>,<span class="number">16</span>,<span class="number">14</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">110</span> &#125;, <span class="comment">// wheel 5</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">9</span>,<span class="number">15</span>,<span class="number">6</span>,<span class="number">21</span>,<span class="number">14</span>,<span class="number">20</span>,<span class="number">12</span>,<span class="number">5</span>,<span class="number">24</span>,<span class="number">16</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">113</span>,<span class="number">7</span>,<span class="number">25</span>,<span class="number">17</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">0</span>,<span class="number">18</span>,<span class="number">23</span>,<span class="number">11</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">19</span>,<span class="number">122</span>,</span><br><span class="line">      <span class="number">9</span>,<span class="number">15</span>,<span class="number">6</span>,<span class="number">21</span>,<span class="number">14</span>,<span class="number">20</span>,<span class="number">12</span>,<span class="number">5</span>,<span class="number">24</span>,<span class="number">16</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">113</span>,<span class="number">7</span>,<span class="number">25</span>,<span class="number">17</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">0</span>,<span class="number">18</span>,<span class="number">23</span>,<span class="number">11</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">19</span>,<span class="number">122</span>,</span><br><span class="line">      <span class="number">9</span>,<span class="number">15</span>,<span class="number">6</span>,<span class="number">21</span>,<span class="number">14</span>,<span class="number">20</span>,<span class="number">12</span>,<span class="number">5</span>,<span class="number">24</span>,<span class="number">16</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">113</span>,<span class="number">7</span>,<span class="number">25</span>,<span class="number">17</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">0</span>,<span class="number">18</span>,<span class="number">23</span>,<span class="number">11</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">19</span>,<span class="number">122</span> &#125;, <span class="comment">// wheel 6</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">13</span>,<span class="number">25</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">17</span>,<span class="number">2</span>,<span class="number">23</span>,<span class="number">12</span>,<span class="number">24</span>,<span class="number">18</span>,<span class="number">22</span>,<span class="number">101</span>,<span class="number">14</span>,<span class="number">20</span>,<span class="number">5</span>,<span class="number">0</span>,<span class="number">8</span>,<span class="number">21</span>,<span class="number">11</span>,<span class="number">15</span>,<span class="number">4</span>,<span class="number">10</span>,<span class="number">16</span>,<span class="number">3</span>,<span class="number">119</span>,</span><br><span class="line">      <span class="number">13</span>,<span class="number">25</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">17</span>,<span class="number">2</span>,<span class="number">23</span>,<span class="number">12</span>,<span class="number">24</span>,<span class="number">18</span>,<span class="number">22</span>,<span class="number">101</span>,<span class="number">14</span>,<span class="number">20</span>,<span class="number">5</span>,<span class="number">0</span>,<span class="number">8</span>,<span class="number">21</span>,<span class="number">11</span>,<span class="number">15</span>,<span class="number">4</span>,<span class="number">10</span>,<span class="number">16</span>,<span class="number">3</span>,<span class="number">119</span>,</span><br><span class="line">      <span class="number">13</span>,<span class="number">25</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">17</span>,<span class="number">2</span>,<span class="number">23</span>,<span class="number">12</span>,<span class="number">24</span>,<span class="number">18</span>,<span class="number">22</span>,<span class="number">101</span>,<span class="number">14</span>,<span class="number">20</span>,<span class="number">5</span>,<span class="number">0</span>,<span class="number">8</span>,<span class="number">21</span>,<span class="number">11</span>,<span class="number">15</span>,<span class="number">4</span>,<span class="number">10</span>,<span class="number">16</span>,<span class="number">3</span>,<span class="number">119</span> &#125;, <span class="comment">// wheel 7</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">5</span>,<span class="number">10</span>,<span class="number">16</span>,<span class="number">7</span>,<span class="number">19</span>,<span class="number">11</span>,<span class="number">23</span>,<span class="number">14</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">18</span>,<span class="number">115</span>,<span class="number">3</span>,<span class="number">25</span>,<span class="number">17</span>,<span class="number">0</span>,<span class="number">12</span>,<span class="number">4</span>,<span class="number">22</span>,<span class="number">13</span>,<span class="number">8</span>,<span class="number">20</span>,<span class="number">24</span>,<span class="number">6</span>,<span class="number">121</span>,</span><br><span class="line">      <span class="number">5</span>,<span class="number">10</span>,<span class="number">16</span>,<span class="number">7</span>,<span class="number">19</span>,<span class="number">11</span>,<span class="number">23</span>,<span class="number">14</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">18</span>,<span class="number">115</span>,<span class="number">3</span>,<span class="number">25</span>,<span class="number">17</span>,<span class="number">0</span>,<span class="number">12</span>,<span class="number">4</span>,<span class="number">22</span>,<span class="number">13</span>,<span class="number">8</span>,<span class="number">20</span>,<span class="number">24</span>,<span class="number">6</span>,<span class="number">121</span>,</span><br><span class="line">      <span class="number">5</span>,<span class="number">10</span>,<span class="number">16</span>,<span class="number">7</span>,<span class="number">19</span>,<span class="number">11</span>,<span class="number">23</span>,<span class="number">14</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">18</span>,<span class="number">115</span>,<span class="number">3</span>,<span class="number">25</span>,<span class="number">17</span>,<span class="number">0</span>,<span class="number">12</span>,<span class="number">4</span>,<span class="number">22</span>,<span class="number">13</span>,<span class="number">8</span>,<span class="number">20</span>,<span class="number">24</span>,<span class="number">6</span>,<span class="number">121</span> &#125;, <span class="comment">// wheel 8</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">11</span>,<span class="number">4</span>,<span class="number">24</span>,<span class="number">9</span>,<span class="number">21</span>,<span class="number">2</span>,<span class="number">13</span>,<span class="number">8</span>,<span class="number">23</span>,<span class="number">22</span>,<span class="number">15</span>,<span class="number">1</span>,<span class="number">16</span>,<span class="number">12</span>,<span class="number">3</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">0</span>,<span class="number">10</span>,<span class="number">25</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">20</span>,<span class="number">7</span>,<span class="number">14</span>,<span class="number">18</span>,</span><br><span class="line">      <span class="number">11</span>,<span class="number">4</span>,<span class="number">24</span>,<span class="number">9</span>,<span class="number">21</span>,<span class="number">2</span>,<span class="number">13</span>,<span class="number">8</span>,<span class="number">23</span>,<span class="number">22</span>,<span class="number">15</span>,<span class="number">1</span>,<span class="number">16</span>,<span class="number">12</span>,<span class="number">3</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">0</span>,<span class="number">10</span>,<span class="number">25</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">20</span>,<span class="number">7</span>,<span class="number">14</span>,<span class="number">18</span>,</span><br><span class="line">      <span class="number">11</span>,<span class="number">4</span>,<span class="number">24</span>,<span class="number">9</span>,<span class="number">21</span>,<span class="number">2</span>,<span class="number">13</span>,<span class="number">8</span>,<span class="number">23</span>,<span class="number">22</span>,<span class="number">15</span>,<span class="number">1</span>,<span class="number">16</span>,<span class="number">12</span>,<span class="number">3</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">0</span>,<span class="number">10</span>,<span class="number">25</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">20</span>,<span class="number">7</span>,<span class="number">14</span>,<span class="number">18</span> &#125;, <span class="comment">// Beta</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">5</span>,<span class="number">18</span>,<span class="number">14</span>,<span class="number">10</span>,<span class="number">0</span>,<span class="number">13</span>,<span class="number">20</span>,<span class="number">4</span>,<span class="number">17</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">1</span>,<span class="number">19</span>,<span class="number">8</span>,<span class="number">24</span>,<span class="number">2</span>,<span class="number">22</span>,<span class="number">11</span>,<span class="number">16</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">23</span>,<span class="number">21</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">3</span>,</span><br><span class="line">      <span class="number">5</span>,<span class="number">18</span>,<span class="number">14</span>,<span class="number">10</span>,<span class="number">0</span>,<span class="number">13</span>,<span class="number">20</span>,<span class="number">4</span>,<span class="number">17</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">1</span>,<span class="number">19</span>,<span class="number">8</span>,<span class="number">24</span>,<span class="number">2</span>,<span class="number">22</span>,<span class="number">11</span>,<span class="number">16</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">23</span>,<span class="number">21</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">3</span>,</span><br><span class="line">      <span class="number">5</span>,<span class="number">18</span>,<span class="number">14</span>,<span class="number">10</span>,<span class="number">0</span>,<span class="number">13</span>,<span class="number">20</span>,<span class="number">4</span>,<span class="number">17</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">1</span>,<span class="number">19</span>,<span class="number">8</span>,<span class="number">24</span>,<span class="number">2</span>,<span class="number">22</span>,<span class="number">11</span>,<span class="number">16</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">23</span>,<span class="number">21</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">3</span> &#125;, <span class="comment">// Gamma</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">4</span>,<span class="number">13</span>,<span class="number">10</span>,<span class="number">16</span>,<span class="number">0</span>,<span class="number">20</span>,<span class="number">24</span>,<span class="number">22</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">1</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">3</span>,<span class="number">23</span>,<span class="number">25</span>,<span class="number">21</span>,<span class="number">5</span>,<span class="number">19</span>,<span class="number">7</span>,<span class="number">17</span>,<span class="number">6</span>,<span class="number">18</span>,</span><br><span class="line">      <span class="number">4</span>,<span class="number">13</span>,<span class="number">10</span>,<span class="number">16</span>,<span class="number">0</span>,<span class="number">20</span>,<span class="number">24</span>,<span class="number">22</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">1</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">3</span>,<span class="number">23</span>,<span class="number">25</span>,<span class="number">21</span>,<span class="number">5</span>,<span class="number">19</span>,<span class="number">7</span>,<span class="number">17</span>,<span class="number">6</span>,<span class="number">18</span>,</span><br><span class="line">      <span class="number">4</span>,<span class="number">13</span>,<span class="number">10</span>,<span class="number">16</span>,<span class="number">0</span>,<span class="number">20</span>,<span class="number">24</span>,<span class="number">22</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">1</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">3</span>,<span class="number">23</span>,<span class="number">25</span>,<span class="number">21</span>,<span class="number">5</span>,<span class="number">19</span>,<span class="number">7</span>,<span class="number">17</span>,<span class="number">6</span>,<span class="number">18</span>&#125;, <span class="comment">// = UKW-B</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">17</span>,<span class="number">3</span>,<span class="number">14</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">13</span>,<span class="number">19</span>,<span class="number">10</span>,<span class="number">21</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">22</span>,<span class="number">25</span>,<span class="number">0</span>,<span class="number">23</span>,<span class="number">6</span>,<span class="number">24</span>,<span class="number">8</span>,<span class="number">15</span>,<span class="number">18</span>,<span class="number">20</span>,<span class="number">16</span>,</span><br><span class="line">      <span class="number">17</span>,<span class="number">3</span>,<span class="number">14</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">13</span>,<span class="number">19</span>,<span class="number">10</span>,<span class="number">21</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">22</span>,<span class="number">25</span>,<span class="number">0</span>,<span class="number">23</span>,<span class="number">6</span>,<span class="number">24</span>,<span class="number">8</span>,<span class="number">15</span>,<span class="number">18</span>,<span class="number">20</span>,<span class="number">16</span>,</span><br><span class="line">      <span class="number">17</span>,<span class="number">3</span>,<span class="number">14</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">13</span>,<span class="number">19</span>,<span class="number">10</span>,<span class="number">21</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">22</span>,<span class="number">25</span>,<span class="number">0</span>,<span class="number">23</span>,<span class="number">6</span>,<span class="number">24</span>,<span class="number">8</span>,<span class="number">15</span>,<span class="number">18</span>,<span class="number">20</span>,<span class="number">16</span> &#125; <span class="comment">// = UKW-C</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> rotorvali[<span class="number">10</span>][<span class="number">78</span>] = &#123;</span><br><span class="line">    &#123; <span class="number">20</span>,<span class="number">22</span>,<span class="number">24</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">15</span>,<span class="number">21</span>,<span class="number">25</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">19</span>,<span class="number">7</span>,<span class="number">23</span>,<span class="number">18</span>,<span class="number">11</span>,<span class="number">17</span>,<span class="number">8</span>,<span class="number">13</span>,<span class="number">16</span>,<span class="number">14</span>,<span class="number">9</span>,</span><br><span class="line">      <span class="number">20</span>,<span class="number">22</span>,<span class="number">24</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">15</span>,<span class="number">21</span>,<span class="number">25</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">19</span>,<span class="number">7</span>,<span class="number">23</span>,<span class="number">18</span>,<span class="number">11</span>,<span class="number">17</span>,<span class="number">8</span>,<span class="number">13</span>,<span class="number">16</span>,<span class="number">14</span>,<span class="number">9</span>,</span><br><span class="line">      <span class="number">20</span>,<span class="number">22</span>,<span class="number">24</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">15</span>,<span class="number">21</span>,<span class="number">25</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">19</span>,<span class="number">7</span>,<span class="number">23</span>,<span class="number">18</span>,<span class="number">11</span>,<span class="number">17</span>,<span class="number">8</span>,<span class="number">13</span>,<span class="number">16</span>,<span class="number">14</span>,<span class="number">9</span> &#125;, <span class="comment">//wheel 1 i</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">9</span>,<span class="number">15</span>,<span class="number">2</span>,<span class="number">25</span>,<span class="number">22</span>,<span class="number">17</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">14</span>,<span class="number">19</span>,<span class="number">24</span>,<span class="number">20</span>,<span class="number">16</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">13</span>,<span class="number">7</span>,<span class="number">23</span>,<span class="number">12</span>,<span class="number">8</span>,<span class="number">21</span>,<span class="number">18</span>,</span><br><span class="line">      <span class="number">0</span>,<span class="number">9</span>,<span class="number">15</span>,<span class="number">2</span>,<span class="number">25</span>,<span class="number">22</span>,<span class="number">17</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">14</span>,<span class="number">19</span>,<span class="number">24</span>,<span class="number">20</span>,<span class="number">16</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">13</span>,<span class="number">7</span>,<span class="number">23</span>,<span class="number">12</span>,<span class="number">8</span>,<span class="number">21</span>,<span class="number">18</span>,</span><br><span class="line">      <span class="number">0</span>,<span class="number">9</span>,<span class="number">15</span>,<span class="number">2</span>,<span class="number">25</span>,<span class="number">22</span>,<span class="number">17</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">14</span>,<span class="number">19</span>,<span class="number">24</span>,<span class="number">20</span>,<span class="number">16</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">13</span>,<span class="number">7</span>,<span class="number">23</span>,<span class="number">12</span>,<span class="number">8</span>,<span class="number">21</span>,<span class="number">18</span> &#125;, <span class="comment">//wheel 2 i</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">19</span>,<span class="number">0</span>,<span class="number">6</span>,<span class="number">1</span>,<span class="number">15</span>,<span class="number">2</span>,<span class="number">18</span>,<span class="number">3</span>,<span class="number">16</span>,<span class="number">4</span>,<span class="number">20</span>,<span class="number">5</span>,<span class="number">21</span>,<span class="number">13</span>,<span class="number">25</span>,<span class="number">7</span>,<span class="number">24</span>,<span class="number">8</span>,<span class="number">23</span>,<span class="number">9</span>,<span class="number">22</span>,<span class="number">11</span>,<span class="number">17</span>,<span class="number">10</span>,<span class="number">14</span>,<span class="number">12</span>,</span><br><span class="line">      <span class="number">19</span>,<span class="number">0</span>,<span class="number">6</span>,<span class="number">1</span>,<span class="number">15</span>,<span class="number">2</span>,<span class="number">18</span>,<span class="number">3</span>,<span class="number">16</span>,<span class="number">4</span>,<span class="number">20</span>,<span class="number">5</span>,<span class="number">21</span>,<span class="number">13</span>,<span class="number">25</span>,<span class="number">7</span>,<span class="number">24</span>,<span class="number">8</span>,<span class="number">23</span>,<span class="number">9</span>,<span class="number">22</span>,<span class="number">11</span>,<span class="number">17</span>,<span class="number">10</span>,<span class="number">14</span>,<span class="number">12</span>,</span><br><span class="line">      <span class="number">19</span>,<span class="number">0</span>,<span class="number">6</span>,<span class="number">1</span>,<span class="number">15</span>,<span class="number">2</span>,<span class="number">18</span>,<span class="number">3</span>,<span class="number">16</span>,<span class="number">4</span>,<span class="number">20</span>,<span class="number">5</span>,<span class="number">21</span>,<span class="number">13</span>,<span class="number">25</span>,<span class="number">7</span>,<span class="number">24</span>,<span class="number">8</span>,<span class="number">23</span>,<span class="number">9</span>,<span class="number">22</span>,<span class="number">11</span>,<span class="number">17</span>,<span class="number">10</span>,<span class="number">14</span>,<span class="number">12</span> &#125;, <span class="comment">//wheel 3 i</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">7</span>,<span class="number">25</span>,<span class="number">22</span>,<span class="number">21</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">13</span>,<span class="number">11</span>,<span class="number">6</span>,<span class="number">20</span>,<span class="number">15</span>,<span class="number">23</span>,<span class="number">16</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">12</span>,<span class="number">1</span>,<span class="number">18</span>,<span class="number">10</span>,<span class="number">3</span>,<span class="number">24</span>,<span class="number">14</span>,<span class="number">8</span>,<span class="number">5</span>,</span><br><span class="line">      <span class="number">7</span>,<span class="number">25</span>,<span class="number">22</span>,<span class="number">21</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">13</span>,<span class="number">11</span>,<span class="number">6</span>,<span class="number">20</span>,<span class="number">15</span>,<span class="number">23</span>,<span class="number">16</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">12</span>,<span class="number">1</span>,<span class="number">18</span>,<span class="number">10</span>,<span class="number">3</span>,<span class="number">24</span>,<span class="number">14</span>,<span class="number">8</span>,<span class="number">5</span>,</span><br><span class="line">      <span class="number">7</span>,<span class="number">25</span>,<span class="number">22</span>,<span class="number">21</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">13</span>,<span class="number">11</span>,<span class="number">6</span>,<span class="number">20</span>,<span class="number">15</span>,<span class="number">23</span>,<span class="number">16</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">12</span>,<span class="number">1</span>,<span class="number">18</span>,<span class="number">10</span>,<span class="number">3</span>,<span class="number">24</span>,<span class="number">14</span>,<span class="number">8</span>,<span class="number">5</span> &#125;, <span class="comment">//wheel 4 i</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">16</span>,<span class="number">2</span>,<span class="number">24</span>,<span class="number">11</span>,<span class="number">23</span>,<span class="number">22</span>,<span class="number">4</span>,<span class="number">13</span>,<span class="number">5</span>,<span class="number">19</span>,<span class="number">25</span>,<span class="number">14</span>,<span class="number">18</span>,<span class="number">12</span>,<span class="number">21</span>,<span class="number">9</span>,<span class="number">20</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">15</span>,<span class="number">7</span>,<span class="number">1</span>,</span><br><span class="line">      <span class="number">16</span>,<span class="number">2</span>,<span class="number">24</span>,<span class="number">11</span>,<span class="number">23</span>,<span class="number">22</span>,<span class="number">4</span>,<span class="number">13</span>,<span class="number">5</span>,<span class="number">19</span>,<span class="number">25</span>,<span class="number">14</span>,<span class="number">18</span>,<span class="number">12</span>,<span class="number">21</span>,<span class="number">9</span>,<span class="number">20</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">15</span>,<span class="number">7</span>,<span class="number">1</span>,</span><br><span class="line">      <span class="number">16</span>,<span class="number">2</span>,<span class="number">24</span>,<span class="number">11</span>,<span class="number">23</span>,<span class="number">22</span>,<span class="number">4</span>,<span class="number">13</span>,<span class="number">5</span>,<span class="number">19</span>,<span class="number">25</span>,<span class="number">14</span>,<span class="number">18</span>,<span class="number">12</span>,<span class="number">21</span>,<span class="number">9</span>,<span class="number">20</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">15</span>,<span class="number">7</span>,<span class="number">1</span> &#125;, <span class="comment">//wheel 5 i</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">18</span>,<span class="number">10</span>,<span class="number">23</span>,<span class="number">16</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">13</span>,<span class="number">22</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">21</span>,<span class="number">06</span>,<span class="number">12</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">15</span>,<span class="number">19</span>,<span class="number">24</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">25</span>,<span class="number">20</span>,<span class="number">8</span>,<span class="number">14</span>,</span><br><span class="line">      <span class="number">18</span>,<span class="number">10</span>,<span class="number">23</span>,<span class="number">16</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">13</span>,<span class="number">22</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">21</span>,<span class="number">06</span>,<span class="number">12</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">15</span>,<span class="number">19</span>,<span class="number">24</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">25</span>,<span class="number">20</span>,<span class="number">8</span>,<span class="number">14</span>,</span><br><span class="line">      <span class="number">18</span>,<span class="number">10</span>,<span class="number">23</span>,<span class="number">16</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">13</span>,<span class="number">22</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">21</span>,<span class="number">06</span>,<span class="number">12</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">15</span>,<span class="number">19</span>,<span class="number">24</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">25</span>,<span class="number">20</span>,<span class="number">8</span>,<span class="number">14</span> &#125;, <span class="comment">//wheel 6 i</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">16</span>,<span class="number">12</span>,<span class="number">6</span>,<span class="number">24</span>,<span class="number">21</span>,<span class="number">15</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">17</span>,<span class="number">2</span>,<span class="number">22</span>,<span class="number">19</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">13</span>,<span class="number">20</span>,<span class="number">23</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">25</span>,<span class="number">14</span>,<span class="number">18</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">1</span>,</span><br><span class="line">      <span class="number">16</span>,<span class="number">12</span>,<span class="number">6</span>,<span class="number">24</span>,<span class="number">21</span>,<span class="number">15</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">17</span>,<span class="number">2</span>,<span class="number">22</span>,<span class="number">19</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">13</span>,<span class="number">20</span>,<span class="number">23</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">25</span>,<span class="number">14</span>,<span class="number">18</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">1</span>,</span><br><span class="line">      <span class="number">16</span>,<span class="number">12</span>,<span class="number">6</span>,<span class="number">24</span>,<span class="number">21</span>,<span class="number">15</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">17</span>,<span class="number">2</span>,<span class="number">22</span>,<span class="number">19</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">13</span>,<span class="number">20</span>,<span class="number">23</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">25</span>,<span class="number">14</span>,<span class="number">18</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">1</span> &#125;, <span class="comment">//wheel 7 i</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">16</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">13</span>,<span class="number">18</span>,<span class="number">0</span>,<span class="number">24</span>,<span class="number">3</span>,<span class="number">21</span>,<span class="number">10</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">17</span>,<span class="number">20</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">2</span>,<span class="number">15</span>,<span class="number">11</span>,<span class="number">4</span>,<span class="number">22</span>,<span class="number">25</span>,<span class="number">19</span>,<span class="number">6</span>,<span class="number">23</span>,<span class="number">14</span>,</span><br><span class="line">      <span class="number">16</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">13</span>,<span class="number">18</span>,<span class="number">0</span>,<span class="number">24</span>,<span class="number">3</span>,<span class="number">21</span>,<span class="number">10</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">17</span>,<span class="number">20</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">2</span>,<span class="number">15</span>,<span class="number">11</span>,<span class="number">4</span>,<span class="number">22</span>,<span class="number">25</span>,<span class="number">19</span>,<span class="number">6</span>,<span class="number">23</span>,<span class="number">14</span>,</span><br><span class="line">      <span class="number">16</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">13</span>,<span class="number">18</span>,<span class="number">0</span>,<span class="number">24</span>,<span class="number">3</span>,<span class="number">21</span>,<span class="number">10</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">17</span>,<span class="number">20</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">2</span>,<span class="number">15</span>,<span class="number">11</span>,<span class="number">4</span>,<span class="number">22</span>,<span class="number">25</span>,<span class="number">19</span>,<span class="number">6</span>,<span class="number">23</span>,<span class="number">14</span> &#125;, <span class="comment">//wheel 8 i</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">17</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">14</span>,<span class="number">1</span>,<span class="number">21</span>,<span class="number">20</span>,<span class="number">23</span>,<span class="number">7</span>,<span class="number">3</span>,<span class="number">18</span>,<span class="number">0</span>,<span class="number">13</span>,<span class="number">6</span>,<span class="number">24</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">16</span>,<span class="number">22</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">19</span>,</span><br><span class="line">      <span class="number">17</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">14</span>,<span class="number">1</span>,<span class="number">21</span>,<span class="number">20</span>,<span class="number">23</span>,<span class="number">7</span>,<span class="number">3</span>,<span class="number">18</span>,<span class="number">0</span>,<span class="number">13</span>,<span class="number">6</span>,<span class="number">24</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">16</span>,<span class="number">22</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">19</span>,</span><br><span class="line">      <span class="number">17</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">14</span>,<span class="number">1</span>,<span class="number">21</span>,<span class="number">20</span>,<span class="number">23</span>,<span class="number">7</span>,<span class="number">3</span>,<span class="number">18</span>,<span class="number">0</span>,<span class="number">13</span>,<span class="number">6</span>,<span class="number">24</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">16</span>,<span class="number">22</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">19</span> &#125;, <span class="comment">//Beta i</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">4</span>,<span class="number">11</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">7</span>,<span class="number">0</span>,<span class="number">23</span>,<span class="number">9</span>,<span class="number">13</span>,<span class="number">24</span>,<span class="number">3</span>,<span class="number">17</span>,<span class="number">10</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">19</span>,<span class="number">18</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">12</span>,<span class="number">6</span>,<span class="number">22</span>,<span class="number">16</span>,<span class="number">21</span>,<span class="number">14</span>,<span class="number">20</span>,</span><br><span class="line">      <span class="number">4</span>,<span class="number">11</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">7</span>,<span class="number">0</span>,<span class="number">23</span>,<span class="number">9</span>,<span class="number">13</span>,<span class="number">24</span>,<span class="number">3</span>,<span class="number">17</span>,<span class="number">10</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">19</span>,<span class="number">18</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">12</span>,<span class="number">6</span>,<span class="number">22</span>,<span class="number">16</span>,<span class="number">21</span>,<span class="number">14</span>,<span class="number">20</span>,</span><br><span class="line">      <span class="number">4</span>,<span class="number">11</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">7</span>,<span class="number">0</span>,<span class="number">23</span>,<span class="number">9</span>,<span class="number">13</span>,<span class="number">24</span>,<span class="number">3</span>,<span class="number">17</span>,<span class="number">10</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">19</span>,<span class="number">18</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">12</span>,<span class="number">6</span>,<span class="number">22</span>,<span class="number">16</span>,<span class="number">21</span>,<span class="number">14</span>,<span class="number">20</span> &#125; <span class="comment">//Gamma i</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Define a 2D Array for keeping the wheel locations &amp; positions</span></span><br><span class="line"><span class="keyword">int</span> wheel[<span class="number">3</span>][<span class="number">3</span>] = &#123;</span><br><span class="line">    &#123;<span class="number">26</span>,<span class="number">0</span>,<span class="number">0</span>&#125;, &#123;<span class="number">26</span>,<span class="number">0</span>,<span class="number">0</span>&#125;, &#123;<span class="number">26</span>,<span class="number">0</span>,<span class="number">0</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">int</span> reflect[<span class="number">2</span>] = &#123;<span class="number">1</span>, <span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Define Array for plugbord values 25 x2 position 0 holds use position 1 holds value int plugu holds the total nomber of plugs used (10 max)</span></span><br><span class="line"><span class="keyword">int</span> plugval[<span class="number">2</span>][<span class="number">26</span>] = &#123;</span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span> &#125;,</span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span>,<span class="number">18</span>,<span class="number">19</span>,<span class="number">20</span>,<span class="number">21</span>,<span class="number">22</span>,<span class="number">23</span>,<span class="number">24</span>,<span class="number">25</span> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">int</span> pluguse = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> paindex = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> pbindex = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">// Initialize all 38 LED pins as Output </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt;= <span class="number">11</span>; index++) &#123;</span><br><span class="line">        pinMode(lamppin[index], OUTPUT);</span><br><span class="line">        digitalWrite(lamppin[index],<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt;= <span class="number">3</span>; index++) &#123;</span><br><span class="line">        pinMode(anode[index], OUTPUT);</span><br><span class="line">        digitalWrite(anode[index], <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt;= <span class="number">16</span>; index++) &#123;</span><br><span class="line">        pinMode(segment[index], OUTPUT);</span><br><span class="line">        digitalWrite(segment[index], <span class="number">1</span>);</span><br><span class="line">    &#125; </span><br><span class="line">    pinMode(led1, OUTPUT);</span><br><span class="line">    pinMode(led2, OUTPUT);</span><br><span class="line">    pinMode(led3, OUTPUT);</span><br><span class="line">    pinMode(led4, OUTPUT);</span><br><span class="line">    pinMode(led5, OUTPUT);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Serial.begin(9600);</span></span><br><span class="line"><span class="comment">// Initialize all 4 pusbutton pins as Input   </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt;= <span class="number">3</span>; index++) &#123;</span><br><span class="line">        pinMode(inpin[index], INPUT);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">// Keyboard debounce &amp; test for new key pressed </span></span><br><span class="line">    time = millis();</span><br><span class="line">    <span class="keyword">if</span> (time &gt; otime + <span class="number">500</span>) keyval = readkbde();</span><br><span class="line">    <span class="keyword">if</span> ((keyval == <span class="number">45</span>) &amp;&amp; (windex == <span class="number">1</span>)) modeselect();</span><br><span class="line"><span class="comment">// The whole Enigma machine operation revolves around which Operating Mode is current </span></span><br><span class="line">    <span class="keyword">if</span> (mode == <span class="number">0</span>) mode0();</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (mode == <span class="number">1</span>) mode1();</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (mode == <span class="number">2</span>) mode2();</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (mode == <span class="number">3</span>) mode3();</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (mode == <span class="number">4</span>) mode4();</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (mode == <span class="number">5</span>) mode5();</span><br><span class="line">    <span class="keyword">else</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Serial.println(keyval); // for debuging prints keybord value to serial monitor// for run or del</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This function takes care of figuring out which key has been pressed &amp; returns a unique Integer</span></span><br><span class="line"><span class="keyword">int</span> readkbde() &#123;</span><br><span class="line">    <span class="keyword">int</span> kval = <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt;= <span class="number">3</span>; index++) &#123;</span><br><span class="line">        inval[index] = analogRead(inpin[index]);</span><br><span class="line">    &#125; <span class="comment">//Reads analog input values</span></span><br><span class="line">    <span class="keyword">if</span> ((inval[<span class="number">0</span>] &gt; <span class="number">925</span>) &amp;&amp; (inval[<span class="number">1</span>] &gt; <span class="number">828</span>) &amp;&amp; (inval[<span class="number">2</span>] &gt; <span class="number">730</span>) &amp;&amp; (inval[<span class="number">3</span>] &gt; <span class="number">828</span>)) kval = <span class="number">100</span>; <span class="comment">// no key press</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">0</span>] &lt; <span class="number">924</span>) &amp;&amp; (inval[<span class="number">0</span>] &gt; <span class="number">915</span>)) kval = <span class="number">49</span>; <span class="comment">//up arrow 4</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">0</span>] &lt; <span class="number">914</span>) &amp;&amp; (inval[<span class="number">0</span>] &gt; <span class="number">903</span>)) kval = <span class="number">48</span>; <span class="comment">//up arrow 3</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">0</span>] &lt; <span class="number">902</span>) &amp;&amp; (inval[<span class="number">0</span>] &gt; <span class="number">887</span>)) kval = <span class="number">47</span>; <span class="comment">//up arrow 2</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">0</span>] &lt; <span class="number">886</span>) &amp;&amp; (inval[<span class="number">0</span>] &gt; <span class="number">865</span>)) kval = <span class="number">46</span>; <span class="comment">//up arrow 1</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">0</span>] &lt; <span class="number">864</span>) &amp;&amp; (inval[<span class="number">0</span>] &gt; <span class="number">836</span>)) kval = <span class="number">45</span>; <span class="comment">//mode</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">0</span>] &lt; <span class="number">834</span>) &amp;&amp; (inval[<span class="number">0</span>] &gt; <span class="number">793</span>)) kval = <span class="number">44</span>; <span class="comment">//enter</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">0</span>] &lt; <span class="number">792</span>) &amp;&amp; (inval[<span class="number">0</span>] &gt; <span class="number">724</span>)) kval = <span class="number">43</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">0</span>] &lt; <span class="number">723</span>) &amp;&amp; (inval[<span class="number">0</span>] &gt; <span class="number">594</span>)) kval = <span class="number">42</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">0</span>] &lt; <span class="number">593</span>) &amp;&amp; (inval[<span class="number">0</span>] &gt; <span class="number">260</span>)) kval = <span class="number">41</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (inval[<span class="number">0</span>] &lt; <span class="number">259</span>) kval = <span class="number">40</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">1</span>] &lt; <span class="number">827</span>) &amp;&amp; (inval[<span class="number">1</span>] &gt; <span class="number">807</span>)) kval = <span class="number">14</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">1</span>] &lt; <span class="number">806</span>) &amp;&amp; (inval[<span class="number">1</span>] &gt; <span class="number">781</span>)) kval = <span class="number">8</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">1</span>] &lt; <span class="number">780</span>) &amp;&amp; (inval[<span class="number">1</span>] &gt; <span class="number">749</span>)) kval = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">1</span>] &lt; <span class="number">748</span>) &amp;&amp; (inval[<span class="number">1</span>] &gt; <span class="number">706</span>)) kval = <span class="number">25</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">1</span>] &lt; <span class="number">705</span>) &amp;&amp; (inval[<span class="number">1</span>] &gt; <span class="number">647</span>)) kval = <span class="number">19</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">1</span>] &lt; <span class="number">646</span>) &amp;&amp; (inval[<span class="number">1</span>] &gt; <span class="number">555</span>)) kval = <span class="number">17</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">1</span>] &lt; <span class="number">554</span>) &amp;&amp; (inval[<span class="number">1</span>] &gt; <span class="number">418</span>)) kval = <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">1</span>] &lt; <span class="number">417</span>) &amp;&amp; (inval[<span class="number">1</span>] &gt; <span class="number">169</span>)) kval = <span class="number">22</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (inval[<span class="number">1</span>] &lt; <span class="number">168</span>) kval = <span class="number">16</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">2</span>] &lt; <span class="number">729</span>) &amp;&amp; (inval[<span class="number">2</span>] &gt; <span class="number">699</span>)) kval = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">2</span>] &lt; <span class="number">698</span>) &amp;&amp; (inval[<span class="number">2</span>] &gt; <span class="number">660</span>)) kval = <span class="number">9</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">2</span>] &lt; <span class="number">659</span>) &amp;&amp; (inval[<span class="number">2</span>] &gt; <span class="number">611</span>)) kval = <span class="number">7</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">2</span>] &lt; <span class="number">610</span>) &amp;&amp; (inval[<span class="number">2</span>] &gt; <span class="number">547</span>)) kval = <span class="number">6</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">2</span>] &lt; <span class="number">546</span>) &amp;&amp; (inval[<span class="number">2</span>] &gt; <span class="number">455</span>)) kval = <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">2</span>] &lt; <span class="number">454</span>) &amp;&amp; (inval[<span class="number">2</span>] &gt; <span class="number">331</span>)) kval = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">2</span>] &lt; <span class="number">330</span>) &amp;&amp; (inval[<span class="number">2</span>] &gt; <span class="number">127</span>)) kval = <span class="number">18</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (inval[<span class="number">2</span>] &lt; <span class="number">126</span>) kval = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">3</span>] &lt; <span class="number">827</span>) &amp;&amp; (inval[<span class="number">3</span>] &gt; <span class="number">807</span>)) kval = <span class="number">11</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">3</span>] &lt; <span class="number">806</span>) &amp;&amp; (inval[<span class="number">3</span>] &gt; <span class="number">781</span>)) kval = <span class="number">12</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">3</span>] &lt; <span class="number">780</span>) &amp;&amp; (inval[<span class="number">3</span>] &gt; <span class="number">749</span>)) kval = <span class="number">13</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">3</span>] &lt; <span class="number">748</span>) &amp;&amp; (inval[<span class="number">3</span>] &gt; <span class="number">706</span>)) kval = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">3</span>] &lt; <span class="number">705</span>) &amp;&amp; (inval[<span class="number">3</span>] &gt; <span class="number">647</span>)) kval = <span class="number">21</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">3</span>] &lt; <span class="number">646</span>) &amp;&amp; (inval[<span class="number">3</span>] &gt; <span class="number">555</span>)) kval = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">3</span>] &lt; <span class="number">554</span>) &amp;&amp; (inval[<span class="number">3</span>] &gt; <span class="number">418</span>)) kval = <span class="number">23</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">3</span>] &lt; <span class="number">417</span>) &amp;&amp; (inval[<span class="number">3</span>] &gt; <span class="number">169</span>)) kval = <span class="number">24</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (inval[<span class="number">3</span>] &lt; <span class="number">169</span>) kval = <span class="number">15</span>;</span><br><span class="line">    <span class="keyword">else</span> kval = <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">if</span> (kval &lt; <span class="number">99</span>) otime = millis(); <span class="comment">// Starts key debounce timer</span></span><br><span class="line">    <span class="keyword">if</span> ((kval &gt;= <span class="number">0</span>) &amp;&amp; (kval &lt;= <span class="number">99</span>)) windex = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// windex showing true (1) indicates the return of a fresh key stroke</span></span><br><span class="line">    <span class="keyword">return</span> kval;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Function to change operating Mode</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">modeselect</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    mode++;</span><br><span class="line">    <span class="keyword">if</span> (mode &gt;= <span class="number">6</span>) mode = <span class="number">0</span>;</span><br><span class="line">    windex = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Default Mode: Enigma is a Typewriter</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mode0</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ((keyval &gt;= <span class="number">0</span>) &amp;&amp; (keyval &lt;= <span class="number">25</span>)) lampval = keyval;</span><br><span class="line">    lampita();</span><br><span class="line">    marquee();</span><br><span class="line">    lampitb();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Select the Rotors &amp; the Reflector </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mode1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> index;</span><br><span class="line">    digitalWrite(led1, HIGH);</span><br><span class="line">    <span class="keyword">if</span> (windex == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((keyval == <span class="number">43</span>) || (keyval == <span class="number">46</span>)) &#123;</span><br><span class="line">            reflect[<span class="number">0</span>]++;</span><br><span class="line">            <span class="keyword">if</span> (reflect[<span class="number">0</span>] &gt; <span class="number">2</span>) &#123;</span><br><span class="line">                reflect[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            windex = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (windex == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">47</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (index = wheel[<span class="number">2</span>][<span class="number">0</span>]; (index == wheel[<span class="number">1</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">0</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">2</span>][<span class="number">0</span>]); index++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (index &gt; <span class="number">33</span>) index = <span class="number">26</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            wheel[<span class="number">2</span>][<span class="number">0</span>] = index;</span><br><span class="line">            windex = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (windex == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">48</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (index = wheel[<span class="number">1</span>][<span class="number">0</span>]; (index == wheel[<span class="number">2</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">0</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">1</span>][<span class="number">0</span>]); index++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (index &gt; <span class="number">33</span>) index = <span class="number">26</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            wheel[<span class="number">1</span>][<span class="number">0</span>] = index;</span><br><span class="line">            windex = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (windex == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">49</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (index = wheel[<span class="number">0</span>][<span class="number">0</span>]; (index == wheel[<span class="number">2</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">1</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">0</span>][<span class="number">0</span>]); index++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (index &gt; <span class="number">33</span>) index = <span class="number">26</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            wheel[<span class="number">0</span>][<span class="number">0</span>] = index;</span><br><span class="line">            windex = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (windex == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">42</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (index = wheel[<span class="number">2</span>][<span class="number">0</span>]; (index == wheel[<span class="number">1</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">0</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">2</span>][<span class="number">0</span>]); index--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (index &lt; <span class="number">28</span>) index = <span class="number">35</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            wheel[<span class="number">2</span>][<span class="number">0</span>] = index;</span><br><span class="line">            windex = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (windex == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">41</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (index = wheel[<span class="number">1</span>][<span class="number">0</span>]; (index == wheel[<span class="number">2</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">0</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">1</span>][<span class="number">0</span>]); index--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (index &lt; <span class="number">28</span>) index = <span class="number">35</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            wheel[<span class="number">1</span>][<span class="number">0</span>] = index;</span><br><span class="line">            windex = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (windex == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">40</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (index = wheel[<span class="number">0</span>][<span class="number">0</span>]; (index == wheel[<span class="number">2</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">1</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">0</span>][<span class="number">0</span>]); index--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (index &lt; <span class="number">28</span>) index = <span class="number">35</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            wheel[<span class="number">0</span>][<span class="number">0</span>] = index;</span><br><span class="line">            windex = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    dig1 = reflect[<span class="number">0</span>]; dig2 = wheel[<span class="number">2</span>][<span class="number">0</span>];  dig3 = wheel[<span class="number">1</span>][<span class="number">0</span>]; dig4 = wheel[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">    nixisend();</span><br><span class="line">    dig1 = <span class="number">37</span>; dig2 = <span class="number">37</span>; dig3 = <span class="number">37</span>; dig4 = <span class="number">37</span>;</span><br><span class="line">    digitalWrite(led1, LOW);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Position the Inner setting of each Rotor </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mode2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    digitalWrite(led2, HIGH);</span><br><span class="line">    <span class="keyword">if</span> (windex == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">47</span>) &#123; wheel[<span class="number">2</span>][<span class="number">1</span>]++; <span class="keyword">if</span> (wheel[<span class="number">2</span>][<span class="number">1</span>] &gt; <span class="number">25</span>) wheel[<span class="number">2</span>][<span class="number">1</span>] = <span class="number">0</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">48</span>) &#123; wheel[<span class="number">1</span>][<span class="number">1</span>]++; <span class="keyword">if</span> (wheel[<span class="number">1</span>][<span class="number">1</span>] &gt; <span class="number">25</span>) wheel[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">0</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">49</span>) &#123; wheel[<span class="number">0</span>][<span class="number">1</span>]++; <span class="keyword">if</span> (wheel[<span class="number">0</span>][<span class="number">1</span>] &gt; <span class="number">25</span>) wheel[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">0</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">42</span>) &#123; wheel[<span class="number">2</span>][<span class="number">1</span>]--; <span class="keyword">if</span> (wheel[<span class="number">2</span>][<span class="number">1</span>] &lt; <span class="number">0</span>) wheel[<span class="number">2</span>][<span class="number">1</span>] = <span class="number">25</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">41</span>) &#123; wheel[<span class="number">1</span>][<span class="number">1</span>]--; <span class="keyword">if</span> (wheel[<span class="number">1</span>][<span class="number">1</span>] &lt; <span class="number">0</span>) wheel[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">25</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">40</span>) &#123; wheel[<span class="number">0</span>][<span class="number">1</span>]--; <span class="keyword">if</span> (wheel[<span class="number">0</span>][<span class="number">1</span>] &lt; <span class="number">0</span>) wheel[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">25</span>; &#125;</span><br><span class="line">        windex = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dig2 = wheel[<span class="number">2</span>][<span class="number">1</span>]; dig3 = wheel[<span class="number">1</span>][<span class="number">1</span>]; dig4 = wheel[<span class="number">0</span>][<span class="number">1</span>]; dig1 = <span class="number">0</span>;</span><br><span class="line">    nixisend();</span><br><span class="line">    dig1 = <span class="number">37</span>; dig2 = <span class="number">37</span>; dig3 = <span class="number">37</span>; dig4 = <span class="number">37</span>;</span><br><span class="line">    digitalWrite(led2, LOW);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Position the Start character of each Wheel </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mode3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    digitalWrite(led3, HIGH);</span><br><span class="line">    <span class="keyword">if</span> (windex == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">46</span>) &#123; reflect[<span class="number">1</span>]++; <span class="keyword">if</span> (reflect[<span class="number">1</span>] &gt; <span class="number">25</span>) reflect[<span class="number">1</span>] = <span class="number">0</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">47</span>) &#123; wheel[<span class="number">2</span>][<span class="number">2</span>]++; <span class="keyword">if</span> (wheel[<span class="number">2</span>][<span class="number">2</span>] &gt; <span class="number">25</span>) wheel[<span class="number">2</span>][<span class="number">2</span>] = <span class="number">0</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">48</span>) &#123; wheel[<span class="number">1</span>][<span class="number">2</span>]++; <span class="keyword">if</span> (wheel[<span class="number">1</span>][<span class="number">2</span>] &gt; <span class="number">25</span>) wheel[<span class="number">1</span>][<span class="number">2</span>] = <span class="number">0</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">49</span>) &#123; wheel[<span class="number">0</span>][<span class="number">2</span>]++; <span class="keyword">if</span> (wheel[<span class="number">0</span>][<span class="number">2</span>] &gt; <span class="number">25</span>) wheel[<span class="number">0</span>][<span class="number">2</span>] = <span class="number">0</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">43</span>) &#123; reflect[<span class="number">1</span>]--; <span class="keyword">if</span> (reflect[<span class="number">1</span>] &lt; <span class="number">0</span>) reflect[<span class="number">1</span>] = <span class="number">25</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">42</span>) &#123; wheel[<span class="number">2</span>][<span class="number">2</span>]--; <span class="keyword">if</span> (wheel[<span class="number">2</span>][<span class="number">2</span>] &lt; <span class="number">0</span>) wheel[<span class="number">2</span>][<span class="number">2</span>] = <span class="number">25</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">41</span>) &#123; wheel[<span class="number">1</span>][<span class="number">2</span>]--; <span class="keyword">if</span> (wheel[<span class="number">1</span>][<span class="number">2</span>] &lt; <span class="number">0</span>) wheel[<span class="number">1</span>][<span class="number">2</span>] = <span class="number">25</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">40</span>) &#123; wheel[<span class="number">0</span>][<span class="number">2</span>]--; <span class="keyword">if</span> (wheel[<span class="number">0</span>][<span class="number">2</span>] &lt; <span class="number">0</span>) wheel[<span class="number">0</span>][<span class="number">2</span>] = <span class="number">25</span>; &#125;</span><br><span class="line">        windex = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dig1 = reflect[<span class="number">1</span>]; dig2 = wheel[<span class="number">2</span>][<span class="number">2</span>]; dig3 = wheel[<span class="number">1</span>][<span class="number">2</span>]; dig4 = wheel[<span class="number">0</span>][<span class="number">2</span>];</span><br><span class="line">    nixisend();</span><br><span class="line">    dig1 = <span class="number">37</span>; dig2 = <span class="number">37</span>; dig3 = <span class="number">37</span>; dig4 = <span class="number">37</span>;</span><br><span class="line">    digitalWrite(led3, LOW);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Define the Plugboard pairs </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mode4</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">    digitalWrite(led4, HIGH);</span><br><span class="line">    <span class="keyword">if</span> (pluguse &lt;= <span class="number">9</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (plugval[<span class="number">0</span>][paindex] == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (index = paindex;(index == paindex) || (index == pbindex) || (plugval[<span class="number">0</span>][index] == <span class="number">1</span>); index++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (index &gt; <span class="number">24</span>) index = <span class="number">-1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            paindex = index;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (plugval[<span class="number">0</span>][pbindex] == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (index = pbindex;(index == pbindex) || (index == paindex) || (plugval[<span class="number">0</span>][index] == <span class="number">1</span>); index++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (index &gt; <span class="number">24</span>) index = <span class="number">-1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            pbindex = index;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (windex == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (keyval == <span class="number">46</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (index = paindex;(index == paindex) || (index == pbindex) || (plugval[<span class="number">0</span>][index] == <span class="number">1</span>); index++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (index &gt; <span class="number">24</span>) index = <span class="number">-1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                paindex = index;</span><br><span class="line">                windex = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (keyval == <span class="number">43</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (index = paindex;(index == paindex) || (index == pbindex) || (plugval[<span class="number">0</span>][index] == <span class="number">1</span>); index--) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (index &lt; <span class="number">1</span>) index = <span class="number">26</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                paindex = index;</span><br><span class="line">                windex = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (keyval == <span class="number">49</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (index = pbindex;(index == pbindex) || (index == paindex) || (plugval[<span class="number">0</span>][index] == <span class="number">1</span>); index++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (index &gt; <span class="number">24</span>) index = <span class="number">-1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                pbindex = index;</span><br><span class="line">                windex = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (keyval == <span class="number">40</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (index = pbindex;(index == pbindex) || (index == paindex) || (plugval[<span class="number">0</span>][index] == <span class="number">1</span>); index--) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (index &lt; <span class="number">1</span>) index = <span class="number">26</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                pbindex = index;</span><br><span class="line">                windex = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (keyval == <span class="number">44</span>) &#123;</span><br><span class="line">                plugval[<span class="number">0</span>][paindex] = <span class="number">1</span>;</span><br><span class="line">                plugval[<span class="number">1</span>][paindex] = pbindex;</span><br><span class="line">                plugval[<span class="number">0</span>][pbindex] = <span class="number">1</span>;</span><br><span class="line">                plugval[<span class="number">1</span>][pbindex] = paindex;</span><br><span class="line">                windex = <span class="number">0</span>;</span><br><span class="line">                pluguse++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        dig1 = paindex; dig2 = <span class="number">19</span>; dig3 = <span class="number">14</span>; dig4 = pbindex;</span><br><span class="line">        nixisend();</span><br><span class="line">        dig1 = <span class="number">37</span>; dig2 = <span class="number">37</span>; dig3 = <span class="number">37</span>; dig4 = <span class="number">37</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> done();</span><br><span class="line">    digitalWrite(led4, LOW);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This is Normal Operation Mode to Encrypt/Decrypt </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mode5</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> pv = <span class="number">0</span>;</span><br><span class="line">    digitalWrite(led5, HIGH);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ((keyval &gt;= <span class="number">0</span>) &amp;&amp; (keyval &lt;= <span class="number">25</span>) &amp;&amp; (windex == <span class="number">1</span>)) &#123;</span><br><span class="line">        procesvala = keyval;</span><br><span class="line">        indexwheels();</span><br><span class="line">    &#125;</span><br><span class="line">    windex = <span class="number">0</span>;</span><br><span class="line">    procesval = procesvala;</span><br><span class="line">    procesval = plugval[<span class="number">1</span>][procesval];</span><br><span class="line">    <span class="comment">//Serial.print(procesval); Serial.print("   ");</span></span><br><span class="line"></span><br><span class="line">    pv = procesval + (wheel[<span class="number">0</span>][<span class="number">2</span>] - wheel[<span class="number">0</span>][<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">if</span> (pv &lt; <span class="number">0</span>) pv += <span class="number">26</span>; </span><br><span class="line">    procesval = rotorvals[wheel[<span class="number">0</span>][<span class="number">0</span>] - <span class="number">27</span>][pv];</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt;= <span class="number">100</span>) procesval -= <span class="number">100</span>;</span><br><span class="line">    procesval = (procesval - (wheel[<span class="number">0</span>][<span class="number">2</span>] - wheel[<span class="number">0</span>][<span class="number">1</span>]));</span><br><span class="line">    <span class="keyword">if</span> (procesval &lt; <span class="number">0</span>) procesval += <span class="number">26</span>;</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt; <span class="number">25</span>) procesval -= <span class="number">26</span>;</span><br><span class="line">    <span class="comment">//Serial.print(procesval); Serial.print("   ");</span></span><br><span class="line"></span><br><span class="line">    pv = procesval + (wheel[<span class="number">1</span>][<span class="number">2</span>] - wheel[<span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">if</span> (pv &lt; <span class="number">0</span>) pv += pv + <span class="number">26</span>;</span><br><span class="line">    procesval = rotorvals[wheel[<span class="number">1</span>][<span class="number">0</span>] - <span class="number">27</span>][pv];</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt;= <span class="number">100</span>) procesval -= <span class="number">100</span>;</span><br><span class="line">    procesval = (procesval - (wheel[<span class="number">1</span>][<span class="number">2</span>] - wheel[<span class="number">1</span>][<span class="number">1</span>]));</span><br><span class="line">    <span class="keyword">if</span> (procesval &lt; <span class="number">0</span>) procesval += <span class="number">26</span>;</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt; <span class="number">25</span>) procesval -= <span class="number">26</span>;</span><br><span class="line">    <span class="comment">//Serial.print(procesval); Serial.print("   ");</span></span><br><span class="line"></span><br><span class="line">    pv = procesval + (wheel[<span class="number">2</span>][<span class="number">2</span>] - wheel[<span class="number">2</span>][<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">if</span> (pv &lt; <span class="number">0</span>) pv += <span class="number">26</span>;</span><br><span class="line">    procesval = rotorvals[wheel[<span class="number">2</span>][<span class="number">0</span>] - <span class="number">27</span>][pv];</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt;= <span class="number">100</span>) procesval -= <span class="number">100</span>;</span><br><span class="line">    procesval = (procesval - (wheel[<span class="number">2</span>][<span class="number">2</span>] - wheel[<span class="number">2</span>][<span class="number">1</span>]));</span><br><span class="line">    <span class="keyword">if</span> (procesval &lt; <span class="number">0</span>) procesval += <span class="number">26</span>;</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt; <span class="number">25</span>) procesval -= <span class="number">26</span>;</span><br><span class="line">    <span class="comment">//Serial.print(procesval); Serial.print("   ");</span></span><br><span class="line"></span><br><span class="line">    pv = procesval;</span><br><span class="line">    procesval = rotorvals[reflect[<span class="number">0</span>] + <span class="number">7</span>][pv];</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt;= <span class="number">100</span>) procesval -= <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">if</span> (procesval &lt; <span class="number">0</span>) procesval += <span class="number">26</span>;</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt; <span class="number">25</span>) procesval -= <span class="number">26</span>;</span><br><span class="line">    <span class="comment">//Serial.print(procesval); Serial.print("   ");</span></span><br><span class="line"></span><br><span class="line">    procesval = rotorvals[reflect[<span class="number">0</span>] + <span class="number">9</span>][procesval];</span><br><span class="line">    <span class="comment">//Serial.print(procesval); Serial.print("   ");</span></span><br><span class="line"></span><br><span class="line">    pv = procesval + <span class="number">26</span>;</span><br><span class="line">    procesval = rotorvali[reflect[<span class="number">0</span>] + <span class="number">7</span>][pv];</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt;= <span class="number">100</span>) procesval -= <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">if</span> (procesval &lt; <span class="number">0</span>) procesval += <span class="number">26</span>;</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt; <span class="number">25</span>) procesval -= <span class="number">26</span>;</span><br><span class="line">    <span class="comment">//Serial.print(procesval); Serial.print("   ");</span></span><br><span class="line"></span><br><span class="line">    pv = procesval + (wheel[<span class="number">2</span>][<span class="number">2</span>] - wheel[<span class="number">2</span>][<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">if</span> (pv &lt; <span class="number">0</span>) pv += <span class="number">26</span>;</span><br><span class="line">    procesval = rotorvali[wheel[<span class="number">2</span>][<span class="number">0</span>] - <span class="number">27</span>][pv];</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt;= <span class="number">100</span>) procesval -= <span class="number">100</span>;</span><br><span class="line">    procesval = (procesval - (wheel[<span class="number">2</span>][<span class="number">2</span>] - wheel[<span class="number">2</span>][<span class="number">1</span>]));</span><br><span class="line">    <span class="keyword">if</span> (procesval &lt; <span class="number">0</span>) procesval += <span class="number">26</span>;</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt; <span class="number">25</span>) procesval -= <span class="number">26</span>;</span><br><span class="line">    <span class="comment">//Serial.print(procesval); Serial.print("   ");</span></span><br><span class="line"></span><br><span class="line">    pv = procesval + (wheel[<span class="number">1</span>][<span class="number">2</span>] - wheel[<span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">if</span> (pv &lt; <span class="number">0</span>) pv += <span class="number">26</span>;</span><br><span class="line">    procesval = rotorvali[wheel[<span class="number">1</span>][<span class="number">0</span>] - <span class="number">27</span>][pv];</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt;= <span class="number">100</span>) procesval -= <span class="number">100</span>;</span><br><span class="line">    procesval = (procesval - (wheel[<span class="number">1</span>][<span class="number">2</span>] - wheel[<span class="number">1</span>][<span class="number">1</span>]));</span><br><span class="line">    <span class="keyword">if</span> (procesval &lt; <span class="number">0</span>) procesval += <span class="number">26</span>;</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt; <span class="number">25</span>) procesval -= <span class="number">26</span>;</span><br><span class="line">    <span class="comment">//Serial.print(procesval); Serial.print("   ");</span></span><br><span class="line"></span><br><span class="line">    pv = procesval + (wheel[<span class="number">0</span>][<span class="number">2</span>] - wheel[<span class="number">0</span>][<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">if</span> (pv &lt; <span class="number">0</span>) pv += <span class="number">26</span>;</span><br><span class="line">    procesval = rotorvali[wheel[<span class="number">0</span>][<span class="number">0</span>] - <span class="number">27</span>][pv];</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt;= <span class="number">100</span>) procesval -= <span class="number">100</span>;</span><br><span class="line">    procesval = (procesval - (wheel[<span class="number">0</span>][<span class="number">2</span>] - wheel[<span class="number">0</span>][<span class="number">1</span>]));</span><br><span class="line">    <span class="keyword">if</span> (procesval &lt; <span class="number">0</span>) procesval += <span class="number">26</span>;</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt; <span class="number">25</span>) procesval -= <span class="number">26</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Serial.print(procesval); Serial.print("   ");</span></span><br><span class="line">    procesval = plugval[<span class="number">1</span>][procesval];</span><br><span class="line"></span><br><span class="line">    lampval = procesval;</span><br><span class="line">    <span class="comment">//Serial.println(lampval);</span></span><br><span class="line">    dig1 = reflect[<span class="number">1</span>]; dig2 = wheel[<span class="number">2</span>][<span class="number">2</span>]; dig3 = wheel[<span class="number">1</span>][<span class="number">2</span>]; dig4 = wheel[<span class="number">0</span>][<span class="number">2</span>];</span><br><span class="line">    lampita();</span><br><span class="line">    nixisend();</span><br><span class="line">    lampitb();</span><br><span class="line">    dig1 = <span class="number">37</span>; dig2 = <span class="number">37</span>; dig3 = <span class="number">37</span>; dig4 = <span class="number">37</span>;</span><br><span class="line">    digitalWrite(led5, LOW);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Helper Function to light the proper key</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">lampita</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    digitalWrite(lamparray[lampval][<span class="number">0</span>], <span class="number">0</span>);</span><br><span class="line">    digitalWrite(lamparray[lampval][<span class="number">1</span>], <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">lampitb</span><span class="params">()</span></span>&#123;</span><br><span class="line">    digitalWrite(lamparray[lampval][<span class="number">0</span>], <span class="number">1</span>);</span><br><span class="line">    digitalWrite(lamparray[lampval][<span class="number">1</span>], <span class="number">1</span>); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Help Function to illuminate "Nixies"</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">nixisend</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    sixteenSegWrite(<span class="number">0</span>, dig1);</span><br><span class="line">    sixteenSegWrite(<span class="number">1</span>, dig2);</span><br><span class="line">    sixteenSegWrite(<span class="number">2</span>, dig3);</span><br><span class="line">    sixteenSegWrite(<span class="number">3</span>, dig4);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">marquee</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    time = millis();</span><br><span class="line">    <span class="keyword">if</span> (mtime &lt; time) &#123;</span><br><span class="line">        mtime = time + <span class="number">400</span>;</span><br><span class="line">        mdex++;</span><br><span class="line">    &#125;</span><br><span class="line">    dig1 = data[mdex];</span><br><span class="line">    dig2 = data[mdex + <span class="number">1</span>];</span><br><span class="line">    dig3 = data[mdex + <span class="number">2</span>];</span><br><span class="line">    dig4 = data[mdex + <span class="number">3</span>];</span><br><span class="line">    <span class="keyword">if</span> (mdex &gt;= <span class="number">31</span>) mdex = <span class="number">0</span>;</span><br><span class="line">    nixisend();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Function that actually turns on each of 17 appropriate segments on each "Nixie"</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sixteenSegWrite</span><span class="params">(<span class="keyword">int</span> digit, <span class="keyword">int</span> character)</span> </span>&#123;</span><br><span class="line">    digitalWrite(anode[digit],<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; <span class="number">17</span>; index++) &#123;</span><br><span class="line">        digitalWrite(segment[index], segmentvals[character][index]);</span><br><span class="line">    &#125;</span><br><span class="line">    delay(<span class="number">7</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt;= <span class="number">16</span>; index++) &#123;</span><br><span class="line">        digitalWrite(segment[index], <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    digitalWrite(anode[digit], <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">done</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    dig1 = <span class="number">3</span>; dig2 = <span class="number">14</span>; dig3 = <span class="number">13</span>; dig4 = <span class="number">4</span>;</span><br><span class="line">    nixisend();</span><br><span class="line">    dig1 = <span class="number">37</span>; dig2 = <span class="number">37</span>; dig3 = <span class="number">37</span>; dig4 = <span class="number">37</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">indexwheels</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//Serial.print(rotorvals[wheel[0][0]-27][wheel[0][2]]);</span></span><br><span class="line">    <span class="comment">//Serial.print("    "); Serial.print(wheel[0][0]-27); Serial.print("    "); Serial.println(wheel[0][2]);</span></span><br><span class="line">    <span class="keyword">if</span> (rotorvals[wheel[<span class="number">0</span>][<span class="number">0</span>] - <span class="number">27</span>][wheel[<span class="number">0</span>][<span class="number">2</span>]] &gt;= <span class="number">100</span>) windex1 = <span class="number">1</span>;</span><br><span class="line">    wheel[<span class="number">0</span>][<span class="number">2</span>]++;</span><br><span class="line">    <span class="keyword">if</span> (wheel[<span class="number">0</span>][<span class="number">2</span>] &gt; <span class="number">25</span>) wheel[<span class="number">0</span>][<span class="number">2</span>] = <span class="number">0</span>;</span><br><span class="line">    windex = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (windex1 == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (rotorvals[wheel[<span class="number">1</span>][<span class="number">0</span>] - <span class="number">27</span>][wheel[<span class="number">1</span>][<span class="number">2</span>]] &gt;= <span class="number">100</span>) windex2 = <span class="number">1</span>;</span><br><span class="line">        wheel[<span class="number">1</span>][<span class="number">2</span>]++;</span><br><span class="line">        <span class="keyword">if</span> (wheel[<span class="number">1</span>][<span class="number">2</span>] &gt; <span class="number">25</span>) wheel[<span class="number">1</span>][<span class="number">2</span>] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    windex1 = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (windex2 == <span class="number">1</span>) &#123;</span><br><span class="line">        wheel[<span class="number">2</span>][<span class="number">2</span>]++;</span><br><span class="line">        <span class="keyword">if</span> (wheel[<span class="number">2</span>][<span class="number">2</span>] &gt; <span class="number">25</span>) wheel[<span class="number">2</span>][<span class="number">2</span>] = <span class="number">0</span>;</span><br><span class="line">        windex2 = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>IF there is enough interest, we plan on are creating a PCB that would will allow for a much easier assembly of this wonderful fully functional Enigma replica. Please visit <a href="http://www.stgeotronics.com" target="_blank" rel="noopener">http://www.stgeotronics.com</a> to find out about availability, pricing &amp; to place your order or pre-order now. The Circuit schematics are published, so the PCB has entered it’s development stage. Soon to be tested.<br>如果有足够的利润，我们将研发能够使全功能Enigma机复制品装载更为容易的印刷电路板。请登陆 <a href="http://www.stgeotronics.com" target="_blank" rel="noopener">http://www.stgeotronics.com</a> 查询商品上架与否、价格、下单或预订吧。电路图已经发布了，印刷电路也已进入开发阶段，即将内测。</p><h2 id="Step-9-Circuit-Schematics"><a href="#Step-9-Circuit-Schematics" class="headerlink" title="Step 9: Circuit Schematics"></a>Step 9: Circuit Schematics</h2><p>第九步：电路图<br><img src="/images/2018-08/FEWJUCNHMMFCNPV.LARGE.jpg" alt=""><br><img src="/images/2018-08/FFCPWADHMMF8FRX.LARGE.jpg" alt=""></p><p>In response to the popular demand, here are the two Circuit Schematics.<br>徇众要求，电路图两份在此。<br>The first one shows how our fake nixie tubes (the 4 elevated 16-Segment units) are wired in order to provide the response that the rotors provide on a real Enigma machine. They are also used in each setup mode to provide feedback on the setting up of the machine.<br>第一个是仿电子管（4个16段显示单元）如何布线，用于显示转子在Enigma机上的输出信号。同时，它们也用于每种调试模式，反馈用户机器设定信息。<br>The second one shows how each of the 26 keyboard buttons and 10 function keys, the 26 key lamps &amp; the 5 LEDS are all wired.<br>第二幅电路图显示26个字母按键及10个功能键、26个键盘灯和5个LED是如何布线的。<br>All LED resistors are 470 Ohms and all Pushbutton resistors are 1KOhm.<br>所有LED电阻都是470欧，而开关电阻则都是1千欧。<br>Stay tuned for the PCB design file…<br>印刷电路设计档仍在修正中。<br>We hope you enjoyed our first Instructable!<br>希望你享受我们第一份制作教程!<br>Thank You for your time.<br>感谢你抽出宝贵时间阅读！</p><h2 id="Step-10-Prototype-Boards"><a href="#Step-10-Prototype-Boards" class="headerlink" title="Step 10: Prototype Boards"></a>Step 10: Prototype Boards</h2><p>第十步：PCB样机版<br><img src="/images/2018-08/F7E23SFHOHYMQIY.LARGE.jpg" alt=""><br><img src="/images/2018-08/FRVNOESHOPQDW25.LARGE.jpg" alt=""></p><p>Due to popular demand, we designed &amp; ordered some Printed Circuit Boards. Well, our PCBs are finally in and at first glance, they look beautiful! We have been busy populating &amp; testing one to make sure it performs as good as it looks and more importantly, as well as our proof-of-concept device.<br>徇众要求，我们设计及定制了一些印刷电路板。它们终于面世了，如此清纯可爱！我们忙于组装，并测试其中一块样品，确保它在功能上与外观一样完美无暇。更重要的是，能实现和那台原型测试机一样的功能。<br>The boards we ordered are almost perfect: they each need a little jumper wire to fix a small design flaw. This small flaw does not affect behavior or functionality and is an easy fix.<br>订购回来的底板几乎完美，只需一点引脚线去修补设计瑕疵。而这些瑕疵对功能没有影响，修理它们是小菜一碟。<br>With this jumper in place, you can now make your own Enigma Replica much easier &amp; faster than running all wires this instructable shows. So, we are now happy to report that testing is completed &amp; the new boards work just fine!<br>有了这些引脚，你能更容易制作自己的Enigma复刻机，比起教程里的布线方便多了。我们在此很高兴宣布，测试完成，新型板一样给力！<br>We are now accepting orders at <a href="http://www.stgeotronics.com" target="_blank" rel="noopener">www.stgeotronics.com</a> &amp; have started shipping.<br>Pictures of the assembly have been added as Step 11.<br>下单订购请登陆 <a href="http://www.stgeotronics.com" target="_blank" rel="noopener">http://www.stgeotronics.com</a> ，已发货热卖中。组装图片请见第十一步。<br>Thank You for your overwhelming support &amp; wonderful feedback!<br>感谢大家的不懈支持和宝贵反馈意见！</p><h2 id="Step-11-Assembled-Kits"><a href="#Step-11-Assembled-Kits" class="headerlink" title="Step 11: Assembled Kits"></a>Step 11: Assembled Kits</h2><p>第十一步：组装完成的作品<br><img src="/images/2018-08/FGKWVNEHP8PLOCX.LARGE.jpg" alt=""><br><img src="/images/2018-08/FVGEWVMHP989E1R.LARGE.jpg" alt=""><br><img src="/images/2018-08/FMICFEUHP989E1T.LARGE.jpg" alt=""></p><p>更多图片可以前往<a href="https://www.instructables.com/id/Make-your-own-Enigma-Replica/#step11" target="_blank" rel="noopener">原文</a>查看。<br>This assembly took one evening &amp; you can look at assembly pictures above for an overview of the process.<br>花了一晚上组装完成，全过程的概览如上图所示。<br>Thank You for the support &amp; feedback!<br>感谢你的支持与反馈！</p><h2 id="更多"><a href="#更多" class="headerlink" title="更多"></a>更多</h2><p>博主在深入了解Enigma机后，制作了一个JavaScript版本的虚拟机，实现了几乎全部功能，可以点击下方链接前往。<br>本站的JavaScript版本：<a href="https://galaxymimi.com/app/enigma/" target="_blank" rel="noopener">主站&gt;应用&gt;原创游戏&gt;Enigma</a><br>这个版本暂未针对移动端进行优化，请使用桌面端打开。<br>而原文中基于Arduino开发的实体机器，由于制作过于复杂，博主还在进行研究，看上去所有的代码都是功能正常的。</p><p>参考文章：<br><a href="https://en.wikipedia.org/wiki/Enigma_machine" target="_blank" rel="noopener">恩尼格玛密码机</a><br><a href="https://web.archive.org/web/20150730050426/http://oszine.com/enigma" target="_blank" rel="noopener">自己打造一台恩尼格码密码机</a><br><a href="https://www.bletchleypark.org.uk" target="_blank" rel="noopener">Bletchley Park</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/2018-08/F5YSP9KHMF6R1PD.LARGE.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;这篇文章翻译自：&lt;a href=&quot;https://www.instructables.com/id/Make-your-own-Enigma-Replica&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;MAKE YOUR OWN ENIGMA REPLICA&lt;/a&gt;&lt;br&gt;在对称加密学当中，恩尼格玛机绝对是承前启后的存在。它将密码学研究从以前的语言文字学中心完全转移到了数学身上。在这里牵涉的密码并不是我们平时邮箱、银行帐号那种狭义概念，那种顶多叫做口令。这里说的密码就是通过某种映射方式，把一篇文章变得面目全非，以达到保密效果；只有特定的转换规律才能将其解密。这篇文章适于电脑控、军事控、历史控、数学控阅读，请做好烧脑准备。&lt;/p&gt;
&lt;p&gt;EDIT: This Instructable has won Second prize in the 2013 Radio Shack Microcontroller Contest. Thank You to all who voted!&lt;br&gt;按：这个作品是2013年无线电单片机竞赛的亚军。感谢所有支持这个作品的你们！&lt;br&gt;EDIT2: An Open Enigma with fake Standup Nixie Tubes like the ones pictured in this Instructable will soon be available as a Special Kickstarter edition.&lt;/p&gt;
&lt;p&gt;This is our very first Instructable and this step by step guide will show you how to build a fully functional electronic replica of the world famous German Enigma machine. This Arduino based Open Source project is able to encrypt &amp;amp; decrypt any Enigma M4 encoded message.&lt;br&gt;这是我们的初号机。以下教程将手把手教你如何完美复刻史上著名的德国恩尼格玛密码机。这个基于Arduino的开源程序能够加解密任何Enigma机M4型（海军型）的信息。&lt;br&gt;This first ever fully functional Open Source Enigma “exact” Replica was inspired by the Kid’s Game to Arduino Enigma Machine by sketchsk3tch.&lt;br&gt;这个第一台全功能开源完美Enigma机复制品是根据sketchsk3tch写的《Kid’s Game to Arduino Enigma Machine（从儿童玩具到Arduino恩尼格玛机）》所作。&lt;br&gt;Using Multiplexing for the LEDs, this circuit with 115 light emitting diodes uses only 38 pins and the 36 push buttons use only 4 pins total thanks to properly placed resistors (and the P-Channel MOSFETs) in the keyboard loop. These 4 16-Segment displays &amp;amp; an LED for each keyboard button would add up quickly the total number of pins required and even the Arduino Mega would have ran out of pins without the 2 methods mentioned above….&lt;br&gt;采用多路复用LED电路，仅用38个针脚的115个发光二极管和4个针脚的36个按键所连接的整个电路，全靠在键盘回路里准确放置的电阻以及P沟道场效应晶体管得以实现。要不然，4个16段显示器，以及每个按键上的LED将大幅增加所需针脚总量——即使用了Arduino Mega板，但如果没用上述两个方法，电路也不能如此简洁。&lt;br&gt;In response to the overwhelming demand, we designed the PCB and made it available through &lt;a href=&quot;http://www.stgeotronics.com&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;www.stgeotronics.com&lt;/a&gt;. Skip to Step 10 &amp;amp; beyond for more info. We also offer it as a complete electronics kit &amp;amp; an assembled &amp;amp; tested complete product.&lt;br&gt;面对电路的超额需求，我们在 &lt;a href=&quot;http://www.stgeotronics.com&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://www.stgeotronics.com&lt;/a&gt; 设计了专用的PCB板。直接跳到第10步和以后的步骤可以找到更多信息。同时，我们也发布了测试过的完整电子组装套装。&lt;/p&gt;
&lt;h2 id=&quot;Step-1-Proof-of-Concept-on-Breadboard&quot;&gt;&lt;a href=&quot;#Step-1-Proof-of-Concept-on-Breadboard&quot; class=&quot;headerlink&quot; title=&quot;Step 1: Proof of Concept on Breadboard&quot;&gt;&lt;/a&gt;Step 1: Proof of Concept on Breadboard&lt;/h2&gt;&lt;p&gt;第一步：面包板上的论证&lt;br&gt;&lt;img src=&quot;/images/2018-08/F3ULXLHHMEXSREA.LARGE.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;/images/2018-08/FQHGSW5HMF6R1XF.LARGE.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;Before going all out on the development of this electronic Enigma replica, we wanted to make sure we could properly drive the 16 Segment LEDs. If we can do that, than we will be able to do everything as the rest is only Math…&lt;br&gt;在开始制作电子Enigma机之前，我们先要确保能驱动16段LED显示。如果成功，我们就能做接下来的所有步骤——除了数学上的问题，一切都是浮云。&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://zhangshuqiao.org/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="Arduino" scheme="https://zhangshuqiao.org/tags/Arduino/"/>
    
  </entry>
  
  <entry>
    <title>武功山游记</title>
    <link href="https://zhangshuqiao.org/2018-08/%E6%AD%A6%E5%8A%9F%E5%B1%B1%E6%B8%B8%E8%AE%B0/"/>
    <id>https://zhangshuqiao.org/2018-08/武功山游记/</id>
    <published>2018-08-01T03:06:49.000Z</published>
    <updated>2018-11-18T08:49:51.231Z</updated>
    
    <content type="html"><![CDATA[<p>在7月下旬，博主和同学前往江西萍乡的武功山露营，计划观看火星冲日、月全食等天文现象。博主携带了Canon EOS 50D相机，搭配17-40mm f/4L镜头，用以记录登山过程中的美景；还向朋友借了一个70-200mm f/2.8的长焦镜头，以备不时之需。下面就来用照片分享这次旅途的经历，每张照片的具体参数都附在后面。<br>先上三组“<a href="https://zh.moegirl.org/显卡对比图" target="_blank" rel="noopener">AN对比图</a>”。</p><p>优胜美地国家公园 vs 武功山金顶<br><img src="/images/2018-08/Yosemite.jpg" alt=""><br><img src="/images/2018-08/IMG_5604.jpg" alt=""></p><p><em>40mm f/4.0 1/400s</em></p><p>Mac Sky壁纸 vs 日出前的云海<br><img src="/images/2018-08/Sky.jpg" alt=""><br><img src="/images/2018-08/IMG_5485.jpg" alt=""></p><p><em>19mm f/4.0 4s</em></p><a id="more"></a><p>Win XP壁纸（北加州Sonoma） vs 武功山“空中草原”<br><img src="/images/2018-08/Mascaloona-Bliss.jpg" alt=""><br><img src="/images/2018-08/IMG_5341.jpg" alt=""></p><p><em>17mm f/4.0 1/500s</em></p><p>虽然提前查看了天气预报，但天数有变，博主到达的那天下午，正看到乌云以肉眼可见的速度朝山上飘来。博主的心里凉了半截——毕竟，如果天公不作美，我们可能就要与天文奇观失之交臂了。在一场阵雨后，山上的空气湿度持续增加，入夜时营地被浓雾笼罩，颇有一种寂静岭的感觉。<br>这是阵雨后的夕阳和晚霞：<br><img src="/images/2018-08/IMG_5376.jpg" alt=""></p><p><em>40mm f/6.3 1/200s</em></p><p><img src="/images/2018-08/IMG_5389.jpg" alt=""></p><p><em>17mm f/4.0 1/30s</em></p><p>日落后的山庄：<br><img src="/images/2018-08/IMG_5443.jpg" alt=""></p><p><em>19mm f/4.0 96s</em></p><p>后半夜，浓雾逐渐散去，终于可以夜观天象啦！<br>长焦打月亮：<br><img src="/images/2018-08/IMG_5462.jpg" alt=""></p><p><em>200mm f/2.8 2.5s</em></p><p><strong>效果并不好，如果有条件请使用天文望远镜</strong></p><p>星空：<br><img src="/images/2018-08/IMG_5475.jpg" alt=""></p><p><em>17mm f/4.0 30s</em></p><p>在长时间的曝光下，可以明显地看到星空中恒星的转动轨迹。这是由于地球自转带来的周日视运动。<br>日出和朝霞也同样壮观：<br><img src="/images/2018-08/IMG_5532.jpg" alt=""></p><p><em>17mm f/7.1 1/160s</em></p><p>这次行程的遗憾便是器材仍不够强大，200mm焦距对应的放大率难以看清月球表面的更多细节；不过，在旅途中也收获了很多精彩的镜头，而博主对于B门曝光的参数控制与设置也有了更多经验，未来将会作出更多的尝试。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在7月下旬，博主和同学前往江西萍乡的武功山露营，计划观看火星冲日、月全食等天文现象。博主携带了Canon EOS 50D相机，搭配17-40mm f/4L镜头，用以记录登山过程中的美景；还向朋友借了一个70-200mm f/2.8的长焦镜头，以备不时之需。下面就来用照片分享这次旅途的经历，每张照片的具体参数都附在后面。&lt;br&gt;先上三组“&lt;a href=&quot;https://zh.moegirl.org/显卡对比图&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AN对比图&lt;/a&gt;”。&lt;/p&gt;
&lt;p&gt;优胜美地国家公园 vs 武功山金顶&lt;br&gt;&lt;img src=&quot;/images/2018-08/Yosemite.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;/images/2018-08/IMG_5604.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;40mm f/4.0 1/400s&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Mac Sky壁纸 vs 日出前的云海&lt;br&gt;&lt;img src=&quot;/images/2018-08/Sky.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;/images/2018-08/IMG_5485.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;19mm f/4.0 4s&lt;/em&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="其他" scheme="https://zhangshuqiao.org/categories/%E5%85%B6%E4%BB%96/"/>
    
    
      <category term="摄影" scheme="https://zhangshuqiao.org/tags/%E6%91%84%E5%BD%B1/"/>
    
  </entry>
  
  <entry>
    <title>Unicode字符与颜文字表情</title>
    <link href="https://zhangshuqiao.org/2018-07/Unicode%E5%AD%97%E7%AC%A6%E4%B8%8E%E9%A2%9C%E6%96%87%E5%AD%97%E8%A1%A8%E6%83%85/"/>
    <id>https://zhangshuqiao.org/2018-07/Unicode字符与颜文字表情/</id>
    <published>2018-07-25T06:10:27.000Z</published>
    <updated>2018-11-18T08:49:51.217Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>编码，是每个程序员绕不开的话题。对于前端工程师而言，字符更是会直观地展示在界面上。<br>提起文字，大部分人的脑中，都会定式为规整排列的字符。但是林子大了什么鸟都有，世界上可是存在着6800+种文字，难免会飞出来一些诡异的鸟…<br>而号称“万国码”的Unicode，在实现编码与展示的时候，也会不会遇到一些奇葩的事情呢？<br>事实上，可能你早已见识过了：</p><hr><p>x̙͈̝͍͕̙̄͛̽̆͌́̕͟g̘̣̠̝̟̤̥̼̼̽͑͋̈̑̒͟͞q̛̤̦̝̘͎͋̔̋͌͒̆̋̚͡f̵̢̙͇̮̠̋̀͌̅̉̃̔͜͜͠͡r̢̜̩͙̭̲͓͈̈̀͑̆͋̚͢͜m̷̛͙̝̣̲̭͍͉̊̓̾̈̋̿̚͢͟͠s̷̡̩͔̮͈̜̊̽͂̆̈́̃̓͋̏</p><p>热҈的҈字҈都҈出҈汗҈了҈</p><p>你的屏幕被蓝翔挖掘机给挖坏了不信你看;̷̸̨̀͒̏̃ͦ̈́̾̀́̎͢҉̵̶͚̼͉͖̺̥͔͇̰̹̮͙͉̻̼̭̻͕̮͇ͨͬͪ͗̇̑̽͋̀̋̊͌ͧͨͭ̓̅͐ͥ̂̔̊ͧ͊҉̶̵̷̞̩̦̳̺̳̬̬̩̣̫͇̯̥͖͍͕̠̦̼̗ͯ̽͌̔ͪͯ́́͋̍ͨ̿̿̎͒ͤ̓̅̀͂ͧ͋̏ͫͣ̔͘͜͠͏̶̵̸̧̧̥̺͓̘̺͎̜̥͕͈̝̫͎̺̮̱̤̠̠͖̳̻̥̣̪͍͕͇̮͙̹̪ͮͧͫ͂͒ͤͣ̌̽ͨͪ͒̄̄̉̒̊ͩ̅͆͘̚͘͘̚͟͟͝ͅ</p><hr><p>今天我们就来探讨一下这些奇怪的字符。</p><h2 id="文字可以戴帽子和穿鞋子"><a href="#文字可以戴帽子和穿鞋子" class="headerlink" title="文字可以戴帽子和穿鞋子"></a>文字可以戴帽子和穿鞋子</h2><p>提起泰文，很多朋友都会立即想到：<strong>萨瓦迪卡（你好）</strong>。<br>但这句话是怎么写的呢？<br>其实这句你好，男生和女生之间还有差异，男生写法是：<code>สวัสดีครับ</code>，女生则是：<code>สวัสดีค่ะ</code>。<br>不过这并不重要，重要的是，我们发现某些字的上面，还带了特殊的符号。就好像是戴上了帽子。<br>事实上，泰文字符不仅会“戴帽子”，偶尔还会“穿鞋子”，比如这三个字符：<code>ผ ผู ผู้</code>。<br>如果脑洞再大一点，有人就会想，那是不是还可以戴多顶帽子呢？<br>的确如此…泰文允许你穿一双鞋子，并且戴两顶帽子。完整的形式是这样的：<br><img src="/images/2018-07/FqLq54KAJkoSVA-7_jdJpSRI3fcI.png" alt=""></p><p>所以，平时看惯了中英文的我们，需要改变一下思路了。<br>世界上的文字，并不全是规规整整横向排列的格子，也存在像泰文这种变形金刚<strong>组合式</strong>的文字。<br>虽然标准的泰文里，“帽子”和“鞋子”的数量是有限制的，但由于国际码的迷之设计（先卖个关子），在计算机里显示的泰文字符，却可以拥有无数的帽子和鞋子。也就是说，它变成了一款可以在Y轴无限拓展的文字！<br>并且，咱不光可以往上喷，还可以有一定角度…<br><img src="/images/2018-07/Fr8cS9UX21MEgBtmOU_CDhreGqlO.jpeg" alt=""></p><p><img src="/images/2018-07/Fr-rlbbriydg4cUmoU_Zs6VQSbpU.jpeg" alt=""></p><p>还可以<br><img src="/images/2018-07/Fk0kXSTymPxute84rceAkzGd5PKA.jpeg" alt=""></p><p>简直是不讲道理。<br>（由于一些系统会崩溃，这里使用截图）</p><a id="more"></a><h2 id="人与机器的矛盾"><a href="#人与机器的矛盾" class="headerlink" title="人与机器的矛盾"></a>人与机器的矛盾</h2><p>然后我们会质问Unicode，你为何不讲道理？<br>如此的设计，近乎是一个bug；但即使是bug，也应该早就修复了呀。<br>事实上，这样的设计，是为了解决一个问题：人与机器的矛盾。<br>首先是存储的矛盾。<br>如果把每个组合好的泰文用一个编码来表示，那么至少需要<strong>44×21×4=3696</strong>个编码（实际上可能要比这还多）。用如此多的编码来处理基本元素只有<strong>69</strong>个的文字是非常浪费的，因此电脑采用一套称为复杂文字编排（CTL）的设计来解决矛盾。<br>简单的说，泰文的每个基本字符对应一个编码，用户在输入法里依次输入多个基本字符进行拼合，最后敲一个特殊的“<strong>结束字符</strong>”；这时前面输入的基本字符，就拼合成了一个<strong>单独</strong>的泰文字符，在屏幕中显示。<br>这样就解决了存储的空间浪费问题。<br>但这样就带来了第二个矛盾，识别的问题。<br>人可以轻松地识别一个泰文合字是否拼写正确、有意义；但机器在显示时却很难进行判断，即使可以也会带来相应的性能问题。<br>如何解决呢？如今会在输入法上做一些文章，比如打一个声调符号后就不能再输入了。不过，由于泰文这种基于结束标志合成字符的本质，你还是没法避免艺术家们使用复制粘贴、手工撰改字符位置等方式去进行创造，只能起到一些限制作用。<br>其次，在比较新版本的Webkit里，在显示上会阻止这种往上下冒的字符，这样至少不影响排版。所以有部分字符已经不会出现上下叠加的情形了，你可以在不同浏览器，观察一下这个字符的显示：ส็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็</p><h2 id="萌即正义的颜文字-ง-•̀-•́-ง"><a href="#萌即正义的颜文字-ง-•̀-•́-ง" class="headerlink" title="萌即正义的颜文字 (ง •̀_•́)ง"></a>萌即正义的颜文字 (ง •̀_•́)ง</h2><p>也许你觉得泰文奇葩，但它的声调就在文字里，看到就能准确地读出来。这样更容易传播，是不是也没了你读文言文要查字典的烦恼呢？所以文字的设计各有优劣。<br>这样的设计不止泰文，它只是一个典型的例子。除此之外常见的还有老挝文、藏文。<br>脑洞大开的艺术家们，又会想到另外一个好玩的事情：我能不能拿老挝文的“帽子”，组合藏文的“鞋子”，合成一个独立的字符呢？<br>他们赢了。不久，颜文字开始流行。<br>比如，这个表情：(;´༎ຶД༎ຶ`)<br>里面有眼睛流泪的一个字符：<code>༎ຶ</code><br>它是什么语言呢？<br>事实上，它并不属于世界上任何一种语言！眼睛部分是<strong>老挝文</strong>，泪水部分属于<strong>藏文</strong>。<br>但是，你在复制它的时候，可以发现它却是一个<strong>单独</strong>的字符，这就非常的神奇。原因我们在第二部分已经讲过了。<br>我是如何知道的呢？当然我并不是个语言学家，我们可以转码一下，发现<code>༎ຶ</code>对应的编码是<code>\u0f0e\u0eb6</code>，再到<a href="https://unicode-table.com/cn/#tibetan" target="_blank" rel="noopener">unicode-table</a>里去查看就清楚了。<br>除此之外——</p><ul><li>▷ˋε´◁中ε是希腊字母</li><li>ʕ-‘ᴥ’-ʔ中ʕᴥʔ是国际音标</li><li>*(·ཀ·」∠)*中ཀ是藏文</li><li>(ง •̀_•́ )ง中ง是泰文</li><li>罒д罒中罒是中文（同网），д是俄语西里尔字母</li></ul><p>看来如果你会发颜文字，就是名副其实的会十八国语言了呢 (๑✦ˑ̫✦)✧<br>这里有B站评论区自带的颜文字表情：<br><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">(=・ω・=)</span>    <span class="comment">(〜￣△￣)</span>〜    Σ<span class="comment">(￣□￣||)</span>    <span class="comment">(´；ω；`)</span>    <span class="comment">(´▽｀)</span>ノ♪</span><br><span class="line"><span class="comment">(･∀･)</span>    <span class="comment">(°∀°)</span>ﾉ    <span class="comment">(￣3￣)</span>    ╮<span class="comment">(￣▽￣)</span>╭    <span class="comment">(´_ゝ｀)</span>    ヾ<span class="comment">(^▽^*)</span>))</span><br><span class="line">←_←    →_→    <span class="comment">(&lt;_&lt;)</span>    <span class="comment">(&gt;_&gt;)</span>    <span class="comment">(;¬_¬)</span>    <span class="comment">(｀・ω・´)</span></span><br><span class="line"><span class="comment">(⌒▽⌒)</span>    （￣▽￣）    <span class="comment">(ﾟДﾟ≡ﾟдﾟ)</span>!?    Σ<span class="comment">(ﾟдﾟ;)</span>    <span class="comment">("▔□▔)</span>/</span><br><span class="line"><span class="comment">(^・ω・^)</span>    <span class="comment">(｡･ω･｡)</span>    <span class="comment">(●￣(ｴ)</span>￣●)    ε=ε=<span class="comment">(ノ≧∇≦)</span>ノ    <span class="comment">(ฅ´ω`ฅ)</span></span><br><span class="line"><span class="comment">(-_-#)</span>    （￣へ￣）    <span class="comment">(￣ε(#￣)</span>Σ    ヽ<span class="comment">(`Д´)</span>ﾉ    <span class="comment">(´･_･`)</span></span><br><span class="line">（<span class="attr">#-_-)┯━┯    _(:3</span>」∠)_    <span class="comment">(╯°口°)</span>╯<span class="comment">(┴—┴    （/TДT)</span>/    o<span class="comment">(￣ヘ￣o＃)</span></span><br></pre></td></tr></table></figure></p><p>Unicode的转码可以在这里完成：<a href="https://galaxymimi.com/app/textoolbox.html" target="_blank" rel="noopener">主站&gt;应用&gt;JavaScript工具&gt;TexToolBox</a></p><h2 id="字体的错位"><a href="#字体的错位" class="headerlink" title="字体的错位"></a>字体的错位</h2><p>前面我们一直在谈字符的本质，但字符在屏幕中的展示，还有一个关键的因素：字体。<br>相同的字符，使用了不同的字体，它们的显示也会有差别。<br>一行中文，你设置黑体或草书，它大体来看还是规整的；但如果你设置一行英文为草书，可能就会有问题。<br>在浏览器里，如果对应编码在字体文件里为空，一般会展示成一个方格，起码不会影响其他正常字符的排版。但我们知道，Unicode的林子实在太大了…<br>在某些字体里，就会对一些特殊的字符产生错误的排版。<br>比如：热҈的҈字҈都҈出҈汗҈了҈<br>把它转义一下，就得到编码是：<br><code>\u70ed\u0488\u7684\u0488\u5b57\u0488\u90fd\u0488\u51fa\u0488\u6c57\u0488\u4e86\u0488</code><br>其中<code>\u0488</code>就是<code>҈</code>这个字符的编码，它是一个组合用的<a href="https://unicode-table.com/cn/0488" target="_blank" rel="noopener">西里尔文百千符号</a>。<br>它在大部分常用字体里，都有错位问题；而其他一些字体，比如Courier New字体，则是分开的展示：<br><img src="/images/2018-07/Fk4jy-lOTJvqGmGul8nZfz8r9B7p.png" alt=""></p><p>那么，这两种展示哪种才是正常的呢？其实都不正常。<br>我们查看<a href="https://en.wikipedia.org/wiki/Cyrillic_numerals" target="_blank" rel="noopener">西里尔文计数法的wiki</a>，可以看到它只有配合西里尔数字时，才能展示正常：<br><img src="/images/2018-07/Fn9DaIzvbgkExdrsLhSdCvJjCqX1.png" alt=""></p><p>至于你把它跟其他语言组合在一起时，我们要么看到错位，要么看到分离的展示。而且国际上并没有一个组织，去规定要怎么展示。事实上文字这么多，根本也管不过来，所以这也是混乱的原因。<br>最后补充一点，另外一小撮别有心裁的艺术家，还习惯使用这个字符去突破敏感词过滤…</p><h2 id="混乱与创新？"><a href="#混乱与创新？" class="headerlink" title="混乱与创新？"></a>混乱与创新？</h2><p>值得一提的是，Unicode是不可阻挡的潮流，它也一直在更新。比如我们常用的<a href="https://unicode-table.com/cn/sets/emoji" target="_blank" rel="noopener">Emoji表情</a>，就已经是Unicode的标准字符集。和泰文的组合一样，Emoji表情也是可以叠加的，这一点在前面的一篇关于“JavaScript展开操作符”的文章中也提到过。👪和👨‍👩‍👧‍👧就是典型的例子，它们展开后的编码就是👨👩👦🧒。<br>而本文中我们说到，大家在玩这些奇奇怪怪的字符时，都是基于类似bug的设定在搞事情。这就有很大的局限性。<br>那艺术家们又会有些大胆的想法：我能不能主动创造一些新字符，就是为了错位和组合呢？<br>我也不清楚这是创新，还是会带来更多的混乱。但事实是，iOS系统自带的字符，已经有这样的尝试了。并且搜狗输入法在iOS系统提供的诸多符号里，挑选了一些，可供用户去使用。这个功能的名字，叫做花漾字。<br><img src="/images/2018-07/IMG_0151.png" alt=""></p><p>还是得感慨艺术家们的视角是多么独特。<br>既然都这样了…最后，希望我们的国产表情包能有朝一日打入Unicode吧。</p><p>参考文章：<br><a href="http://litten.me/2017/11/13/strange-characters1" target="_blank" rel="noopener">人人都是艺术家！谈谈那些奇怪的字符（上）</a></p><p>拓展阅读：<br><a href="https://unicode-table.com/cn" target="_blank" rel="noopener">Unicode字符百科</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;编码，是每个程序员绕不开的话题。对于前端工程师而言，字符更是会直观地展示在界面上。&lt;br&gt;提起文字，大部分人的脑中，都会定式为规整排列的字符。但是林子大了什么鸟都有，世界上可是存在着6800+种文字，难免会飞出来一些诡异的鸟…&lt;br&gt;而号称“万国码”的Unicode，在实现编码与展示的时候，也会不会遇到一些奇葩的事情呢？&lt;br&gt;事实上，可能你早已见识过了：&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;x̙͈̝͍͕̙̄͛̽̆͌́̕͟g̘̣̠̝̟̤̥̼̼̽͑͋̈̑̒͟͞q̛̤̦̝̘͎͋̔̋͌͒̆̋̚͡f̵̢̙͇̮̠̋̀͌̅̉̃̔͜͜͠͡r̢̜̩͙̭̲͓͈̈̀͑̆͋̚͢͜m̷̛͙̝̣̲̭͍͉̊̓̾̈̋̿̚͢͟͠s̷̡̩͔̮͈̜̊̽͂̆̈́̃̓͋̏&lt;/p&gt;
&lt;p&gt;热҈的҈字҈都҈出҈汗҈了҈&lt;/p&gt;
&lt;p&gt;你的屏幕被蓝翔挖掘机给挖坏了不信你看;̷̸̨̀͒̏̃ͦ̈́̾̀́̎͢҉̵̶͚̼͉͖̺̥͔͇̰̹̮͙͉̻̼̭̻͕̮͇ͨͬͪ͗̇̑̽͋̀̋̊͌ͧͨͭ̓̅͐ͥ̂̔̊ͧ͊҉̶̵̷̞̩̦̳̺̳̬̬̩̣̫͇̯̥͖͍͕̠̦̼̗ͯ̽͌̔ͪͯ́́͋̍ͨ̿̿̎͒ͤ̓̅̀͂ͧ͋̏ͫͣ̔͘͜͠͏̶̵̸̧̧̥̺͓̘̺͎̜̥͕͈̝̫͎̺̮̱̤̠̠͖̳̻̥̣̪͍͕͇̮͙̹̪ͮͧͫ͂͒ͤͣ̌̽ͨͪ͒̄̄̉̒̊ͩ̅͆͘̚͘͘̚͟͟͝ͅ&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;今天我们就来探讨一下这些奇怪的字符。&lt;/p&gt;
&lt;h2 id=&quot;文字可以戴帽子和穿鞋子&quot;&gt;&lt;a href=&quot;#文字可以戴帽子和穿鞋子&quot; class=&quot;headerlink&quot; title=&quot;文字可以戴帽子和穿鞋子&quot;&gt;&lt;/a&gt;文字可以戴帽子和穿鞋子&lt;/h2&gt;&lt;p&gt;提起泰文，很多朋友都会立即想到：&lt;strong&gt;萨瓦迪卡（你好）&lt;/strong&gt;。&lt;br&gt;但这句话是怎么写的呢？&lt;br&gt;其实这句你好，男生和女生之间还有差异，男生写法是：&lt;code&gt;สวัสดีครับ&lt;/code&gt;，女生则是：&lt;code&gt;สวัสดีค่ะ&lt;/code&gt;。&lt;br&gt;不过这并不重要，重要的是，我们发现某些字的上面，还带了特殊的符号。就好像是戴上了帽子。&lt;br&gt;事实上，泰文字符不仅会“戴帽子”，偶尔还会“穿鞋子”，比如这三个字符：&lt;code&gt;ผ ผู ผู้&lt;/code&gt;。&lt;br&gt;如果脑洞再大一点，有人就会想，那是不是还可以戴多顶帽子呢？&lt;br&gt;的确如此…泰文允许你穿一双鞋子，并且戴两顶帽子。完整的形式是这样的：&lt;br&gt;&lt;img src=&quot;/images/2018-07/FqLq54KAJkoSVA-7_jdJpSRI3fcI.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;所以，平时看惯了中英文的我们，需要改变一下思路了。&lt;br&gt;世界上的文字，并不全是规规整整横向排列的格子，也存在像泰文这种变形金刚&lt;strong&gt;组合式&lt;/strong&gt;的文字。&lt;br&gt;虽然标准的泰文里，“帽子”和“鞋子”的数量是有限制的，但由于国际码的迷之设计（先卖个关子），在计算机里显示的泰文字符，却可以拥有无数的帽子和鞋子。也就是说，它变成了一款可以在Y轴无限拓展的文字！&lt;br&gt;并且，咱不光可以往上喷，还可以有一定角度…&lt;br&gt;&lt;img src=&quot;/images/2018-07/Fr8cS9UX21MEgBtmOU_CDhreGqlO.jpeg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2018-07/Fr-rlbbriydg4cUmoU_Zs6VQSbpU.jpeg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;还可以&lt;br&gt;&lt;img src=&quot;/images/2018-07/Fk0kXSTymPxute84rceAkzGd5PKA.jpeg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;简直是不讲道理。&lt;br&gt;（由于一些系统会崩溃，这里使用截图）&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://zhangshuqiao.org/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
  </entry>
  
  <entry>
    <title>在网页中添加Live2D看板娘</title>
    <link href="https://zhangshuqiao.org/2018-07/%E5%9C%A8%E7%BD%91%E9%A1%B5%E4%B8%AD%E6%B7%BB%E5%8A%A0Live2D%E7%9C%8B%E6%9D%BF%E5%A8%98/"/>
    <id>https://zhangshuqiao.org/2018-07/在网页中添加Live2D看板娘/</id>
    <published>2018-07-21T12:05:32.000Z</published>
    <updated>2018-11-18T08:49:51.222Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/2018-07/photo.jpg" alt=""><br>项目地址：<a href="https://github.com/stevenjoezhang/live2d-widget" target="_blank" rel="noopener">live2d-widget</a></p><p>克隆这个仓库到服务器上，并配置<code>autoload.js</code>，修改其中的链接为各文件的绝对地址，即可在网页中添加Live2D看板娘。<br>相对于市面上广为流传的版本，博主对触发动作和语言进行了魔改（针对Hexo NexT主题），调整了图标样式、元素定位，并解决了CSS的前缀等问题。<br>更多内容可以参考项目文档及下方链接。<br>快来把萌萌哒的看板娘抱回家吧！</p><p>参考文章：<br><a href="https://www.fghrsh.net/post/123.html" target="_blank" rel="noopener">网页添加 Live2D 看板娘</a><br><a href="https://imjad.cn/archives/lab/add-dynamic-poster-girl-with-live2d-to-your-blog-02" target="_blank" rel="noopener">给博客添加能动的看板娘(Live2D)-将其添加到网页上吧</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;/images/2018-07/photo.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;项目地址：&lt;a href=&quot;https://github.com/stevenjoezhang/live2d-widget&quot; target=&quot;_blank&quot; rel=&quot;noope
      
    
    </summary>
    
      <category term="技术" scheme="https://zhangshuqiao.org/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="JavaScript" scheme="https://zhangshuqiao.org/tags/JavaScript/"/>
    
      <category term="GitHub" scheme="https://zhangshuqiao.org/tags/GitHub/"/>
    
      <category term="PHP" scheme="https://zhangshuqiao.org/tags/PHP/"/>
    
  </entry>
  
</feed>
