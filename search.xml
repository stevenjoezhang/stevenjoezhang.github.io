<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>什么是 CAT 等级？</title>
      <link href="/2019-01/%E4%BB%80%E4%B9%88%E6%98%AFCAT%E7%AD%89%E7%BA%A7%EF%BC%9F/"/>
      <url>/2019-01/%E4%BB%80%E4%B9%88%E6%98%AFCAT%E7%AD%89%E7%BA%A7%EF%BC%9F/</url>
      
        <content type="html"><![CDATA[<p>根据国际电子电工委员会 IEC1010-1 的定义，我们把电工工作的区域分为四个等级，分别称作 CAT I，CAT II，CAT III 和 CAT IV。CAT 等级是向下兼容的，也就是说，一块 CAT IV 的表用在 CAT I，CAT II，CAT III 下使用是完全安全的，但是一块 CAT I 的万用表用在 CAT II，CAT III 和 CAT IV 环境下使用就不保证安全了。</p><h3 id="CAT-等级对用户意味着什么"><a href="#CAT-等级对用户意味着什么" class="headerlink" title="CAT 等级对用户意味着什么"></a>CAT 等级对用户意味着什么</h3><p>CAT 等级意味着对客户的人身安全承诺，它不仅仅是耐高压！CAT 等级严格规定了电气工作人员在不同级别的电气环境中可能遇到的电气设备的类型以及在这样的区域中工作所使用的测量工具必须要遵循的安全标准。CAT 后面的电压数值则表示了他们能够收到电压冲击的上限。<br>例如，一个 CAT III 600V 的万用表，表示该表可以在 CAT I，II 和 III 区域安全使用，在这三个区域里如果该表收到最高 600V 的电压冲击，表不会对人体安全产生威胁，但是这款表在 CAT IV 域使用时，或者到 700V 的高压冲击的时候，就不能保证同样的安全了。CAT 等级是向下兼容的，也就是说，一块 CAT IV 的表用在 CAT I，CAT II，CAT III 下使用是完全安全的，但是一块 CAT I 的万用表用在 CAT II，CAT III 和 CAT IV 环境下使用就不保证安全了，表可能发生爆炸、燃烧威胁到你的安全。</p><h3 id="CAT-等级划分"><a href="#CAT-等级划分" class="headerlink" title="CAT 等级划分"></a>CAT 等级划分</h3><ul><li>CAT I：通过变压器或者类似设备连接到墙上插座的二次电气线路，例如电子仪器设备类。有保护措施的电子设备、任何高压、低压回路，如办公室内部的复印机等。</li><li>CAT II：通过电源线连接到室内插座的用电设备的一次电气线路，如移动式工具，家电等。家用电器、便携工具（电钻等）、家用插座，距离三类线路 10 米以上的插座或者距离四类线路 20 米以上的插座。</li><li>CAT III：直接连接到配电盘的大型设备的一次线路及配电盘与插座之间的电路线路（三相分配电路包括单个商业照明电路）。位置固定的设备，如多相马达、多相闸盒；大型建设物内部的照明设备、线路；工业现场（车间）的机床、电源配电盘等。</li><li>CAT IV：三相公用供电设备和室外供电线路设备。涉及到『初始连接』的设备，如电站的电力分配系统；电力仪表，前端过置保护，任何室外输电线路。</li></ul><p><img src="/images/2019-01/2ccd70dcb7a54444c2cfeb2fc78c23a3.png" alt=""></p><h3 id="如何理解-CAT-等级"><a href="#如何理解-CAT-等级" class="headerlink" title="如何理解 CAT 等级"></a>如何理解 CAT 等级</h3><p>CAT 等级有各自的工作电压和瞬时峰值电压。CAT 等级的工作电压分为：50V，150V，300V，600V，1000V。工作电压越高意味着能够承受的瞬时峰值电压也越高。<br>如下表所示：</p><table><thead><tr><th>等级</th><th>瞬时峰值</th></tr></thead><tbody><tr><td>CAT IV 600V</td><td>8kV impulse</td></tr><tr><td>CAT III 600V</td><td>6kV impulse</td></tr><tr><td>CAT III 1000V</td><td>8kV impulse</td></tr><tr><td>CAT II 600V</td><td>4kV impluse</td></tr><tr><td>CAT II 1000V</td><td>6kV impulse</td></tr></tbody></table><p>下图有更详细的数据：</p><p><img src="/images/2019-01/5e0693d4c540a6d44ba986dc647409cd.png" alt=""></p><h3 id="CAT-III-600V-比-CAT-II-1000V-更安全"><a href="#CAT-III-600V-比-CAT-II-1000V-更安全" class="headerlink" title="CAT III 600V 比 CAT II 1000V 更安全"></a>CAT III 600V 比 CAT II 1000V 更安全</h3><p>人们往往无法理解这一点，为什么只能承受 600V 电压的设备的比 1000V 更安全？<br>这里涉及到信号源阻抗的问题。信号源阻抗越大，CAT 等级越低。由表 1 可知，CAT III 等级的阻抗为 2 欧姆，CAT II 等级的阻抗时 12 欧姆，即 CAT II 等级的源阻抗是 CAT III 等级阻抗的 6 倍。所以，虽然 CAT III 等级的电压虽小，但阻抗也小，电流大，从而能够承受更高能量的信号，所以说 CAT III 600V 比 CAT II 1000V 安全。<br>同一个 CAT 等级下，工作电压越高，其安全等级也越高（同一 CAT 等级的源阻抗相同）。例如：CAT III 1000V（8kV 瞬时高发）比 CAT II 600V（6kV 瞬时高压）更安全。<br>如果您需要测试一个电力电路，你应该会用到一个 CAT III 600V 或 CAT IV 600V/CAT III 1000V 的仪表，配套 CAT IV-600V/CAT III-1000V 测试线和探头。</p><h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><p>问：PicoScope 的 CAT I 等级的高压探头 TA044 为什么配套 CAT III 1000V 等级的探头尖端？是不是厂家弄错了。<br>答：不是。Pico 所有的高压差分探头配套的都是 CAT III 等级的探头尖端。如下图所示。TA044 整体上是一个在 CAT I 环境中能够安全使用的设备，能够测量的最大单端电压 7kV。探头尖端采用的是工作电压 1000V 的 CAT III 等级，该等级下能够承受的瞬时最大尖峰电压是 8kV，所以 CAT III 等级的探头尖端 用起来更加安全。</p><p><img src="/images/2019-01/4fbf3af969c5f5b73093dbfd1600be96.png" alt=""></p><p>本文转载自：<a href="http://www.eepw.com.cn/article/274406.htm" target="_blank" rel="noopener">CAT 等级</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>成功召唤独角兽</title>
      <link href="/2019-01/%E6%88%90%E5%8A%9F%E5%8F%AC%E5%94%A4%E7%8B%AC%E8%A7%92%E5%85%BD/"/>
      <url>/2019-01/%E6%88%90%E5%8A%9F%E5%8F%AC%E5%94%A4%E7%8B%AC%E8%A7%92%E5%85%BD/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/2019-01/Unicorn.png" alt=""></p><blockquote><p>当你的代码出现未定义行为时，你会得到一个 <code>segmentation fault</code> 和一堆损坏的数据。当 Jeff Dean 的代码出现未定义行为时，一个独角兽会踏着彩虹从天而降并给每个人提供免费的冰激凌。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 幽默 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>炉石卡组代码解析</title>
      <link href="/2018-12/%E7%82%89%E7%9F%B3%E5%8D%A1%E7%BB%84%E4%BB%A3%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
      <url>/2018-12/%E7%82%89%E7%9F%B3%E5%8D%A1%E7%BB%84%E4%BB%A3%E7%A0%81%E8%A7%A3%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<p>在前面的文章 <a href="/2018-12/Base64 编码的原理与实现 /">Base64 编码的原理与实现</a> 中，讲到了 Base64 编码的诸多用处，例如编码图片以嵌入 HTML 代码。如果你对此有所了解，同时还是一个炉石玩家，就不难发现，暴雪推出的卡组代码功能，本质上就是用一个 Base64 编码的字符串来存储卡组信息。毕竟，你有时会见到以 <code>=</code> 或者 <code>==</code> 结尾的卡组代码，这正是 Base64 编码的典型特征。</p><h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p>当把卡组代码粘贴到炉石传说时，客户端将忽略以 <code>#</code> 字符开头的任何行，这就提供了在卡组代码中插入注释的可能性。一个例外是在卡组代码最前面的，以 <code>###</code> 开头的第一行。如果可以的话，它将被用作套牌名称。你可以从炉石中复制一套卡组到文本编辑器看看效果。<br>没有被注释的那一行，包含了除套牌名称外的所有信息。玩家在各大论坛、社区分享卡组时，也往往只需要这一行卡组代码。</p><h2 id="DBF-ID"><a href="#DBF-ID" class="headerlink" title="DBF ID"></a>DBF ID</h2><p>为了了解编码的机制，我们需要先介绍 DBF ID。这是每张炉石卡牌（包括可收集卡牌、衍生卡牌、冒险模式专属卡牌、英雄皮肤等）的唯一标识符——是的，这也是能够卡出下图这种 BUG 的原因。皮肤被标记为了一张紫卡。</p><p><img src="/images/2018-12/tyrande.png" alt=""></p><p>而炉石卡组代码正是使用 DBF ID 来表示每张卡牌。DBF ID 可在游戏文件中找到。更加方便的方法是通过<a href="https://hearthstonejson.com" target="_blank" rel="noopener">HearthstoneJSON</a>，这上面提供了相关 API。你也可以在这个网站上直接下载最新的 <code>cards.collectible.json</code>，这里面包含了所有可收集卡牌的信息，例如各种语言的卡牌名称、描述等。</p><h2 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h2><p><strong> 除非另有说明，否则后面的每个值都是一个整数，编码为无符号的<a href="https://en.wikipedia.org/wiki/Variable-length_quantity" target="_blank" rel="noopener">varint</a>。</strong><br>如前所述，卡组代码是 Base64 编码的字节串。我们先来解码它。许多编程语言都可以做到这一点，以最好的语言 $PHP 为例：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$deckstring = <span class="string">"AAEBAaoIBJsDoxTCrgLBiQMN/gXiDP8P5hausAKlvgL4vwL5vwKW7wKm7wKMhQPzigP2igMA"</span>;</span><br><span class="line"><span class="comment"># 这是一个非常有趣的萨满卡组</span></span><br><span class="line">$binary = base64_decode($deckstring);</span><br><span class="line">$hex = bin2hex($binary);</span><br><span class="line"><span class="comment"># 对于这个卡组，$hex="00010101aa08049b03a314c2ae02c189030dfe05e20cff0fe616aeb002a5be02f8bf02f9bf0296ef02a6ef028c8503f38a03f68a0300"</span></span><br></pre></td></tr></table></figure></p><p>这样就能得到初步解码后的十六进制字符串。如果你不是很擅长编程，也可以搜索一些现成的 Base64 解码工具，看看它是如何工作的。<br>将这个十六进制字符串按每两个元素切割，再把它们从 16 进制字符串转化为整型。也就是说，它们可以是 00-ff，即 0-255。一种实现的方法是这样：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$arr = str_split($hex, <span class="number">2</span>);</span><br><span class="line">$arr = array_map(<span class="string">"hexdec"</span>, $arr);</span><br></pre></td></tr></table></figure></p><p><code>$arr</code> 是一个由整数组成的数组。更具体的来说，就是 varint。我们还需要进一步的解码，才能读取出有用的信息：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">read_varint</span><span class="params">(&amp;$data)</span> </span>&#123;</span><br><span class="line">    $shift = <span class="number">0</span>;</span><br><span class="line">    $result = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        $c = array_shift($data);</span><br><span class="line">        $result |= ($c &amp; <span class="number">0x7f</span>) &lt;&lt; $shift;</span><br><span class="line">        $shift += <span class="number">7</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> ($c &amp; <span class="number">0x80</span>);</span><br><span class="line">    <span class="keyword">return</span> $result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>这里的 <code>array_shift</code> 会将数组的第一个元素移出数组，并返回它的值。在其它的编程语言中，类似的方法可能被叫做 <code>lpop</code>，<code>pop</code>，<code>shift</code> 等等。而 <code>|</code>，<code>&amp;</code>，<code>&lt;&lt;</code> 等都是位运算的运算符。<code>read_varint</code> 函数完成了解码过程，如果有兴趣的话可以试试用 C 或 Python 实现它。<br>不断地执行 <code>read_varint($arr)</code>，直到取完 <code>$arr</code> 中的元素，就能把内容全部解码出来。</p><p>根据作用，我们可以把解码后的卡组代码分为两个部分：元数据块和卡牌块。</p><a id="more"></a><h3 id="元数据块"><a href="#元数据块" class="headerlink" title="元数据块"></a>元数据块</h3><p>在 <code>$arr</code> 中，前五个元素分别为：</p><ul><li>保留字节 0x00</li><li>版本号（固定为 1）</li><li>模式（1 为狂野，2 为标准）</li><li>使用英雄卡牌的数量（固定为 1）</li><li>使用的英雄卡牌的类型（长度不确定，一般是 1-3 位）</li></ul><p>可见卡组代码以字节 0x00 开头。然后是编码版本号，目前始终为 1。虽然这五个元素并没有官方名称，不过从作用上可以看作元数据。<br>还有一点是，所谓『英雄卡牌的类型』就是你所使用的英雄皮肤。这个参数必不可少。英雄的职业决定了套牌所用的职业，但是套牌表面上是为英雄制作的，而不是为一个职业。如果卡组代码指定的英雄是皮肤而不是默认的英雄，那么在你复制卡组时，系统就会选择使用皮肤而不是默认英雄（前提是你买了这个皮肤）。<br><strong> 关于英雄的注意事项：</strong> 尽管它是一个数组，但它是用于 <em> 初始英雄 </em>，而不是 <em> 可打出的英雄牌 </em>（如冰封王座的 DK）。</p><h3 id="卡牌块"><a href="#卡牌块" class="headerlink" title="卡牌块"></a>卡牌块</h3><p>在元数据块之后，继续读取 <code>$arr</code> 的元素，那么接下来就轮到卡牌块了。它按以下顺序分为三对长度 + 数组的组合：</p><ul><li>卡组中存在一张的卡</li><li>卡组中存在两张的卡</li><li>卡组中存在 n 张的卡</li></ul><p><strong> 每对都有一个前导 varint，指定数组中的项目数。</strong> 这种结构的目标是使卡组代码尽可能紧凑。<strong> 如前所述，每张卡都用 varint 型的 DBF ID 表示。</strong></p><p>所谓『卡组中存在 n 张的卡』，指的是卡组中的所有其他卡牌。此数组是一个 varint 对组成的列表，每一对的第一个元素表示 DBF ID，第二个元素是该卡牌在卡组中出现的次数。它 <strong> 应该 </strong> 只包含在牌组中至少出现三次的牌，因而意味着它（在这种情况下）对于构筑卡组应当是空的（毕竟一张卡至多只能带两张）；但理论上它也可以包含有一张的卡和有两张的卡。</p><p>尽管最终排序无关紧要，但卡牌仍会在各自所在的数组中，按 DBF ID 的升序进行排序，以便始终为相同的卡组生成相同的卡组代码。我们称所有按照这种方式排列卡牌列表（包括英雄）的卡组代码为规范的卡组代码。下面的参考实现应该已经可以生成规范的卡组代码。</p><h2 id="一种实现"><a href="#一种实现" class="headerlink" title="一种实现"></a>一种实现</h2><p>看代码可能比文字描述更加直观。下面的 <code>parse_deck()</code> 函数就会按照前面介绍的方法，依次读取元数据块和卡牌块的信息。<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parse_deck</span><span class="params">($data)</span> </span>&#123;</span><br><span class="line">    $reserve = read_varint($data);</span><br><span class="line">    <span class="keyword">if</span> ($reserve != <span class="number">0</span>) &#123;</span><br><span class="line">        printf(<span class="string">"Invalid deckstring"</span>);</span><br><span class="line">        <span class="keyword">die</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    $version = read_varint($data);</span><br><span class="line">    <span class="keyword">if</span> ($version != <span class="number">1</span>) &#123;</span><br><span class="line">        printf(<span class="string">"Unsupported deckstring version %s"</span>, $version);</span><br><span class="line">        <span class="keyword">die</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    $format = read_varint($data);</span><br><span class="line">    $heroes = [];</span><br><span class="line">    $num_heroes = read_varint($data);</span><br><span class="line">    <span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $num_heroes; $i++) &#123;</span><br><span class="line">        $heroes[] = read_varint($data);</span><br><span class="line">    &#125;</span><br><span class="line">    $cards = [];</span><br><span class="line">    $num_cards_x1 = read_varint($data);</span><br><span class="line">    <span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $num_cards_x1; $i++) &#123;</span><br><span class="line">        $card_id = read_varint($data);</span><br><span class="line">        $cards[] = [$card_id, <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    $num_cards_x2 = read_varint($data);</span><br><span class="line">    <span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $num_cards_x2; $i++) &#123;</span><br><span class="line">        $card_id = read_varint($data);</span><br><span class="line">        $cards[] = [$card_id, <span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    $num_cards_xn = read_varint($data);</span><br><span class="line">    <span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $num_cards_xn; $i++) &#123;</span><br><span class="line">        $card_id = read_varint($data);</span><br><span class="line">        $count = read_varint($data);</span><br><span class="line">        $cards[] = [$card_id, $count];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> [$cards, $heroes, $format];</span><br><span class="line">&#125;</span><br><span class="line">parse_deck($arr);</span><br></pre></td></tr></table></figure></p><p>这时，再通过建立 DBF ID 与卡牌对应关系的数据库，就能够实现在游戏外导入、导出和编辑卡组的功能了。不论是官方的 <a href="https://hs.blizzard.cn/cards" target="_blank" rel="noopener">卡牌工具</a>，还是第三方平台（如旅法师营地）的<a href="https://www.iyingdi.com/web/tools/hearthstone/decks" target="_blank" rel="noopener">套牌编辑</a> 功能，原理都是相似的。<br>所有代码已开源：<a href="https://github.com/stevenjoezhang/Hearthstone-Deck" target="_blank" rel="noopener">Hearthstone-Deck</a><br>其他语言的实现方式可以在 <a href="https://github.com/HearthSim" target="_blank" rel="noopener">HearthSim</a> 的官方 GitHub 账户下找到。</p><p>博主搭建的 API：<a href="https://api.galaxymimi.com/deck/" target="_blank" rel="noopener">炉石传说卡组</a></p><p>拓展阅读：<br><a href="https://2heng.xin/2018/12/12/embed-hearthstone-deck-with-iframe" target="_blank" rel="noopener">在网页上展示你的炉石卡组吧</a><br><a href="https://www.darkerror.com/2018/05/hearth-stone-deck-string-decoding" target="_blank" rel="noopener">炉石传说卡组代码生成机制</a><br><a href="https://hearthsim.info/docs/deckstrings" target="_blank" rel="noopener">Hearthstone Deckstrings</a></p>]]></content>
      
      
      <categories>
          
          <category> 电子游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Command Line Russian Roulette</title>
      <link href="/2018-12/Command%20Line%20Russian%20Roulette/"/>
      <url>/2018-12/Command%20Line%20Russian%20Roulette/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/2018-12/Strip-Roulette-russe-650-finalenglish.jpg" alt=""></p><p>来源：<a href="http://www.commitstrip.com/en/2014/05/16/russian-roulette" target="_blank" rel="noopener">Russian roulette</a></p>]]></content>
      
      
      <categories>
          
          <category> 幽默 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Base64 编码的原理与实现</title>
      <link href="/2018-12/Base64%E7%BC%96%E7%A0%81%E7%9A%84%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E7%8E%B0/"/>
      <url>/2018-12/Base64%E7%BC%96%E7%A0%81%E7%9A%84%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p>在数据传输的时候，并不是所有的字符都可以受到支持，很多时候只能传输可见字符，对于不可见字符的传输需要经过特殊处理，这就是 Base64 产生的原因。Base64 编码是一种基于 64 个可打印字符来表示二进制数据的表示方法。由于 $2^6=64$，所以每 6 个比特为一个单元，对应某个可打印字符。3 个字节有 24 个比特，对应于 4 个 Base64 单元，即 3 个字节可由 4 个可打印字符来表示。在 Base64 中的可打印字符包括字母 A-Z、a-z、数字 0-9，这样共有 62 个字符，此外两个可打印符号在不同的系统中而不同。一些如 uuencode 的其他编码方法，和之后 BinHex 的版本使用不同的 64 字符集来代表 6 个二进制数字，但是不被称为 Base64。<br>Base64 常用于在通常处理文本数据的场合，表示、传输、存储一些二进制数据，包括 MIME 的电子邮件及 XML 的一些复杂数据。用 Base64 编码图片也是互联网上常见的做法。</p><p>Base64 的字符索引如下表所示：</p><table><thead><tr><th>数值</th><th>字符</th><th>数值</th><th>字符</th><th>数值</th><th>字符</th><th>数值</th><th>字符</th></tr></thead><tbody><tr><td>0</td><td>A</td><td>16</td><td>Q</td><td>32</td><td>g</td><td>48</td><td>w</td></tr><tr><td>1</td><td>B</td><td>17</td><td>R</td><td>33</td><td>h</td><td>49</td><td>x</td></tr><tr><td>2</td><td>C</td><td>18</td><td>S</td><td>34</td><td>i</td><td>50</td><td>y</td></tr><tr><td>3</td><td>D</td><td>19</td><td>T</td><td>35</td><td>j</td><td>51</td><td>z</td></tr><tr><td>4</td><td>E</td><td>20</td><td>U</td><td>36</td><td>k</td><td>52</td><td>0</td></tr><tr><td>5</td><td>F</td><td>21</td><td>V</td><td>37</td><td>l</td><td>53</td><td>1</td></tr><tr><td>6</td><td>G</td><td>22</td><td>W</td><td>38</td><td>m</td><td>54</td><td>2</td></tr><tr><td>7</td><td>H</td><td>23</td><td>X</td><td>39</td><td>n</td><td>55</td><td>3</td></tr><tr><td>8</td><td>I</td><td>24</td><td>Y</td><td>40</td><td>o</td><td>56</td><td>4</td></tr><tr><td>9</td><td>J</td><td>25</td><td>Z</td><td>41</td><td>p</td><td>57</td><td>5</td></tr><tr><td>10</td><td>K</td><td>26</td><td>a</td><td>42</td><td>q</td><td>58</td><td>6</td></tr><tr><td>11</td><td>L</td><td>27</td><td>b</td><td>43</td><td>r</td><td>59</td><td>7</td></tr><tr><td>12</td><td>M</td><td>28</td><td>c</td><td>44</td><td>s</td><td>60</td><td>8</td></tr><tr><td>13</td><td>N</td><td>29</td><td>d</td><td>45</td><td>t</td><td>61</td><td>9</td></tr><tr><td>14</td><td>O</td><td>30</td><td>e</td><td>46</td><td>u</td><td>62</td><td>+</td></tr><tr><td>15</td><td>P</td><td>31</td><td>f</td><td>47</td><td>v</td><td>63</td><td>/</td></tr></tbody></table><p>这是一个根据上表进行编码的例子：</p><p><img src="/images/2018-12/1.png" alt=""></p><p>如果要编码的字节数不能被 3 整除，最后会多出 1 个或 2 个字节，那么可以使用下面的方法进行处理：先使用 0 字节值在末尾补足，使其能够被 3 整除，然后再进行 Base64 的编码。在编码后的 Base64 文本后加上一个或两个 = 号，代表补足的字节数。也就是说，当最后剩余两个八位字节（2 个 byte）时，最后一个 6 位的 Base64 字节块有四位是 0 值，最后附加上两个等号；如果最后剩余一个八位字节（1 个 byte）时，最后一个 6 位的 Base 字节块有两位是 0 值，最后附加一个等号。可以参考下面的例子：</p><p><img src="/images/2018-12/2.png" alt=""></p><a id="more"></a><p>这是一个用 Python 实现 Base64 编码的脚本：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">myBase64Encode</span><span class="params">(preCoding)</span>:</span></span><br><span class="line">    charTable = <span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'</span> <span class="comment"># 字符表</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> len(preCoding) &lt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span>  <span class="comment"># 字符串为空则返回空</span></span><br><span class="line">    lackCharNums = <span class="number">3</span> - len(preCoding) % <span class="number">3</span></span><br><span class="line">    <span class="keyword">if</span> lackCharNums == <span class="number">3</span> : lackCharNums = <span class="number">0</span> <span class="comment"># 整除说明不缺字符</span></span><br><span class="line">    <span class="comment"># 待转换字符不是 3 的倍数的情况补全它</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(lackCharNums) :</span><br><span class="line">        preCoding = preCoding + <span class="string">b'\x00'</span></span><br><span class="line">    result = <span class="string">''</span> <span class="comment"># 用于保存最终结果的 str 数据</span></span><br><span class="line">    rp = <span class="string">''</span> <span class="comment"># 处理补全字符时的暂存变量</span></span><br><span class="line">    <span class="comment"># 每三个字符处理一轮</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(int(len(preCoding) / <span class="number">3</span>)):</span><br><span class="line">        threeChar = preCoding[i * <span class="number">3</span> : i * <span class="number">3</span> + <span class="number">3</span>] <span class="comment"># 取三个字符出来</span></span><br><span class="line">        tCode = <span class="string">''</span> <span class="comment"># 用于存放三个字符拼接后的二进制数值 文本形式</span></span><br><span class="line">        pCode = <span class="string">''</span> <span class="comment"># 暂存变量</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">3</span>) :</span><br><span class="line">            pCode = bin(threeChar[j])[<span class="number">2</span> :]  <span class="comment"># 把省略的 0 补上</span></span><br><span class="line">            lackZeroNums = <span class="number">8</span> - len(pCode) <span class="comment"># 省略的 0 的个数</span></span><br><span class="line">            <span class="keyword">for</span> x <span class="keyword">in</span> range(lackZeroNums):</span><br><span class="line">                pCode = <span class="string">'0'</span> + pCode</span><br><span class="line">            tCode = tCode + pCode</span><br><span class="line">        pCode = <span class="string">''</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">4</span>): <span class="comment"># 每 6 位一个字符</span></span><br><span class="line">            pCode = tCode[j * <span class="number">6</span> : j * <span class="number">6</span> + <span class="number">6</span>]</span><br><span class="line">            rp = rp + charTable[int(pCode, <span class="number">2</span>)]</span><br><span class="line">        <span class="comment"># 处理补全的 00 字符</span></span><br><span class="line">        result = rp[: len(rp) - lackCharNums]</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(lackCharNums):</span><br><span class="line">            result = result + <span class="string">'='</span></span><br><span class="line">    <span class="keyword">return</span> bytes(result, encoding = <span class="string">"utf-8"</span>)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">myBase64Decode</span><span class="params">(encodedBin)</span> :</span></span><br><span class="line">    charTable = <span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'</span> <span class="comment"># 字符表</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment"># 如果字符不是 4 的倍数 返回空</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> len(encodedBin) % <span class="number">4</span> == <span class="number">0</span> :</span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span></span><br><span class="line"> </span><br><span class="line">    tCode = <span class="string">''</span> <span class="comment"># 用于存放最终的二进制文本字符串</span></span><br><span class="line">    pCpde = <span class="string">''</span> <span class="comment"># 暂存变量</span></span><br><span class="line">    <span class="comment"># 遍历 encodedBin 每一个字符</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> encodedBin:</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(charTable)): <span class="comment"># 找到表中对应坐标</span></span><br><span class="line">            <span class="keyword">if</span> chr(i) == charTable[j]:</span><br><span class="line">                pCode = bin(j)[<span class="number">2</span> :]  <span class="comment"># 转二进制去除开头的 0b</span></span><br><span class="line">                lackZeroNums = <span class="number">6</span> - len(pCode) <span class="comment"># 省略的 0 的个数</span></span><br><span class="line">                <span class="keyword">for</span> x <span class="keyword">in</span> range(lackZeroNums):</span><br><span class="line">                    pCode = <span class="string">'0'</span> + pCode</span><br><span class="line">                tCode = tCode + pCode</span><br><span class="line">    pCode = <span class="string">''</span></span><br><span class="line">    result = <span class="string">''</span> <span class="comment"># 储存最终结果</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(int(len(tCode) / <span class="number">8</span>)):</span><br><span class="line">        pCode = tCode[i * <span class="number">8</span> : i * <span class="number">8</span> + <span class="number">8</span>]</span><br><span class="line">        result = result + chr(int(pCode, <span class="number">2</span>))</span><br><span class="line">    <span class="keyword">return</span> bytes(result, encoding = <span class="string">"utf-8"</span>)</span><br><span class="line"></span><br><span class="line">print(myBase64Encode(<span class="string">b"helloworld"</span>))</span><br><span class="line">print(myBase64Decode(<span class="string">b"aGVsbG93b3JsZA=="</span>))</span><br></pre></td></tr></table></figure></p><p>浏览器中可以直接调用相关的 API：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span> 文件 base64——直接拖进来 < span class="tag">&lt;/<span class="name">title</span>&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">body &#123;</span></span><br><span class="line"><span class="undefined">    word-break: break-all;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="built_in">window</span>.addEventListener(<span class="string">"dragenter"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">    event.preventDefault();</span></span><br><span class="line"><span class="actionscript">&#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="javascript"><span class="built_in">window</span>.addEventListener(<span class="string">"dragover"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">    event.preventDefault();</span></span><br><span class="line"><span class="actionscript">&#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="javascript"><span class="built_in">window</span>.addEventListener(<span class="string">"drop"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> reader = <span class="keyword">new</span> FileReader();</span></span><br><span class="line"><span class="actionscript">    reader.onload = <span class="function"><span class="keyword">function</span><span class="params">(e)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.body.insertAdjacentHTML(<span class="string">"afterBegin"</span>, <span class="string">'&lt;p&gt;'</span> + e.target.result + <span class="string">'&lt;/p&gt;'</span>); </span></span><br><span class="line"><span class="actionscript">        <span class="comment">//base64 encoded file data!</span></span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="undefined">    reader.readAsDataURL(event.dataTransfer.files[0]);</span></span><br><span class="line"><span class="undefined">    event.preventDefault();</span></span><br><span class="line"><span class="actionscript">&#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>这是加载 Base64 编码的图片的方法。这可以将图片硬编码到网页中。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Base64 Encode 编码实现 1x1px 透明 (黑白) 图片 < span class="tag">&lt;/<span class="name">title</span>&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">body &#123;</span></span><br><span class="line"><span class="undefined">    text-align: center;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span> 以下是透明图片 < span class="tag">&lt;/<span class="name">h1</span>&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"</span> <span class="attr">width</span>=<span class="string">"500"</span> <span class="attr">height</span>=<span class="string">"100"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span> 以下是黑色图片 < span class="tag">&lt;/<span class="name">h1</span>&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs="</span> <span class="attr">width</span>=<span class="string">"500"</span> <span class="attr">height</span>=<span class="string">"100"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>拓展阅读：<br><a href="https://zh.wikipedia.org/wiki/Base64" target="_blank" rel="noopener">Base64</a><br><a href="https://www.52pojie.cn/thread-831202-1-1.html" target="_blank" rel="noopener">Base64 编码原理及脚本的简单实现</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>历史上的今天</title>
      <link href="/2018-12/%E5%8E%86%E5%8F%B2%E4%B8%8A%E7%9A%84%E4%BB%8A%E5%A4%A9/"/>
      <url>/2018-12/%E5%8E%86%E5%8F%B2%E4%B8%8A%E7%9A%84%E4%BB%8A%E5%A4%A9/</url>
      
        <content type="html"><![CDATA[<p>如果要在网页上显示一些随机的语句，获得一些人生的经验，你会选择什么？<br>也许，<a href="https://hitokoto.cn" target="_blank" rel="noopener">一言</a>是一个很好的选择，它可以提供一些动漫中的台词，或是网络上的各种小段子。<br>在前面的文章 <a href="/2018-05 / 有趣的 Linux 命令行工具">有趣的 Linux 命令行工具</a> 中提到的 <code>fortune</code> 命令或许也可以满足需求，<code>pure-ftpd</code> 就可以设置在连接成功时显示随机的来自 <code>fortune</code> 的语句。<br>那除此之外呢？历史上的今天是一个不错的方案。当你访问一些门户网站的首页，有时会看到这样的栏目。它也是一些百科全书网站，比如维基百科的传统。事实上，在 Mac 上就自带了一个小型的『历史上的今天』数据库，执行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /usr/share/calendar/calendar.history</span><br></pre></td></tr></table></figure></p><p>就可以看到。<br>这篇文章将介绍如何搭建一个提供『历史上的今天』信息的 API。</p><h2 id="建立数据库"><a href="#建立数据库" class="headerlink" title="建立数据库"></a>建立数据库</h2><p>首先，建立 MySQL 数据库，用于存储爬取的信息。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> dbname;</span><br><span class="line"># 建立数据库，dbname 保持一致即可</span><br><span class="line"><span class="keyword">USE</span> dbname;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">event</span> (</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">UNSIGNED</span> PRIMARY <span class="keyword">KEY</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="keyword">type</span> <span class="built_in">int</span>(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="keyword">year</span> <span class="built_in">varchar</span>(<span class="number">6</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="built_in">date</span> <span class="built_in">varchar</span>(<span class="number">6</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  info <span class="built_in">varchar</span>(<span class="number">300</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span></span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line">QUIT;</span><br></pre></td></tr></table></figure></p><h2 id="获取数据"><a href="#获取数据" class="headerlink" title="获取数据"></a>获取数据</h2><p>数据来源是维基百科，使用 Python 爬取数据，并存入数据库中。代码中的 <code>username</code>、<code>password</code> 和 <code>dbname</code> 分别是你的登录用户名、密码和数据库名。数据表名默认是 event，也可以自行修改。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">typeList = [<span class="string">"大事记"</span>, <span class="string">"出生"</span>, <span class="string">"逝世"</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">savedb</span><span class="params">(data)</span>:</span></span><br><span class="line">    conn = pymysql.connect(host = <span class="string">"127.0.0.1"</span>, user = <span class="string">"username"</span>, password = <span class="string">"password"</span>, db = <span class="string">"dbname"</span>, charset = <span class="string">"utf8"</span>)</span><br><span class="line">    print(conn)</span><br><span class="line">    cur = conn.cursor()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        cur.execute(<span class="string">"insert into event values(null,%s,%s,%s,%s)"</span>, data)</span><br><span class="line">    <span class="keyword">except</span> pymysql.err.InternalError:</span><br><span class="line">        print(<span class="string">"\033[31mERROR: Incorrect string value.\033[0m"</span>, data)</span><br><span class="line">        <span class="keyword">with</span> open(<span class="string">"failed.txt"</span>, <span class="string">"a"</span>) <span class="keyword">as</span> myfile:</span><br><span class="line">            myfile.write(str(data) + <span class="string">"\n"</span>)</span><br><span class="line">    <span class="keyword">except</span> pymysql.err.DataError:</span><br><span class="line">        print(<span class="string">"\033[31mERROR: Data too long.\033[0m"</span>, data)</span><br><span class="line">        <span class="keyword">with</span> open(<span class="string">"failed.txt"</span>, <span class="string">"a"</span>) <span class="keyword">as</span> myfile:</span><br><span class="line">            myfile.write(str(data) + <span class="string">"\n"</span>)</span><br><span class="line">    cur.connection.commit()</span><br><span class="line">    cur.close()</span><br><span class="line">    conn.close()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getDateList</span><span class="params">()</span>:</span></span><br><span class="line">    list = []</span><br><span class="line">    date = datetime.date(<span class="number">2016</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">366</span>):</span><br><span class="line">        date_str = str(date.month) + <span class="string">"月"</span> + str(date.day) + <span class="string">"日"</span></span><br><span class="line">        list.append(date_str)</span><br><span class="line">        date += datetime.timedelta(days = <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> list</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getInfo</span><span class="params">(html, type, date)</span>:</span></span><br><span class="line">    flag = re.compile(<span class="string">"(&lt;h2&gt;&lt;span id=.*&lt;span class=\"mw-headline\"id=.*?"</span> + typeList[type] + <span class="string">"[\s\S]*?&lt;/ul&gt;\s*?)&lt;h2&gt;"</span>).search(html)</span><br><span class="line">    <span class="keyword">if</span> flag:</span><br><span class="line">        bsObj = BeautifulSoup(flag.group(<span class="number">1</span>), <span class="string">"html.parser"</span>).findAll(<span class="string">"li"</span>)</span><br><span class="line">        <span class="keyword">for</span> li <span class="keyword">in</span> bsObj:</span><br><span class="line">            match = re.compile(<span class="string">"((^ 前 |^)\d&#123;1,4&#125; 年)：([\s\S]*$)"</span>).match(li.get_text())</span><br><span class="line">            <span class="keyword">if</span> match:</span><br><span class="line">                year = match.group(<span class="number">1</span>)</span><br><span class="line">                info = re.sub(<span class="string">"\[\d&#123;1,&#125;\]"</span>, <span class="string">""</span>, match.group(<span class="number">3</span>).strip())</span><br><span class="line">                data = (type, year, date, info)</span><br><span class="line">                print(data)</span><br><span class="line">                savedb(data)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    list = getDateList()</span><br><span class="line">    <span class="keyword">for</span> date <span class="keyword">in</span> list:</span><br><span class="line">        print(date)</span><br><span class="line">        url = <span class="string">"https://zh.wikipedia.org/zh-cn/%s"</span> % date</span><br><span class="line">        <span class="comment">#url ="https://api.galaxymimi.com/proxy/?url=https://zh.wikipedia.org/zh-cn/%s"% date</span></span><br><span class="line">        r = requests.get(url)</span><br><span class="line">        getInfo(r.text, <span class="number">0</span>, date)  <span class="comment"># 大事记</span></span><br><span class="line">        getInfo(r.text, <span class="number">1</span>, date)  <span class="comment"># 出生</span></span><br><span class="line">        getInfo(r.text, <span class="number">2</span>, date)  <span class="comment"># 逝世</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></p><p>这里的两个 <code>except</code> 分别处理的是特殊字符（非 UTF-8 范围）和内容长度超出的问题。</p><h2 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h2><p>比较简单的方式是按照 json 格式进行输出，这里给出一种使用 PHP 的方案。<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $mysqli = <span class="keyword">new</span> mysqli(<span class="string">"localhost"</span>, <span class="string">"username"</span>, <span class="string">"password"</span>, <span class="string">"dbname"</span>);</span><br><span class="line">    <span class="comment">/* 检查连接 */</span></span><br><span class="line">    <span class="keyword">if</span> (mysqli_connect_errno()) &#123;</span><br><span class="line">        printf(<span class="string">"Connect failed: %s\n"</span>, mysqli_connect_error());</span><br><span class="line">        <span class="keyword">exit</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    $date = $_GET[<span class="string">'date'</span>] ? $mysqli-&gt;real_escape_string($_GET[<span class="string">'date'</span>]) : date(<span class="string">"m 月 d 日"</span>);</span><br><span class="line">    $type = $_GET[<span class="string">'type'</span>] ? (int)$mysqli-&gt;real_escape_string($_GET[<span class="string">'type'</span>]) : <span class="number">0</span>;</span><br><span class="line">    $count = $_GET[<span class="string">'count'</span>] ? (int)$mysqli-&gt;real_escape_string($_GET[<span class="string">'count'</span>]) : <span class="number">1</span>;</span><br><span class="line">    $result = <span class="keyword">array</span>();</span><br><span class="line">    <span class="comment">/* 创建一个预编译 SQL 语句 */</span></span><br><span class="line">    <span class="keyword">if</span> ($stmt = $mysqli-&gt;prepare(<span class="string">"select * from `event` where `date` = ? and `type` = ? order by RAND() limit ?"</span>)) &#123;</span><br><span class="line">        <span class="comment">/* 对于参数占位符进行参数值绑定 */</span></span><br><span class="line">        $stmt-&gt;bind_param(<span class="string">"dii"</span>, $date, $type, $count);</span><br><span class="line">        <span class="comment">/* 执行查询 */</span></span><br><span class="line">        $stmt-&gt;execute();</span><br><span class="line">        <span class="comment">/* 将查询结果绑定到变量 */</span></span><br><span class="line">        $stmt-&gt;bind_result($id, $type, $year, $date, $info);</span><br><span class="line">        <span class="comment">/* 获取查询结果值 */</span></span><br><span class="line">        <span class="keyword">while</span> ($stmt-&gt;fetch()) &#123;</span><br><span class="line">            $arr = <span class="keyword">array</span>(<span class="string">'year'</span> =&gt; $year, <span class="string">'info'</span> =&gt; $info);</span><br><span class="line">            $result[] = $arr;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">echo</span> json_encode($result, JSON_UNESCAPED_UNICODE);</span><br><span class="line">        <span class="comment">/* 关闭语句句柄 */</span></span><br><span class="line">        $stmt-&gt;close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* 关闭连接 */</span></span><br><span class="line">    $mysqli-&gt;close();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p><p>同样将 <code>username</code>、<code>password</code> 和 <code>dbname</code> 根据情况替换，就可以访问了。</p><p>项目地址：<a href="https://github.com/stevenjoezhang/TodayInHistory-Crawler" target="_blank" rel="noopener">TodayInHistory-Crawler</a>，可以打包下载所有文件。</p><p>博主搭建的 API：<a href="https://api.galaxymimi.com/today/?type=0" target="_blank" rel="noopener">历史上的今天</a></p>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> MySQL </tag>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>十二月天象</title>
      <link href="/2018-12/%E5%8D%81%E4%BA%8C%E6%9C%88%E5%A4%A9%E8%B1%A1/"/>
      <url>/2018-12/%E5%8D%81%E4%BA%8C%E6%9C%88%E5%A4%A9%E8%B1%A1/</url>
      
        <content type="html"><![CDATA[<p>即将到来的 12 月天宇将先后上演『金星最亮』『双子座流星雨极大』『水星西大距』和『小熊座流星雨极大』等多部天象大片，天文爱好者们千万不要错过。</p><h2 id="火星合海王星"><a href="#火星合海王星" class="headerlink" title="火星合海王星"></a>火星合海王星</h2><p>2018 年 12 月 7 日入夜后西南方天空将可观赏到火星合海王星的天象，火星将至海王星北面 0.04 度（相当于 2 角分）的近距离通过，位于宝瓶座。火星视亮度 + 0.1 等，海王星 + 7.9 等，需用小型望远镜观测。</p><p><img src="/images/2018-12/mars.png" alt=""></p><h2 id="双子座流星雨极大期"><a href="#双子座流星雨极大期" class="headerlink" title="双子座流星雨极大期"></a>双子座流星雨极大期</h2><p>每到岁末，双子座流星雨（Geminids，00004 GEM）都会如期而至。作为北半球三大流星雨之一，它的流量非常稳定，并且全球绝大多数地区的公众都有机会观测到它。今年双子座流星雨的观测条件不错，预报的极大值出现在 12 月 14 日晚 20 时 30 分，天顶每时出现率 ZHR 为 120。</p><p>辐射点在 12 月 14 日入夜后自东北偏东方升起，即入夜后就有机会见到双子座流星出现。今年月相接近上弦，但对观测影响不大，尤其是后半夜观测条件很好，但要注意防寒保暖。</p><p><img src="/images/2018-12/Comet_holmes_and_Geminid121307.jpg" alt=""></p><h2 id="水星西大距"><a href="#水星西大距" class="headerlink" title="水星西大距"></a>水星西大距</h2><p>12 月 15 日，今年最后一次水星西大距将上演。如果大气透明度足够高，在此后几天的日出前，用肉眼或借助双筒望远镜均可在黎明前的东方低空寻觅到水星的神秘身影。</p><p><img src="/images/2018-12/mercury.png" alt=""></p><p>水星的视运动是这样的：东大距 → 半轮 → 近日点 → 留 → 下合 → 极长视直径 → 留 → 降交点 → 半轮 → 西大距 → 远日点 → 极短视直径 → 上合 → 升交点 → 东大距，周期是 116 日（水星的会合周期），而水星东大距 → 西大距平均间隔为 41 天。这次水星西大距，日出时位于东南方天空，与太阳的最大角距为 21 度，亮度约 - 0.5 等，是今年观测水星的第四次最佳时机。</p><h2 id="小熊座流星雨"><a href="#小熊座流星雨" class="headerlink" title="小熊座流星雨"></a>小熊座流星雨</h2><p>小熊座流星雨（Ursids，00015 URS）往往是全年精彩天象的收官之作，该流星雨的活动期为 12 月 17 日至 12 月 26 日。天文预报显示，今年该流星雨极大可能出现在 12 月 22 日 4 时 53 分。</p><p><img src="/images/2018-12/Murahashi1.jpg" alt=""></p><p>小熊座流星雨在 1949 年和 1986 年曾出现过两次爆发，但今年没有爆发的预期，届时每小时最大天顶流量为 10 颗左右，而且极大正好赶上满月，观测条件不是太好。</p><blockquote><p>部分图片来自维基百科，采用 CC BY-SA 3.0 许可证，作者为 Brocken Inaglory 以及 Brian Murahashi 和 Jim Albers。部分图片来自 Stellarium，该软件为开源软件，采用 GPL3.0 协议。</p></blockquote><p>拓展阅读：<a href="https://www.skyandtelescope.com/astronomy-news/spot-decembers-ursid-meteors" target="_blank" rel="noopener">Can You Spot December’s Ursid Meteors?</a></p>]]></content>
      
      
      <categories>
          
          <category> 物理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 天文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Safari 顶栏彩虹效果</title>
      <link href="/2018-11/Safari%E9%A1%B6%E6%A0%8F%E5%BD%A9%E8%99%B9%E6%95%88%E6%9E%9C/"/>
      <url>/2018-11/Safari%E9%A1%B6%E6%A0%8F%E5%BD%A9%E8%99%B9%E6%95%88%E6%9E%9C/</url>
      
        <content type="html"><![CDATA[<p>从 OS X Yosemite 系统开始，Safari 浏览器的顶部工具栏加入了类似 iOS 中的半透明毛玻璃效果。Safari 会自动根据页面的颜色来显示工具栏的毛玻璃特效颜色，而通过 CSS 中的 <code>body:before</code> 类，我们可以对其进行定制。具体代码如下：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">media</span> screen and (-webkit-min-device-pixel-ratio: <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="selector-tag">body</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">        <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">        <span class="attribute">z-index</span>: <span class="number">2147483647</span>;</span><br><span class="line">        <span class="attribute">position</span>: fixed;</span><br><span class="line">        <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">        <span class="attribute">display</span>: block;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">translateY</span>(-99.99px);</span><br><span class="line">        <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(124deg,</span><br><span class="line">        #FF0000,</span><br><span class="line">        #FF7F00,</span><br><span class="line">        #FFFF00,</span><br><span class="line">        #7FFF00,</span><br><span class="line">        #00FF00,</span><br><span class="line">        #00FF7F,</span><br><span class="line">        #00FFFF,</span><br><span class="line">        #007FFF,</span><br><span class="line">        #0000FF,</span><br><span class="line">        #7F00FF,</span><br><span class="line">        #FF00FF,</span><br><span class="line">        #FF007F,</span><br><span class="line">        #FF0000);</span><br><span class="line">        <span class="attribute">animation</span>: rainbow <span class="number">15s</span> ease infinite;</span><br><span class="line">        <span class="attribute">background-size</span>: <span class="number">1000%</span> <span class="number">1000%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">keyframes</span> rainbow &#123;</span><br><span class="line">    0% &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">80%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    50% &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">20%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    100% &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">80%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>将它们添加到页面中的 <code>&lt;style&gt;</code> 标签内，并在 <code>&lt;body&gt;</code> 中加入适当的内容。当使用 Safari 浏览器打开时，<strong> 略微向下滚动页面 </strong>，便可以看到顶部栏出现炫酷的彩虹效果。快去试试吧！<br><strong> 注意：一些老旧浏览器不能正确识别 <code>transform</code>，会导致彩色条挡住 <code>&lt;body&gt;</code>，<code>-webkit-min-device-pixel-ratio</code> 可以防止这一问题。</strong><br>GitHub 项目地址：<a href="https://github.com/koole/rainbowsafari" target="_blank" rel="noopener">rainbowsafari</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>国际单位制基本单位的重新定义</title>
      <link href="/2018-11/%E5%9B%BD%E9%99%85%E5%8D%95%E4%BD%8D%E5%88%B6%E5%9F%BA%E6%9C%AC%E5%8D%95%E4%BD%8D%E7%9A%84%E9%87%8D%E6%96%B0%E5%AE%9A%E4%B9%89/"/>
      <url>/2018-11/%E5%9B%BD%E9%99%85%E5%8D%95%E4%BD%8D%E5%88%B6%E5%9F%BA%E6%9C%AC%E5%8D%95%E4%BD%8D%E7%9A%84%E9%87%8D%E6%96%B0%E5%AE%9A%E4%B9%89/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>国际单位制以一组基本单位为基础，所有其他单位都是用基本单位建立起来的。麦克斯韦最初提出一致单位制的概念时，列出了三个可用的基本单位：质量、长度及时间单位。之后，吉奥尔吉提倡加入电的基本单位。理论上，电流、电势、电阻、电荷等物理量的单位都可以做基本单位，当选定其中一个做基本单位后，其余的电单位都可以通过物理定律从基本单位推导得出；国际单位制最终选择了使用电流。后期又加入了三个分别量度物质的量、温度及发光强度的基本单位。<br>国际单位制希望其单位定义的基准是源自于对自然的测量。但此单位制于 1799 在法国被引入时，由当时技术上的限制，因此利用了米原器与千克原器做为米与千克的定义。<br>1960 年，米的定义被改写为由特定光源所发出的光波长（后又改为根据真空光速定义），因此米定义的基准也成为了对自然测量的结果。现今，只留下了千克还是以人造的物品做为定义的基准。<br><strong>2018 年 11 月 16 日，第 26 届国际计量大会一致通过了新国际单位制基本单位定义的提案。新的定义将于 2019 年 5 月 20 日生效。</strong><br>国际度量衡局提案，除了光速以外，下列所示的四个自然常数也应被定义为确定的数值：</p><ul><li>普朗克常数 $h=6.62607015\times10^{−34}(J\cdot s)$</li><li>基本电荷 $e=1.602176634\times10^{−19}(C)$</li><li>玻尔兹曼常数 $k=1.380649\times10^{−23}(J\cdot K^{−1})$</li><li>阿伏伽德罗常量 $N_A=6.02214076\times10^{23}(mol^{−1})$</li></ul><p>这些常数在 2006 年版的 SI 指南就已经出现，但在此版本中后三个常数被定义为『由实验所得的常数』，而不是直接的『定义常数』。<br>国际度量衡局也提案，以下这些自然常数的数值应继续保持不变。</p><ul><li>光速 $c=299,792,458(m\cdot s^{-1})$</li><li>铯 133 原子基态超精细能级分裂频率 $\Delta\nu(^{133}Cs)_{hfs}=9,192,631,770(Hz)$</li><li>频率为 $540\times10^{12}Hz$ 辐射的发光效率 $K_{cd}=683(lm\cdot W^{-1})$</li></ul><p>这是以上七个定义改写为以基本单位表示的形式：</p><ul><li>$\Delta\nu(^{133}Cs)_{hfs}=9,192,631,770(s^{−1})$</li><li>$c=299,792,458(m\cdot s^{−1})$</li><li>$h=6.62607015\times10^{−34}(kg\cdot m^2\cdot s^{−1})$</li><li>$e=1.602176634\times10^{−19}(A\cdot s)$</li><li>$k=1.380649\times10^{−23}(kg\cdot m^2\cdot K^{−1}\cdot s^{−2})$</li><li>$N_A=6.02214076\times1023(mol^{−1})$</li><li>$K_{cd}=683(cd\cdot sr\cdot s^3\cdot kg^{−1}\cdot m^{−2})$</li></ul><p>此外国际度量衡局也要求：</p><ul><li>目前千克的定义应废除并使国际千克原器退休</li><li>目前安培的定义应废除</li><li>目前开尔文的定义应废除</li><li>目前摩尔的定义应修改</li></ul><p>这些改变会影响到基本单位的定义，但对于导出单位的表达形式则不会有所影响。</p><a id="more"></a><h2 id="改变历史"><a href="#改变历史" class="headerlink" title="改变历史"></a>改变历史</h2><p>我们可以回顾国际单位制基本单位定义的改变历史。</p><h3 id="米"><a href="#米" class="headerlink" title="米"></a>米</h3><p>最初（1793 年）：从北极至赤道经过巴黎的子午线长度的一千万分之一。（法国政府）<br>过渡（1799 年）：国际米原器的长度。<br>过渡（1960 年）：氪 - 86 原子在 $2p^{10}$ 和 $5d^5$ 量子能级之间跃迁所发出的电磁波在真空中的波长的 1,650,763.73 倍。<br>目前（1983 年）：光在 $\frac{1}{299,792,458}$ 秒内在真空中行进的距离。</p><h3 id="千克"><a href="#千克" class="headerlink" title="千克"></a>千克</h3><p>最初（1793 年）：最初法文名为 grave，定义为在冰点下体积为一立方分米的纯水的重量（质量）。（法国政府）<br>目前（1889 年）：国际千克原器的质量。<br>未来（2019 年）：由精确的普朗克常数 $h=6.62607015\times10^{−34}(kg\cdot m^2\cdot s^{−1})$、米和秒所定义。</p><h3 id="秒"><a href="#秒" class="headerlink" title="秒"></a>秒</h3><p>最初（中世纪）：一天时长的 86,400 分之一。<br>过渡（1956 年）：1900 年 1 月 0 日历书时 12 时算起的回归年时长的 $\frac{1}{31,556,925.9747}$。<br>目前（1967 年）：铯 - 133 原子基态的两个超精细能级之间跃迁所对应的辐射周期时长的 9,192,631,770 倍。</p><h3 id="安培"><a href="#安培" class="headerlink" title="安培"></a>安培</h3><p>最初（1881 年）：CGS 电磁单位制中电流单位的十分之一。CGS 电流单位的定义是，在半径为 1 厘米、长度为 1 厘米的圆弧上流通，并在圆心产生 1 奥斯特电场的电流。（国际电工委员会）<br>目前（1946 年）：在真空中相距 1 米的两根横截面为圆形、粗度可忽略不计的无限长平行直导线，各通上相等的恒定电流，当两根导线之间每米长度所受力为 $2\times10^{−7}$ 牛顿时，各导线上的电流定义为 1 安培。<br>未来（2019 年）：由新的元电荷 $e=1.602176634\times10^{−19}(A\cdot s)$ 和秒所定义。</p><h3 id="开尔文"><a href="#开尔文" class="headerlink" title="开尔文"></a>开尔文</h3><p>最初（1743 年）：摄氏温标将 0°C 和 100°C 分别定义为水的熔点和沸点。<br>过渡（1954 年）：273.16K 定义为水的三相点（0.01°C）。<br>目前（1967 年）：水的三相点热力学温度的 $\frac{1}{273.16}$。<br>未来（2019 年）：由新的玻尔兹曼常数 $k=1.380649\times10^{−23}(kg\cdot m^2\cdot K^{−1}\cdot s^{−2})$、千克、米和秒所定义。</p><h3 id="摩尔"><a href="#摩尔" class="headerlink" title="摩尔"></a>摩尔</h3><p>最初（1900 年）：物质的克数等于其分子量时的数量。（国际原子量委员会）<br>目前（1967 年）：物质所含的粒子数量相等于 0.012 千克碳 - 12 所含的原子数量。<br>未来（2019 年）：1 摩尔包含 $6.02214076×10^{23}$ 个基本实体，这一数字是新的阿伏伽德罗常数。</p><h3 id="坎德拉"><a href="#坎德拉" class="headerlink" title="坎德拉"></a>坎德拉</h3><p>最初（1946 年）：整个辐射体在铂凝固温度下的亮度，定义为 60 新坎德拉每平方厘米。<br>目前（1979 年）：频率为 $5.4×10^{14}$ 赫兹的单色光源在特定方向辐射强度为 $\frac{1}{683}W/sr$ 时的发光强度。</p><h2 id="依赖关系"><a href="#依赖关系" class="headerlink" title="依赖关系"></a>依赖关系</h2><p>由于定义的变化，这些单位之间的依赖关系也发生了改变。</p><p><img src="/images/2018-11/Unit_relations_in_the_old_SI.svg" alt=""><br><img src="/images/2018-11/Unit_relations_in_the_new_SI.svg" alt=""></p><h2 id="不确定度"><a href="#不确定度" class="headerlink" title="不确定度"></a>不确定度</h2><p>同样，由于定义的变化，一些物理量的不确定度也发生了改变。例如，真空磁导率 $\mu_0$ 将不再具有定义值 $4\pi\times10^{-7}m\cdot kg\cdot s^{-2}\cdot A^{-2}$，水的三相点温度也不再严格地等于 273.16K。下表给出了它们在改动后的影响：</p><div style="overflow-x: scroll !important; white-space: nowrap;"><table><thead><tr><th>Constant</th><th>Symbol</th><th>Relation to directly measured and fixed constants (Previous)</th><th>Significant factor(s) in uncertainty (Previous)</th><th>Relative uncertainty (Previous)</th><th>Relation to directly measured and fixed constants (2019)</th><th>Significant factor(s) in uncertainty (2019)</th><th>Relative uncertainty (2019)</th></tr></thead><tbody><tr><td>Mass of IPK</td><td>$m(\mathcal{K})$</td><td>1&nbsp;kg</td><td>None</td><td>Exact</td><td>$m(\mathcal{K})$</td><td>$m(\mathcal{K})$</td><td>$1.2 \times 10^{-8} = u_\text{r}(m(\mathcal{K}))$</td></tr><tr><td>Planck constant</td><td>$h$</td><td>$\frac{8 \alpha}{c \mu_0 K_\text{J}^2}$</td><td>$K_\text{J}^2$</td><td>$1.2 \times 10^{-8} \approx 2 u_\text{r}(K_\text{J})$</td><td>$6.62607015\times10^{-34} kg\cdot m^2\cdot s^{−1}$</td><td>None</td><td>Exact</td></tr><tr><td>Josephson constant</td><td>$K_\text{J}$</td><td>$K_\text{J}$</td><td>$K_\text{J}$</td><td>$6.1 \times 10^{-9} = u_\text{r}(K_\text{J})$</td><td>$\frac{2 e}{h}$</td><td>None</td><td>Exact</td></tr><tr><td>Von Klitzing constant</td><td>$R_\text{K}$</td><td>$\frac{c \mu_0}{2 \alpha}$</td><td>$\alpha$</td><td>$2.3 \times 10^{-10} = u_\text{r}(\alpha)$</td><td>$\frac{h}{e^2}$</td><td>None</td><td>Exact</td></tr><tr><td>Elementary charge</td><td>$e$</td><td>$\frac{4 \alpha}{c \mu_0 K_\text{J}}$</td><td>$K_\text{J}$</td><td>$6.1 \times 10^{-9} \approx u_\text{r}(K_\text{J})$</td><td>$1.602176634\times10^{-19} A\cdot s$</td><td>None</td><td>Exact</td></tr><tr><td>Magnetic constant</td><td>$\mu_0$</td><td>$4\pi\times10^{-7} m\cdot kg\cdot s^{−2}\cdot A^{−2} $</td><td>None</td><td>Exact</td><td>$\frac{2 h \alpha}{c e^2}$</td><td>$\alpha$</td><td>$2.3 \times 10^{-10} = u_\text{r}(\alpha)$</td></tr><tr><td>Vacuum permittivity</td><td>$\varepsilon_0$</td><td>$\frac{1}{c^2 \mu_0}$</td><td>None</td><td>Exact</td><td>$\frac{e^2}{2 h c \alpha}$</td><td>$\alpha$</td><td>$2.3 \times 10^{-10} = u_\text{r}(\alpha)$</td></tr><tr><td>Impedance of free space</td><td>$Z_0$</td><td>$c \mu_0$</td><td>None</td><td>Exact</td><td>$\frac{2 h \alpha}{e^2}$</td><td>$\alpha$</td><td>$2.3 \times 10^{-10} = u_\text{r}(\alpha)$</td></tr><tr><td>Electron mass</td><td>$m_\text{e}$</td><td>$\frac{16 R_{\infty}}{c^2 \alpha \mu_0 K_\text{J}^2}$</td><td>$K_\text{J}^2$</td><td>$1.2 \times 10^{-8} \approx 2 u_\text{r}(K_\text{J})$</td><td>$\frac{2 h R_{\infty}}{c \alpha^2}$</td><td>$\alpha^2$</td><td>$4.7 \times 10^{-10} \approx 2 u_\text{r}(\alpha)$</td></tr><tr><td>Electron molar mass</td><td>$M(\text{e})$</td><td>$A_\text{r}(\text{e}) M_\text{u}$</td><td>$A_\text{r}(\text{e})$</td><td>$2.9 \times 10^{-11} = u_\text{r}(A_\text{r}(\text{e}))$</td><td>$\frac{2 h R_{\infty} N_\text{A}}{c \alpha^2}$</td><td>$\alpha^2$</td><td>$4.7 \times 10^{-10} \approx 2 u_\text{r}(\alpha)$</td></tr><tr><td>Unified atomic mass unit or dalton</td><td>\begin{align*}m_u &amp; = 1u \\ &amp; = 1Da\end{align*}</td><td>$\frac{16 R_{\infty}}{c^2 \alpha \mu_0 K_\text{J}^2 A_\text{r}(\text{e})}$</td><td>$K_\text{J}^2$</td><td>$1.2 \times 10^{-8} \approx 2 u_\text{r}(K_\text{J})$</td><td>$\frac{2 h R_{\infty}}{c \alpha^2 A_\text{r}(\text{e})}$</td><td>$\alpha^2$</td><td>$4.7 \times 10^{-10} \approx 2 u_\text{r}(\alpha)$</td></tr><tr><td>Molar mass constant</td><td>$M_\text{u}$</td><td>$0.001kg\cdot mol^{−1}$</td><td>None</td><td>Exact</td><td>$\frac{2 h R_{\infty} N_\text{A}}{c \alpha^2 A_\text{r}(\text{e})}$</td><td>$\alpha^2$</td><td>$4.7 \times 10^{-10} \approx 2 u_\text{r}(\alpha)$</td></tr><tr><td>Avogadro constant</td><td>$N_\text{A}$</td><td>$\frac{c^2 \alpha \mu_0 K_\text{J}^2 A_\text{r}(\text{e}) M_\text{u}}{16 R_{\infty}}$</td><td>$K_\text{J}^2$</td><td>$1.2 \times 10^{-8} \approx 2 u_\text{r}(K_\text{J})$</td><td>$6.02214076\times10^{23} mol^{−1}$</td><td>None</td><td>Exact</td></tr><tr><td>Atomic mass of carbon-12</td><td>$m(^{12}\text{C})$</td><td>$\frac{192 R_{\infty}}{c^2 \alpha \mu_0 K_\text{J}^2 A_\text{r}(\text{e})}$</td><td>$K_\text{J}^2$</td><td>$1.2 \times 10^{-8} \approx 2 u_\text{r}(K_\text{J})$</td><td>$\frac{24 h R_{\infty}}{c \alpha^2 A_\text{r}(\text{e})}$</td><td>$\alpha^2$</td><td>$4.7 \times 10^{-10} \approx 2 u_\text{r}(\alpha)$</td></tr><tr><td>Molar mass of carbon-12</td><td>$M(^{12}\text{C})$</td><td>$0.012kg\cdot mol^{−1}$</td><td>None</td><td>Exact</td><td>$\frac{24 h R_{\infty} N_\text{A}}{c \alpha^2 A_\text{r}(\text{e})}$</td><td>$\alpha^2$</td><td>$4.7 \times 10^{-10} \approx 2 u_\text{r}(\alpha)$</td></tr><tr><td>Faraday constant</td><td>$F$</td><td>$\frac{c \alpha^2 K_\text{J} A_\text{r}(\text{e}) M_\text{u}}{4 R_{\infty}}$</td><td>$K_\text{J}, \alpha^2$</td><td>$6.2 \times 10^{-9} \approx u_\text{r}(K_\text{J})$</td><td>$e N_\text{A}$</td><td>None</td><td>Exact</td></tr><tr><td>Temperature of triple point of water</td><td>$T_\text{TPW}$</td><td>273.16 K</td><td>None</td><td>Exact</td><td>$T_\text{TPW}$</td><td>$T_\text{TPW}$</td><td>$5.7 \times 10^{-7} = u_\text{r}(T_\text{TPW})$</td></tr><tr><td>Molar gas constant</td><td>$R$</td><td>$R$</td><td>$R$</td><td>$5.7 \times 10^{-7} = u_\text{r}(R)$</td><td>$k N_\text{A}$</td><td>None</td><td>Exact</td></tr><tr><td>Boltzmann constant</td><td>$k$</td><td>$\frac{16 R R_{\infty}}{c^2 \alpha \mu_0 K_\text{J}^2 A_\text{r}(\text{e}) M_\text{u}}$</td><td>$R$</td><td>$5.7 \times 10^{-7} \approx u_\text{r}(R)$</td><td>$1.380649\times10^{-23} kg\cdot m^2\cdot K^{−1} \cdot s^{−2}$</td><td>None</td><td>Exact</td></tr><tr><td>Stefan–Boltzmann constant</td><td>$\sigma$</td><td>$\frac{256 \pi^5 R^4 R_{\infty}^4}{15 c^7 \alpha^7 \mu_0 K_\text{J}^2 A_\text{r}(\text{e})^4 M_\text{u}^4}$</td><td>$R^4$</td><td>$2.3 \times 10^{-6} \approx 4 u_\text{r}(R)$</td><td>$\frac{2 \pi^5 k^4}{15 h^3 c^2}$</td><td>None</td><td>Exact</td></tr></tbody></table><p></p></div><br>注：其中，$c$ 为光速（speed of light），$\alpha$ 为精细结构常数（fine-structure constant），$R_\infty$ 为里德伯常量（Rydberg constant）。<p></p><p>参考文章：<br><a href="https://en.wikipedia.org/wiki/2019_redefinition_of_SI_base_units" target="_blank" rel="noopener">Redefinition of SI base units</a><br><a href="https://en.wikipedia.org/wiki/International_System_of_Units" target="_blank" rel="noopener">国际单位制</a></p><p>拓展阅读：<br><a href="https://mp.weixin.qq.com/s/bYIHtP3B33rPAHYWIvNatQ" target="_blank" rel="noopener">刚刚，『千克』被重新定义！大 K 从此成为历史</a></p>]]></content>
      
      
      <categories>
          
          <category> 物理 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>在网页上实现 3D Touch 效果</title>
      <link href="/2018-11/%E5%9C%A8%E7%BD%91%E9%A1%B5%E4%B8%8A%E5%AE%9E%E7%8E%B03D%20Touch%E6%95%88%E6%9E%9C/"/>
      <url>/2018-11/%E5%9C%A8%E7%BD%91%E9%A1%B5%E4%B8%8A%E5%AE%9E%E7%8E%B03D%20Touch%E6%95%88%E6%9E%9C/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/2018-11/3d_touch_cover_.jpg" alt=""></p><p>2016 年 9 月 14 日凌晨，iOS 10 正式版开始向用户推送更新，而 iOS 10 搭载的 Safari10 亦带来了不少新特性，其中就有 3D Touch 事件的支持（官方文档<a href="https://developer.apple.com/library/prerelease/content/releasenotes/General/WhatsNewInSafari/Articles/Safari_10_0.html" target="_blank" rel="noopener">《What’s New in Safari 10》</a>）。</p><h2 id="Force-Touch-与-3D-Touch"><a href="#Force-Touch-与-3D-Touch" class="headerlink" title="Force Touch 与 3D Touch"></a>Force Touch 与 3D Touch</h2><p>说到 3D Touch 不能不提与之相似的 Force Touch。Force Touch 是苹果公司在 2014 年 9 月公布的一项压力敏感屏幕技术，最早用于 Apple Watch，可识别轻点、轻按两种操作。随后 Force Touch 于 2015 年 9 月在 iPhone 6S 上得到改进并更名为 3D Touch，提供了更高灵敏度的触控力度识别、及更强的触感反馈，支持轻点、轻按及重按三个维度。</p><p>支持 3D Touch 的设备，目前有 iPhone 6S、iPhone 6S Plus、iPhone 7 以及 iPhone 7 Plus（注：截止 2018 年，还要加上 iPhone 8 和 iPhone X 等）。这是后文的硬件要求。</p><h2 id="感受-3D-Touch"><a href="#感受-3D-Touch" class="headerlink" title="感受 3D Touch"></a>感受 3D Touch</h2><p>3D Touch 最为典型的交互有 Quick Actions 和 Peek and Pop 两种。在 APP 图标上重按呼出一组快捷操作菜单，这即是典型的 Quick Actions：</p><p><img src="/images/2018-11/quick_actions.jpg" alt=""></p><p>而使用 Peek and Pop 则可以快速地对内容进行预览，以及后续的其他操作：</p><p><img src="/images/2018-11/peek_and_pop.jpg" alt=""></p><p>如上图所示，在系统的邮件 APP 中，以一定的力度按压邮件列表中的某一项，会触发 Peek 弹出一个内容预览窗口（在 Peek 状态下上滑还能触发 Quick Actions 调出一些快捷操作项哦），如果继续加大按压力度，则会触发 Pop 进入邮件内容界面，这整个过程就称之为 Peek and Pop。</p><p>除了邮件 APP 以外，信息、照片等多个系统 APP 以及一些第三方 APP（如微信、Facebook、Twitter 等）也都很好的支持了 Peek and Pop 这种 3D Touch 交互形式。</p><h2 id="网页中的-3D-Touch"><a href="#网页中的-3D-Touch" class="headerlink" title="网页中的 3D Touch"></a>网页中的 3D Touch</h2><p>要在网页中实现 3D Touch，需要用到以下两个知识点：</p><ul><li><p>touch.force<br>在 touch 对象中包含有一个名为 <code>force</code> 的只读属性，它的取值从 0 到 1，表示的是触碰点的按压力度，0 表示没有检测到压力，而 1 则是设备能识别出的最大压力。</p></li><li><p>touchforcechange<br><code>touchforcechange</code> 是 Safari 10 新增的事件，该事件会在按压力度改变时被触发。</p></li></ul><p>（注：在 MacOS Safari 上也有与之对应的 <code>webkitmouseforcechanged</code> 事件，该事件会在支持 Force Touch 的 Trackpad 上反应出按压力度值 force 的变化，但本文仅讨论手机设备的情况）</p><h2 id="实现-3D-Touch-效果"><a href="#实现-3D-Touch-效果" class="headerlink" title="实现 3D Touch 效果"></a>实现 3D Touch 效果</h2><p>要实现 3D Touch 效果，关键在于实时地获取 touch.force 的值。而由于网页上的 3D Touch 很大程度上受限于设备及浏览器的支持情况，因此我们划分以下 3 种情况，分别来看看要如何实现：</p><ul><li><p>支持 3D Touch 且升级到了 iOS 10 的设备<br>在这种最为理想的情况下，只需要监听 touchforcechange 事件即可获取到 force 的当前值，将 force 值的变化以适当的形式反馈在界面上以实现 3D Touch 效果。</p></li><li><p>支持 3D Touch 但系统版本低于 iOS 10 的设备<br>这种情况虽然无法监听 touchforcechange 事件，但 Touch 对象的 force 属性仍然可以反应出正确的按压力度，可以巧妙地设置一个定时器，以轮询的方式获取 force 的当前值。</p></li><li><p>不支持 3D Touch 的设备<br>这种情况下 touch.force 的取值始终为 0，虽然可以用长按的交互形式来代替，但建议还是以优雅降级的方式，索性就不处理了吧。</p></li></ul><h2 id="一个-3D-Touch-的例子"><a href="#一个-3D-Touch-的例子" class="headerlink" title="一个 3D Touch 的例子"></a>一个 3D Touch 的例子</h2><p>看到这里你肯定想说 “Shut up and show me the code…”。好的，那我们来看一个例子，在这个示例页面，用支持 3D Touch 的设备按压蓝色按钮可以将树懒兄逗笑哦，嘿嘿嘿～</p><a id="more"></a><p><img src="/images/2018-11/demo.png" alt=""></p><p>你可扫描以上二维码，或<a href="http://jdc.jd.com/demo/3d-touch" target="_blank" rel="noopener">戳我进行预览</a>，<strong> 注意请使用 iOS Safari 浏览器进行访问！使用 iOS Safari 浏览器！！使用 iOS Safari 浏览器！！！</strong> 重要的事情要说三遍，因为目前微信 WebView 并不支持 3D Touch。</p><p>实现思路其实比较简单，根据刚刚说到的知识，我们分别监听 touchforcechange、touchstart、touchend、touchcancel 事件：</p><ul><li>在 touchstart 事件中，启动一个定时器轮询地去获取 touch.force 的值；</li><li>在 touchforcechange 事件中获取当前 touch.force 的值，并清除 touchstart 事件中设置的定时器，因为支持 touchforcechange 事件的话就没必要轮询了；</li><li>在 touchend 及 touchcancel 事件中把 touch.force 重置为 0，并清除定时器。</li></ul><p>而树懒兄大笑的动画则用的是以下这张雪碧图，根据当前 touch.force 值来设置 background-position 以显示对应的动画帧来实现的。</p><p><img src="/images/2018-11/sloth.png" alt=""></p><p>你可以访问这个 <a href="https://github.com/hihuimin/3d-touch" target="_blank" rel="noopener">Github 项目</a> 来查看源码，核心代码位于 ThreeDTouch.js，该文件封装了一个名为 ThreeDTouch 的类，事例化时传入一个 DOM 对象即可在 callback 中获取到按压力度值的变化。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 3D Touch 事件处理器，传入要监听的 DOM 对象，在 callback 回调中获取当前 force 值</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param &#123; HTMLElement &#125; el - 要监听的 DOM 对象</span></span><br><span class="line"><span class="comment"> * @param &#123; Function &#125; callback - 带有 force 值的回调函数</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ThreeDTouch</span>(<span class="params">el, callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.el = el</span><br><span class="line">    <span class="keyword">this</span>.callback = callback</span><br><span class="line">    <span class="keyword">this</span>._bindEvents()</span><br><span class="line">&#125;</span><br><span class="line">ThreeDTouch.prototype = &#123;</span><br><span class="line">    <span class="comment">// 绑定相关 touch 事件</span></span><br><span class="line">    _bindEvents: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> events = [<span class="string">'touchforcechange'</span>, <span class="string">'touchstart'</span>, <span class="string">'touchend'</span>, <span class="string">'touchcancel'</span>]</span><br><span class="line">        events.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.el.addEventListener(event, <span class="keyword">this</span>, <span class="literal">false</span>)</span><br><span class="line">        &#125;.bind(<span class="keyword">this</span>))</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 分派 touch 事件</span></span><br><span class="line">    handleEvent: <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (ev.type) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'touchforcechange'</span>:</span><br><span class="line">                <span class="keyword">this</span>._touchForceDidChange(ev)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">case</span> <span class="string">'touchstart'</span>:</span><br><span class="line">                <span class="keyword">this</span>._touchDidStart(ev)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">case</span> <span class="string">'touchend'</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'touchcancel'</span>:</span><br><span class="line">                <span class="keyword">this</span>._touchDidEnd(ev)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//force 值改变时</span></span><br><span class="line">    _touchForceDidChange: <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> force = ev.touches[<span class="number">0</span>].force</span><br><span class="line">        <span class="keyword">this</span>.callback(force)</span><br><span class="line">        clearTimeout(<span class="keyword">this</span>.timeoutId) <span class="comment">// 支持 touchforcechange 的话则取消轮询</span></span><br><span class="line">    &#125;,</span><br><span class="line">    _touchDidStart: <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> touch = ev.touches[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">this</span>._checkForce(touch)</span><br><span class="line">    &#125;,</span><br><span class="line">    _touchDidEnd: <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.callback(<span class="number">0</span>)</span><br><span class="line">        clearTimeout(<span class="keyword">this</span>.timeoutId)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 轮询地获取 force 值</span></span><br><span class="line">    _checkForce: <span class="function"><span class="keyword">function</span>(<span class="params">touch</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.callback(touch.force)</span><br><span class="line">        <span class="keyword">this</span>.timeoutId = setTimeout(<span class="keyword">this</span>._checkForce.bind(<span class="keyword">this</span>, touch), <span class="number">16</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>本文转载自：<a href="https://aotu.io/notes/2016/09/28/3d-touch" target="_blank" rel="noopener">在网页上实现 3D Touch 效果 - 凹凸实验室</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用示波器播放 Bad Apple!!</title>
      <link href="/2018-11/%E4%BD%BF%E7%94%A8%E7%A4%BA%E6%B3%A2%E5%99%A8%E6%92%AD%E6%94%BEBad%20Apple!!/"/>
      <url>/2018-11/%E4%BD%BF%E7%94%A8%E7%A4%BA%E6%B3%A2%E5%99%A8%E6%92%AD%E6%94%BEBad%20Apple!!/</url>
      
        <content type="html"><![CDATA[<p>本视频于某次物理竞赛集训时拍摄于华中科技大学，音频为后期加上。<br>为了对上音轨，前后各有一段黑屏，这是 feature 而非 bug。</p><video src="/files/badapple.mp4" preload="metadata" controls playsinline="" poster="/images/2018-11/flandre_scarlet.jpg" style="max-width: 100%; display: block; margin-left: auto; margin-right: auto;"><br>Your browser does not support the video tag<br></video>]]></content>
      
      
      <categories>
          
          <category> 物理 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>用 Telnet 观看 Nyancat 动画</title>
      <link href="/2018-11/%E7%94%A8Telnet%E8%A7%82%E7%9C%8BNyancat%E5%8A%A8%E7%94%BB/"/>
      <url>/2018-11/%E7%94%A8Telnet%E8%A7%82%E7%9C%8BNyancat%E5%8A%A8%E7%94%BB/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近在知乎上看到一个关于 VPS 有趣的用途的问题，<a href="https://www.zhihu.com/question/24284566/answer/27291403" target="_blank" rel="noopener">其中一个回答</a>提到了可以搭建 Telnet 服务器，成功运行后别人用 Telnet 连接你的主机将会看到 Nyancat 动画。大致效果如图所示：</p><p><img src="/images/2018-11/nyancat.png" alt=""></p><p>然而，回答中给出的 Demo 已经失效，<code>telnet nyancat.dakko.us</code> 会返回一个 <code>Connection refused</code> 错误。不过值得庆幸的是，这个项目的官方网站 <a href="http://nyancat.dakko.us" target="_blank" rel="noopener">Nyan Cat Telnet Server</a> 和<a href="https://github.com/klange/nyancat" target="_blank" rel="noopener">GitHub 项目地址</a>都还可以正常访问，因此可以尝试重新把它搭起来。你可以查看博主建立的镜像：<code>telnet zsq.im 8081</code>，这是按以下方法搭建好的结果。</p><h2 id="下载编译"><a href="#下载编译" class="headerlink" title="下载编译"></a>下载编译</h2><p>在命令行执行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/klange/nyancat.git</span><br><span class="line"><span class="built_in">cd</span> nyancat</span><br><span class="line">make &amp;&amp; <span class="built_in">cd</span> src</span><br><span class="line">mv nyancat usr/<span class="built_in">local</span>/bin <span class="comment">#or make install</span></span><br></pre></td></tr></table></figure></p><p>这时，通过 <code>nyancat</code> 或 <code>nyancat -t</code> 命令就可以查看效果。接下来把 Telnet 配置好就行了。</p><h2 id="配置-Telnet"><a href="#配置-Telnet" class="headerlink" title="配置 Telnet"></a>配置 Telnet</h2><p>使用包管理工具安装 <code>xinetd</code>，例如<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install xinetd</span><br></pre></td></tr></table></figure></p><p>然后在 <code>/etc/xinetd.d</code> 目录下新建文件 <code>nyancat</code>，内容为：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">service telnet</span><br><span class="line">&#123;</span><br><span class="line">    flags          = REUSE</span><br><span class="line">    socket_type    = stream</span><br><span class="line">    <span class="built_in">wait</span>           = no</span><br><span class="line">    user           = root</span><br><span class="line">    group          = root</span><br><span class="line">    server         = /usr/<span class="built_in">local</span>/bin/nyancat</span><br><span class="line">    server_args    = -t</span><br><span class="line">    log_on_failure += USERID</span><br><span class="line">    <span class="built_in">disable</span>        = no</span><br><span class="line">    instances      = 10</span><br><span class="line">    per_source     = 2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>其中 <code>instances</code> 和 <code>per_source</code> 限制了总的连接数和单个 IP 的连接数，以防止资源滥用（其实并没有什么用，DDOS 攻击该来还是会来）。<br>接下来，重启 <code>xinetd</code> 服务：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart xinetd</span><br></pre></td></tr></table></figure></p><p>这时，你就可以通过 <code>telnet localhost</code> 查看是否一切正常。如果没有问题，配置防火墙开放 23 端口，就可以从公网访问了。试试用 Telnet 连接你的主机，效果是不是非常酷炫？<br>不过，博主在实践中发现，开放 telnet 的 23 端口可能会产生大量异常流量。解决方法是修改 telnet 的端口号，编辑 <code>/etc/services</code>，找到 telnet，将 23 改为一个你喜欢的数字（比如 8081）；或者直接关闭这个服务，在 <code>nyancat</code> 中设置 <code>disable: yes</code> 即可。</p><h2 id="更多"><a href="#更多" class="headerlink" title="更多"></a>更多</h2><p>俗话说，有光的地方就有 Bad Apple!!。很久以前的一篇文章 <a href="/2017-12 / 近期完成的数个游戏及应用 /">近期完成的数个游戏及应用</a> 中，就提到博主成功使用 HTML 页面播放 Bad Apple!! 字符画。目前，博主正在尝试搭建一个可以播放 Bad Apple!! 的 Telnet 服务器，敬请期待。</p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Heavens Above 爬虫的实现</title>
      <link href="/2018-10/Heavens%20Above%E7%88%AC%E8%99%AB%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
      <url>/2018-10/Heavens%20Above%E7%88%AC%E8%99%AB%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.heavens-above.com" target="_blank" rel="noopener">Heavens Above</a> 是一个天文数据库网站，可以查询到诸如卫星过境的很多信息。虽然数据很全面，但是检索方式非常繁琐，在网站上需要依次打开多个链接进行比对，难以迅速地获取需要的信息。故博主决定写一个爬虫，以直观地展现所有数据。由于 Heavens Above 采取了大量的反爬虫措施，例如校验 Cookie、限制单个 IP 的访问次数等，因此必须严格地模拟浏览器请求，才能正确爬取数据。</p><p><img src="/images/2018-10/iss.png" alt=""></p><p>博主也参考了大量 GitHub 上已有的 Heavens Above 爬虫项目，不过它们大部分失去维护，停留在数年前，已经不再适用。具体的逻辑还是要自行测试。</p><p>项目地址：<a href="https://github.com/stevenjoezhang/heavens-above" target="_blank" rel="noopener">heavens-above</a></p>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub </tag>
            
            <tag> 天文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Thanks for inventing Javascript</title>
      <link href="/2018-10/Thanks%20for%20inventing%20Javascript/"/>
      <url>/2018-10/Thanks%20for%20inventing%20Javascript/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/2018-10/thanks-for-inventing-javascript.jpg" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 幽默 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用 OpenCV 进行星轨的后期处理</title>
      <link href="/2018-10/%E4%BD%BF%E7%94%A8OpenCV%E8%BF%9B%E8%A1%8C%E6%98%9F%E8%BD%A8%E7%9A%84%E5%90%8E%E6%9C%9F%E5%A4%84%E7%90%86/"/>
      <url>/2018-10/%E4%BD%BF%E7%94%A8OpenCV%E8%BF%9B%E8%A1%8C%E6%98%9F%E8%BD%A8%E7%9A%84%E5%90%8E%E6%9C%9F%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>贴上代码，稍后填坑。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addImage</span><span class="params">(img1_path, img2_path, alpha = <span class="number">0.5</span>)</span>:</span></span><br><span class="line">    img1 = cv2.imread(img1_path)</span><br><span class="line">    img = cv2.imread(img2_path)</span><br><span class="line">    h, w, _ = img1.shape</span><br><span class="line">    beta = <span class="number">1</span> - alpha</span><br><span class="line">    gamma = <span class="number">0</span></span><br><span class="line">    img_add = cv2.addWeighted(img1, alpha, img2, beta, gamma)</span><br><span class="line">    <span class="keyword">return</span> img_add</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></span><br><span class="line">    img_root = <span class="string">''</span> <span class="comment"># 这里写你的文件夹路径，比如：/home/youname/data/img/ 注意最后一个文件夹要有斜杠 </span></span><br><span class="line">    fps = <span class="number">24</span> <span class="comment"># 保存视频的 FPS，可以适当调整</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 可以用(*'DVIX') 或(*'X264')，如果都不行先装 ffmepg: sudo apt install ffmepg</span></span><br><span class="line">    fourcc = cv2.VideoWriter_fourcc(*<span class="string">'MJPG'</span>)</span><br><span class="line">    videoWriter = cv2.VideoWriter(<span class="string">'saveVideo.mp4v'</span>, fourcc, fps, (<span class="number">3168</span>, <span class="number">4752</span>))<span class="comment"># 最后一个是保存图片的尺寸</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">99</span>):</span><br><span class="line">        <span class="comment">#frame = cv2.imread(img_root+str(i+1)+'.jpg')</span></span><br><span class="line">        frame = addImage(<span class="string">'IMG_3866.jpg'</span>, <span class="string">'IMG_3869.jpg'</span>)</span><br><span class="line">        videoWriter.write(frame)</span><br><span class="line">    videoWriter.release()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    folder = input(<span class="string">" 请输入照片所在文件夹 "</span>) <span class="keyword">or</span> <span class="string">'.'</span></span><br><span class="line">    prefix = input(<span class="string">" 请输入照片前缀 "</span>) <span class="keyword">or</span> <span class="string">'IMG_'</span></span><br><span class="line">    suffix = input(<span class="string">" 请输入照片后缀 "</span>) <span class="keyword">or</span> <span class="string">'jpg'</span></span><br><span class="line">    digits = int(input(<span class="string">" 请输入照片序号位数 "</span>) <span class="keyword">or</span> <span class="number">4</span>)</span><br><span class="line">    start = int(input(<span class="string">" 请输入第一张照片序号 "</span>) <span class="keyword">or</span> <span class="number">0</span>)</span><br><span class="line">    end = int(input(<span class="string">" 请输入最后一张照片序号 "</span>) <span class="keyword">or</span> <span class="number">1</span>)</span><br><span class="line">    fps = int(input(<span class="string">" 请输入视频帧率 "</span>) <span class="keyword">or</span> <span class="number">24</span>)</span><br><span class="line">    fpp = int(input(<span class="string">" 请输入每张照片持续的帧数 "</span>) <span class="keyword">or</span> <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    imgArray = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(start, end + <span class="number">1</span>):</span><br><span class="line">        imgPath = folder + <span class="string">"/"</span> + prefix + i + <span class="string">"."</span> + suffix</span><br><span class="line">        <span class="keyword">if</span> os.path.exists(imgPath):</span><br><span class="line">            imgArray.append(imgPath)</span><br><span class="line"></span><br><span class="line">    h, w, _ = imgArray[<span class="number">0</span>].shape</span><br><span class="line">    fourcc = cv2.VideoWriter_fourcc(*<span class="string">'MJPG'</span>)</span><br><span class="line">    videoWriter = cv2.VideoWriter(<span class="string">'saveVideo.mp4v'</span>, fourcc, fps, (w, h))</span><br><span class="line">    frame = cv2.imread(imgArray[<span class="number">0</span>])</span><br><span class="line">    <span class="comment">#videoWriter.write(frame)</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(imgArray)):</span><br><span class="line">        <span class="comment">#frame = cv2.imread(img_root+str(i+1)+'.jpg')</span></span><br><span class="line">        frame = addImage(frame, imgArray[i], i / (i + <span class="number">1</span>))</span><br><span class="line">        videoWriter.write(frame)</span><br><span class="line">        print(i + <span class="string">'/'</span> + (i + <span class="number">1</span>))</span><br><span class="line">    videoWriter.release()</span><br></pre></td></tr></table></figure></p><p>参考文章：<br><a href="https://blog.csdn.net/zh_jessica/article/details/77992578" target="_blank" rel="noopener">Python-OpenCV 图像叠加 or 图像混合加权</a><br><a href="https://blog.csdn.net/aa846555831/article/details/53070314" target="_blank" rel="noopener">python + opencv 将图片保存为视频</a></p><p>拓展阅读：<a href="http://www.imgzone.cn/article-377-1.html" target="_blank" rel="noopener">叠加法星轨的拍摄及后期方法</a></p>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 天文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>古惑狼游戏牵扯出的硬件 bug</title>
      <link href="/2018-10/%E5%8F%A4%E6%83%91%E7%8B%BC%E6%B8%B8%E6%88%8F%E7%89%B5%E6%89%AF%E5%87%BA%E7%9A%84%E7%A1%AC%E4%BB%B6bug/"/>
      <url>/2018-10/%E5%8F%A4%E6%83%91%E7%8B%BC%E6%B8%B8%E6%88%8F%E7%89%B5%E6%89%AF%E5%87%BA%E7%9A%84%E7%A1%AC%E4%BB%B6bug/</url>
      
        <content type="html"><![CDATA[<p>It’s kind of painful to re-live this one. As a programmer, you learn to blame your code first, second, and third… and somewhere around 10,000th you blame the compiler. Well down the list after that, you blame the hardware.<br>回想起这个 bug，仍然让我感觉有些痛苦。作为一个程序员，在发现 bug 时，你学会了首先在自己代码中找问题，一次、两次、三次…… 或许在测试一万次之后，你会把问题归咎于编译器。只有在这所有的都不起作用之后，你才会把问题归咎于硬件。</p><p>This is my hardware bug story.<br>这是我遭遇硬件 bug 的故事。</p><p>Among other things, I wrote the memory card (load/save) code for Crash Bandicoot. For a swaggering game coder, this is like a walk in the park; I expected it would take a few days. I ended up debugging that code for six weeks. I did other stuff during that time, but I kept coming back to this bug – a few hours every few days. It was agonizing.<br>抛开别的不说，我曾为古惑狼（Crash Bandicoot，PS1 游戏）写存储卡（读写）代码。对于一个自大的游戏程序员，这就像是在公园里散步一样轻松愉快；我预计只要几天就可以写完。我最终用了六个礼拜把那些代码调试完毕。在此期间我也做过一些其他的事情，但却一直绕不开这个 bug——每几天内就要花上好几个小时来处理。这个 bug 实在烦人。</p><p>The symptom was that you’d go to save your progress and it would access the memory card, and almost all the time, it worked normally… But every once in a while the write or read would time out… for no obvious reason. A short write would often corrupt the memory card. The player would go to save, and not only would we not save, we’d wipe their memory card. D’Oh.<br>这个 bug 的症状是，当你需要保存你的进度时，代码会访问存储卡，而大部分情况下没有什么问题… 但是偶尔读写会超时… 没有任何明显的原因。一个简短的写入经常毁掉存储卡。玩家要保存进度，我们不仅不保存，还擦除他们存储卡上的全部东西。天哪。</p><p>After a while, our producer at Sony, Connie Booth, began to panic. We obviously couldn’t ship the game with that bug, and after six weeks I still had no clue what the problem was. Via Connie we put the word out to other PlayStation 1 developers – had anybody seen anything like this? Nope. Absolutely nobody had any problems with the memory card system.<br>过了一段时间，我们在 Sony 的制作人 Connie Booth 慌了。我们显然不能发布带有这个 bug 游戏，而六个星期之后我对于问题出在哪一点线索都没有。通过 Connie 我们向其他 PS1 开发者求助：有没有人出现过像我们这样的情况？没有。绝对没有任何人在存储卡系统上出现任何问题。</p><p>About the only thing you can do when you run out of ideas debugging is divide and conquer: keep removing more and more of the errant program’s code until you’re left with something relatively small that still exhibits the problem. You keep carving parts away until the only stuff left is where the bug is.<br>在你绞尽脑汁之后，你能做的唯一一个调试方法就是分而治之：一点点去除错误程序中的代码，直到留下的代码相对很少，但仍然表现出问题。像雕刻一样去除没有问题的代码，留下的就是你的 bug 所在。</p><a id="more"></a><p>The challenge with this in the context of, say, a video game is that it’s very hard to remove pieces. How do you still run the game if you remove the code that simulates gravity in the game? Or renders the characters?<br>在这样的背景下挑战在于，视频游戏是很难去除某一部分的。在你删除模拟重力或者显示字符的代码后，如何运行游戏？</p><p>What you have to do is replace entire modules with stubs that pretend to do the real thing, but actually do something completely trivial that can’t be buggy. You have to write new scaffolding code just to keep things working at all. It is a slow, painful process.<br>你必须做的是用一个假装做真正的事情，但实际上只是做很简单的不会出现 bug 事情的东西来替换掉整个模块。你必须写新的支撑代码来让这些玩意正常工作。这是一个缓慢而痛苦的过程。</p><p>Long story short: I did this. I kept removing more and more hunks of code until I ended up, pretty much, with nothing but the startup code – just the code that set up the system to run the game, initialized the rendering hardware, etc. Of course, I couldn’t put up the load/save menu at that point because I’d stubbed out all the graphics code. But I could pretend the user used the (invisible) load/save screen and asked to save, then write to the card.<br>长话短说：我做完了。我移除了大片大片的代码，相当多，只留下了初始化代码——就是准备游戏运行系统，初始化渲染硬件等等。当然，我不能显示加载 / 保存菜单，因为我掐掉了所有的图像代码。但是我能够假装用户使用（不可见的）加载 / 保存屏幕并且请求保存，然后写入卡中。</p><p>I ultimately ended up with a pretty small amount of code that exhibited the problem – but still randomly! Most of the time, it would work, but every once in a while, it would fail. Almost all of the actual Crash Bandicoot code had been removed, but it still happened. This was really baffling: the code that remained wasn’t really doing anything.<br>我最终以一个带有这个 bug 的很少量的代码结束——但问题仍然随机出现！在大多数情况下没啥问题，但是偶尔会失效。基本上所有古惑狼游戏的实际代码都被移除了，但问题还是会复现。这实在是莫名其妙：留下来的代码基本上都没做什么事。</p><p>At some moment – it was probably 3 am – a thought entered my mind. Reading and writing (I/O) involves precise timing. Whether you’re dealing with a hard drive, a compact flash card, a Bluetooth transmitter – whatever – the low-level code that reads and writes has to do so according to a clock.<br>在那时——估计是凌晨 3 点——一个想法蹦了出来。读写（I/O）涉及精确定时。无论是硬盘、存储卡、蓝牙发送器——随便啥——做读写的底层代码都是根据时钟来的。</p><p>The clock lets the hardware device – which isn’t directly connected to the CPU – stay in sync with the code the CPU is running. The clock determines the baud rate – the rate at which data is sent from one side to the other. If the timing gets messed up, the hardware or the software – or both – get confused. This is really, really bad, and usually results in data corruption.<br>时钟让不直接连接到 CPU 的硬件设备和 CPU 运行的代码同步。时钟决定了波特率——数据从一头传到另一头的速率。如果计时有什么问题，硬件或者软件或者两者都会乱七八糟的。这真的，真的很糟糕，并且通常导致数据损坏。</p><p>What if something in our setup code was messing up the timing somehow? I looked again at the code in the test program for timing-related stuff, and noticed that we set the programmable timer on the PlayStation 1 to 1 kHz (1000 ticks/second). This is relatively fast; it was running at something like 100 Hz in its default state when the PlayStation 1 started up. Most games, therefore, would have this timer running at 100 Hz.<br>如果我们的初始化代码以某种方式弄乱了计时会怎么样？我又看了一遍测试程序中和计时有关的代码，并注意到我们将 PS1 上的可编程计时器设置到了 1kHz（1000 跳每秒）。这是比较快了，当 PS1 启动的时候，默认状态大概是 100Hz。因此，大多数游戏将他们的计时器设置为 100Hz。</p><p>Andy, the lead (and only other) developer on the game, set the timer to 1 kHz so that the motion calculations in Crash Bandicoot would be more accurate. Andy likes overkill, and if we were going to simulate gravity, we ought to do it as high-precision as possible!<br>这个游戏的带头（和除我外的唯一）开发者 Andy，将计时器设置为 1kHz，使得古惑狼的动作计算更加准确。Andy 喜欢简单粗暴的做法，如果我们要模拟重力，我们应该尽可能的提高精度！</p><p>But what if increasing this timer somehow interfered with the overall timing of the program, and therefore with the clock used to set the baud rate for the memory card?<br>然而如果提高计时器频率莫名其妙的干扰了整个程序的计时，故而将这个计时器设置到存储卡的波特率上会怎样呢？</p><p>I commented the timer code out. I couldn’t make the error happen again. But this didn’t mean it was fixed; the problem only happened randomly. What if I was just getting lucky?<br>我将计时器代码注释掉。然后我就无法复现这个 bug 了。但是这并不表示 bug 被修复了，这个问题是随机发生的。万一我只是运气好呢？</p><p>As more days went on, I kept playing with my test program. The bug never happened again. I went back to the full Crash Bandicoot code base, and modified the load/save code to reset the programmable timer to its default setting (100 Hz) before accessing the memory card, then put it back to 1 kHz afterwards. We never saw the read/write problems again.<br>几天过去了，我还是在玩我的测试程序。Bug 没有再出现。我又回到完整的古惑狼游戏代码中，修改了加载 / 保存代码，在访问存储卡之前将可编程计时器重置为默认设置（100Hz），之后设置回 1kHz。从此之后没有发现问题再次出现。</p><p>But why?<br>但是… 为什么？</p><p>I returned repeatedly to the test program, trying to detect some pattern to the errors that occurred when the timer was set to 1 kHz. Eventually, I noticed that the errors happened when someone was playing with the PlayStation 1 controller. Since I would rarely do this myself – why would I play with the controller when testing the load/save code? – I hadn’t noticed it. But one day one of the artists was waiting for me to finish testing – I’m sure I was cursing at the time – and he was nervously fiddling with the controller. It failed. “Wait, what? Hey, do that again!”<br>我重新回到测试程序上，试着检测当计时器设置为 1kHz 时出现的那些错误的模式。终于，我注意到这些错误出现在使用 PS1 手柄的人身上。因为我自己很少这样做，所以我没有注意到（为啥我要在测试加载 / 保存代码的时候用手柄）。但是有一天我们的美工等我去完成测试（我确定那时候我在爆粗口），而他紧张的摆弄着手柄。卡损坏了。『等下，怎么回事？喂，再来一次！』</p><p>Once I had the insight that the two things were correlated, it was easy to reproduce: start writing to memory card, wiggle controller, corrupt memory card. Sure looked like a hardware bug to me.<br>一旦我发现了这两件事是联系着的，就很容易重现 bug：开始写入存储卡，动一下手柄，存储卡损坏。在我看来这完全是硬件 bug。</p><p>I went back to Connie and told her what I’d found. She relayed this to one of the hardware engineers who had designed the PlayStation 1.”Impossible,”she was told.”This cannot be a hardware problem.” I told her to ask if I could speak with him.<br>我去找 Connie 告诉他我的发现。她转述给设计过 PS1 的硬件工程师。她被告知：『不可能，这不可能是硬件问题。』我跟她说问一下我能不能直接和硬件工程师交流。</p><p>He called me and, in his broken English and my (extremely) broken Japanese, we argued. I finally said, “just let me send you a 30-line test program that makes it happen when you wiggle the controller.” He relented. This would be a waste of time, he assured me, and he was extremely busy with a new project, but he would oblige because we were a very important developer for Sony. I cleaned up my little test program and sent it over.<br>那个工程师给我打电话了，我们争论了起来——他用着他的烂英语，我用着我更烂的日语。我最后说：『我给你一个 30 行的测试程序，让你在动手柄的时候能够出现这问题。』他答应了。『这是浪费时间』，他向我保证，而他正忙于一个新项目，但因为我们是 Sony 的重要开发者，他会帮忙看看的。我整理了这个测试程序，然后发送给了他。</p><p>The next evening (we were in LA and he was in Tokyo, so it was evening for me when he came in the next day) he called me and sheepishly apologized. It was a hardware problem.<br>第二天晚上（我们在洛杉矶，而他在东京，所以对于我来说是晚上而他是到了第二天），他给我打电话，很难为情地向我道歉。这确实是个硬件问题。</p><p>I’ve never been totally clear on what the exact problem was, but my impression from what I heard back from Sony HQ was that setting the programmable timer to a sufficiently high clock rate would interfere with things on the motherboard near the timer crystal. One of these things was the baud rate controller for the memory card, which also set the baud rate for the controllers. I’m not a hardware guy, so I’m pretty fuzzy on the details.<br>我还是没有完全搞清楚问题到底在哪，但是我的印象中，从 Sony 总部的反馈听到的是，如果将可编程计时器设置到足够高的时钟频率，会影响到主板上时钟晶振附近的一些东西。这些东西之一就是存储卡的波特率控制器，而它同时也设置手柄的波特率。我不是搞硬件的，所以对于细节我相当模糊。</p><p>But the gist of it was that crosstalk between individual parts on the motherboard, and the combination of sending data over both the controller port and the memory card port while running the timer at 1 kHz would cause bits to get dropped… and the data lost… and the card corrupted.<br>但是主旨是主板上两个独立部分的串扰，以及手柄接口和存储卡接口数据发送的结合在 1kHz 的时钟频率下会导致丢位，从而数据丢失，以致卡损坏。</p><p>This is the only time in my entire programming life that I’ve debugged a problem caused by quantum mechanics.<br>这是我整个编程生涯中，唯一一次因为量子力学而 debug 的问题。</p><p>Footnotes for posterity:<br>后记：</p><p>A few people have pointed out that this bug really wasn’t a product of quantum mechanical effects, any more than any other bug is. Of course I was being hyperbolic mentioning quantum mechanics. But this bug did feel different to me, in that the behavior was – at least at the level of the source code – non-deterministic.<br>有小部分人指出这个 bug 实际上不是量子力学的副效应，在这点上和其它 bug 也没什么不同。当然我提到量子力学确实是夸张了。不过这个 bug 给我的感觉很不相同，特别是它的行为——至少在源代码层面上——不是很具有确定性。</p><p>Some people have said I should have taken more electronics classes. That is absolutely true; I consider myself a “full stack” programmer, but my stack really only goes down to hand-writing assembly code, not to playing with transistors. Perhaps some day I will learn more about the “bare metal”…<br>有人说我应该学习更多的电子线路课程。这当然没毛病；我自称『全栈工程师』，但我的技术栈只开到了手写汇编代码，而没有涉及晶体管之类。也许有一天我会更多地了解『裸金属』。</p><p>Finally, a few have questioned whether a better development methodology would have prevented this kind of bug in the first place. I don’t think so, but it’s possible. I use test-driven development for some coding tasks these days, but it’s doubtful we could have usefully applied these techniques given the constraints of the systems and tools we were using.<br>最后，一些人质疑一种更好的开发方法是否能够首先防止这种错误。我不这么认为，但这是可能的。我现在使用测试驱动开发来完成某些编码任务，但考虑到我们使用的系统和工具的限制，我们可以有效地应用这些技术。</p><p>本文翻译自：<a href="https://www.quora.com/Programming-Interviews/Whats-the-hardest-bug-youve-debugged/answer/Dave-Baggett" target="_blank" rel="noopener">What’s the hardest bug you’ve debugged?</a></p>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>关于黎曼猜想</title>
      <link href="/2018-09/%E5%85%B3%E4%BA%8E%E9%BB%8E%E6%9B%BC%E7%8C%9C%E6%83%B3/"/>
      <url>/2018-09/%E5%85%B3%E4%BA%8E%E9%BB%8E%E6%9B%BC%E7%8C%9C%E6%83%B3/</url>
      
        <content type="html"><![CDATA[<p>前几日关于黎曼猜想（Riemann Hypothesis）被证明的消息在网络上炒得沸沸扬扬，菲尔兹奖、阿贝尔奖双料得主 Michael Francis Atiyah 爵士声称他证明了这个困扰了数学界 160 年的问题，且其目的是为了研究精细结构常数。然而，在他公布了他的 Simple Proof 后，却不被学界所看好，甚至遭到了一些尖锐的批评。毕竟，这篇只有五页纸的文章，刨去介绍等内容，并没有展示太多的细节；其证明过程，又依赖于一个存疑的 Todd function。如果如证明中所说，黎曼猜想真的指向了精细结构常数，这对于由第一性原理出发构建物理学体系将有极大的启发性，其结果无疑是令人激动的。但是经过计算，却发现文中所声称的极限存在问题，整个理论的正确性难以得到证实。<br>有鉴于此，博主研究该证明过程的计划搁置了（毕竟没有什么价值，大概可以用来提升读 Paper 的能力 #捂脸），还是写篇文章介绍下黎曼猜想本身吧。</p><h2 id="猜想的提出"><a href="#猜想的提出" class="headerlink" title="猜想的提出"></a>猜想的提出</h2><p>时间回到 1859 年，著名的德国数学家波恩哈德 · 黎曼（Bernhard Riemann）在他的论文《Über die Anzahl der Primzahlen unter einer gegebenen Größe》中提及了这个著名的猜想。黎曼本人在数学界颇有建树，但他却并没有试图对论文中的猜想给出证明。<br>这个猜想是关于黎曼 $\zeta$ 函数的，该函数的定义为：<br>$$\zeta(s)=\frac{1}{1^s}+\frac{1}{2^s}+\frac{1}{3^s}+\frac{1}{4^s}+\cdots$$<br>注意，$\zeta$ 函数必须经过解析延拓，才能在全复平面上有定义，稍后将给出解析延拓的过程。<br>而黎曼猜想就是：$\zeta(s)$ 的所有非平凡零点的实部均为 $\frac{1}{2}$。</p><h2 id="zeta-函数的解析延拓"><a href="#zeta-函数的解析延拓" class="headerlink" title="$\zeta$ 函数的解析延拓"></a>$\zeta$ 函数的解析延拓</h2><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>在中学数学中，我们所接触到的函数都是实变函数，即从实数集到实数集的映射，写为 $f:\mathbb{R}\rightarrow\mathbb{R}$。在接触了虚数单位 i 和复数后，就可以开始定义复变函数，即复数集到复数集的映射，写为 $f:\mathbb{C}\rightarrow\mathbb{C}$。实变函数的定义域被限制在了实轴上，而为了表示出一个与之对应的复变函数，就需要扩充其定义域到复平面上。这样，可以定义出复数域上的各种函数：指数、对数、三角函数等。由于复数的性质，还需要根据枝点规定割线、单值分支等，来确定出函数值。而原本定义域只在复平面上某一区域的复变函数，经过严格的数学推导（例如级数展开等），也可以扩充其定义域。这时，解析延拓的办法应运而生。对于 $\zeta(s)$ 函数而言，非常明显，当 $s$ 取在实轴上（即作为实变函数时），若 $s\le 1$，其函数值发散；而 $s&gt;1$ 时收敛。特别的，$s=1$ 时为调和级数，而 $s=2$ 时由高斯最早计算出了其函数值 $\frac{\pi^2}{6}$。<br>在复数域上，可以证明，$\zeta(s)$ 在 $Re(s)&gt;1$ 上解析。接下来，我们需要将其定义域扩展到全复平面；之前的级数定义将不在对 $Re(s)&lt;1$ 的情况使用，因为它不收敛，无法采用 Cauchy 和。</p><h3 id="梅林变换"><a href="#梅林变换" class="headerlink" title="梅林变换"></a>梅林变换</h3><p>梅林（Mellin）变换是一个积分变换，它把一个正实数域 $\mathbb{R}^+$ 上的函数变换为一个复数域 $\mathbb{C}$ 上的函数。设 $f:\mathbb{R}^+\rightarrow\mathbb{C}$ 是一个函数，定义：<br>$$\mathcal{M}f(z)=\int_0^{+\infty}f(s)s^z\frac{ds}{s}$$<br>称 $\mathcal{M}f:\mathbb{C}\rightarrow\mathbb{C}$ 为 $f$ 的梅林变换。<br>取 $f(s)$ 为 $f_\lambda (s)=e^{-\lambda s}$，则有：<br>\begin{align*}<br>\mathcal{M}f(z)&amp;=\int_0^{+\infty}e^{-\lambda s}s^z\frac{ds}{s}\\<br>&amp;=\lambda^{-z}\int_0^{+\infty}e^{-s}s^{z-1}ds\\<br>&amp;=\lambda^{-z}\Gamma(z)<br>\end{align*}<br>这里的 $\Gamma(z)$ 就是一般数理方程中会涉及到的 $\Gamma$ 函数，其性质不再赘述。<br>记住以上结论，取 $\lambda=\pi n^2$，继续构造函数：<br>$$f(s)=\sum_{n=1}^{\infty}f_{\pi n^2}(s)=\sum_{n=1}^{\infty}e^{-\pi n^2 s}$$<br>注意到梅林变换是线性的，这时，<br>\begin{align*}<br>\mathcal{M}f(z)&amp;=\sum_{n=1}^{\infty}\mathcal{M}f_{\pi n^2}(z)\\<br>&amp;=\sum_{n=1}^{\infty}(\pi n^2)^{-z}\Gamma(z)\\<br>&amp;=\pi^{-z}\sum_{n=1}^{\infty}n^{-2z}\Gamma(z)\\<br>&amp;=\pi^{-z}\zeta(2z)\Gamma(z)<br>\end{align*}<br>最后一个等号使用了 $\zeta$ 函数的原始定义。考虑到：<br>$$\mathcal{M}f(z)=\int_0^{+\infty}(\sum_{n=1}^{\infty}e^{-\pi n^2 s})s^{z-1}ds$$<br>于是，利用 $\mathcal{M}f(z)$ 的两个等价表达式，我们得到了一个重要结论：<br>$$\pi^{-z}\zeta(2z)\Gamma(z)=\int_0^{+\infty}(\sum_{n=1}^{\infty}e^{-\pi n^2 s})s^{z-1}ds$$<br>注意，这里的推导并非十分严谨，还需要证明其收敛性，才能交换积分与极限。这要求 $Re(z)&gt;\frac{1}{2}$。</p><a id="more"></a><h3 id="泊松求和"><a href="#泊松求和" class="headerlink" title="泊松求和"></a>泊松求和</h3><p>再来看一下 Fourier 变换<br>$$\mathcal{F}f(x)=\int_{-\infty}^{+\infty}f(t)e^{ixt}dt$$<br>对于足够『好』的函数 $f$，可以证明泊松（Poisson）求和公式<br>$$\sum_{n\in\mathbb{Z}}f(n)=\sum_{n\in\mathbb{Z}}\mathcal{F}f(n)$$<br>这部分我们就证明这个公式。<br>假设 $f$ 足够『好』（要多好有多好），定义<br>$$F(t)=\sum_{n\in\mathbb{Z}}f(n+t)$$<br>则 $F$ 是 $\mathbb{R}$ 上周期为 $1$ 的函数，于是可以构造 $F$ 的 Fourier 级数：令<br>$$c_k=\int_0^1F(t)e^{-2\pi ikt}dt$$<br>是第 $k$ 个 Fourier 系数，则<br>$$F(t)\sim\sum_{k\in\mathbb{Z}}c_ke^{2\pi ikt}$$<br>而这个系数<br>\begin{align*}<br>c_k&amp;=\int_0^1F(t)e^{-2\pi ikt}dt\\<br>&amp;=\int_0^1\sum_{n\in\mathbb{Z}}f(n+t)e^{-2\pi ik(n+t)}dt\\<br>&amp;=\int_{-\infty}^{+\infty}f(t)e^{-2\pi ikt}dt\\<br>&amp;=\mathcal{F}f(k)<br>\end{align*}<br>从而<br>$$\sum_{n\in\mathbb{Z}}f(n)=F(0)\sim\sum_{k\in\mathbb{Z}}c_k=\sum_{k\in\mathbb{Z}}\mathcal{F}f(k)$$<br>就得到了 Poisson 求和公式形式上的『证明』。<br>那么 $f$ 究竟要满足什么条件呢？<br>如果周期函数 $F\in C^2[0,1]$，就有 $F(t)=\sum_{k\in\mathbb{Z}}c_ke^{2\pi ikt}$。因此，我们要求 $f$ 二阶连续可导，并且<br>$$\sum_{n\in\mathbb{Z}}||f||_{[n.n+1],\infty}+||f’||_{[n.n+1],\infty}+||f’’||_{[n.n+1],\infty}&lt;+\infty$$<br>使用导数一致收敛的判别法则，就得到 $F\in C^2[0,1]$ 啦。<br>也就是说，如果 $f\in C^2(\mathbb{R})$，并且满足以上条件，就有 Poisson 求和公式<br>$$\sum_{n\in\mathbb{Z}}f(n)=\sum_{n\in\mathbb{Z}}\mathcal{F}f(n)$$</p><h3 id="解析延拓"><a href="#解析延拓" class="headerlink" title="解析延拓"></a>解析延拓</h3><p>设 $\lambda&gt;0$，令<br>\begin{eqnarray*}<br>\theta(\lambda)&amp;=&amp;\sum_{n\in\mathbb{Z}}e^{-\pi n^2\lambda}\\<br>\psi(\lambda)&amp;=&amp;\sum_{n=1}^\infty e^{-\pi n^2\lambda}<br>\end{eqnarray*}<br>很显然 $\theta(\lambda)=2\psi(\lambda)+1$。<br>考虑 $f(t)=e^{-\pi t^2\lambda}$，计算得 $\mathcal{F}f(x)=\frac{1}{\sqrt{\lambda}}e^{-\pi\frac{x^2}{\lambda}}$，而且满足相应条件，因此用 Poisson 求和公式，<br>$$\sum_{n\in\mathbb{Z}}e^{-\pi n^2\lambda}=\frac{1}{\sqrt{\lambda}}\sum_{n\in\mathbb{Z}}e^{-\pi\frac{n^2}{\lambda}}$$<br>即 $\theta(\lambda)=\frac{1}{\sqrt{\lambda}}\theta\left(\frac{1}{\lambda}\right)$。<br>换成 $\psi$ 就是 $\psi\left(\frac{1}{\lambda}\right)=\sqrt{\lambda}\psi(\lambda)+\frac{\sqrt{\lambda}-1}{2}$。<br>第二部分的最后，得到了<br>\begin{align*}<br>\pi^{-z}\zeta(2z)\Gamma(z)&amp;=\int_0^{+\infty}\left(\sum_{n=1}^\infty e^{-\pi n^2s}\right)s^{z-1}ds\\<br>&amp;=\int_0^{+\infty}\psi(s)s^{z-1}ds<br>\end{align*}<br>因此<br>\begin{align*}<br>\pi^{-z}\zeta(2z)\Gamma(z)&amp;=\int_0^{+\infty}\psi(s)s^{z-1}ds\\<br>&amp;=\int_1^{+\infty}\psi(s)s^{z-1}ds+\int_0^1\psi(s)s^{z-1}ds\\<br>&amp;=\int_1^{+\infty}\psi(s)s^{z-1}ds+\int_1^{+\infty}\psi\left(\frac{1}{s}\right)s^{1-z}\frac{ds}{s^2}\\<br>&amp;=\int_1^{+\infty}\psi(s)s^{z-1}ds+\int_1^{+\infty}\left(\psi(s)\sqrt{s}+\frac{\sqrt{s}-1}{2}\right)s^{-1-z}ds\\<br>&amp;=\int_1^{+\infty}\psi(s)(s^{z-1}+s^{-z-\frac{1}{2}})ds+\int_1^{+\infty}\frac{s^{-z-\frac{1}{2}}-s^{-z-1}}{2}ds\\<br>&amp;=\int_1^{+\infty}\psi(s)(s^{z-1}+s^{-z-\frac{1}{2}})ds+\frac{1}{2z(2z-1)}<br>\end{align*}<br>以上计算的前提是 $Re(z)&gt;\frac{1}{2}$。<br>令 $w=2z$，则当 $Re(w)&gt;1$ 时，<br>$$\sqrt{\pi}^{-w}\zeta(w)\Gamma\left(\frac{w}{2}\right)=\int_1^{+\infty}\psi(s)(\sqrt{s}^{w-2}+\sqrt{s}^{-w-1})ds-\frac{1}{w(1-w)}$$<br>现在观察：等号右边是一个亚纯函数（亚纯函数就是『能表示成两个解析函数的商』的函数，或者『没有本性奇点』的函数，两个亚纯函数经过四则运算仍然是亚纯函数），而等号左边的 $\sqrt{\pi}^{-w}$、$\Gamma\left(\frac{w}{2}\right)$ 也都是亚纯函数。这样，上式相当于给出了 $\zeta(w)$ 在 $w\in\mathbb{C}$ 上的定义！</p><h2 id="所有自然数的『和』"><a href="#所有自然数的『和』" class="headerlink" title="所有自然数的『和』"></a>所有自然数的『和』</h2><p>这还没完，试试在等号右边把 $w$ 换为 $1-w$，你会发现式子根本没变。这就说明：<br>$$\sqrt{\pi}^{-w}\zeta(w)\Gamma\left(\frac{w}{2}\right)=\sqrt{\pi}^{w-1}\zeta(1-w)\Gamma\left(\frac{1-w}{2}\right)$$<br>现在让 $w=-1$，就有<br>$$\sqrt{\pi}\zeta(-1)\Gamma\left(-\frac{1}{2}\right)=\sqrt{\pi}^{-2}\zeta(2)\Gamma(1)$$<br>我们知道<br>$$\zeta(2)=\sum_{n=1}^\infty\frac{1}{n^2}=\frac{\pi^2}{6}$$<br>并且，<br>\begin{eqnarray*}<br>\Gamma(1)&amp;=&amp;1\\<br>\Gamma\left(\frac{1}{2}\right)&amp;=&amp;\sqrt{\pi}\\<br>\Gamma\left(-\frac{1}{2}\right)&amp;=&amp;\frac{\Gamma\left(\frac{1}{2}\right)}{-\frac{1}{2}}=-2\sqrt{\pi}<br>\end{eqnarray*}<br>因此：<br>$$\zeta(-1)=\frac{\sqrt{\pi}^{-2}\zeta(2)\Gamma(1)}{\sqrt{\pi}\Gamma\left(-\frac{1}{2}\right)}=\frac{\frac{\pi^2}{6}}{\sqrt{\pi}^3(-2)\sqrt{\pi}}=-\frac{1}{12}$$<br>我们便得出了全体自然数的『和』为 $-\frac{1}{12}$ 这一结论。</p><h2 id="黎曼猜想与素数"><a href="#黎曼猜想与素数" class="headerlink" title="黎曼猜想与素数"></a>黎曼猜想与素数</h2><h3 id="欧拉乘积公式"><a href="#欧拉乘积公式" class="headerlink" title="欧拉乘积公式"></a>欧拉乘积公式</h3><p>从 $\zeta$ 函数的原始定义出发：<br>$$\zeta(s)=\frac{1}{1^s}+\frac{1}{2^s}+\frac{1}{3^s}+\cdots$$<br>在等式两边同时乘以第二项：<br>$$\frac{1}{2^s}\times\zeta(s)=\frac{1}{2^s}+\frac{1}{4^s}+\frac{1}{6^s}+\cdots$$<br>两式相减得：<br>$$(1-\frac{1}{2^s})\times\zeta(s)=\frac{1}{1^s}+\frac{1}{3^s}+\frac{1}{5^s}+\cdots$$<br>这时，等号右边的分母上已经没有 2 的倍数了。重复这一过程：<br>$$\frac{1}{3^s}\times(1-\frac{1}{2^s})\zeta(s)=\frac{1}{3^s}+\frac{1}{9^s}+\frac{1}{15^s}+\cdots$$<br>以上两式相减，又有：<br>$$(1-\frac{1}{3^s})(1-\frac{1}{2^s})\zeta(s)=\frac{1}{1^s}+\frac{1}{5^s}+\frac{1}{7^s}+\cdots$$<br>等号右边也没有 3 的倍数了。无限重复此过程，就有：<br>$$\cdots(1-\frac{1}{11^s})(1-\frac{1}{7^s})(1-\frac{1}{5^s})(1-\frac{1}{3^s})\zeta(s)=1$$<br>即：<br>$$\zeta(s)=\frac{1}{1-\frac{1}{2^s}}\times\frac{1}{1-\frac{1}{3^s}}\times\frac{1}{1-\frac{1}{5^s}}\times\frac{1}{1-\frac{1}{7^s}}\times\cdots$$<br>可以写成：<br>$$\zeta(s)=\sum_n\frac{1}{n^s}=\prod_p\frac{1}{1-p^{-s}}$$<br>这就是欧拉乘积公式，该表达式首先出现在 1737 年一篇题为《Variae observationes circa series infinitas》（无穷级数的各种观察）的论文中。<br>该恒等式展示了素数与 $\zeta$ 函数间的联系。</p><h3 id="莫比乌斯函数"><a href="#莫比乌斯函数" class="headerlink" title="莫比乌斯函数"></a>莫比乌斯函数</h3><p>奥古斯特 · 费迪南德 · 莫比乌斯之后重写了欧拉乘积公式，创造了一个新的求和。首先引入莫比乌斯函数：<br>$$\mu(n)=<br>\begin{cases}<br>1 &amp; n 是偶数个不同的素数相乘 \\<br>-1 &amp; n 是奇数个不同的素数相乘 \\<br>0 &amp; n 被某个素数的平方整除<br>\end{cases}<br>$$<br>和式用 $\mu(n)$ 表示如下：<br>$$\frac{1}{\zeta(s)}=\sum_{n\in\mathbb{N}}\frac{\mu(n)}{n^s}$$</p><h3 id="素数计数函数"><a href="#素数计数函数" class="headerlink" title="素数计数函数"></a>素数计数函数</h3><p>定义为<br>$$\pi(x)=\sum_{p\le x}1$$<br>表示不超过 x 的素数个数。<br>在间断点处用左右平均代替更好，重新定义：<br>$$\pi(x)=\frac{1}{2}\left(\sum_{p\le x}1+\sum_{p&lt; x}1\right)$$<br>令<br>$$\Pi(x)=\sum_n\frac{1}{n}\pi(x^{\frac{1}{n}})$$<br>有莫比乌斯反转<br>$$\pi(x)=\sum_n\frac{\mu(n)}{n}\Pi(x^{\frac{1}{n}})$$</p><h3 id="素数定理"><a href="#素数定理" class="headerlink" title="素数定理"></a>素数定理</h3><p>素数定理由高斯和勒让德独立地阐述：<br>$$\mathop{\lim}_{x\rightarrow\infty}\frac{\pi(x)}{\frac{x}{\ln(x)}}=1$$<br>目前人类证明的素数定理的误差界是<br>$$\pi(x)=Li(x)+O\left(x\exp\left({-\frac{A(\ln x)^{0.6}}{(\ln\ln x)^{0.2}}}\right)\right)$$<br>从概率的角度来说，素数定理说明若你随机选择一个自然数 $x$，那么该数字为素数的概率约为 $\frac{1}{\ln(x)}$。这意味着前 $x$ 个整数中相邻素数之间的平均间隙约为 $\ln(x)$。</p><h3 id="对数积分函数"><a href="#对数积分函数" class="headerlink" title="对数积分函数"></a>对数积分函数</h3><p>定义<br>$$Li(x)=\int_2^x\frac{1}{\ln(t)}dt$$<br>称为对数积分函数。<br>那么<br>$$\Pi(x)=Li(x)-\sum_{\rho}Li(x^{\rho})-\ln 2+\int_x^\infty\frac{dt}{t(t^2-1)\ln t}$$<br>其中求和号的 $\rho$ 取 $\zeta(s)$ 的非平凡零点，求和之后通常表现为震荡。至于剩下的常数和积分，对较大的 $x$ 可以忽略。</p><h2 id="未完待续"><a href="#未完待续" class="headerlink" title="未完待续"></a>未完待续</h2><p>敬请期待</p><p>参考文章：<br><a href="https://en.wikipedia.org/wiki/Riemann_hypothesis" target="_blank" rel="noopener">黎曼猜想</a><br><a href="https://zhuanlan.zhihu.com/p/35397224" target="_blank" rel="noopener">为什么全体自然数的和是负十二分之一？</a><br><a href="https://zhuanlan.zhihu.com/p/45240901" target="_blank" rel="noopener">黎曼猜想跟素数分布有怎样的联系</a><br><a href="https://zhuanlan.zhihu.com/p/25055731" target="_blank" rel="noopener">黎曼猜想，及其解释（上）</a><br><a href="https://zhuanlan.zhihu.com/p/25222934" target="_blank" rel="noopener">黎曼猜想，及其解释（下）</a></p><p>拓展阅读：<br><a href="https://terrytao.wordpress.com/2010/04/10/the-euler-maclaurin-formula-bernoulli-numbers-the-zeta-function-and-real-variable-analytic-continuation" target="_blank" rel="noopener">The Euler-Maclaurin formula, Bernoulli numbers, the zeta function, and real-variable analytic continuation</a></p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>月下独酌</title>
      <link href="/2018-09/%E6%9C%88%E4%B8%8B%E7%8B%AC%E9%85%8C/"/>
      <url>/2018-09/%E6%9C%88%E4%B8%8B%E7%8B%AC%E9%85%8C/</url>
      
        <content type="html"><![CDATA[<p><strong> 月下独酌 </strong></p><ul><li>李白 *<br>花间一壶酒，独酌无相亲。<br>举杯邀明月，对影成三人。<br>月既不解饮，影徒随我身。<br>暂伴月将影，行乐须及春。<br>我歌月徘徊，我舞影零乱。<br>醒时同交欢，醉后各分散。<br>永结无情游，相期邈云汉。</li></ul><p><strong> 八月十五夜月 </strong></p><ul><li>杜甫 *<br>满月飞明镜，归心折大刀。<br>转蓬行地远，攀桂仰天高。<br>水路疑霜雪，林栖见羽毛。<br>此时瞻白兔，直欲数秋毫。</li></ul><p><strong> 十五夜望月 </strong></p><ul><li>王建 *<br>中庭地白树栖鸦，冷露无声湿桂花。<br>今夜月明人尽望，不知秋思落谁家！</li></ul><p><strong> 南斋玩月 </strong></p><ul><li>王昌龄 *<br>高卧南斋时，开帷月初吐。<br>清辉澹水木，演漾在窗户。<br>荏苒几盈虚，澄澄变今古。<br>美人清江畔，是夜越吟苦。<br>千里共如何，微风吹兰杜。</li></ul><p><strong> 中秋月 </strong></p><ul><li>苏轼 *<br>暮云收尽溢清寒，银汉无声转玉盘。<br>此生此夜不长好，明月明年何处看。</li></ul><p><strong> 中秋月 </strong></p><ul><li>齐已 *<br>空碧无云露湿衣，众星光外涌清规。<br>东林莫碍渐高势，四海正看当路时。<br>还许分明吟皓魄，肯教幽暗取丹枝。<br>可怜关夜婵娟影，正对五候残酒卮。</li></ul><a id="more"></a><p><strong> 关山月 </strong></p><ul><li>李白 *<br>明月出天山，苍茫云海间。<br>长风几万里，吹度玉门关。<br>汉下白登道，胡窥青海湾。<br>由来征战地，不见有人还。<br>戍客望边色，思归多苦颜。<br>高楼当此夜，叹息未应闲。</li></ul><p><strong> 静夜思 </strong></p><ul><li>李白 *<br>床前明月光，疑是地上霜。<br>举头望明月，低头思故乡。</li></ul><p><strong> 月夜 </strong></p><ul><li>刘方平 *<br>更深月色半人家，北斗阑干南斗斜。<br>今夜偏知春气暖，虫声新透绿窗纱。</li></ul><p><strong> 嫦娥 </strong></p><ul><li>李商隐 *<br>云母屏风烛影深，长河渐落晓星沈。<br>嫦娥应悔偷灵药，碧海青天夜夜心。</li></ul><p><strong> 月夜忆舍弟 </strong></p><ul><li>杜甫 *<br>戍鼓断人行，秋边一雁声。<br>露从今夜白，月是故乡明。<br>有弟皆分散，无家问死生。<br>寄书长不达，况乃未休兵。</li></ul><p><strong> 望月怀远 </strong></p><ul><li>张九龄 *<br>海上生明月，天涯共此时。<br>情人怨遥夜，竟夕起相思！<br>灭烛怜光满，披衣觉露滋。<br>不堪盈手赠，还寝梦佳期。</li></ul><p><strong> 霜月 </strong></p><ul><li>李商隐 *<br>初闻征雁已无蝉，百尺楼高水接天。<br>青女素娥俱耐冷，月中霜里斗婵娟</li></ul><p><strong> 秋宵月下有怀 </strong></p><ul><li>孟浩然 *<br>秋空明月悬，光彩露沾湿。<br>惊鹊栖未定，飞萤卷帘入。<br>庭槐寒影疏，邻杵夜声急。<br>佳期旷何许！望望空伫立。</li></ul><p><strong> 中秋待月 </strong></p><ul><li>陆龟蒙 *<br>转缺霜输上转迟，好风偏似送佳期。<br>帘斜树隔情无限，烛暗香残坐不辞。<br>最爱笙调闻北里，渐看星潆失南箕。<br>何人为校清凉力，欲减初圆及午时。</li></ul><p><strong> 倪庄中秋 </strong></p><ul><li>元好问 *<br>强饭日逾瘦，狭衣秋已寒。<br>儿童漫相忆，行路岂知难。<br>露气入茅屋，溪声喧石滩。<br>山中夜来月，到晓不曾看。</li></ul><p><strong> 八月十五夜桃源玩月 </strong></p><ul><li>刘禹锡 *<br>尘中见月心亦闲，况是清秋仙府间。<br>凝光悠悠寒露坠，此时立在最高山。<br>碧虚无云风不起，山上长松山下水。<br>群动悠然一顾中，天高地平千万里。<br>少君引我升玉坛，礼空遥请真仙官。<br>云軿欲下星斗动，天乐一声肌骨寒。<br>金霞昕昕渐东上，轮欹影促犹频望。<br>绝景良时难再并，他年此日应惆怅。</li></ul><p><strong> 中秋月 </strong></p><ul><li>晏殊 *<br>十轮霜影转庭梧，此夕羁人独向隅。<br>未必素娥无怅恨，玉蟾清冷桂花孤。</li></ul><p><strong> 中秋月 </strong></p><ul><li>苏轼 *<br>暮云收尽溢清寒，银汉无声转玉盘。<br>此生此夜不长好，明月明年何处看。</li></ul><p><strong> 八月十五日夜湓亭望月 </strong></p><ul><li>白居易 *<br>昔年八月十五夜，曲江池畔杏园边。<br>今年八月十五夜，湓浦沙头水馆前。<br>西北望乡何处是，东南见月几回圆。<br>昨风一吹无人会，今夜清光似往年。</li></ul><p><strong> 天竺寺八月十五日夜桂子 </strong></p><ul><li>皮日休 *<br>玉颗珊珊下月轮，殿前拾得露华新。<br>至今不会天中事，应是嫦娥掷与人。</li></ul><p><strong> 中秋见月和子由 </strong></p><ul><li>苏轼 *<br>明月未出群山高，瑞光千丈生白毫。<br>一杯未尽银阙涌，乱云脱坏如崩涛。<br>谁为天公洗眸子，应费明河千斛水。<br>遂令冷看世间人，照我湛然心不起。<br>西南火星如弹丸，角尾奕奕苍龙蟠。<br>今宵注眼看不见，更许萤火争清寒。<br>何人舣舟昨古汴，千灯夜作鱼龙变。<br>曲折无心逐浪花，低昂赴节随歌板。<br>青荧灭没转山前，浪飐风回岂复坚。<br>明月易低人易散，归来呼酒更重看。<br>堂前月色愈清好，咽咽寒螀鸣露草。<br>卷帘推户寂无人，窗下咿哑唯楚老。<br>南都从事莫羞贫，对月题诗有几人。<br>明朝人事随日出，恍然一梦瑶台客。</li></ul><p><strong> 中秋登楼望月 </strong></p><ul><li>米芾 *<br>目穷淮海满如银，万道虹光育蚌珍。<br>天上若无修月户，桂枝撑损向西轮。</li></ul><p><strong> 明月何皎皎 </strong></p><ul><li>佚名 *<br>明月何皎皎，照我罗床帏。<br>夜愁不能寐，揽衣起徘徊。<br>客行虽云乐，不如早旋归。<br>出户独彷徨，愁思当告谁！<br>引领还入房，泪下沾裳衣。</li></ul><p><strong> 水调歌头 </strong></p><ul><li>苏轼 *<br>明月几时有，把酒问青天。<br>不知天上宫阙，今夕是何年。<br>我欲乘风归去，惟恐琼楼玉宇，高处不胜寒。<br>起舞弄清影，何似在人间。<br>转朱阁，低绮户，照无眠。<br>不应有恨，何事长向别时圆。<br>人有悲欢离合，月有阴晴圆缺，此事古难全。<br>但愿人长久，千里共婵娟。</li></ul><p><strong> 西江月 </strong></p><ul><li>苏轼 *<br>顷在黄州，春夜行蕲水中。过酒家饮酒，醉。乘月至一溪桥上，解鞍曲肱，醉卧少休。及觉已晓。乱山攒拥，流水铿然，疑非人世也。书此语桥柱上。<br>照野弥弥浅浪，横空隐隐层霄。障泥未解玉骢骄，我欲醉眠芳草。<br>可惜一溪风月，莫教踏碎琼瑶。解鞍欹枕绿杨桥，杜宇一声春晓。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>十个 UI 设计的基本原理</title>
      <link href="/2018-09/%E5%8D%81%E4%B8%AAUI%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/"/>
      <url>/2018-09/%E5%8D%81%E4%B8%AAUI%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>It’s no great mystery that truly great user interfaces are the ones that are engineered to stay out of the way.<br>真正优秀的用户界面都是那些设计得『不挡路』的——这并不是什么奥秘。<br>‘Staying out of the way’ means not distracting your users. Rather, good UIs let your users complete goals. The result? A reduction in training and support costs, and happier, satisfied and highly engaged users.<br>『不挡路』意味着不会分散用户的注意力。事实上，良好的用户界面可以让你的用户完成目标。结果呢？减少培训和支持的成本，以及让用户更快乐、更满意并被深深吸引。<br>Check out our other <a href="https://teamtreehouse.com/library/topic:design" target="_blank" rel="noopener">design courses</a> at Treehouse.<br>在 Treehouse 查看我们的其他<a href="https://teamtreehouse.com/library/topic:design" target="_blank" rel="noopener">设计课程</a>。<br>When getting started on a new interface, make sure to remember these fundamentals:<br>在开始设计新的用户界面时，请务必记住以下原则：</p><h2 id="Know-your-user"><a href="#Know-your-user" class="headerlink" title="Know your user"></a>Know your user</h2><p>了解你的用户</p><blockquote><p>“Obsess over customers: when given the choice between obsessing over competitors or customers, always obsess over customers. Start with customers and work backward.” – Jeff Bezos<br>『对顾客的关注：当在关注竞争对手或顾客之间做出选择时，总是应该关注顾客。从顾客开始，用逆向思维工作。』 —— Jeff Bezos</p></blockquote><p>Your user’s goals are your goals, so learn them. Restate them, repeat them. Then, learn about your user’s skills and experience, and what they need. Find out what interfaces they like and sit down and watch how they <em>use</em> them. Do not get carried away trying to keep up with the competition by mimicking trendy design styles or adding new features. By focusing on your user first, you will be able to create an interface that lets them achieve their goals.<br>你的用户的目标就是你的目标，因此请了解它们。重申它们，重复它们。然后，了解你的用户的技能和经验，以及他们需要什么。找出他们喜欢的界面，坐下来看看他们如何 <em> 使用 </em> 这些界面。不要试图通过模仿时尚的设计风格或添加新功能来跟上竞争对手，而忘乎所以。通过首先关注你的用户，你将能够创建一个让他们完成目标的界面。</p><h2 id="Pay-attention-to-patterns"><a href="#Pay-attention-to-patterns" class="headerlink" title="Pay attention to patterns"></a>Pay attention to patterns</h2><p>注意 UI 样式</p><p>Users spend the majority of their time on interfaces other than your own (Facebook, MySpace, Blogger, Bank of America, school/university, news websites, etc). There is no need to reinvent the wheel. Those interfaces may solve some of the same problems that users perceive within the one you are creating. By using familiar UI patterns, you will help your users feel at home.<br>用户会将大部分时间花在除你以外的其他界面上（Facebook，MySpace，Blogger，美国银行，学校 / 大学，新闻网站等等）。没有必要重新发明轮子。这些接口可以解决用户在你正在创建的问题中感知的一些相同问题。通过使用熟悉的 UI 模式，你将让你的用户有宾至如归的感觉。</p><h2 id="Stay-consistent"><a href="#Stay-consistent" class="headerlink" title="Stay consistent"></a>Stay consistent</h2><p>保持一致性</p><blockquote><p>“The more users’ expectations prove right, the more they will feel in control of the system and the more they will like it.” – Jakob Nielson<br>『越多用户的期望被证明是正确的，他们对系统的控制感越强，他们就会越喜欢它。』 —— Jakob Nielson</p></blockquote><p>Your users <em>need</em> consistency. They need to know that once they learn to do something, they will be able to do it again. Language, layout, and design are just a few interface elements that need consistency. A consistent interface enables your users to have a better understanding of how things will work, increasing their efficiency.<br>你的用户 <em> 需要 </em> 一致性。他们需要知道，一旦他们学会做某事，他们就能再次做到。语言、布局和设计只是需要一致性的一些界面元素。一致的界面使你的用户能够更好地了解事物的运作方式，从而提高效率。</p><a id="more"></a><h2 id="Use-visual-hierarchy"><a href="#Use-visual-hierarchy" class="headerlink" title="Use visual hierarchy"></a>Use visual hierarchy</h2><p>使用视觉层次结构</p><blockquote><p>“Designers can create normalcy out of chaos; they can clearly communicate ideas through the organizing and manipulating of words and pictures.” – Jeffery Veen, <a href="http://veen.com/artsci" target="_blank" rel="noopener">The Art and Science of Web Design</a><br>『设计师可以摆脱混乱的局面；他们可以通过组织和操纵文字和图片清晰地传达思想。』 —— Jeffery Veen，<a href="http://veen.com/artsci" target="_blank" rel="noopener">网页设计的艺术与科学</a></p></blockquote><p>Design your interface in a way that allows the user to focus on what is most important. The size, color, and placement of each element work together, creating a clear path to understanding your interface. A clear hierarchy will go great lengths in reducing the appearance of complexity (even when the actions themselves are complex).<br>以允许用户专注于最重要的方式设计界面。每个元素的大小、颜色和位置协同工作，为理解界面创建了清晰的途径。明确的层次结构将大大减少复杂性的出现（即使行动本身很复杂）。</p><h2 id="Provide-feedback"><a href="#Provide-feedback" class="headerlink" title="Provide feedback"></a>Provide feedback</h2><p>提供反馈信息</p><p>Your interface should at all times speak to your user, when his/her actions are both right and wrong or misunderstood. Always inform your users of actions, changes in state and errors, or exceptions that occur. Visual cues or simple messaging can show the user whether his or her actions have led to the expected result.<br>无论用户的行为正确、错误还是被误解时，你的界面应始终向你的用户提供反馈。始终通知用户操作、状态和错误的改变或发生的异常。视觉提示或简单消息可以向用户显示他或她的行为是否已导致预期结果。</p><h2 id="Be-forgiving"><a href="#Be-forgiving" class="headerlink" title="Be forgiving"></a>Be forgiving</h2><p>对用户宽容</p><p>No matter how clear your design is, people will make mistakes. Your UI should allow for and tolerate user error. Design ways for users to undo actions, and be forgiving with varied inputs (no one likes to start over because he/she put in the wrong birth date format). Also, if the user does cause an error, use your messaging as a teachable situation by showing what action was wrong, and ensure that she/he knows how to prevent the error from occurring again.<br>无论你的设计多么清晰，人们都会犯错误。你的 UI 应该允许并容忍用户错误。设计用户撤销操作的方式，并对不同的输入进行宽容（没有人希望因为他 / 她输错了出生日期的格式，就得全部重新输入）。此外，如果用户确实导致错误，请通过显示哪些操作出错来将你的消息传递作为可接受的情况，并确保他 / 她知道如何防止错误再次发生。<br>A great example can be seen in <a href="http://carsonified.com/blog/design/how-to-increase-sign-ups-with-easier-captchas" target="_blank" rel="noopener">How to increase signups with easier captchas</a>.<br>在 <a href="http://carsonified.com/blog/design/how-to-increase-sign-ups-with-easier-captchas" target="_blank" rel="noopener">如何使用更简单的验证码增加注册</a> 中可以看到一个很好的例子。</p><h2 id="Empower-your-user"><a href="#Empower-your-user" class="headerlink" title="Empower your user"></a>Empower your user</h2><p>为你的用户提供支持</p><p>Once a user has become experienced with your interface, reward him/her and take off the training wheels. The breakdown of complex tasks into simple steps will become cumbersome and distracting. Providing more abstract ways, like keyboard shortcuts, to accomplish tasks will allow your design to get out of the way.<br>一旦用户熟悉你的界面，奖励他 / 她并把『辅助轮』取下来（注：就像在学习骑自行车时那样）。将复杂任务分解为简单的步骤将变得麻烦和分散注意力。提供更抽象的方法，如键盘快捷键，来完成任务——这将使你的设计摆脱困境。</p><h2 id="Speak-their-language"><a href="#Speak-their-language" class="headerlink" title="Speak their language"></a>Speak their language</h2><p>说出他们的语言</p><blockquote><p>“If you think every pixel, every icon, every typeface matters, then you also need to believe every letter matters.” – <a href="https://basecamp.com/books/getting-real" target="_blank" rel="noopener">Getting Real</a><br>『如果你认为每个像素，每个图标，每个字体都很重要，那么你还需要相信每个字母都很重要。』 —— <a href="https://basecamp.com/books/getting-real" target="_blank" rel="noopener">Getting Real</a></p></blockquote><p>All interfaces require some level of copywriting. Keep things conversational, not sensational. Provide clear and concise labels for actions and keep your messaging simple. Your users will appreciate it, because they won’t hear you – they will hear themselves and/or their peers.<br>所有接口都需要一定程度的文案。让它们亲切随和，而不是耸人听闻。为操作提供清晰简洁的标签，并使你的消息保持简单。你的用户会很感激，因为他们不会听到你的声音——他们会听到自己和 / 或他们的同伴的声音。</p><h2 id="Keep-it-simple"><a href="#Keep-it-simple" class="headerlink" title="Keep it simple"></a>Keep it simple</h2><p>把事情简单化</p><blockquote><p>“A modern paradox is that it’s simpler to create complex interfaces because it’s so complex to simplify them.” – Pär Almqvist<br>『一个现代悖论是，创建复杂的界面更简单，因为简化这些界面非常复杂。』 —— Pär Almqvist</p></blockquote><p>The best interface designs are <a href="http://www.uie.com/articles/experiencedesign" target="_blank" rel="noopener">invisible</a>. They do not contain UI-bling or unnecessary elements. Instead, the necessary elements are succinct and make sense. Whenever you are thinking about adding a new feature or element to your interface, ask the question, “Does the user really need this?” or “Why does the user want this very clever animated gif?” Are you adding things because you like or want them? Never let your UI ego steal the show.<br>最好的界面设计是 <a href="http://www.uie.com/articles/experiencedesign" target="_blank" rel="noopener">无形</a> 的。它们不包含 UI-bling 或不必要的元素。相反，必要的元素是简洁而有意义的。无论何时考虑在界面中添加新功能或元素，都要问『用户真的需要这个吗？』或『为什么用户想要这个巧妙的 gif 动图？』。你是否只是因为喜欢或想要而添加新东西？永远不要让你的 UI 自身抢了风头。</p><h2 id="Keep-moving-forward"><a href="#Keep-moving-forward" class="headerlink" title="Keep moving forward"></a>Keep moving forward</h2><p>不忘初心，继续前进</p><p><strong>Grandpa Bud</strong>: If I gave up every time I failed, I would never have invented my fireproof pants!<br>[Pants burn up, revealing his underwear]<br><strong>Grandpa Bud</strong>: Still working the kinks out a bit.<br>from <a href="https://www.imdb.com/title/tt0396555" target="_blank" rel="noopener">Meet the Robinsons</a></p><blockquote><p><strong> 巴德爷爷 </strong>：如果我每次失败就放弃了，我永远都不会发明我的防火裤！<br>[裤子烧了，露出他的内衣 ]<br><strong> 巴德爷爷 </strong>：仍然在努力解决问题。<br>来自<a href="https://www.imdb.com/title/tt0396555" target="_blank" rel="noopener">拜见罗宾逊一家</a></p></blockquote><p><em>Meet the Robinsons</em> is one of my all time favorite movies. Throughout the movie Lewis, the protagonist, is challenged to “keep moving forward.” This is a key principle in UI design.</p><ul><li><p>拜见罗宾逊一家 <em> 是我最喜欢的电影之一。在整个电影中，主角刘易斯面临着『继续前进』的挑战。这是 UI 设计的关键原则。<br>It is often said when developing interfaces that you need to fail fast, and iterate often. When creating a UI, you </em>will<em> make mistakes. Just keep moving forward, and remember to keep your UI out of the way.<br>在开发接口时经常会说你需要快速失败，并经常迭代。在创建 UI 时，你 </em> 会 * 犯错误。继续前进，并记住保持你的 UI 不受影响。</p></li><li><p>本文由 <a href="https://twitter.com/kyle" target="_blank" rel="noopener">Kyle Sollenberger</a> 撰写。<em></em>This article was written by <a href="https://twitter.com/kyle" target="_blank" rel="noopener">Kyle Sollenberger</a>.*</p></li></ul><p>本文翻译自：<a href="https://blog.teamtreehouse.com/10-user-interface-design-fundamentals" target="_blank" rel="noopener">10 User Interface Design Fundamentals</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>手机淘宝的 flexible 方案</title>
      <link href="/2018-09/%E6%89%8B%E6%9C%BA%E6%B7%98%E5%AE%9D%E7%9A%84flexible%E6%96%B9%E6%A1%88/"/>
      <url>/2018-09/%E6%89%8B%E6%9C%BA%E6%B7%98%E5%AE%9D%E7%9A%84flexible%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>手机淘宝从 2014 年中开始，全面推行 flexible 设计。什么叫 flexible 呢？其实 flexible 就是 responsive 的低端形态和基础。对我们来说，最直观的感受就是，在超宽屏幕上，网页显示不会两边留白。以前 pc 时代大家经常讲的流体布局，其实就是一种 flexible design。只不过，流体的表述角度是实现，flexible 的表述角度是结果，为了跟高大上的 responsive 保持一致，我们这里使用了 flexible 这个说法。<br>讨论方案之前，需要先了解三个关键概念：</p><ul><li>单位英寸像素数（Pixel Per Inch，PPI）：现实世界的一英寸内像素数，决定了屏幕的显示质量</li><li>设备像素比率（Device Pixel Ratio，DPR）：物理像素与逻辑像素（px）的对应关系</li><li>分辨率（Resolution）：屏幕区域的宽高所占像素数</li></ul><p>当我们决定不同屏幕的字体和尺寸的单位时，屏幕的这几个参数非常重要。</p><h2 id="Resolution-适配"><a href="#Resolution-适配" class="headerlink" title="Resolution 适配"></a>Resolution 适配</h2><p>一张 banner 图片，当你面对不同的屏幕时你希望它的行为是怎样的？<br>在这个场景中，我们主要需要面对的是分辨率适配问题，考虑到多数网页都是纵向滚动的，在不同的屏幕尺寸下，banner 的行为应该是总是铺满屏幕宽度以及总是保持宽高比。<br>最自然的思路是使用百分比宽度，但是假如使用百分比宽度，即 width:100%，我们又有两种思路来实现固定宽高比：一是利用 img 标签的特性，只设宽度等图片加载完，这种方法会导致大量的重排，并且非固定高度会导致懒加载等功能难以实现，所以果断放弃；二是使用 before 伪元素的 margin 撑开高度，这种方法是比较干净的纯 css 实现，但是不具备任何复用性而且要求特定 html 结构，所以也只好放弃了。<br>于是，剩下最合适的办法是使用其它相对单位，本来最合适的单位是 vw，它的含义是视口宽度，但是这个单位存在严重的兼容问题，所以也只好放弃。<br>最后我们只好配合 js 来做，硬算也是一条路，但是同样不具备任何可复用性，最终我们选择了 rem，我们用 js 给 html 设置一个跟屏幕宽度成正比的 font-size，然后把元素宽高都用 rem 作为单位。<br>这是我们目前的线上方案了，它是一个近乎 Hack 的用法，已知的问题包括：</p><ul><li>某些 Android 机型会丢掉 rem 小数部分</li><li>占用了 rem 单位</li><li>不是纯 css 方案</li></ul><h2 id="PPI-适配"><a href="#PPI-适配" class="headerlink" title="PPI 适配"></a>PPI 适配</h2><p>一段文字，当你面对不同的屏幕时你希望它的行为是怎样的？<br>显然，我们在 iPhone3G 和 iPhone4 的 Retina 屏下面，希望看到的文字尺寸是相同的，也就是说，我们不希望文字在 Retina 屏尺寸变小，此外，我们在大屏手机上，希望看到更多文字，以及，现在绝大多数的字体文件，是自带一些点阵尺寸的，通常是 16px 和 24px，所以我们不希望出现 13px、15px 这样的奇葩尺寸。<br>这样的特征决定了，场景 1 中的 rem 方案，不适合用到段落文字上。所以段落文字应该使用 px 作为单位，考虑到 Retina，我们利用 media query 来指定不同的字体，考虑到 dpr 判定的兼容性，我们用宽度替换来代替：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.a</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">media</span> (min-width: <span class="number">401px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.a</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">24px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>另一种场景，一些标题性文字，希望随着屏幕宽而增大的，我们可以仍然使用 rem 作为单位。超过 35px（个人直观感受）的文字，已经不用太考虑点阵信息了，靠字体的矢量信息也能渲染的很好。</p><h2 id="DPR-匹配"><a href="#DPR-匹配" class="headerlink" title="DPR 匹配"></a>DPR 匹配</h2><p>一个区块，设计稿上有 1 像素边框，当你面对不同的屏幕时你希望它的行为是怎样的？<br>这个场景，需求很简单，设计师希望在任何屏幕上这条线都是 1 物理像素。<br>好吧，当然这个问题的答案不是写 1px 那么简单。在 retina 屏下面，如果你写了这样的 meta：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>你将永远无法写出 1px 宽度的东西，除此之外，inline 的 SVG 等元素，也会按照逻辑像素来渲染，整个页面的清晰度会打折。<br>所以，手机淘宝用 JS 来动态写 meta 标签，代码类似这样：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> metaEl = <span class="built_in">document</span>.createElement(<span class="string">'meta'</span>);</span><br><span class="line"><span class="keyword">var</span> scale = isRetina ? <span class="number">0.5</span> : <span class="number">1</span>;</span><br><span class="line">metaEl.setAttribute(<span class="string">'name'</span>, <span class="string">'viewport'</span>);</span><br><span class="line">metaEl.setAttribute(<span class="string">'content'</span>, <span class="string">'initial-scale='</span> + scale + <span class="string">', maximum-scale='</span> + scale + <span class="string">', minimum-scale='</span> + scale + <span class="string">', user-scalable=no'</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">document</span>.documentElement.firstElementChild) &#123;</span><br><span class="line">    <span class="built_in">document</span>.documentElement.firstElementChild.appendChild(metaEl);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> wrap = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">    wrap.appendChild(metaEl);</span><br><span class="line">    <span class="built_in">document</span>.write(wrap.innerHTML);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>总的来说，手机淘宝的 flexible 方案是综合运用 rem 和 px 两种单位 + js 设置 scale 和 html 字体。<br>这些 JS 的内容，可以在我们开源的库 <a href="https://github.com/amfe/ml" target="_blank" rel="noopener">ml</a> 中找到，也可以参考<a href="https://github.com/amfe/lib-flexible" target="_blank" rel="noopener">lib-flexible</a>。</p><p>参考文章：<br><a href="http://www.html-js.com/article/2402" target="_blank" rel="noopener">手机淘宝的 flexible 设计与实现</a><br><a href="http://www.html-js.com/article/2400" target="_blank" rel="noopener">关于 webapp 中的文字单位的一些捣腾</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript 的函数调用与 this</title>
      <link href="/2018-08/JavaScript%E7%9A%84%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E4%B8%8Ethis/"/>
      <url>/2018-08/JavaScript%E7%9A%84%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E4%B8%8Ethis/</url>
      
        <content type="html"><![CDATA[<p>JavaScript 函数有 4 种调用方式。每种方式的不同方式在于 this 的初始化。对 this 关键字有解释：<em> 一般而言，在 JavaScript 中，this 指向函数执行时的当前对象。</em> 注意 this 是保留关键字，你不能修改 this 的值。</p><h2 id="作为一个函数调用"><a href="#作为一个函数调用" class="headerlink" title="作为一个函数调用"></a>作为一个函数调用</h2><p>先看一个最简单的实例，在浏览器中：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line">alert(myFunction()); <span class="comment">// [object Window]</span></span><br></pre></td></tr></table></figure></p><p>而当函数没有被自身的对象调用时，this 的值就会变成全局对象。在 Web 浏览器中全局对象是浏览器窗口（window 对象）。该实例返回 this 的值是 window 对象。也就是此函数即为 window 对象的函数，<code>myFunction()</code> 等同于 <code>window.myFunction()</code>。但是此处在使用内部函数时存在一个 this 指向的问题，看下面的例子：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注意此处在 node 环境和浏览器环境下值不同,</span></span><br><span class="line"><span class="comment">// node 环境下必须去掉 var 使 value 成为全局变量。</span></span><br><span class="line">value = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myObject = &#123;</span><br><span class="line">    value: <span class="number">1</span>,</span><br><span class="line">    double: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//var that = this;</span></span><br><span class="line">        <span class="keyword">var</span> helper = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.value = add(<span class="keyword">this</span>.value, <span class="keyword">this</span>.value);</span><br><span class="line">        &#125;;</span><br><span class="line">        helper();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">myObject.double();</span><br><span class="line">alert(value); <span class="comment">// 8</span></span><br><span class="line">alert(myObject.value); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure></p><p>在这里的 myObject 对象中，我们在 double 这个函数中使用了内部函数并赋值给 helper，<strong> 但是此处的 this.value 的 this 指向了全局对象 </strong>，所以在执行这个函数后全局变量 value 的值变了但 Object 中的 value 属性值仍然是 1，这不是我们想要的结果。《js 语言精粹》中指出这里是语言设计上的一个错误，this 应该仍然绑定到外部函数的 this 变量中。这个设计错误的后果就是方法不能利用内部函数来帮助它工作，因为内部函数的 this 被绑定了错误的值，所以不能共享该方法对对象的访问权。但是我们可以有一个很容易的解决方案去解决这个问题，对 myObject 进行修改：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myObject = &#123;</span><br><span class="line">    value: <span class="number">1</span>,</span><br><span class="line">    double: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">var</span> helper = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            that.value = add(that.value, that.value);</span><br><span class="line">        &#125;;</span><br><span class="line">        helper();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">myObject.double();</span><br><span class="line">alert(value); <span class="comment">// 4</span></span><br><span class="line">alert(myObject.value); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure></p><p>这里使用了一个 that 变量来指向 double 方法中 this 的值即 myObject 本身，这样就可以对 myObject 对象的属性 value 进行修改。</p><h2 id="函数作为方法调用"><a href="#函数作为方法调用" class="headerlink" title="函数作为方法调用"></a>函数作为方法调用</h2><p>这种方式即为，一个函数被保存为一个对象的属性，在此时此函数被成为一个方法。调用时 this 关键字被绑定到该对象，即：<strong> 函数作为对象方法调用，会使得 this 的值成为对象本身。</strong> 实例如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myObject = &#123;</span><br><span class="line">    firstName: <span class="string">"John"</span>,</span><br><span class="line">    lastName: <span class="string">"Doe"</span>,</span><br><span class="line">    fullName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.firstName + <span class="string">""</span> + <span class="keyword">this</span>.lastName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">myObject.fullName(); <span class="comment">// 返回"John Doe"</span></span><br></pre></td></tr></table></figure></p><p>另一个例子：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myObject = &#123;</span><br><span class="line">    value: <span class="number">0</span>,</span><br><span class="line">    increment: <span class="function"><span class="keyword">function</span> (<span class="params">inc</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value += <span class="keyword">typeof</span> inc === <span class="string">'number'</span> ? inc : <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">myObject.increment();</span><br><span class="line"><span class="built_in">console</span>.log(myObject.value); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">myObject.increment(<span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(myObject.value); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></p><p>在此例中，increment 方法对 myObject 对象中的 value 属性进行增加操作，increment 函数中的 this 即指向 myObject 对象本身。</p><a id="more"></a><h2 id="构造器调用模式"><a href="#构造器调用模式" class="headerlink" title="构造器调用模式"></a>构造器调用模式</h2><p>如果函数调用前使用了 new 关键字，则是调用了构造函数。这看起来就像创建了新的函数，但实际上 JavaScript 函数是重新创建的对象：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params">arg1, arg2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.firstName = arg1;</span><br><span class="line">    <span class="keyword">this</span>.lastName = arg2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// This creates a new object</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="keyword">new</span> myFunction(<span class="string">"John"</span>, <span class="string">"Doe"</span>);</span><br><span class="line">x.firstName; <span class="comment">// 返回 "John"</span></span><br></pre></td></tr></table></figure></p><p>构造函数的调用会创建一个新的对象。新对象会继承构造函数的属性和方法。<br>构造函数中 this 关键字没有任何的值。this 的值在函数调用时实例化对象 (new object) 时创建。</p><p>看另一个例子：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Quo = <span class="function"><span class="keyword">function</span> (<span class="params">string</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.status = string;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Quo.prototype.get_status = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.status;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myQuo = <span class="keyword">new</span> Quo(<span class="string">"confused"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(myQuo.get_status()); <span class="comment">// confused</span></span><br></pre></td></tr></table></figure></p><p>输出结果为 confused。在这里使用 new 来调用时，会创建一个连接到该函数的 prototype 成员的新对象，同时 this 会被绑定到这个新对象上。即此时我们创建了 myQuo 对象，其连接到了 Quo 的 prototype，且创建时的 <code>this.status = string;</code> 中的 this 指向这个创建的新对象，status 为新对象 myQuo 的属性，而不是 Quo 函数 prototype 的属性，可以做如下验证：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(myQuo.hasOwnProperty(<span class="string">"status"</span>)); <span class="comment">//true</span></span><br></pre></td></tr></table></figure></p><p>作为对比，我们对 Quo 函数增加一个属性 id：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Quo = <span class="function"><span class="keyword">function</span> (<span class="params">string</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.status = string;</span><br><span class="line">&#125;;</span><br><span class="line">Quo.prototype.id = <span class="number">1</span>;</span><br></pre></td></tr></table></figure></p><p>id 为 Quo 构造器函数 prototype 对象的一个属性，然后再次进行测试：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myQuo = <span class="keyword">new</span> Quo(<span class="string">"confused"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(myQuo.id); <span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(myQuo.hasOwnProperty(<span class="string">"get_status"</span>)); <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(myQuo.hasOwnProperty(<span class="string">"id"</span>)); <span class="comment">//false</span></span><br></pre></td></tr></table></figure></p><p>这里可以看到在创建新对象 myQuo 时没有 id 属性和 get_status 函数，而这里 myQuo 继承了 Quo 的 id 属性，就通过原型链找到了 Quo.prototype.id 的值。</p><h2 id="Apply-调用模式"><a href="#Apply-调用模式" class="headerlink" title="Apply 调用模式"></a>Apply 调用模式</h2><p>在 JavaScript 中，函数是对象。JavaScript 函数有它的属性和方法，<code>call()</code> 和 <code>apply()</code> 就是预定义的函数方法。这两个方法可用于调用函数。<br>对于 <code>apply</code>：</p><ul><li>在 JavaScript 严格模式 (strict mode) 下，在调用函数时第一个参数会成为 this 的值，即使该参数不是一个对象。</li><li>在 JavaScript 非严格模式 (non-strict mode) 下，如果第一个参数的值是 null 或 undefined，它将使用全局对象替代。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a * b;</span><br><span class="line">&#125;</span><br><span class="line">myFunction.call(myFunction, <span class="number">10</span>, <span class="number">2</span>); <span class="comment">// 返回 20</span></span><br><span class="line"></span><br><span class="line">myArray = [<span class="number">10</span>,<span class="number">3</span>];</span><br><span class="line">myFunction.apply(<span class="literal">null</span>, myArray); <span class="comment">// 返回 30</span></span><br></pre></td></tr></table></figure><p>可见两者的区别在于第二个参数：apply 传入的是一个参数数组，也就是将多个参数组合成为一个数组传入，而 call 则作为 call 的参数传入（从第二个参数开始）。<br>另外一个结合前面定义的 Quo 构造器调用模式使用的例子：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> statusObject = &#123;</span><br><span class="line">    status: <span class="string">'A-OK'</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> status = Quo.prototype.get_status.apply(statusObject);</span><br><span class="line"><span class="built_in">console</span>.log(status); <span class="comment">// A-OK</span></span><br></pre></td></tr></table></figure></p><p>在这里即使用了 apply 并将 statusObject 作为 get_status 的 this，结果即为 A-OK。</p><p>以上即为四种函数的调用方法。</p><p>参考文章：<br><a href="https://juejin.im/post/5a17c21bf265da43346f997e" target="_blank" rel="noopener">Javascript 的函数调用与 this</a><br><a href="https://www.runoob.com/js/js-function-invocation.html" target="_blank" rel="noopener">JavaScript 函数调用</a></p><p>拓展阅读：<br>闭包深入：<a href="https://www.cnblogs.com/onepixel/p/5062456.html" target="_blank" rel="noopener">让你分分钟理解 JavaScript 闭包</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>入手信达小黑天文望远镜</title>
      <link href="/2018-08/%E5%85%A5%E6%89%8B%E4%BF%A1%E8%BE%BE%E5%B0%8F%E9%BB%91%E5%A4%A9%E6%96%87%E6%9C%9B%E8%BF%9C%E9%95%9C/"/>
      <url>/2018-08/%E5%85%A5%E6%89%8B%E4%BF%A1%E8%BE%BE%E5%B0%8F%E9%BB%91%E5%A4%A9%E6%96%87%E6%9C%9B%E8%BF%9C%E9%95%9C/</url>
      
        <content type="html"><![CDATA[<p>2018 年的暑期，诸多天文奇观轮番上演：火星冲日、日偏食、英仙座流星雨，这对天文爱好者来说是绝佳的观测机会。在好基友的怂恿下，博主也正式踏入了天文摄影的巨坑。<br>博主在小学时曾拥有一台 700/60 入门级伽利略式天文望远镜，但是其使用的经纬仪是纯手动的，调节精度较差；且望远镜本身存在明显的色差，成像效果不佳。为了满足行星摄影的要求，需要入手一台更为可靠的天文望远镜。目前市面上常见的天文望远镜，一般由三部分组成：三脚架（底座），赤道仪（经纬仪），以及望远镜镜筒。镜筒主体根据成像原理划分，有牛顿反射式、马克苏托夫 - 卡塞格林式和复消色差（APO）式等等。基于其他成像原理的望远镜也能在市面上买到，不过从销量和评价上来看，前文提到的这三种望远镜占主流。在查阅了大量资料，并参考了天文相关贴吧、论坛后，博主决定入手信达小黑天文望远镜。这是一款入门级牛顿反射式望远镜，其焦距 750mm，口径 150mm，等效光圈较大，适合摄影；赤道仪采用 EQ3D，搭配双轴电跟，在通过北极星校准极轴后，即可进行长时间曝光。<br>这是望远镜组装完成的状态：</p><p><img src="/images/2018-08/IMG_0272.jpg" alt=""></p><p>安装 EF 卡口转接环，就可以连接单反相机了：</p><p><img src="/images/2018-08/IMG_0199.jpg" alt=""></p><p>8 月 11 日拍摄的日偏食：</p><p><img src="/images/2018-08/IMG_5639.jpg" alt=""></p><p>由于望远镜自带的巴罗镜只适用于目镜，为了增加拍照的放大率，博主还购买了一个 EF 卡口的增倍镜。这是使用增倍镜后拍摄的月球：</p><p><img src="/images/2018-08/IMG_5767.jpg" alt=""></p><p>由于视宁度不佳（以及可能的对焦问题），虽然也成功拍摄了土星，但是土星环的辨识度较差：</p><p><img src="/images/2018-08/IMG_5758.jpg" alt=""></p><p>仙后座（以及划过天空的飞机航行灯）：</p><p><img src="/images/2018-08/IMG_5680.jpg" alt=""></p><p>本文更新于 2018 年 9 月 28 日：<br>与学校的青年天文爱好者协会部分（矿里有家的）前辈交流后，发现 EQ3D 赤道仪和双轴电跟仍有许多不足，可能并不是天文摄影的入门首选。如果有足够多的预算，可以购买 NEQ6 搭配 GOTO，该赤道仪的稳定性与鲁棒性都更胜一筹（当然价格也略高）。</p>]]></content>
      
      
      <categories>
          
          <category> 物理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 摄影 </tag>
            
            <tag> 天文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>膜法大赛预赛</title>
      <link href="/2018-08/%E8%86%9C%E6%B3%95%E5%A4%A7%E8%B5%9B%E9%A2%84%E8%B5%9B/"/>
      <url>/2018-08/%E8%86%9C%E6%B3%95%E5%A4%A7%E8%B5%9B%E9%A2%84%E8%B5%9B/</url>
      
        <content type="html"><![CDATA[<p><a href="/files / 膜法大赛预赛. pdf"></a></p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>自己打造一台恩尼格玛密码机</title>
      <link href="/2018-08/%E8%87%AA%E5%B7%B1%E6%89%93%E9%80%A0%E4%B8%80%E5%8F%B0%E6%81%A9%E5%B0%BC%E6%A0%BC%E7%8E%9B%E5%AF%86%E7%A0%81%E6%9C%BA/"/>
      <url>/2018-08/%E8%87%AA%E5%B7%B1%E6%89%93%E9%80%A0%E4%B8%80%E5%8F%B0%E6%81%A9%E5%B0%BC%E6%A0%BC%E7%8E%9B%E5%AF%86%E7%A0%81%E6%9C%BA/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/2018-08/F5YSP9KHMF6R1PD.LARGE.jpg" alt=""></p><p>在对称加密学当中，恩尼格玛机绝对是承前启后的存在。它将密码学研究从以前的语言文字学中心完全转移到了数学身上。在这里牵涉的密码并不是我们平时邮箱、银行帐号那种狭义概念，那种顶多叫做口令。这里说的密码就是通过某种映射方式，把一篇文章变得面目全非，以达到保密效果；只有特定的转换规律才能将其解密。这篇文章适于电脑控、军事控、历史控、数学控阅读，请做好烧脑准备。</p><p>EDIT: This Instructable has won Second prize in the 2013 Radio Shack Microcontroller Contest. Thank You to all who voted!<br>按：这个作品是 2013 年无线电单片机竞赛的亚军。感谢所有支持这个作品的你们！<br>EDIT2: An Open Enigma with fake Standup Nixie Tubes like the ones pictured in this Instructable will soon be available as a Special Kickstarter edition.</p><p>This is our very first Instructable and this step by step guide will show you how to build a fully functional electronic replica of the world famous German Enigma machine. This Arduino based Open Source project is able to encrypt &amp; decrypt any Enigma M4 encoded message.<br>这是我们的初号机。以下教程将手把手教你如何完美复刻史上著名的德国恩尼格玛密码机。这个基于 Arduino 的开源程序能够加解密任何 Enigma 机 M4 型（海军型）的信息。<br>This first ever fully functional Open Source Enigma “exact” Replica was inspired by the Kid’s Game to Arduino Enigma Machine by sketchsk3tch.<br>这个第一台全功能开源完美 Enigma 机复制品是根据 sketchsk3tch 写的《Kid’s Game to Arduino Enigma Machine（从儿童玩具到 Arduino 恩尼格玛机）》所作。<br>Using Multiplexing for the LEDs, this circuit with 115 light emitting diodes uses only 38 pins and the 36 push buttons use only 4 pins total thanks to properly placed resistors (and the P-Channel MOSFETs) in the keyboard loop. These 4 16-Segment displays &amp; an LED for each keyboard button would add up quickly the total number of pins required and even the Arduino Mega would have ran out of pins without the 2 methods mentioned above….<br>采用多路复用 LED 电路，仅用 38 个针脚的 115 个发光二极管和 4 个针脚的 36 个按键所连接的整个电路，全靠在键盘回路里准确放置的电阻以及 P 沟道场效应晶体管得以实现。要不然，4 个 16 段显示器，以及每个按键上的 LED 将大幅增加所需针脚总量——即使用了 Arduino Mega 板，但如果没用上述两个方法，电路也不能如此简洁。<br>In response to the overwhelming demand, we designed the PCB and made it available through <a href="http://www.stgeotronics.com" target="_blank" rel="noopener">www.stgeotronics.com</a>. Skip to Step 10 &amp; beyond for more info. We also offer it as a complete electronics kit &amp; an assembled &amp; tested complete product.<br>面对电路的超额需求，我们在 <a href="http://www.stgeotronics.com" target="_blank" rel="noopener">http://www.stgeotronics.com</a> 设计了专用的 PCB 板。直接跳到第 10 步和以后的步骤可以找到更多信息。同时，我们也发布了测试过的完整电子组装套装。</p><h2 id="Step-1-Proof-of-Concept-on-Breadboard"><a href="#Step-1-Proof-of-Concept-on-Breadboard" class="headerlink" title="Step 1: Proof of Concept on Breadboard"></a>Step 1: Proof of Concept on Breadboard</h2><p>第一步：面包板上的论证</p><p><img src="/images/2018-08/F3ULXLHHMEXSREA.LARGE.jpg" alt=""><br><img src="/images/2018-08/FQHGSW5HMF6R1XF.LARGE.jpg" alt=""></p><p>Before going all out on the development of this electronic Enigma replica, we wanted to make sure we could properly drive the 16 Segment LEDs. If we can do that, than we will be able to do everything as the rest is only Math…<br>在开始制作电子 Enigma 机之前，我们先要确保能驱动 16 段 LED 显示。如果成功，我们就能做接下来的所有步骤——除了数学上的问题，一切都是浮云。</p><a id="more"></a><h2 id="Step-2-Gather-the-Raw-Materials…"><a href="#Step-2-Gather-the-Raw-Materials…" class="headerlink" title="Step 2: Gather the Raw Materials…"></a>Step 2: Gather the Raw Materials…</h2><p>第二步：万事具备</p><p><img src="/images/2018-08/FCU4XAXHMEXSQH3.LARGE.jpg" alt=""></p><p>You will need:</p><ul><li>1 Arduino Mega</li><li>26 Alpha Buttons</li><li>26 1/4” Jacks Mono</li><li>10 1/4” Plugs Mono</li><li>36 Pushbuttons</li><li>1 On/Off/On Switch</li><li>4 16Segment Orange</li><li>4 Injection molded 2-Liter Soda Bottle preform (test tubes)</li><li>1 Case Plywood</li><li>1 Hinge &amp; Hooks</li><li>1 Half-Mortise Lock</li><li>1 Perfboard</li><li>38 Resistors 470 Ohms</li><li>40 Resistors 1K Ohms</li><li>7 IRF9Z24N P-Channel MOSFET</li><li>1 Piece of Metal &amp; Spray paint</li></ul><p>你所需要的是：</p><ul><li>1 个 Arduino Mega 2560 板</li><li>26 个字母按键</li><li>26 个 1/4 英寸单通道母接口</li><li>10 个 1/4 英寸单通道公接口</li><li>36 个机械按钮</li><li>1 个单刀三掷开关</li><li>4 个 16 段橙色 LED 显示</li><li>4 个注塑 2 升汽水瓶罩子</li><li>1 个胶合板盒子</li><li>一个铰链</li><li>一个半榫接锁</li><li>一个接线盘</li><li>38 个 470 欧电阻</li><li>40 个 1 千欧电阻</li><li>7 个 IRF9Z24N P 沟道场效应晶体管</li><li>1 块金属片以及喷漆。</li></ul><p>Optional:</p><ul><li>Battery Case</li><li>Rechargeable Batteries</li><li>Battery Charger/Connectors</li></ul><p>可选项：</p><ul><li>电池盒</li><li>充电电池</li><li>充电器 / 充电接头</li></ul><p>If we were to do it again, we wouldn’t use 1/4” Jacks &amp; Plugs as these are pretty big and tend to overwhelm the whole Enigma. Banana plugs &amp; jacks are smaller &amp; closer to the original connectors used by the real German Enigmas.<br>我们真要做的时候，是不会用 1/4 英寸接口的。它们太大的体积几乎要超过整个恩尼格玛机。香蕉插头体积较小，而且比原版德国 Enigma 机结合得更紧密些。</p><h2 id="Step-3-Lay-the-Components-Down"><a href="#Step-3-Lay-the-Components-Down" class="headerlink" title="Step 3: Lay the Components Down"></a>Step 3: Lay the Components Down</h2><p>第三步：布置零件</p><p><img src="/images/2018-08/FVPK1ITHMEXSQHU.LARGE.jpg" alt=""><br><img src="/images/2018-08/FG3UNNCHMEXWMFY.LARGE.jpg" alt=""><br><img src="/images/2018-08/F177H22HM8CXMUF.LARGE.jpg" alt=""><br><img src="/images/2018-08/F5QWPPFHMFQJEKZ.LARGE.jpg" alt=""><br><img src="/images/2018-08/FJ4B8MDHM8CVVF4.LARGE.jpg" alt=""><br><img src="/images/2018-08/FSSAE2EHM8CVVF3.LARGE.jpg" alt=""></p><p>The Radio Shack 6”x 8” Micro Perboard is the perfect size to host all components as it provides just the right amount of space to fit everything on &amp; will fit perfectly inside the Enigma box.<br>6*8 寸无线电面包版是最适合放置所有元件的，既不多余也不拥挤，而且和 Enigma 机盒子内部完美吻合。<br>We started dividing the space on the Perfboard equally between the 3 regions, but realized soon that this would make the electonic Enigma longer than the real one, so we compressed everything down to the proper spacing.<br>最初我们将面包板等分为三块区域，但很快意识到，如此一来，电子版 Enigma 机将比原版的机械 Enigma 机长。于是我们将所有零件缩放到正好够占用的空间。<br>Once satisfied with the positioning of each components, next step is soldering.<br>每个元件位置就绪，下一步就是焊接。</p><h2 id="Step-4-Soldering-Soldering-amp-a-Little-More-Soldering"><a href="#Step-4-Soldering-Soldering-amp-a-Little-More-Soldering" class="headerlink" title="Step 4: Soldering, Soldering &amp; a Little More Soldering"></a>Step 4: Soldering, Soldering &amp; a Little More Soldering</h2><p>第四步：我焊，我焊，我焊焊焊……</p><p><img src="/images/2018-08/FL8IEWNHMFQJENI.LARGE.jpg" alt=""><br><img src="/images/2018-08/F1UE3SZHMFQJENK.LARGE.jpg" alt=""><br><img src="/images/2018-08/F5B1IDKHM8D0839.LARGE.jpg" alt=""><br><img src="/images/2018-08/FCJKFP3HMEXWMPC.LARGE.jpg" alt=""><br><img src="/images/2018-08/FB9KU3WHM8CXMUR.LARGE.jpg" alt=""><br><img src="/images/2018-08/F6ZOVZKHMF6R1YM.LARGE.jpg" alt=""></p><p>OK, this proved to be the most solder I have used on a single project ever. With 18 pins per 16 Segment, times 4 plus 26 keyboard keys + 26 keyboard lamps + a few LEDs &amp; 1 SPDT on/off/on switch, that was a lot of solder.<br>好吧，在单一作品身上，我从没焊接如此多次。16 段显示的 18 个针脚，还有 26 个字母键乘以每个 4 个脚，外加 26 个键盘灯，一些其他 LED，一个三掷开关，真乃『成吉思焊』。<br>Our decision to raise the 16 Segment displays up to make them look like old-time Nixie tubes certainly added a lot of solder points!<br>当初我们的决定是使这些 16 段 LED 显示看起来像老式电子管的感觉，增加了不少焊点，『巨焊』！<br>Our Arduino Mega Pin assignment:<br>Arduino Mega 板上针脚的分配：</p><p>17 Segments:<br>Seg Pin Wire DuinoPin<br>a   2   blue  24<br>b   1   white 22<br>c   16  wh-bl 25<br>d   13  green 31<br>e   9   wh-br 38<br>f   8   brown 36<br>g   6   green 32<br>h   5   wh-or 30<br>k   4   orang 28<br>m   3   wh-bl 26<br>n   17  blue  23<br>p   15  orang 27<br>r   12  wh-gr 33<br>s   11  brown 35<br>t   7   wh-gr 34<br>u   14  wh-or 29<br>dp  10  wh-br 37<br>anode1 18 red 39<br>anode2 18 red 41<br>anode3 18 red 43<br>anode4 18 red 45</p><p>LEDs:<br>1  40<br>2  42<br>3  44<br>4  46<br>5  48</p><p>Lamps:<br>QAP 10<br>WSY 9<br>EDX 8<br>RFC 7<br>TGV 6<br>ZHB 5<br>UJN 4<br>IKM 3<br>OL  2<br>anode1 (First Row)  11<br>anode2 (Second Row) 12<br>anode3 (Third Row)  13</p><p>Function Keys:<br>A0</p><p>Keyboard:<br>First Row A1<br>Second Row A2<br>Third Row A3</p><h2 id="Step-5-Make-a-Box-and-Cut-amp-Drill-the-Top-Plate"><a href="#Step-5-Make-a-Box-and-Cut-amp-Drill-the-Top-Plate" class="headerlink" title="Step 5: Make a Box and Cut &amp; Drill the Top Plate."></a>Step 5: Make a Box and Cut &amp; Drill the Top Plate.</h2><p>第五步：门面工夫——做个盒子钻出面板</p><p><img src="/images/2018-08/FDK4HNYHMF6R1Z8.LARGE.jpg" alt=""><br><img src="/images/2018-08/FDHCE6MHM8CXMUW.LARGE.jpg" alt=""><br><img src="/images/2018-08/FOTHEI2HM8D527O.LARGE.jpg" alt=""><br><img src="/images/2018-08/FNLRDOJHMEXWMW4.LARGE.jpg" alt=""></p><p>After obtaining the exact dimensions of the original M4 wooden box, we purchased a sheet of plywood &amp; cut it in pieces so we could assemble our case.<br>在原版 M4 型木盒内得到确定位置数据后，我们买了一块胶合板，将它切块，然后砌盒子。<br>We decided to cut a steel plate from an obsolete rack mounted server as it had just the right thickness of metal for our needs. After making a transparency that showed where every button/lamp was located &amp; cutting it out, we were able to superimpose it on the metal piece and draw each required hole with a sharpie.<br>我们从旧服务器机架上卸了一块钢板，厚度正合需要。将模具（上面早已画好每个按键和灯位，并切好了洞洞）盖在钢板上，然后用记号笔画出需要切出的洞洞。<br>We then spray painted it textured black to look like the real Enigma.<br>接着，我们用喷漆把它涂黑，就像真的 Enigma 机那样。</p><h2 id="Step-6-Integration-Tests"><a href="#Step-6-Integration-Tests" class="headerlink" title="Step 6: Integration Tests"></a>Step 6: Integration Tests</h2><p>第六步：组装测试</p><p><img src="/images/2018-08/F9FF43UHMEXWN47.LARGE.jpg" alt=""><br><img src="/images/2018-08/FIITQ0JHM8D083S.LARGE.jpg" alt=""><br><img src="/images/2018-08/F7CENKBHM8D8Z2S.LARGE.jpg" alt=""><br><img src="/images/2018-08/FB7E7EEHM8CVVHM.LARGE.jpg" alt=""><br><img src="/images/2018-08/FHT2F7HHM8D8Z2M.LARGE.jpg" alt=""><br><img src="/images/2018-08/FGQWASPHMFQJERA.LARGE.jpg" alt=""><br><img src="/images/2018-08/FIPCQX8HM8CVVHJ.LARGE.jpg" alt=""></p><p>First is the permanent fitting of the metal plate on top of the perfboard making sure every button is working and every LED can shine.<br>首先把金属板在面包版上永久固定，确保所有按键正常工作，所有 LED 都能发光。<br>Then is the fitting of this solid assembly into the wooden case ensuring we didn’t introduce a short anywhere.<br>接着就是把这一大坨东东装入木盒，确保没有空隙位置。</p><h2 id="Step-7-Software-Ohhhh…-Ouch"><a href="#Step-7-Software-Ohhhh…-Ouch" class="headerlink" title="Step 7: Software - Ohhhh…. Ouch!"></a>Step 7: Software - Ohhhh…. Ouch!</h2><p>第七步：软件啊，日完软啊！</p><p><img src="/images/2018-08/FFJ9BVGHMEXSRM6.LARGE.jpg" alt=""><br><img src="/images/2018-08/FHM5VLKHM8D6Q8D.LARGE.jpg" alt=""></p><p>During each hardware assembly phase, we had created small Arduino sketches that would test the specific individual section we were working on:<br>在组装硬件过程中，我们也写了个小型 Arduino 程序框架，用以测试特定几个需要关注的部分：<br>A code that tests that each keyboard button is read accurately.<br>A second code that tests each of the 10 function buttons.<br>用来测试每个按键信号能准确读取，还有测试 10 个功能按键的代码。<br>An Enigma_POST (Power On Self Test) sketch that tests that each keyboard lamp can be lit precisely and move each LED through each mode, with some modifications to the original breadboard code to ensure each segment of the 4 16-Segment LEDs is working perfectly.<br>Enigma_POST（上电自检）确保在每种模式下所有键盘等都能准确亮起，在每种模式下每个 LED 信号都能传送。我们对原本面包板上的代码做了修正，确保 4 个 16 段 LED 显示的每个部件无懈可击。<br>But, even with all these sample codes on hand that tested every piece of hardware on the machine, the task of reproducing the encrypting/decrypting functionality of a real M4 Enigma was a Mathematics tour-de-force!<br>但，即使所有手上的程序片段都说明机器状态完好，重现 M4 海军型 Enigma 机加解密功能，数学方面居功至伟。<br>All Arduino sketches will be available on our Github that we are currently setting up.<br>所有的 Arduino 程序片段即将在我们刚刚建好的 <a href="https://github.com/ST-Geotronics" target="_blank" rel="noopener">Github 组织</a> 中发布。<br>Here is the Enigma_POST sketch:<br>以下是 Enigma_POST 程序片段（上电自检）：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Enigma Development Code to Test each of the 4 Nixies, the 5 LEDs,</span></span><br><span class="line"><span class="comment">   then Turn On each Lamp in sequence.</span></span><br><span class="line"><span class="comment">   Written by Marc Tessier &amp; James Sanderson 9/8/13</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Define the 16-Segments Pins</span></span><br><span class="line"><span class="keyword">int</span> segment[<span class="number">17</span>] = &#123; <span class="number">24</span>,<span class="number">22</span>,<span class="number">25</span>,<span class="number">31</span>,<span class="number">38</span>,<span class="number">36</span>,<span class="number">32</span>,<span class="number">30</span>,<span class="number">28</span>,<span class="number">26</span>,<span class="number">23</span>,<span class="number">27</span>,<span class="number">33</span>,<span class="number">35</span>,<span class="number">34</span>,<span class="number">29</span>,<span class="number">37</span> &#125;;</span><br><span class="line"><span class="keyword">int</span> anode[<span class="number">4</span>] = &#123; <span class="number">39</span>,<span class="number">41</span>,<span class="number">43</span>,<span class="number">45</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Define the 9 lamps Pins</span></span><br><span class="line"><span class="keyword">int</span> lamp[<span class="number">9</span>] = &#123; <span class="number">10</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">int</span> lanode[<span class="number">3</span>] = &#123; <span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// LTP587P Segments: A,B,C,D,E,F,G,H,K,M,N,P,R,S,T,U,dp              </span></span><br><span class="line">boolean segmentvals[<span class="number">39</span>][<span class="number">17</span>] = &#123;</span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = A</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = B</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = C</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = D</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = E</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = F</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = G</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = H</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = I</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = J</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = K</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = L</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = M</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = N</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = O</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = P</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = Q</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = R</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = S</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = T</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = U</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = V</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = W</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = X</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = Y</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = Z</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = 0</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = 1</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 2</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = 3</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 4</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 5</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 6</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = 7</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 8</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 9</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = Space</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span> &#125;, <span class="comment">// = Full Lit</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;  <span class="comment">// = SS</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// LTP587P Segments: A,B,C,D,E,F,G,H,K,M,N,P,R,S,T,U,dp</span></span><br><span class="line"></span><br><span class="line">boolean lampvals[<span class="number">9</span>][<span class="number">9</span>] = &#123;</span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = Q or A or P</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = W or S or Y</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = E or D or X</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = R or F or C</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = T or G or V</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = Z or H or B</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = U or J or N</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = I or K or M</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span> &#125;  <span class="comment">// = O or L</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> value_row1 = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> value_row2 = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> value_row3 = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">char</span> key = <span class="number">91</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> led1 = <span class="number">40</span>;</span><br><span class="line"><span class="keyword">int</span> led2 = <span class="number">42</span>;</span><br><span class="line"><span class="keyword">int</span> led3 = <span class="number">44</span>;</span><br><span class="line"><span class="keyword">int</span> led4 = <span class="number">46</span>;</span><br><span class="line"><span class="keyword">int</span> led5 = <span class="number">48</span>;</span><br><span class="line"><span class="keyword">int</span> wait = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt;= <span class="number">3</span>; index++) &#123;</span><br><span class="line">        pinMode(anode[index], OUTPUT);</span><br><span class="line">        digitalWrite(anode[index], <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt;= <span class="number">16</span>; index++) &#123;</span><br><span class="line">        pinMode(segment[index], OUTPUT);</span><br><span class="line">        digitalWrite(segment[index], <span class="number">1</span>);</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="comment">// initialize the digital pins as an output.</span></span><br><span class="line">    pinMode(led1, OUTPUT);</span><br><span class="line">    pinMode(led2, OUTPUT);</span><br><span class="line">    pinMode(led3, OUTPUT);</span><br><span class="line">    pinMode(led4, OUTPUT);</span><br><span class="line">    pinMode(led5, OUTPUT);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt;= <span class="number">2</span>; index++) &#123;</span><br><span class="line">        pinMode (lanode[index], OUTPUT);</span><br><span class="line">        digitalWrite (lanode[index], <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt;= <span class="number">8</span>; index++) &#123;</span><br><span class="line">        pinMode(lamp[index], OUTPUT);</span><br><span class="line">        digitalWrite(lamp[index], <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    sixteenSegWrite(<span class="number">0</span>, <span class="number">38</span>);</span><br><span class="line">    sixteenSegWrite(<span class="number">1</span>, <span class="number">38</span>);</span><br><span class="line">    sixteenSegWrite(<span class="number">2</span>, <span class="number">38</span>);</span><br><span class="line">    sixteenSegWrite(<span class="number">3</span>, <span class="number">38</span>);</span><br><span class="line"></span><br><span class="line">    digitalWrite(led1, HIGH); <span class="comment">// turn the LED on (HIGH is the voltage level)</span></span><br><span class="line">    delay(<span class="number">200</span>);               <span class="comment">// wait for a second</span></span><br><span class="line">    digitalWrite(led1, LOW);  <span class="comment">// turn the LED off by making the voltage LOW</span></span><br><span class="line">    delay(wait);              <span class="comment">// wait for a second</span></span><br><span class="line">    digitalWrite(led2, HIGH); <span class="comment">// turn the LED on (HIGH is the voltage level)</span></span><br><span class="line">    delay(<span class="number">200</span>);               <span class="comment">// wait for a second</span></span><br><span class="line">    digitalWrite(led2, LOW);  <span class="comment">// turn the LED off by making the voltage LOW</span></span><br><span class="line">    delay(wait);              <span class="comment">// wait for a second</span></span><br><span class="line">    digitalWrite(led3, HIGH); <span class="comment">// turn the LED on (HIGH is the voltage level)</span></span><br><span class="line">    delay(<span class="number">200</span>);               <span class="comment">// wait for a second</span></span><br><span class="line">    digitalWrite(led3, LOW);  <span class="comment">// turn the LED off by making the voltage LOW</span></span><br><span class="line">    delay(wait);              <span class="comment">// wait for a second</span></span><br><span class="line">    digitalWrite(led4, HIGH); <span class="comment">// turn the LED on (HIGH is the voltage level)</span></span><br><span class="line">    delay(<span class="number">200</span>);               <span class="comment">// wait for a second</span></span><br><span class="line">    digitalWrite(led4, LOW);  <span class="comment">// turn the LED off by making the voltage LOW</span></span><br><span class="line">    delay(wait);              <span class="comment">// wait for a second</span></span><br><span class="line">    digitalWrite(led5, HIGH); <span class="comment">// turn the LED on (HIGH is the voltage level)</span></span><br><span class="line">    delay(<span class="number">200</span>);               <span class="comment">// wait for a second</span></span><br><span class="line">    digitalWrite(led5, LOW);  <span class="comment">// turn the LED off by making the voltage LOW</span></span><br><span class="line">    delay(wait);              <span class="comment">// wait for a second</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt;= <span class="number">2</span>; index++) &#123;</span><br><span class="line">        digitalWrite(lanode[index], <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> mychar = <span class="number">0</span>; mychar &lt; <span class="number">9</span>; mychar++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> sindex = <span class="number">0</span>; sindex &lt; <span class="number">9</span>; sindex++) &#123;</span><br><span class="line">                digitalWrite(lamp[sindex], lampvals[mychar][sindex]);</span><br><span class="line">                delay(<span class="number">30</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        digitalWrite(lanode[index], <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sixteenSegWrite</span><span class="params">(<span class="keyword">int</span> digit, <span class="keyword">int</span> character)</span> </span>&#123;</span><br><span class="line">    digitalWrite(anode[digit],<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; <span class="number">17</span>; index++) &#123;</span><br><span class="line">        digitalWrite(segment[index], segmentvals[character][index]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="Step-8-More-Software"><a href="#Step-8-More-Software" class="headerlink" title="Step 8: More Software!"></a>Step 8: More Software!</h2><p>第八步：再多一些软件！</p><p><img src="/images/2018-08/FE72PL9HMFQJEWD.LARGE.jpg" alt=""><br><img src="/images/2018-08/FV4474FHMF6R23U.LARGE.jpg" alt=""><br><img src="/images/2018-08/F0WOJNDHM8D085H.LARGE.jpg" alt=""><br><img src="/images/2018-08/FNWA7V2HMEXWNHT.LARGE.jpg" alt=""><br><img src="/images/2018-08/FXVDU5LHMEXSRP2.LARGE.jpg" alt=""><br><img src="/images/2018-08/FEM6HKTHMF6R23W.LARGE.jpg" alt=""><br><img src="/images/2018-08/F0LV9DXHMFQJEWH.LARGE.jpg" alt=""><br><img src="/images/2018-08/F3FLAQIHMF6R23V.LARGE.jpg" alt=""><br><img src="/images/2018-08/FS9DTJ4HMEXSROL.LARGE.jpg" alt=""></p><p>So we first created a function for each mode the Enigma operates in:<br>首先，我们写了个函数，给每个 Enigma 机工作模式用。<br>In Mode 0, Default Mode, the Enigma is nothing but a simple typewriter with a Marquee that displays its Model Number.<br>在模式 0、默认模式，Enigma 机仅仅是一台普通打字机，以跑马灯方式显示它的型号。<br>Mode 1 allows the user to select the 3 (out of 8) Rotors he will use along with which one (of the 2) Reflector he wants to use.<br>模式 1 下，允许用户从八个转子中选取三个，两个反射器中选择一个进行使用。<br>In Mode 2, the user can select the Internal position of each Rotor.<br>模式 2 下，允许用户排列转子次序。<br>Mode 3 is used to specify the starting (external) position of each Rotor.<br>模式 3 用于自定义转子初始字母排列。<br>In Mode 4, a user can enter up to 10 Swapped pairs of letters.<br>选择模式 4，用户最多可以使用接线板上 10 对交换字母排列。<br>Mode 5 is Run mode and at that point, the Enigma will encrypt or decrypt any letter typed on the keyboard.<br>模式 5 是运行模式，此时 Enigma 机能加解密任何从键盘录入的信息。<br>Here is the Complete sketch that runs the whole Enigma:<br>以下是整个 Enigma 机工作流程完整程序片段：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* S&amp;T GeoTronics Enigma Code. This Arduino Mega custom shield is programmed to replicate</span></span><br><span class="line"><span class="comment">   exactly the behavior of a true German M4 Enigma machine.</span></span><br><span class="line"><span class="comment">   It uses 4 16-Segment units, 5 LEDs, 26 Lamps setup as keyboard, 26 keyboard buttons</span></span><br><span class="line"><span class="comment">   &amp; 10 Function keys. The 115 light emitting diodes are charlie-plexed to minimize the</span></span><br><span class="line"><span class="comment">   amount of pins needed down to 38 and all 36 pushbuttons keys are sharing a total of 4 pins.</span></span><br><span class="line"><span class="comment">   Designed, assembled &amp; programmed by Marc Tessier &amp; James Sanderson 9/20/13</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// Define the variables</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">long</span> time = millis();</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">long</span> otime = time;</span><br><span class="line"><span class="keyword">int</span> inpin[<span class="number">4</span>] = &#123; A0, A1, A2, A3 &#125;;</span><br><span class="line"><span class="keyword">int</span> inval[<span class="number">4</span>] = &#123; <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span> &#125;;</span><br><span class="line"><span class="keyword">int</span> keyval = <span class="number">100</span>;</span><br><span class="line">boolean windex = <span class="number">0</span>;</span><br><span class="line">boolean windex1 = <span class="number">0</span>;</span><br><span class="line">boolean windex2 = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> lampval = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> procesval = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> procesvala = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> mode = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">long</span> mtime;</span><br><span class="line"><span class="keyword">int</span> mdex = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Define each Nixie character</span></span><br><span class="line"><span class="keyword">int</span> dig1 = <span class="number">37</span>;</span><br><span class="line"><span class="keyword">int</span> dig2 = <span class="number">37</span>;</span><br><span class="line"><span class="keyword">int</span> dig3 = <span class="number">37</span>;</span><br><span class="line"><span class="keyword">int</span> dig4 = <span class="number">37</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> data[<span class="number">36</span>] = &#123; <span class="number">36</span>,<span class="number">36</span>,<span class="number">36</span>,<span class="number">36</span>,<span class="number">18</span>,<span class="number">39</span>,<span class="number">19</span>,<span class="number">36</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">14</span>,<span class="number">19</span>,<span class="number">17</span>,<span class="number">14</span>,<span class="number">13</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">18</span>,<span class="number">36</span>,<span class="number">4</span>,<span class="number">13</span>,<span class="number">8</span>,<span class="number">6</span>,<span class="number">12</span>,<span class="number">0</span>,<span class="number">36</span>,<span class="number">12</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">10</span>,<span class="number">36</span>,<span class="number">30</span>,<span class="number">36</span>,<span class="number">36</span>,<span class="number">36</span>,<span class="number">36</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Define the 16-Segments Pins as 2 Arrays</span></span><br><span class="line"><span class="keyword">int</span> segment[<span class="number">17</span>] = &#123; <span class="number">24</span>,<span class="number">22</span>,<span class="number">25</span>,<span class="number">31</span>,<span class="number">38</span>,<span class="number">36</span>,<span class="number">32</span>,<span class="number">30</span>,<span class="number">28</span>,<span class="number">26</span>,<span class="number">23</span>,<span class="number">27</span>,<span class="number">33</span>,<span class="number">35</span>,<span class="number">34</span>,<span class="number">29</span>,<span class="number">37</span> &#125;; <span class="comment">//cathode array</span></span><br><span class="line"><span class="keyword">int</span> anode[<span class="number">4</span>] = &#123; <span class="number">39</span>,<span class="number">41</span>,<span class="number">43</span>,<span class="number">45</span> &#125;; <span class="comment">//annode array commin annode</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Define the 26 Lamps as a 2D Array</span></span><br><span class="line"><span class="keyword">int</span> lamparray[<span class="number">26</span>][<span class="number">2</span>] = &#123;</span><br><span class="line">    &#123;<span class="number">12</span>,<span class="number">10</span>&#125;, &#123;<span class="number">13</span>,<span class="number">5</span>&#125;, &#123;<span class="number">13</span>,<span class="number">7</span>&#125;, &#123;<span class="number">12</span>,<span class="number">8</span>&#125;, &#123;<span class="number">11</span>,<span class="number">8</span>&#125;, &#123;<span class="number">12</span>,<span class="number">7</span>,&#125;, &#123;<span class="number">12</span>,<span class="number">6</span>&#125;, &#123;<span class="number">12</span>,<span class="number">5</span>&#125;, &#123;<span class="number">11</span>,<span class="number">3</span>&#125;,</span><br><span class="line">    &#123;<span class="number">12</span>,<span class="number">4</span>&#125;, &#123;<span class="number">12</span>,<span class="number">3</span>&#125;, &#123;<span class="number">13</span>,<span class="number">2</span>&#125;, &#123;<span class="number">13</span>,<span class="number">3</span>&#125;, &#123;<span class="number">13</span>,<span class="number">4</span>&#125;, &#123;<span class="number">11</span>,<span class="number">2</span>&#125;, &#123;<span class="number">13</span>,<span class="number">10</span>&#125;, &#123;<span class="number">11</span>,<span class="number">10</span>&#125;, &#123;<span class="number">11</span>,<span class="number">7</span>&#125;,</span><br><span class="line">    &#123;<span class="number">12</span>,<span class="number">9</span>&#125;, &#123;<span class="number">11</span>,<span class="number">6</span>&#125;, &#123;<span class="number">11</span>,<span class="number">4</span>&#125;, &#123;<span class="number">13</span>,<span class="number">6</span>&#125;, &#123;<span class="number">11</span>,<span class="number">9</span>&#125;, &#123;<span class="number">13</span>,<span class="number">8</span>&#125;, &#123;<span class="number">13</span>,<span class="number">9</span>&#125;, &#123;<span class="number">11</span>,<span class="number">5</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  Define the 12 Lamp Pins for initialization</span></span><br><span class="line"><span class="keyword">int</span> lamppin[<span class="number">12</span>] = &#123; <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span> &#125;; <span class="comment">//2 to 10 cathode, 11 to 13 common annode</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Define each LTP587P Segments: A,B,C,D,E,F,G,H,K,M,N,P,R,S,T,U,dp              </span></span><br><span class="line">boolean segmentvals[<span class="number">40</span>][<span class="number">17</span>] = &#123;</span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = A 0</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = B 1</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = C 2</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = D 3</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = E 4</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = F 5</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = G 6</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = H 7</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = I 8</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = J 9</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = K 10</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = L 11</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = M 12</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = N 13</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = O 14</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = P 15</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = Q 16</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = R 17</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = S 18</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = T 19</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = U 20</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = V 21</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = W 22</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = X 23</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = Y 24</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = Z 25</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = 0 26</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = 1 27</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 2 28</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = 3 29</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 4 30</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 5 31</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 6 32</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = 7 33</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 8 34</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = 9 35</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span> &#125;, <span class="comment">// = Space 36</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span> &#125;, <span class="comment">// = Full Lit 37</span></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;, <span class="comment">// = SS 38</span></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span> &#125;  <span class="comment">// = &amp; 39</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// LTP587P Segments: A,B,C,D,E,F,G,H,K,M,N,P,R,S,T,U,dp</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Define the 5 Mode LEDs</span></span><br><span class="line"><span class="keyword">int</span> led1 = <span class="number">40</span>;</span><br><span class="line"><span class="keyword">int</span> led2 = <span class="number">42</span>;</span><br><span class="line"><span class="keyword">int</span> led3 = <span class="number">44</span>;</span><br><span class="line"><span class="keyword">int</span> led4 = <span class="number">46</span>;</span><br><span class="line"><span class="keyword">int</span> led5 = <span class="number">48</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//4,10,12,5,11,6,3,16,21,25,13,19,14,22,24,7,23,20,18,15,0,8,1,17,2,9</span></span><br><span class="line"><span class="comment">//Define the rotor values A B C D E F G H I J K L M N O P Q</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> rotorvals[<span class="number">12</span>][<span class="number">78</span>] = &#123;</span><br><span class="line">    &#123; <span class="number">4</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">5</span>,<span class="number">11</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">16</span>,<span class="number">21</span>,<span class="number">25</span>,<span class="number">13</span>,<span class="number">19</span>,<span class="number">14</span>,<span class="number">22</span>,<span class="number">24</span>,<span class="number">7</span>,<span class="number">123</span>,<span class="number">20</span>,<span class="number">18</span>,<span class="number">15</span>,<span class="number">0</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">17</span>,<span class="number">2</span>,<span class="number">9</span>,</span><br><span class="line">      <span class="number">4</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">5</span>,<span class="number">11</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">16</span>,<span class="number">21</span>,<span class="number">25</span>,<span class="number">13</span>,<span class="number">19</span>,<span class="number">14</span>,<span class="number">22</span>,<span class="number">24</span>,<span class="number">7</span>,<span class="number">123</span>,<span class="number">20</span>,<span class="number">18</span>,<span class="number">15</span>,<span class="number">0</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">17</span>,<span class="number">2</span>,<span class="number">9</span>,</span><br><span class="line">      <span class="number">4</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">5</span>,<span class="number">11</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">16</span>,<span class="number">21</span>,<span class="number">25</span>,<span class="number">13</span>,<span class="number">19</span>,<span class="number">14</span>,<span class="number">22</span>,<span class="number">24</span>,<span class="number">7</span>,<span class="number">123</span>,<span class="number">20</span>,<span class="number">18</span>,<span class="number">15</span>,<span class="number">0</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">17</span>,<span class="number">2</span>,<span class="number">9</span> &#125;, <span class="comment">// wheel 1</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">118</span>,<span class="number">8</span>,<span class="number">17</span>,<span class="number">20</span>,<span class="number">23</span>,<span class="number">1</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">22</span>,<span class="number">19</span>,<span class="number">12</span>,<span class="number">2</span>,<span class="number">16</span>,<span class="number">6</span>,<span class="number">25</span>,<span class="number">13</span>,<span class="number">15</span>,<span class="number">24</span>,<span class="number">5</span>,<span class="number">21</span>,<span class="number">14</span>,<span class="number">4</span>,</span><br><span class="line">      <span class="number">0</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">118</span>,<span class="number">8</span>,<span class="number">17</span>,<span class="number">20</span>,<span class="number">23</span>,<span class="number">1</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">22</span>,<span class="number">19</span>,<span class="number">12</span>,<span class="number">2</span>,<span class="number">16</span>,<span class="number">6</span>,<span class="number">25</span>,<span class="number">13</span>,<span class="number">15</span>,<span class="number">24</span>,<span class="number">5</span>,<span class="number">21</span>,<span class="number">14</span>,<span class="number">4</span>,</span><br><span class="line">      <span class="number">0</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">118</span>,<span class="number">8</span>,<span class="number">17</span>,<span class="number">20</span>,<span class="number">23</span>,<span class="number">1</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">22</span>,<span class="number">19</span>,<span class="number">12</span>,<span class="number">2</span>,<span class="number">16</span>,<span class="number">6</span>,<span class="number">25</span>,<span class="number">13</span>,<span class="number">15</span>,<span class="number">24</span>,<span class="number">5</span>,<span class="number">21</span>,<span class="number">14</span>,<span class="number">4</span> &#125;, <span class="comment">// wheel 2</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">11</span>,<span class="number">2</span>,<span class="number">15</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">23</span>,<span class="number">21</span>,<span class="number">25</span>,<span class="number">13</span>,<span class="number">24</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">22</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">10</span>,<span class="number">112</span>,<span class="number">20</span>,<span class="number">18</span>,<span class="number">16</span>,<span class="number">14</span>,</span><br><span class="line">      <span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">11</span>,<span class="number">2</span>,<span class="number">15</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">23</span>,<span class="number">21</span>,<span class="number">25</span>,<span class="number">13</span>,<span class="number">24</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">22</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">10</span>,<span class="number">112</span>,<span class="number">20</span>,<span class="number">18</span>,<span class="number">16</span>,<span class="number">14</span>,</span><br><span class="line">      <span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">11</span>,<span class="number">2</span>,<span class="number">15</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">23</span>,<span class="number">21</span>,<span class="number">25</span>,<span class="number">13</span>,<span class="number">24</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">22</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">10</span>,<span class="number">112</span>,<span class="number">20</span>,<span class="number">18</span>,<span class="number">16</span>,<span class="number">14</span> &#125;, <span class="comment">// wheel 3</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">4</span>,<span class="number">18</span>,<span class="number">14</span>,<span class="number">21</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">9</span>,<span class="number">0</span>,<span class="number">24</span>,<span class="number">116</span>,<span class="number">20</span>,<span class="number">8</span>,<span class="number">17</span>,<span class="number">7</span>,<span class="number">23</span>,<span class="number">11</span>,<span class="number">13</span>,<span class="number">5</span>,<span class="number">19</span>,<span class="number">6</span>,<span class="number">10</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">12</span>,<span class="number">22</span>,<span class="number">1</span>,</span><br><span class="line">      <span class="number">4</span>,<span class="number">18</span>,<span class="number">14</span>,<span class="number">21</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">9</span>,<span class="number">0</span>,<span class="number">24</span>,<span class="number">116</span>,<span class="number">20</span>,<span class="number">8</span>,<span class="number">17</span>,<span class="number">7</span>,<span class="number">23</span>,<span class="number">11</span>,<span class="number">13</span>,<span class="number">5</span>,<span class="number">19</span>,<span class="number">6</span>,<span class="number">10</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">12</span>,<span class="number">22</span>,<span class="number">1</span>,</span><br><span class="line">      <span class="number">4</span>,<span class="number">18</span>,<span class="number">14</span>,<span class="number">21</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">9</span>,<span class="number">0</span>,<span class="number">24</span>,<span class="number">116</span>,<span class="number">20</span>,<span class="number">8</span>,<span class="number">17</span>,<span class="number">7</span>,<span class="number">23</span>,<span class="number">11</span>,<span class="number">13</span>,<span class="number">5</span>,<span class="number">19</span>,<span class="number">6</span>,<span class="number">10</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">12</span>,<span class="number">22</span>,<span class="number">1</span> &#125;, <span class="comment">// wheel 4</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">21</span>,<span class="number">25</span>,<span class="number">1</span>,<span class="number">17</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">19</span>,<span class="number">24</span>,<span class="number">20</span>,<span class="number">15</span>,<span class="number">18</span>,<span class="number">3</span>,<span class="number">13</span>,<span class="number">7</span>,<span class="number">11</span>,<span class="number">23</span>,<span class="number">0</span>,<span class="number">22</span>,<span class="number">12</span>,<span class="number">9</span>,<span class="number">16</span>,<span class="number">14</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">110</span>,</span><br><span class="line">      <span class="number">21</span>,<span class="number">25</span>,<span class="number">1</span>,<span class="number">17</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">19</span>,<span class="number">24</span>,<span class="number">20</span>,<span class="number">15</span>,<span class="number">18</span>,<span class="number">3</span>,<span class="number">13</span>,<span class="number">7</span>,<span class="number">11</span>,<span class="number">23</span>,<span class="number">0</span>,<span class="number">22</span>,<span class="number">12</span>,<span class="number">9</span>,<span class="number">16</span>,<span class="number">14</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">110</span>,</span><br><span class="line">      <span class="number">21</span>,<span class="number">25</span>,<span class="number">1</span>,<span class="number">17</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">19</span>,<span class="number">24</span>,<span class="number">20</span>,<span class="number">15</span>,<span class="number">18</span>,<span class="number">3</span>,<span class="number">13</span>,<span class="number">7</span>,<span class="number">11</span>,<span class="number">23</span>,<span class="number">0</span>,<span class="number">22</span>,<span class="number">12</span>,<span class="number">9</span>,<span class="number">16</span>,<span class="number">14</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">110</span> &#125;, <span class="comment">// wheel 5</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">9</span>,<span class="number">15</span>,<span class="number">6</span>,<span class="number">21</span>,<span class="number">14</span>,<span class="number">20</span>,<span class="number">12</span>,<span class="number">5</span>,<span class="number">24</span>,<span class="number">16</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">113</span>,<span class="number">7</span>,<span class="number">25</span>,<span class="number">17</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">0</span>,<span class="number">18</span>,<span class="number">23</span>,<span class="number">11</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">19</span>,<span class="number">122</span>,</span><br><span class="line">      <span class="number">9</span>,<span class="number">15</span>,<span class="number">6</span>,<span class="number">21</span>,<span class="number">14</span>,<span class="number">20</span>,<span class="number">12</span>,<span class="number">5</span>,<span class="number">24</span>,<span class="number">16</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">113</span>,<span class="number">7</span>,<span class="number">25</span>,<span class="number">17</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">0</span>,<span class="number">18</span>,<span class="number">23</span>,<span class="number">11</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">19</span>,<span class="number">122</span>,</span><br><span class="line">      <span class="number">9</span>,<span class="number">15</span>,<span class="number">6</span>,<span class="number">21</span>,<span class="number">14</span>,<span class="number">20</span>,<span class="number">12</span>,<span class="number">5</span>,<span class="number">24</span>,<span class="number">16</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">113</span>,<span class="number">7</span>,<span class="number">25</span>,<span class="number">17</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">0</span>,<span class="number">18</span>,<span class="number">23</span>,<span class="number">11</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">19</span>,<span class="number">122</span> &#125;, <span class="comment">// wheel 6</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">13</span>,<span class="number">25</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">17</span>,<span class="number">2</span>,<span class="number">23</span>,<span class="number">12</span>,<span class="number">24</span>,<span class="number">18</span>,<span class="number">22</span>,<span class="number">101</span>,<span class="number">14</span>,<span class="number">20</span>,<span class="number">5</span>,<span class="number">0</span>,<span class="number">8</span>,<span class="number">21</span>,<span class="number">11</span>,<span class="number">15</span>,<span class="number">4</span>,<span class="number">10</span>,<span class="number">16</span>,<span class="number">3</span>,<span class="number">119</span>,</span><br><span class="line">      <span class="number">13</span>,<span class="number">25</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">17</span>,<span class="number">2</span>,<span class="number">23</span>,<span class="number">12</span>,<span class="number">24</span>,<span class="number">18</span>,<span class="number">22</span>,<span class="number">101</span>,<span class="number">14</span>,<span class="number">20</span>,<span class="number">5</span>,<span class="number">0</span>,<span class="number">8</span>,<span class="number">21</span>,<span class="number">11</span>,<span class="number">15</span>,<span class="number">4</span>,<span class="number">10</span>,<span class="number">16</span>,<span class="number">3</span>,<span class="number">119</span>,</span><br><span class="line">      <span class="number">13</span>,<span class="number">25</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">17</span>,<span class="number">2</span>,<span class="number">23</span>,<span class="number">12</span>,<span class="number">24</span>,<span class="number">18</span>,<span class="number">22</span>,<span class="number">101</span>,<span class="number">14</span>,<span class="number">20</span>,<span class="number">5</span>,<span class="number">0</span>,<span class="number">8</span>,<span class="number">21</span>,<span class="number">11</span>,<span class="number">15</span>,<span class="number">4</span>,<span class="number">10</span>,<span class="number">16</span>,<span class="number">3</span>,<span class="number">119</span> &#125;, <span class="comment">// wheel 7</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">5</span>,<span class="number">10</span>,<span class="number">16</span>,<span class="number">7</span>,<span class="number">19</span>,<span class="number">11</span>,<span class="number">23</span>,<span class="number">14</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">18</span>,<span class="number">115</span>,<span class="number">3</span>,<span class="number">25</span>,<span class="number">17</span>,<span class="number">0</span>,<span class="number">12</span>,<span class="number">4</span>,<span class="number">22</span>,<span class="number">13</span>,<span class="number">8</span>,<span class="number">20</span>,<span class="number">24</span>,<span class="number">6</span>,<span class="number">121</span>,</span><br><span class="line">      <span class="number">5</span>,<span class="number">10</span>,<span class="number">16</span>,<span class="number">7</span>,<span class="number">19</span>,<span class="number">11</span>,<span class="number">23</span>,<span class="number">14</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">18</span>,<span class="number">115</span>,<span class="number">3</span>,<span class="number">25</span>,<span class="number">17</span>,<span class="number">0</span>,<span class="number">12</span>,<span class="number">4</span>,<span class="number">22</span>,<span class="number">13</span>,<span class="number">8</span>,<span class="number">20</span>,<span class="number">24</span>,<span class="number">6</span>,<span class="number">121</span>,</span><br><span class="line">      <span class="number">5</span>,<span class="number">10</span>,<span class="number">16</span>,<span class="number">7</span>,<span class="number">19</span>,<span class="number">11</span>,<span class="number">23</span>,<span class="number">14</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">18</span>,<span class="number">115</span>,<span class="number">3</span>,<span class="number">25</span>,<span class="number">17</span>,<span class="number">0</span>,<span class="number">12</span>,<span class="number">4</span>,<span class="number">22</span>,<span class="number">13</span>,<span class="number">8</span>,<span class="number">20</span>,<span class="number">24</span>,<span class="number">6</span>,<span class="number">121</span> &#125;, <span class="comment">// wheel 8</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">11</span>,<span class="number">4</span>,<span class="number">24</span>,<span class="number">9</span>,<span class="number">21</span>,<span class="number">2</span>,<span class="number">13</span>,<span class="number">8</span>,<span class="number">23</span>,<span class="number">22</span>,<span class="number">15</span>,<span class="number">1</span>,<span class="number">16</span>,<span class="number">12</span>,<span class="number">3</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">0</span>,<span class="number">10</span>,<span class="number">25</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">20</span>,<span class="number">7</span>,<span class="number">14</span>,<span class="number">18</span>,</span><br><span class="line">      <span class="number">11</span>,<span class="number">4</span>,<span class="number">24</span>,<span class="number">9</span>,<span class="number">21</span>,<span class="number">2</span>,<span class="number">13</span>,<span class="number">8</span>,<span class="number">23</span>,<span class="number">22</span>,<span class="number">15</span>,<span class="number">1</span>,<span class="number">16</span>,<span class="number">12</span>,<span class="number">3</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">0</span>,<span class="number">10</span>,<span class="number">25</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">20</span>,<span class="number">7</span>,<span class="number">14</span>,<span class="number">18</span>,</span><br><span class="line">      <span class="number">11</span>,<span class="number">4</span>,<span class="number">24</span>,<span class="number">9</span>,<span class="number">21</span>,<span class="number">2</span>,<span class="number">13</span>,<span class="number">8</span>,<span class="number">23</span>,<span class="number">22</span>,<span class="number">15</span>,<span class="number">1</span>,<span class="number">16</span>,<span class="number">12</span>,<span class="number">3</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">0</span>,<span class="number">10</span>,<span class="number">25</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">20</span>,<span class="number">7</span>,<span class="number">14</span>,<span class="number">18</span> &#125;, <span class="comment">// Beta</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">5</span>,<span class="number">18</span>,<span class="number">14</span>,<span class="number">10</span>,<span class="number">0</span>,<span class="number">13</span>,<span class="number">20</span>,<span class="number">4</span>,<span class="number">17</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">1</span>,<span class="number">19</span>,<span class="number">8</span>,<span class="number">24</span>,<span class="number">2</span>,<span class="number">22</span>,<span class="number">11</span>,<span class="number">16</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">23</span>,<span class="number">21</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">3</span>,</span><br><span class="line">      <span class="number">5</span>,<span class="number">18</span>,<span class="number">14</span>,<span class="number">10</span>,<span class="number">0</span>,<span class="number">13</span>,<span class="number">20</span>,<span class="number">4</span>,<span class="number">17</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">1</span>,<span class="number">19</span>,<span class="number">8</span>,<span class="number">24</span>,<span class="number">2</span>,<span class="number">22</span>,<span class="number">11</span>,<span class="number">16</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">23</span>,<span class="number">21</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">3</span>,</span><br><span class="line">      <span class="number">5</span>,<span class="number">18</span>,<span class="number">14</span>,<span class="number">10</span>,<span class="number">0</span>,<span class="number">13</span>,<span class="number">20</span>,<span class="number">4</span>,<span class="number">17</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">1</span>,<span class="number">19</span>,<span class="number">8</span>,<span class="number">24</span>,<span class="number">2</span>,<span class="number">22</span>,<span class="number">11</span>,<span class="number">16</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">23</span>,<span class="number">21</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">3</span> &#125;, <span class="comment">// Gamma</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">4</span>,<span class="number">13</span>,<span class="number">10</span>,<span class="number">16</span>,<span class="number">0</span>,<span class="number">20</span>,<span class="number">24</span>,<span class="number">22</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">1</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">3</span>,<span class="number">23</span>,<span class="number">25</span>,<span class="number">21</span>,<span class="number">5</span>,<span class="number">19</span>,<span class="number">7</span>,<span class="number">17</span>,<span class="number">6</span>,<span class="number">18</span>,</span><br><span class="line">      <span class="number">4</span>,<span class="number">13</span>,<span class="number">10</span>,<span class="number">16</span>,<span class="number">0</span>,<span class="number">20</span>,<span class="number">24</span>,<span class="number">22</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">1</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">3</span>,<span class="number">23</span>,<span class="number">25</span>,<span class="number">21</span>,<span class="number">5</span>,<span class="number">19</span>,<span class="number">7</span>,<span class="number">17</span>,<span class="number">6</span>,<span class="number">18</span>,</span><br><span class="line">      <span class="number">4</span>,<span class="number">13</span>,<span class="number">10</span>,<span class="number">16</span>,<span class="number">0</span>,<span class="number">20</span>,<span class="number">24</span>,<span class="number">22</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">1</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">3</span>,<span class="number">23</span>,<span class="number">25</span>,<span class="number">21</span>,<span class="number">5</span>,<span class="number">19</span>,<span class="number">7</span>,<span class="number">17</span>,<span class="number">6</span>,<span class="number">18</span>&#125;, <span class="comment">// = UKW-B</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">17</span>,<span class="number">3</span>,<span class="number">14</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">13</span>,<span class="number">19</span>,<span class="number">10</span>,<span class="number">21</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">22</span>,<span class="number">25</span>,<span class="number">0</span>,<span class="number">23</span>,<span class="number">6</span>,<span class="number">24</span>,<span class="number">8</span>,<span class="number">15</span>,<span class="number">18</span>,<span class="number">20</span>,<span class="number">16</span>,</span><br><span class="line">      <span class="number">17</span>,<span class="number">3</span>,<span class="number">14</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">13</span>,<span class="number">19</span>,<span class="number">10</span>,<span class="number">21</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">22</span>,<span class="number">25</span>,<span class="number">0</span>,<span class="number">23</span>,<span class="number">6</span>,<span class="number">24</span>,<span class="number">8</span>,<span class="number">15</span>,<span class="number">18</span>,<span class="number">20</span>,<span class="number">16</span>,</span><br><span class="line">      <span class="number">17</span>,<span class="number">3</span>,<span class="number">14</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">13</span>,<span class="number">19</span>,<span class="number">10</span>,<span class="number">21</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">22</span>,<span class="number">25</span>,<span class="number">0</span>,<span class="number">23</span>,<span class="number">6</span>,<span class="number">24</span>,<span class="number">8</span>,<span class="number">15</span>,<span class="number">18</span>,<span class="number">20</span>,<span class="number">16</span> &#125; <span class="comment">// = UKW-C</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> rotorvali[<span class="number">10</span>][<span class="number">78</span>] = &#123;</span><br><span class="line">    &#123; <span class="number">20</span>,<span class="number">22</span>,<span class="number">24</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">15</span>,<span class="number">21</span>,<span class="number">25</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">19</span>,<span class="number">7</span>,<span class="number">23</span>,<span class="number">18</span>,<span class="number">11</span>,<span class="number">17</span>,<span class="number">8</span>,<span class="number">13</span>,<span class="number">16</span>,<span class="number">14</span>,<span class="number">9</span>,</span><br><span class="line">      <span class="number">20</span>,<span class="number">22</span>,<span class="number">24</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">15</span>,<span class="number">21</span>,<span class="number">25</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">19</span>,<span class="number">7</span>,<span class="number">23</span>,<span class="number">18</span>,<span class="number">11</span>,<span class="number">17</span>,<span class="number">8</span>,<span class="number">13</span>,<span class="number">16</span>,<span class="number">14</span>,<span class="number">9</span>,</span><br><span class="line">      <span class="number">20</span>,<span class="number">22</span>,<span class="number">24</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">15</span>,<span class="number">21</span>,<span class="number">25</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">19</span>,<span class="number">7</span>,<span class="number">23</span>,<span class="number">18</span>,<span class="number">11</span>,<span class="number">17</span>,<span class="number">8</span>,<span class="number">13</span>,<span class="number">16</span>,<span class="number">14</span>,<span class="number">9</span> &#125;, <span class="comment">//wheel 1 i</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">9</span>,<span class="number">15</span>,<span class="number">2</span>,<span class="number">25</span>,<span class="number">22</span>,<span class="number">17</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">14</span>,<span class="number">19</span>,<span class="number">24</span>,<span class="number">20</span>,<span class="number">16</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">13</span>,<span class="number">7</span>,<span class="number">23</span>,<span class="number">12</span>,<span class="number">8</span>,<span class="number">21</span>,<span class="number">18</span>,</span><br><span class="line">      <span class="number">0</span>,<span class="number">9</span>,<span class="number">15</span>,<span class="number">2</span>,<span class="number">25</span>,<span class="number">22</span>,<span class="number">17</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">14</span>,<span class="number">19</span>,<span class="number">24</span>,<span class="number">20</span>,<span class="number">16</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">13</span>,<span class="number">7</span>,<span class="number">23</span>,<span class="number">12</span>,<span class="number">8</span>,<span class="number">21</span>,<span class="number">18</span>,</span><br><span class="line">      <span class="number">0</span>,<span class="number">9</span>,<span class="number">15</span>,<span class="number">2</span>,<span class="number">25</span>,<span class="number">22</span>,<span class="number">17</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">14</span>,<span class="number">19</span>,<span class="number">24</span>,<span class="number">20</span>,<span class="number">16</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">13</span>,<span class="number">7</span>,<span class="number">23</span>,<span class="number">12</span>,<span class="number">8</span>,<span class="number">21</span>,<span class="number">18</span> &#125;, <span class="comment">//wheel 2 i</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">19</span>,<span class="number">0</span>,<span class="number">6</span>,<span class="number">1</span>,<span class="number">15</span>,<span class="number">2</span>,<span class="number">18</span>,<span class="number">3</span>,<span class="number">16</span>,<span class="number">4</span>,<span class="number">20</span>,<span class="number">5</span>,<span class="number">21</span>,<span class="number">13</span>,<span class="number">25</span>,<span class="number">7</span>,<span class="number">24</span>,<span class="number">8</span>,<span class="number">23</span>,<span class="number">9</span>,<span class="number">22</span>,<span class="number">11</span>,<span class="number">17</span>,<span class="number">10</span>,<span class="number">14</span>,<span class="number">12</span>,</span><br><span class="line">      <span class="number">19</span>,<span class="number">0</span>,<span class="number">6</span>,<span class="number">1</span>,<span class="number">15</span>,<span class="number">2</span>,<span class="number">18</span>,<span class="number">3</span>,<span class="number">16</span>,<span class="number">4</span>,<span class="number">20</span>,<span class="number">5</span>,<span class="number">21</span>,<span class="number">13</span>,<span class="number">25</span>,<span class="number">7</span>,<span class="number">24</span>,<span class="number">8</span>,<span class="number">23</span>,<span class="number">9</span>,<span class="number">22</span>,<span class="number">11</span>,<span class="number">17</span>,<span class="number">10</span>,<span class="number">14</span>,<span class="number">12</span>,</span><br><span class="line">      <span class="number">19</span>,<span class="number">0</span>,<span class="number">6</span>,<span class="number">1</span>,<span class="number">15</span>,<span class="number">2</span>,<span class="number">18</span>,<span class="number">3</span>,<span class="number">16</span>,<span class="number">4</span>,<span class="number">20</span>,<span class="number">5</span>,<span class="number">21</span>,<span class="number">13</span>,<span class="number">25</span>,<span class="number">7</span>,<span class="number">24</span>,<span class="number">8</span>,<span class="number">23</span>,<span class="number">9</span>,<span class="number">22</span>,<span class="number">11</span>,<span class="number">17</span>,<span class="number">10</span>,<span class="number">14</span>,<span class="number">12</span> &#125;, <span class="comment">//wheel 3 i</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">7</span>,<span class="number">25</span>,<span class="number">22</span>,<span class="number">21</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">13</span>,<span class="number">11</span>,<span class="number">6</span>,<span class="number">20</span>,<span class="number">15</span>,<span class="number">23</span>,<span class="number">16</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">12</span>,<span class="number">1</span>,<span class="number">18</span>,<span class="number">10</span>,<span class="number">3</span>,<span class="number">24</span>,<span class="number">14</span>,<span class="number">8</span>,<span class="number">5</span>,</span><br><span class="line">      <span class="number">7</span>,<span class="number">25</span>,<span class="number">22</span>,<span class="number">21</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">13</span>,<span class="number">11</span>,<span class="number">6</span>,<span class="number">20</span>,<span class="number">15</span>,<span class="number">23</span>,<span class="number">16</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">12</span>,<span class="number">1</span>,<span class="number">18</span>,<span class="number">10</span>,<span class="number">3</span>,<span class="number">24</span>,<span class="number">14</span>,<span class="number">8</span>,<span class="number">5</span>,</span><br><span class="line">      <span class="number">7</span>,<span class="number">25</span>,<span class="number">22</span>,<span class="number">21</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">13</span>,<span class="number">11</span>,<span class="number">6</span>,<span class="number">20</span>,<span class="number">15</span>,<span class="number">23</span>,<span class="number">16</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">12</span>,<span class="number">1</span>,<span class="number">18</span>,<span class="number">10</span>,<span class="number">3</span>,<span class="number">24</span>,<span class="number">14</span>,<span class="number">8</span>,<span class="number">5</span> &#125;, <span class="comment">//wheel 4 i</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">16</span>,<span class="number">2</span>,<span class="number">24</span>,<span class="number">11</span>,<span class="number">23</span>,<span class="number">22</span>,<span class="number">4</span>,<span class="number">13</span>,<span class="number">5</span>,<span class="number">19</span>,<span class="number">25</span>,<span class="number">14</span>,<span class="number">18</span>,<span class="number">12</span>,<span class="number">21</span>,<span class="number">9</span>,<span class="number">20</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">15</span>,<span class="number">7</span>,<span class="number">1</span>,</span><br><span class="line">      <span class="number">16</span>,<span class="number">2</span>,<span class="number">24</span>,<span class="number">11</span>,<span class="number">23</span>,<span class="number">22</span>,<span class="number">4</span>,<span class="number">13</span>,<span class="number">5</span>,<span class="number">19</span>,<span class="number">25</span>,<span class="number">14</span>,<span class="number">18</span>,<span class="number">12</span>,<span class="number">21</span>,<span class="number">9</span>,<span class="number">20</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">15</span>,<span class="number">7</span>,<span class="number">1</span>,</span><br><span class="line">      <span class="number">16</span>,<span class="number">2</span>,<span class="number">24</span>,<span class="number">11</span>,<span class="number">23</span>,<span class="number">22</span>,<span class="number">4</span>,<span class="number">13</span>,<span class="number">5</span>,<span class="number">19</span>,<span class="number">25</span>,<span class="number">14</span>,<span class="number">18</span>,<span class="number">12</span>,<span class="number">21</span>,<span class="number">9</span>,<span class="number">20</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">15</span>,<span class="number">7</span>,<span class="number">1</span> &#125;, <span class="comment">//wheel 5 i</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">18</span>,<span class="number">10</span>,<span class="number">23</span>,<span class="number">16</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">13</span>,<span class="number">22</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">21</span>,<span class="number">06</span>,<span class="number">12</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">15</span>,<span class="number">19</span>,<span class="number">24</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">25</span>,<span class="number">20</span>,<span class="number">8</span>,<span class="number">14</span>,</span><br><span class="line">      <span class="number">18</span>,<span class="number">10</span>,<span class="number">23</span>,<span class="number">16</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">13</span>,<span class="number">22</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">21</span>,<span class="number">06</span>,<span class="number">12</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">15</span>,<span class="number">19</span>,<span class="number">24</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">25</span>,<span class="number">20</span>,<span class="number">8</span>,<span class="number">14</span>,</span><br><span class="line">      <span class="number">18</span>,<span class="number">10</span>,<span class="number">23</span>,<span class="number">16</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">13</span>,<span class="number">22</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">21</span>,<span class="number">06</span>,<span class="number">12</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">15</span>,<span class="number">19</span>,<span class="number">24</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">25</span>,<span class="number">20</span>,<span class="number">8</span>,<span class="number">14</span> &#125;, <span class="comment">//wheel 6 i</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">16</span>,<span class="number">12</span>,<span class="number">6</span>,<span class="number">24</span>,<span class="number">21</span>,<span class="number">15</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">17</span>,<span class="number">2</span>,<span class="number">22</span>,<span class="number">19</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">13</span>,<span class="number">20</span>,<span class="number">23</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">25</span>,<span class="number">14</span>,<span class="number">18</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">1</span>,</span><br><span class="line">      <span class="number">16</span>,<span class="number">12</span>,<span class="number">6</span>,<span class="number">24</span>,<span class="number">21</span>,<span class="number">15</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">17</span>,<span class="number">2</span>,<span class="number">22</span>,<span class="number">19</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">13</span>,<span class="number">20</span>,<span class="number">23</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">25</span>,<span class="number">14</span>,<span class="number">18</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">1</span>,</span><br><span class="line">      <span class="number">16</span>,<span class="number">12</span>,<span class="number">6</span>,<span class="number">24</span>,<span class="number">21</span>,<span class="number">15</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">17</span>,<span class="number">2</span>,<span class="number">22</span>,<span class="number">19</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">13</span>,<span class="number">20</span>,<span class="number">23</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">25</span>,<span class="number">14</span>,<span class="number">18</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">1</span> &#125;, <span class="comment">//wheel 7 i</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">16</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">13</span>,<span class="number">18</span>,<span class="number">0</span>,<span class="number">24</span>,<span class="number">3</span>,<span class="number">21</span>,<span class="number">10</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">17</span>,<span class="number">20</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">2</span>,<span class="number">15</span>,<span class="number">11</span>,<span class="number">4</span>,<span class="number">22</span>,<span class="number">25</span>,<span class="number">19</span>,<span class="number">6</span>,<span class="number">23</span>,<span class="number">14</span>,</span><br><span class="line">      <span class="number">16</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">13</span>,<span class="number">18</span>,<span class="number">0</span>,<span class="number">24</span>,<span class="number">3</span>,<span class="number">21</span>,<span class="number">10</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">17</span>,<span class="number">20</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">2</span>,<span class="number">15</span>,<span class="number">11</span>,<span class="number">4</span>,<span class="number">22</span>,<span class="number">25</span>,<span class="number">19</span>,<span class="number">6</span>,<span class="number">23</span>,<span class="number">14</span>,</span><br><span class="line">      <span class="number">16</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">13</span>,<span class="number">18</span>,<span class="number">0</span>,<span class="number">24</span>,<span class="number">3</span>,<span class="number">21</span>,<span class="number">10</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">17</span>,<span class="number">20</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">2</span>,<span class="number">15</span>,<span class="number">11</span>,<span class="number">4</span>,<span class="number">22</span>,<span class="number">25</span>,<span class="number">19</span>,<span class="number">6</span>,<span class="number">23</span>,<span class="number">14</span> &#125;, <span class="comment">//wheel 8 i</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">17</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">14</span>,<span class="number">1</span>,<span class="number">21</span>,<span class="number">20</span>,<span class="number">23</span>,<span class="number">7</span>,<span class="number">3</span>,<span class="number">18</span>,<span class="number">0</span>,<span class="number">13</span>,<span class="number">6</span>,<span class="number">24</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">16</span>,<span class="number">22</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">19</span>,</span><br><span class="line">      <span class="number">17</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">14</span>,<span class="number">1</span>,<span class="number">21</span>,<span class="number">20</span>,<span class="number">23</span>,<span class="number">7</span>,<span class="number">3</span>,<span class="number">18</span>,<span class="number">0</span>,<span class="number">13</span>,<span class="number">6</span>,<span class="number">24</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">16</span>,<span class="number">22</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">19</span>,</span><br><span class="line">      <span class="number">17</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">14</span>,<span class="number">1</span>,<span class="number">21</span>,<span class="number">20</span>,<span class="number">23</span>,<span class="number">7</span>,<span class="number">3</span>,<span class="number">18</span>,<span class="number">0</span>,<span class="number">13</span>,<span class="number">6</span>,<span class="number">24</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">16</span>,<span class="number">22</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">19</span> &#125;, <span class="comment">//Beta i</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="number">4</span>,<span class="number">11</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">7</span>,<span class="number">0</span>,<span class="number">23</span>,<span class="number">9</span>,<span class="number">13</span>,<span class="number">24</span>,<span class="number">3</span>,<span class="number">17</span>,<span class="number">10</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">19</span>,<span class="number">18</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">12</span>,<span class="number">6</span>,<span class="number">22</span>,<span class="number">16</span>,<span class="number">21</span>,<span class="number">14</span>,<span class="number">20</span>,</span><br><span class="line">      <span class="number">4</span>,<span class="number">11</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">7</span>,<span class="number">0</span>,<span class="number">23</span>,<span class="number">9</span>,<span class="number">13</span>,<span class="number">24</span>,<span class="number">3</span>,<span class="number">17</span>,<span class="number">10</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">19</span>,<span class="number">18</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">12</span>,<span class="number">6</span>,<span class="number">22</span>,<span class="number">16</span>,<span class="number">21</span>,<span class="number">14</span>,<span class="number">20</span>,</span><br><span class="line">      <span class="number">4</span>,<span class="number">11</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">7</span>,<span class="number">0</span>,<span class="number">23</span>,<span class="number">9</span>,<span class="number">13</span>,<span class="number">24</span>,<span class="number">3</span>,<span class="number">17</span>,<span class="number">10</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">19</span>,<span class="number">18</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">12</span>,<span class="number">6</span>,<span class="number">22</span>,<span class="number">16</span>,<span class="number">21</span>,<span class="number">14</span>,<span class="number">20</span> &#125; <span class="comment">//Gamma i</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Define a 2D Array for keeping the wheel locations &amp; positions</span></span><br><span class="line"><span class="keyword">int</span> wheel[<span class="number">3</span>][<span class="number">3</span>] = &#123;</span><br><span class="line">    &#123;<span class="number">26</span>,<span class="number">0</span>,<span class="number">0</span>&#125;, &#123;<span class="number">26</span>,<span class="number">0</span>,<span class="number">0</span>&#125;, &#123;<span class="number">26</span>,<span class="number">0</span>,<span class="number">0</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">int</span> reflect[<span class="number">2</span>] = &#123;<span class="number">1</span>, <span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Define Array for plugbord values 25 x2 position 0 holds use position 1 holds value int plugu holds the total nomber of plugs used (10 max)</span></span><br><span class="line"><span class="keyword">int</span> plugval[<span class="number">2</span>][<span class="number">26</span>] = &#123;</span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span> &#125;,</span><br><span class="line">    &#123; <span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span>,<span class="number">18</span>,<span class="number">19</span>,<span class="number">20</span>,<span class="number">21</span>,<span class="number">22</span>,<span class="number">23</span>,<span class="number">24</span>,<span class="number">25</span> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">int</span> pluguse = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> paindex = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> pbindex = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">// Initialize all 38 LED pins as Output </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt;= <span class="number">11</span>; index++) &#123;</span><br><span class="line">        pinMode(lamppin[index], OUTPUT);</span><br><span class="line">        digitalWrite(lamppin[index],<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt;= <span class="number">3</span>; index++) &#123;</span><br><span class="line">        pinMode(anode[index], OUTPUT);</span><br><span class="line">        digitalWrite(anode[index], <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt;= <span class="number">16</span>; index++) &#123;</span><br><span class="line">        pinMode(segment[index], OUTPUT);</span><br><span class="line">        digitalWrite(segment[index], <span class="number">1</span>);</span><br><span class="line">    &#125; </span><br><span class="line">    pinMode(led1, OUTPUT);</span><br><span class="line">    pinMode(led2, OUTPUT);</span><br><span class="line">    pinMode(led3, OUTPUT);</span><br><span class="line">    pinMode(led4, OUTPUT);</span><br><span class="line">    pinMode(led5, OUTPUT);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Serial.begin(9600);</span></span><br><span class="line"><span class="comment">// Initialize all 4 pusbutton pins as Input   </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt;= <span class="number">3</span>; index++) &#123;</span><br><span class="line">        pinMode(inpin[index], INPUT);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">// Keyboard debounce &amp; test for new key pressed </span></span><br><span class="line">    time = millis();</span><br><span class="line">    <span class="keyword">if</span> (time &gt; otime + <span class="number">500</span>) keyval = readkbde();</span><br><span class="line">    <span class="keyword">if</span> ((keyval == <span class="number">45</span>) &amp;&amp; (windex == <span class="number">1</span>)) modeselect();</span><br><span class="line"><span class="comment">// The whole Enigma machine operation revolves around which Operating Mode is current </span></span><br><span class="line">    <span class="keyword">if</span> (mode == <span class="number">0</span>) mode0();</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (mode == <span class="number">1</span>) mode1();</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (mode == <span class="number">2</span>) mode2();</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (mode == <span class="number">3</span>) mode3();</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (mode == <span class="number">4</span>) mode4();</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (mode == <span class="number">5</span>) mode5();</span><br><span class="line">    <span class="keyword">else</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Serial.println(keyval); // for debuging prints keybord value to serial monitor// for run or del</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This function takes care of figuring out which key has been pressed &amp; returns a unique Integer</span></span><br><span class="line"><span class="keyword">int</span> readkbde() &#123;</span><br><span class="line">    <span class="keyword">int</span> kval = <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt;= <span class="number">3</span>; index++) &#123;</span><br><span class="line">        inval[index] = analogRead(inpin[index]);</span><br><span class="line">    &#125; <span class="comment">//Reads analog input values</span></span><br><span class="line">    <span class="keyword">if</span> ((inval[<span class="number">0</span>] &gt; <span class="number">925</span>) &amp;&amp; (inval[<span class="number">1</span>] &gt; <span class="number">828</span>) &amp;&amp; (inval[<span class="number">2</span>] &gt; <span class="number">730</span>) &amp;&amp; (inval[<span class="number">3</span>] &gt; <span class="number">828</span>)) kval = <span class="number">100</span>; <span class="comment">// no key press</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">0</span>] &lt; <span class="number">924</span>) &amp;&amp; (inval[<span class="number">0</span>] &gt; <span class="number">915</span>)) kval = <span class="number">49</span>; <span class="comment">//up arrow 4</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">0</span>] &lt; <span class="number">914</span>) &amp;&amp; (inval[<span class="number">0</span>] &gt; <span class="number">903</span>)) kval = <span class="number">48</span>; <span class="comment">//up arrow 3</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">0</span>] &lt; <span class="number">902</span>) &amp;&amp; (inval[<span class="number">0</span>] &gt; <span class="number">887</span>)) kval = <span class="number">47</span>; <span class="comment">//up arrow 2</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">0</span>] &lt; <span class="number">886</span>) &amp;&amp; (inval[<span class="number">0</span>] &gt; <span class="number">865</span>)) kval = <span class="number">46</span>; <span class="comment">//up arrow 1</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">0</span>] &lt; <span class="number">864</span>) &amp;&amp; (inval[<span class="number">0</span>] &gt; <span class="number">836</span>)) kval = <span class="number">45</span>; <span class="comment">//mode</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">0</span>] &lt; <span class="number">834</span>) &amp;&amp; (inval[<span class="number">0</span>] &gt; <span class="number">793</span>)) kval = <span class="number">44</span>; <span class="comment">//enter</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">0</span>] &lt; <span class="number">792</span>) &amp;&amp; (inval[<span class="number">0</span>] &gt; <span class="number">724</span>)) kval = <span class="number">43</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">0</span>] &lt; <span class="number">723</span>) &amp;&amp; (inval[<span class="number">0</span>] &gt; <span class="number">594</span>)) kval = <span class="number">42</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">0</span>] &lt; <span class="number">593</span>) &amp;&amp; (inval[<span class="number">0</span>] &gt; <span class="number">260</span>)) kval = <span class="number">41</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (inval[<span class="number">0</span>] &lt; <span class="number">259</span>) kval = <span class="number">40</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">1</span>] &lt; <span class="number">827</span>) &amp;&amp; (inval[<span class="number">1</span>] &gt; <span class="number">807</span>)) kval = <span class="number">14</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">1</span>] &lt; <span class="number">806</span>) &amp;&amp; (inval[<span class="number">1</span>] &gt; <span class="number">781</span>)) kval = <span class="number">8</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">1</span>] &lt; <span class="number">780</span>) &amp;&amp; (inval[<span class="number">1</span>] &gt; <span class="number">749</span>)) kval = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">1</span>] &lt; <span class="number">748</span>) &amp;&amp; (inval[<span class="number">1</span>] &gt; <span class="number">706</span>)) kval = <span class="number">25</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">1</span>] &lt; <span class="number">705</span>) &amp;&amp; (inval[<span class="number">1</span>] &gt; <span class="number">647</span>)) kval = <span class="number">19</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">1</span>] &lt; <span class="number">646</span>) &amp;&amp; (inval[<span class="number">1</span>] &gt; <span class="number">555</span>)) kval = <span class="number">17</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">1</span>] &lt; <span class="number">554</span>) &amp;&amp; (inval[<span class="number">1</span>] &gt; <span class="number">418</span>)) kval = <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">1</span>] &lt; <span class="number">417</span>) &amp;&amp; (inval[<span class="number">1</span>] &gt; <span class="number">169</span>)) kval = <span class="number">22</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (inval[<span class="number">1</span>] &lt; <span class="number">168</span>) kval = <span class="number">16</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">2</span>] &lt; <span class="number">729</span>) &amp;&amp; (inval[<span class="number">2</span>] &gt; <span class="number">699</span>)) kval = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">2</span>] &lt; <span class="number">698</span>) &amp;&amp; (inval[<span class="number">2</span>] &gt; <span class="number">660</span>)) kval = <span class="number">9</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">2</span>] &lt; <span class="number">659</span>) &amp;&amp; (inval[<span class="number">2</span>] &gt; <span class="number">611</span>)) kval = <span class="number">7</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">2</span>] &lt; <span class="number">610</span>) &amp;&amp; (inval[<span class="number">2</span>] &gt; <span class="number">547</span>)) kval = <span class="number">6</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">2</span>] &lt; <span class="number">546</span>) &amp;&amp; (inval[<span class="number">2</span>] &gt; <span class="number">455</span>)) kval = <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">2</span>] &lt; <span class="number">454</span>) &amp;&amp; (inval[<span class="number">2</span>] &gt; <span class="number">331</span>)) kval = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">2</span>] &lt; <span class="number">330</span>) &amp;&amp; (inval[<span class="number">2</span>] &gt; <span class="number">127</span>)) kval = <span class="number">18</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (inval[<span class="number">2</span>] &lt; <span class="number">126</span>) kval = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">3</span>] &lt; <span class="number">827</span>) &amp;&amp; (inval[<span class="number">3</span>] &gt; <span class="number">807</span>)) kval = <span class="number">11</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">3</span>] &lt; <span class="number">806</span>) &amp;&amp; (inval[<span class="number">3</span>] &gt; <span class="number">781</span>)) kval = <span class="number">12</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">3</span>] &lt; <span class="number">780</span>) &amp;&amp; (inval[<span class="number">3</span>] &gt; <span class="number">749</span>)) kval = <span class="number">13</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">3</span>] &lt; <span class="number">748</span>) &amp;&amp; (inval[<span class="number">3</span>] &gt; <span class="number">706</span>)) kval = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">3</span>] &lt; <span class="number">705</span>) &amp;&amp; (inval[<span class="number">3</span>] &gt; <span class="number">647</span>)) kval = <span class="number">21</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">3</span>] &lt; <span class="number">646</span>) &amp;&amp; (inval[<span class="number">3</span>] &gt; <span class="number">555</span>)) kval = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">3</span>] &lt; <span class="number">554</span>) &amp;&amp; (inval[<span class="number">3</span>] &gt; <span class="number">418</span>)) kval = <span class="number">23</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((inval[<span class="number">3</span>] &lt; <span class="number">417</span>) &amp;&amp; (inval[<span class="number">3</span>] &gt; <span class="number">169</span>)) kval = <span class="number">24</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (inval[<span class="number">3</span>] &lt; <span class="number">169</span>) kval = <span class="number">15</span>;</span><br><span class="line">    <span class="keyword">else</span> kval = <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">if</span> (kval &lt; <span class="number">99</span>) otime = millis(); <span class="comment">// Starts key debounce timer</span></span><br><span class="line">    <span class="keyword">if</span> ((kval &gt;= <span class="number">0</span>) &amp;&amp; (kval &lt;= <span class="number">99</span>)) windex = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// windex showing true (1) indicates the return of a fresh key stroke</span></span><br><span class="line">    <span class="keyword">return</span> kval;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Function to change operating Mode</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">modeselect</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    mode++;</span><br><span class="line">    <span class="keyword">if</span> (mode &gt;= <span class="number">6</span>) mode = <span class="number">0</span>;</span><br><span class="line">    windex = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Default Mode: Enigma is a Typewriter</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mode0</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ((keyval &gt;= <span class="number">0</span>) &amp;&amp; (keyval &lt;= <span class="number">25</span>)) lampval = keyval;</span><br><span class="line">    lampita();</span><br><span class="line">    marquee();</span><br><span class="line">    lampitb();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Select the Rotors &amp; the Reflector </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mode1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> index;</span><br><span class="line">    digitalWrite(led1, HIGH);</span><br><span class="line">    <span class="keyword">if</span> (windex == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((keyval == <span class="number">43</span>) || (keyval == <span class="number">46</span>)) &#123;</span><br><span class="line">            reflect[<span class="number">0</span>]++;</span><br><span class="line">            <span class="keyword">if</span> (reflect[<span class="number">0</span>] &gt; <span class="number">2</span>) &#123;</span><br><span class="line">                reflect[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            windex = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (windex == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">47</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (index = wheel[<span class="number">2</span>][<span class="number">0</span>]; (index == wheel[<span class="number">1</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">0</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">2</span>][<span class="number">0</span>]); index++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (index &gt; <span class="number">33</span>) index = <span class="number">26</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            wheel[<span class="number">2</span>][<span class="number">0</span>] = index;</span><br><span class="line">            windex = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (windex == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">48</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (index = wheel[<span class="number">1</span>][<span class="number">0</span>]; (index == wheel[<span class="number">2</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">0</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">1</span>][<span class="number">0</span>]); index++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (index &gt; <span class="number">33</span>) index = <span class="number">26</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            wheel[<span class="number">1</span>][<span class="number">0</span>] = index;</span><br><span class="line">            windex = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (windex == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">49</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (index = wheel[<span class="number">0</span>][<span class="number">0</span>]; (index == wheel[<span class="number">2</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">1</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">0</span>][<span class="number">0</span>]); index++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (index &gt; <span class="number">33</span>) index = <span class="number">26</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            wheel[<span class="number">0</span>][<span class="number">0</span>] = index;</span><br><span class="line">            windex = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (windex == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">42</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (index = wheel[<span class="number">2</span>][<span class="number">0</span>]; (index == wheel[<span class="number">1</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">0</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">2</span>][<span class="number">0</span>]); index--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (index &lt; <span class="number">28</span>) index = <span class="number">35</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            wheel[<span class="number">2</span>][<span class="number">0</span>] = index;</span><br><span class="line">            windex = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (windex == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">41</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (index = wheel[<span class="number">1</span>][<span class="number">0</span>]; (index == wheel[<span class="number">2</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">0</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">1</span>][<span class="number">0</span>]); index--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (index &lt; <span class="number">28</span>) index = <span class="number">35</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            wheel[<span class="number">1</span>][<span class="number">0</span>] = index;</span><br><span class="line">            windex = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (windex == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">40</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (index = wheel[<span class="number">0</span>][<span class="number">0</span>]; (index == wheel[<span class="number">2</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">1</span>][<span class="number">0</span>]) || (index == wheel[<span class="number">0</span>][<span class="number">0</span>]); index--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (index &lt; <span class="number">28</span>) index = <span class="number">35</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            wheel[<span class="number">0</span>][<span class="number">0</span>] = index;</span><br><span class="line">            windex = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    dig1 = reflect[<span class="number">0</span>]; dig2 = wheel[<span class="number">2</span>][<span class="number">0</span>];  dig3 = wheel[<span class="number">1</span>][<span class="number">0</span>]; dig4 = wheel[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">    nixisend();</span><br><span class="line">    dig1 = <span class="number">37</span>; dig2 = <span class="number">37</span>; dig3 = <span class="number">37</span>; dig4 = <span class="number">37</span>;</span><br><span class="line">    digitalWrite(led1, LOW);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Position the Inner setting of each Rotor </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mode2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    digitalWrite(led2, HIGH);</span><br><span class="line">    <span class="keyword">if</span> (windex == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">47</span>) &#123; wheel[<span class="number">2</span>][<span class="number">1</span>]++; <span class="keyword">if</span> (wheel[<span class="number">2</span>][<span class="number">1</span>] &gt; <span class="number">25</span>) wheel[<span class="number">2</span>][<span class="number">1</span>] = <span class="number">0</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">48</span>) &#123; wheel[<span class="number">1</span>][<span class="number">1</span>]++; <span class="keyword">if</span> (wheel[<span class="number">1</span>][<span class="number">1</span>] &gt; <span class="number">25</span>) wheel[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">0</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">49</span>) &#123; wheel[<span class="number">0</span>][<span class="number">1</span>]++; <span class="keyword">if</span> (wheel[<span class="number">0</span>][<span class="number">1</span>] &gt; <span class="number">25</span>) wheel[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">0</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">42</span>) &#123; wheel[<span class="number">2</span>][<span class="number">1</span>]--; <span class="keyword">if</span> (wheel[<span class="number">2</span>][<span class="number">1</span>] &lt; <span class="number">0</span>) wheel[<span class="number">2</span>][<span class="number">1</span>] = <span class="number">25</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">41</span>) &#123; wheel[<span class="number">1</span>][<span class="number">1</span>]--; <span class="keyword">if</span> (wheel[<span class="number">1</span>][<span class="number">1</span>] &lt; <span class="number">0</span>) wheel[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">25</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">40</span>) &#123; wheel[<span class="number">0</span>][<span class="number">1</span>]--; <span class="keyword">if</span> (wheel[<span class="number">0</span>][<span class="number">1</span>] &lt; <span class="number">0</span>) wheel[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">25</span>; &#125;</span><br><span class="line">        windex = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dig2 = wheel[<span class="number">2</span>][<span class="number">1</span>]; dig3 = wheel[<span class="number">1</span>][<span class="number">1</span>]; dig4 = wheel[<span class="number">0</span>][<span class="number">1</span>]; dig1 = <span class="number">0</span>;</span><br><span class="line">    nixisend();</span><br><span class="line">    dig1 = <span class="number">37</span>; dig2 = <span class="number">37</span>; dig3 = <span class="number">37</span>; dig4 = <span class="number">37</span>;</span><br><span class="line">    digitalWrite(led2, LOW);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Position the Start character of each Wheel </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mode3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    digitalWrite(led3, HIGH);</span><br><span class="line">    <span class="keyword">if</span> (windex == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">46</span>) &#123; reflect[<span class="number">1</span>]++; <span class="keyword">if</span> (reflect[<span class="number">1</span>] &gt; <span class="number">25</span>) reflect[<span class="number">1</span>] = <span class="number">0</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">47</span>) &#123; wheel[<span class="number">2</span>][<span class="number">2</span>]++; <span class="keyword">if</span> (wheel[<span class="number">2</span>][<span class="number">2</span>] &gt; <span class="number">25</span>) wheel[<span class="number">2</span>][<span class="number">2</span>] = <span class="number">0</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">48</span>) &#123; wheel[<span class="number">1</span>][<span class="number">2</span>]++; <span class="keyword">if</span> (wheel[<span class="number">1</span>][<span class="number">2</span>] &gt; <span class="number">25</span>) wheel[<span class="number">1</span>][<span class="number">2</span>] = <span class="number">0</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">49</span>) &#123; wheel[<span class="number">0</span>][<span class="number">2</span>]++; <span class="keyword">if</span> (wheel[<span class="number">0</span>][<span class="number">2</span>] &gt; <span class="number">25</span>) wheel[<span class="number">0</span>][<span class="number">2</span>] = <span class="number">0</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">43</span>) &#123; reflect[<span class="number">1</span>]--; <span class="keyword">if</span> (reflect[<span class="number">1</span>] &lt; <span class="number">0</span>) reflect[<span class="number">1</span>] = <span class="number">25</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">42</span>) &#123; wheel[<span class="number">2</span>][<span class="number">2</span>]--; <span class="keyword">if</span> (wheel[<span class="number">2</span>][<span class="number">2</span>] &lt; <span class="number">0</span>) wheel[<span class="number">2</span>][<span class="number">2</span>] = <span class="number">25</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">41</span>) &#123; wheel[<span class="number">1</span>][<span class="number">2</span>]--; <span class="keyword">if</span> (wheel[<span class="number">1</span>][<span class="number">2</span>] &lt; <span class="number">0</span>) wheel[<span class="number">1</span>][<span class="number">2</span>] = <span class="number">25</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyval == <span class="number">40</span>) &#123; wheel[<span class="number">0</span>][<span class="number">2</span>]--; <span class="keyword">if</span> (wheel[<span class="number">0</span>][<span class="number">2</span>] &lt; <span class="number">0</span>) wheel[<span class="number">0</span>][<span class="number">2</span>] = <span class="number">25</span>; &#125;</span><br><span class="line">        windex = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dig1 = reflect[<span class="number">1</span>]; dig2 = wheel[<span class="number">2</span>][<span class="number">2</span>]; dig3 = wheel[<span class="number">1</span>][<span class="number">2</span>]; dig4 = wheel[<span class="number">0</span>][<span class="number">2</span>];</span><br><span class="line">    nixisend();</span><br><span class="line">    dig1 = <span class="number">37</span>; dig2 = <span class="number">37</span>; dig3 = <span class="number">37</span>; dig4 = <span class="number">37</span>;</span><br><span class="line">    digitalWrite(led3, LOW);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Define the Plugboard pairs </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mode4</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">    digitalWrite(led4, HIGH);</span><br><span class="line">    <span class="keyword">if</span> (pluguse &lt;= <span class="number">9</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (plugval[<span class="number">0</span>][paindex] == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (index = paindex;(index == paindex) || (index == pbindex) || (plugval[<span class="number">0</span>][index] == <span class="number">1</span>); index++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (index &gt; <span class="number">24</span>) index = <span class="number">-1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            paindex = index;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (plugval[<span class="number">0</span>][pbindex] == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (index = pbindex;(index == pbindex) || (index == paindex) || (plugval[<span class="number">0</span>][index] == <span class="number">1</span>); index++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (index &gt; <span class="number">24</span>) index = <span class="number">-1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            pbindex = index;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (windex == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (keyval == <span class="number">46</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (index = paindex;(index == paindex) || (index == pbindex) || (plugval[<span class="number">0</span>][index] == <span class="number">1</span>); index++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (index &gt; <span class="number">24</span>) index = <span class="number">-1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                paindex = index;</span><br><span class="line">                windex = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (keyval == <span class="number">43</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (index = paindex;(index == paindex) || (index == pbindex) || (plugval[<span class="number">0</span>][index] == <span class="number">1</span>); index--) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (index &lt; <span class="number">1</span>) index = <span class="number">26</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                paindex = index;</span><br><span class="line">                windex = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (keyval == <span class="number">49</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (index = pbindex;(index == pbindex) || (index == paindex) || (plugval[<span class="number">0</span>][index] == <span class="number">1</span>); index++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (index &gt; <span class="number">24</span>) index = <span class="number">-1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                pbindex = index;</span><br><span class="line">                windex = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (keyval == <span class="number">40</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (index = pbindex;(index == pbindex) || (index == paindex) || (plugval[<span class="number">0</span>][index] == <span class="number">1</span>); index--) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (index &lt; <span class="number">1</span>) index = <span class="number">26</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                pbindex = index;</span><br><span class="line">                windex = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (keyval == <span class="number">44</span>) &#123;</span><br><span class="line">                plugval[<span class="number">0</span>][paindex] = <span class="number">1</span>;</span><br><span class="line">                plugval[<span class="number">1</span>][paindex] = pbindex;</span><br><span class="line">                plugval[<span class="number">0</span>][pbindex] = <span class="number">1</span>;</span><br><span class="line">                plugval[<span class="number">1</span>][pbindex] = paindex;</span><br><span class="line">                windex = <span class="number">0</span>;</span><br><span class="line">                pluguse++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        dig1 = paindex; dig2 = <span class="number">19</span>; dig3 = <span class="number">14</span>; dig4 = pbindex;</span><br><span class="line">        nixisend();</span><br><span class="line">        dig1 = <span class="number">37</span>; dig2 = <span class="number">37</span>; dig3 = <span class="number">37</span>; dig4 = <span class="number">37</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> done();</span><br><span class="line">    digitalWrite(led4, LOW);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This is Normal Operation Mode to Encrypt/Decrypt </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mode5</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> pv = <span class="number">0</span>;</span><br><span class="line">    digitalWrite(led5, HIGH);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ((keyval &gt;= <span class="number">0</span>) &amp;&amp; (keyval &lt;= <span class="number">25</span>) &amp;&amp; (windex == <span class="number">1</span>)) &#123;</span><br><span class="line">        procesvala = keyval;</span><br><span class="line">        indexwheels();</span><br><span class="line">    &#125;</span><br><span class="line">    windex = <span class="number">0</span>;</span><br><span class="line">    procesval = procesvala;</span><br><span class="line">    procesval = plugval[<span class="number">1</span>][procesval];</span><br><span class="line">    <span class="comment">//Serial.print(procesval); Serial.print("");</span></span><br><span class="line"></span><br><span class="line">    pv = procesval + (wheel[<span class="number">0</span>][<span class="number">2</span>] - wheel[<span class="number">0</span>][<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">if</span> (pv &lt; <span class="number">0</span>) pv += <span class="number">26</span>; </span><br><span class="line">    procesval = rotorvals[wheel[<span class="number">0</span>][<span class="number">0</span>] - <span class="number">27</span>][pv];</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt;= <span class="number">100</span>) procesval -= <span class="number">100</span>;</span><br><span class="line">    procesval = (procesval - (wheel[<span class="number">0</span>][<span class="number">2</span>] - wheel[<span class="number">0</span>][<span class="number">1</span>]));</span><br><span class="line">    <span class="keyword">if</span> (procesval &lt; <span class="number">0</span>) procesval += <span class="number">26</span>;</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt; <span class="number">25</span>) procesval -= <span class="number">26</span>;</span><br><span class="line">    <span class="comment">//Serial.print(procesval); Serial.print("   ");</span></span><br><span class="line"></span><br><span class="line">    pv = procesval + (wheel[<span class="number">1</span>][<span class="number">2</span>] - wheel[<span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">if</span> (pv &lt; <span class="number">0</span>) pv += pv + <span class="number">26</span>;</span><br><span class="line">    procesval = rotorvals[wheel[<span class="number">1</span>][<span class="number">0</span>] - <span class="number">27</span>][pv];</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt;= <span class="number">100</span>) procesval -= <span class="number">100</span>;</span><br><span class="line">    procesval = (procesval - (wheel[<span class="number">1</span>][<span class="number">2</span>] - wheel[<span class="number">1</span>][<span class="number">1</span>]));</span><br><span class="line">    <span class="keyword">if</span> (procesval &lt; <span class="number">0</span>) procesval += <span class="number">26</span>;</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt; <span class="number">25</span>) procesval -= <span class="number">26</span>;</span><br><span class="line">    <span class="comment">//Serial.print(procesval); Serial.print("   ");</span></span><br><span class="line"></span><br><span class="line">    pv = procesval + (wheel[<span class="number">2</span>][<span class="number">2</span>] - wheel[<span class="number">2</span>][<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">if</span> (pv &lt; <span class="number">0</span>) pv += <span class="number">26</span>;</span><br><span class="line">    procesval = rotorvals[wheel[<span class="number">2</span>][<span class="number">0</span>] - <span class="number">27</span>][pv];</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt;= <span class="number">100</span>) procesval -= <span class="number">100</span>;</span><br><span class="line">    procesval = (procesval - (wheel[<span class="number">2</span>][<span class="number">2</span>] - wheel[<span class="number">2</span>][<span class="number">1</span>]));</span><br><span class="line">    <span class="keyword">if</span> (procesval &lt; <span class="number">0</span>) procesval += <span class="number">26</span>;</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt; <span class="number">25</span>) procesval -= <span class="number">26</span>;</span><br><span class="line">    <span class="comment">//Serial.print(procesval); Serial.print("   ");</span></span><br><span class="line"></span><br><span class="line">    pv = procesval;</span><br><span class="line">    procesval = rotorvals[reflect[<span class="number">0</span>] + <span class="number">7</span>][pv];</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt;= <span class="number">100</span>) procesval -= <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">if</span> (procesval &lt; <span class="number">0</span>) procesval += <span class="number">26</span>;</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt; <span class="number">25</span>) procesval -= <span class="number">26</span>;</span><br><span class="line">    <span class="comment">//Serial.print(procesval); Serial.print("   ");</span></span><br><span class="line"></span><br><span class="line">    procesval = rotorvals[reflect[<span class="number">0</span>] + <span class="number">9</span>][procesval];</span><br><span class="line">    <span class="comment">//Serial.print(procesval); Serial.print("   ");</span></span><br><span class="line"></span><br><span class="line">    pv = procesval + <span class="number">26</span>;</span><br><span class="line">    procesval = rotorvali[reflect[<span class="number">0</span>] + <span class="number">7</span>][pv];</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt;= <span class="number">100</span>) procesval -= <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">if</span> (procesval &lt; <span class="number">0</span>) procesval += <span class="number">26</span>;</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt; <span class="number">25</span>) procesval -= <span class="number">26</span>;</span><br><span class="line">    <span class="comment">//Serial.print(procesval); Serial.print("   ");</span></span><br><span class="line"></span><br><span class="line">    pv = procesval + (wheel[<span class="number">2</span>][<span class="number">2</span>] - wheel[<span class="number">2</span>][<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">if</span> (pv &lt; <span class="number">0</span>) pv += <span class="number">26</span>;</span><br><span class="line">    procesval = rotorvali[wheel[<span class="number">2</span>][<span class="number">0</span>] - <span class="number">27</span>][pv];</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt;= <span class="number">100</span>) procesval -= <span class="number">100</span>;</span><br><span class="line">    procesval = (procesval - (wheel[<span class="number">2</span>][<span class="number">2</span>] - wheel[<span class="number">2</span>][<span class="number">1</span>]));</span><br><span class="line">    <span class="keyword">if</span> (procesval &lt; <span class="number">0</span>) procesval += <span class="number">26</span>;</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt; <span class="number">25</span>) procesval -= <span class="number">26</span>;</span><br><span class="line">    <span class="comment">//Serial.print(procesval); Serial.print("   ");</span></span><br><span class="line"></span><br><span class="line">    pv = procesval + (wheel[<span class="number">1</span>][<span class="number">2</span>] - wheel[<span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">if</span> (pv &lt; <span class="number">0</span>) pv += <span class="number">26</span>;</span><br><span class="line">    procesval = rotorvali[wheel[<span class="number">1</span>][<span class="number">0</span>] - <span class="number">27</span>][pv];</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt;= <span class="number">100</span>) procesval -= <span class="number">100</span>;</span><br><span class="line">    procesval = (procesval - (wheel[<span class="number">1</span>][<span class="number">2</span>] - wheel[<span class="number">1</span>][<span class="number">1</span>]));</span><br><span class="line">    <span class="keyword">if</span> (procesval &lt; <span class="number">0</span>) procesval += <span class="number">26</span>;</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt; <span class="number">25</span>) procesval -= <span class="number">26</span>;</span><br><span class="line">    <span class="comment">//Serial.print(procesval); Serial.print("   ");</span></span><br><span class="line"></span><br><span class="line">    pv = procesval + (wheel[<span class="number">0</span>][<span class="number">2</span>] - wheel[<span class="number">0</span>][<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">if</span> (pv &lt; <span class="number">0</span>) pv += <span class="number">26</span>;</span><br><span class="line">    procesval = rotorvali[wheel[<span class="number">0</span>][<span class="number">0</span>] - <span class="number">27</span>][pv];</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt;= <span class="number">100</span>) procesval -= <span class="number">100</span>;</span><br><span class="line">    procesval = (procesval - (wheel[<span class="number">0</span>][<span class="number">2</span>] - wheel[<span class="number">0</span>][<span class="number">1</span>]));</span><br><span class="line">    <span class="keyword">if</span> (procesval &lt; <span class="number">0</span>) procesval += <span class="number">26</span>;</span><br><span class="line">    <span class="keyword">if</span> (procesval &gt; <span class="number">25</span>) procesval -= <span class="number">26</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Serial.print(procesval); Serial.print("   ");</span></span><br><span class="line">    procesval = plugval[<span class="number">1</span>][procesval];</span><br><span class="line"></span><br><span class="line">    lampval = procesval;</span><br><span class="line">    <span class="comment">//Serial.println(lampval);</span></span><br><span class="line">    dig1 = reflect[<span class="number">1</span>]; dig2 = wheel[<span class="number">2</span>][<span class="number">2</span>]; dig3 = wheel[<span class="number">1</span>][<span class="number">2</span>]; dig4 = wheel[<span class="number">0</span>][<span class="number">2</span>];</span><br><span class="line">    lampita();</span><br><span class="line">    nixisend();</span><br><span class="line">    lampitb();</span><br><span class="line">    dig1 = <span class="number">37</span>; dig2 = <span class="number">37</span>; dig3 = <span class="number">37</span>; dig4 = <span class="number">37</span>;</span><br><span class="line">    digitalWrite(led5, LOW);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Helper Function to light the proper key</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">lampita</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    digitalWrite(lamparray[lampval][<span class="number">0</span>], <span class="number">0</span>);</span><br><span class="line">    digitalWrite(lamparray[lampval][<span class="number">1</span>], <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">lampitb</span><span class="params">()</span></span>&#123;</span><br><span class="line">    digitalWrite(lamparray[lampval][<span class="number">0</span>], <span class="number">1</span>);</span><br><span class="line">    digitalWrite(lamparray[lampval][<span class="number">1</span>], <span class="number">1</span>); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Help Function to illuminate"Nixies"</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">nixisend</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    sixteenSegWrite(<span class="number">0</span>, dig1);</span><br><span class="line">    sixteenSegWrite(<span class="number">1</span>, dig2);</span><br><span class="line">    sixteenSegWrite(<span class="number">2</span>, dig3);</span><br><span class="line">    sixteenSegWrite(<span class="number">3</span>, dig4);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">marquee</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    time = millis();</span><br><span class="line">    <span class="keyword">if</span> (mtime &lt; time) &#123;</span><br><span class="line">        mtime = time + <span class="number">400</span>;</span><br><span class="line">        mdex++;</span><br><span class="line">    &#125;</span><br><span class="line">    dig1 = data[mdex];</span><br><span class="line">    dig2 = data[mdex + <span class="number">1</span>];</span><br><span class="line">    dig3 = data[mdex + <span class="number">2</span>];</span><br><span class="line">    dig4 = data[mdex + <span class="number">3</span>];</span><br><span class="line">    <span class="keyword">if</span> (mdex &gt;= <span class="number">31</span>) mdex = <span class="number">0</span>;</span><br><span class="line">    nixisend();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Function that actually turns on each of 17 appropriate segments on each"Nixie"</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sixteenSegWrite</span><span class="params">(<span class="keyword">int</span> digit, <span class="keyword">int</span> character)</span> </span>&#123;</span><br><span class="line">    digitalWrite(anode[digit],<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; <span class="number">17</span>; index++) &#123;</span><br><span class="line">        digitalWrite(segment[index], segmentvals[character][index]);</span><br><span class="line">    &#125;</span><br><span class="line">    delay(<span class="number">7</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt;= <span class="number">16</span>; index++) &#123;</span><br><span class="line">        digitalWrite(segment[index], <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    digitalWrite(anode[digit], <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">done</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    dig1 = <span class="number">3</span>; dig2 = <span class="number">14</span>; dig3 = <span class="number">13</span>; dig4 = <span class="number">4</span>;</span><br><span class="line">    nixisend();</span><br><span class="line">    dig1 = <span class="number">37</span>; dig2 = <span class="number">37</span>; dig3 = <span class="number">37</span>; dig4 = <span class="number">37</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">indexwheels</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//Serial.print(rotorvals[wheel[0][0]-27][wheel[0][2]]);</span></span><br><span class="line">    <span class="comment">//Serial.print("    "); Serial.print(wheel[0][0]-27); Serial.print("    "); Serial.println(wheel[0][2]);</span></span><br><span class="line">    <span class="keyword">if</span> (rotorvals[wheel[<span class="number">0</span>][<span class="number">0</span>] - <span class="number">27</span>][wheel[<span class="number">0</span>][<span class="number">2</span>]] &gt;= <span class="number">100</span>) windex1 = <span class="number">1</span>;</span><br><span class="line">    wheel[<span class="number">0</span>][<span class="number">2</span>]++;</span><br><span class="line">    <span class="keyword">if</span> (wheel[<span class="number">0</span>][<span class="number">2</span>] &gt; <span class="number">25</span>) wheel[<span class="number">0</span>][<span class="number">2</span>] = <span class="number">0</span>;</span><br><span class="line">    windex = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (windex1 == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (rotorvals[wheel[<span class="number">1</span>][<span class="number">0</span>] - <span class="number">27</span>][wheel[<span class="number">1</span>][<span class="number">2</span>]] &gt;= <span class="number">100</span>) windex2 = <span class="number">1</span>;</span><br><span class="line">        wheel[<span class="number">1</span>][<span class="number">2</span>]++;</span><br><span class="line">        <span class="keyword">if</span> (wheel[<span class="number">1</span>][<span class="number">2</span>] &gt; <span class="number">25</span>) wheel[<span class="number">1</span>][<span class="number">2</span>] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    windex1 = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (windex2 == <span class="number">1</span>) &#123;</span><br><span class="line">        wheel[<span class="number">2</span>][<span class="number">2</span>]++;</span><br><span class="line">        <span class="keyword">if</span> (wheel[<span class="number">2</span>][<span class="number">2</span>] &gt; <span class="number">25</span>) wheel[<span class="number">2</span>][<span class="number">2</span>] = <span class="number">0</span>;</span><br><span class="line">        windex2 = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>IF there is enough interest, we plan on are creating a PCB that would will allow for a much easier assembly of this wonderful fully functional Enigma replica. Please visit <a href="http://www.stgeotronics.com" target="_blank" rel="noopener">http://www.stgeotronics.com</a> to find out about availability, pricing &amp; to place your order or pre-order now. The Circuit schematics are published, so the PCB has entered it’s development stage. Soon to be tested.<br>如果有足够的利润，我们将研发能够使全功能 Enigma 机复制品装载更为容易的印刷电路板。请登陆 <a href="http://www.stgeotronics.com" target="_blank" rel="noopener">http://www.stgeotronics.com</a> 查询商品上架与否、价格、下单或预订吧。电路图已经发布了，印刷电路也已进入开发阶段，即将内测。</p><h2 id="Step-9-Circuit-Schematics"><a href="#Step-9-Circuit-Schematics" class="headerlink" title="Step 9: Circuit Schematics"></a>Step 9: Circuit Schematics</h2><p>第九步：电路图</p><p><img src="/images/2018-08/FEWJUCNHMMFCNPV.LARGE.jpg" alt=""><br><img src="/images/2018-08/FFCPWADHMMF8FRX.LARGE.jpg" alt=""></p><p>In response to the popular demand, here are the two Circuit Schematics.<br>徇众要求，电路图两份在此。<br>The first one shows how our fake nixie tubes (the 4 elevated 16-Segment units) are wired in order to provide the response that the rotors provide on a real Enigma machine. They are also used in each setup mode to provide feedback on the setting up of the machine.<br>第一个是仿电子管（4 个 16 段显示单元）如何布线，用于显示转子在 Enigma 机上的输出信号。同时，它们也用于每种调试模式，反馈用户机器设定信息。<br>The second one shows how each of the 26 keyboard buttons and 10 function keys, the 26 key lamps &amp; the 5 LEDS are all wired.<br>第二幅电路图显示 26 个字母按键及 10 个功能键、26 个键盘灯和 5 个 LED 是如何布线的。<br>All LED resistors are 470 Ohms and all Pushbutton resistors are 1KOhm.<br>所有 LED 电阻都是 470 欧，而开关电阻则都是 1 千欧。<br>Stay tuned for the PCB design file…<br>印刷电路设计档仍在修正中。<br>We hope you enjoyed our first Instructable!<br>希望你享受我们第一份制作教程!<br>Thank You for your time.<br>感谢你抽出宝贵时间阅读！</p><h2 id="Step-10-Prototype-Boards"><a href="#Step-10-Prototype-Boards" class="headerlink" title="Step 10: Prototype Boards"></a>Step 10: Prototype Boards</h2><p>第十步：PCB 样机版</p><p><img src="/images/2018-08/F7E23SFHOHYMQIY.LARGE.jpg" alt=""><br><img src="/images/2018-08/FRVNOESHOPQDW25.LARGE.jpg" alt=""></p><p>Due to popular demand, we designed &amp; ordered some Printed Circuit Boards. Well, our PCBs are finally in and at first glance, they look beautiful! We have been busy populating &amp; testing one to make sure it performs as good as it looks and more importantly, as well as our proof-of-concept device.<br>徇众要求，我们设计及定制了一些印刷电路板。它们终于面世了，如此清纯可爱！我们忙于组装，并测试其中一块样品，确保它在功能上与外观一样完美无暇。更重要的是，能实现和那台原型测试机一样的功能。<br>The boards we ordered are almost perfect: they each need a little jumper wire to fix a small design flaw. This small flaw does not affect behavior or functionality and is an easy fix.<br>订购回来的底板几乎完美，只需一点引脚线去修补设计瑕疵。而这些瑕疵对功能没有影响，修理它们是小菜一碟。<br>With this jumper in place, you can now make your own Enigma Replica much easier &amp; faster than running all wires this instructable shows. So, we are now happy to report that testing is completed &amp; the new boards work just fine!<br>有了这些引脚，你能更容易制作自己的 Enigma 复刻机，比起教程里的布线方便多了。我们在此很高兴宣布，测试完成，新型板一样给力！<br>We are now accepting orders at <a href="http://www.stgeotronics.com" target="_blank" rel="noopener">www.stgeotronics.com</a> &amp; have started shipping.<br>Pictures of the assembly have been added as Step 11.<br>下单订购请登陆 <a href="http://www.stgeotronics.com" target="_blank" rel="noopener">http://www.stgeotronics.com</a> ，已发货热卖中。组装图片请见第十一步。<br>Thank You for your overwhelming support &amp; wonderful feedback!<br>感谢大家的不懈支持和宝贵反馈意见！</p><h2 id="Step-11-Assembled-Kits"><a href="#Step-11-Assembled-Kits" class="headerlink" title="Step 11: Assembled Kits"></a>Step 11: Assembled Kits</h2><p>第十一步：组装完成的作品</p><p><img src="/images/2018-08/FGKWVNEHP8PLOCX.LARGE.jpg" alt=""><br><img src="/images/2018-08/FVGEWVMHP989E1R.LARGE.jpg" alt=""><br><img src="/images/2018-08/FMICFEUHP989E1T.LARGE.jpg" alt=""></p><p>更多图片可以前往 <a href="https://www.instructables.com/id/Make-your-own-Enigma-Replica/#step11" target="_blank" rel="noopener">原文</a> 查看。<br>This assembly took one evening &amp; you can look at assembly pictures above for an overview of the process.<br>花了一晚上组装完成，全过程的概览如上图所示。<br>Thank You for the support &amp; feedback!<br>感谢你的支持与反馈！</p><h2 id="更多"><a href="#更多" class="headerlink" title="更多"></a>更多</h2><p>博主在深入了解 Enigma 机后，制作了一个 JavaScript 版本的虚拟机，实现了几乎全部功能，可以点击下方链接前往。<br>本站的 JavaScript 版本：<a href="https://galaxymimi.com/app/enigma/" target="_blank" rel="noopener">主站&gt;应用&gt;原创游戏 &gt; Enigma</a><br>这个版本暂未针对移动端进行优化，请使用桌面端打开。<br>而原文中基于 Arduino 开发的实体机器，由于制作过于复杂，博主还在进行研究，看上去所有的代码都是功能正常的。</p><p>本文翻译自：<a href="https://www.instructables.com/id/Make-your-own-Enigma-Replica" target="_blank" rel="noopener">MAKE YOUR OWN ENIGMA REPLICA</a></p><p>参考文章：<br><a href="https://en.wikipedia.org/wiki/Enigma_machine" target="_blank" rel="noopener">恩尼格玛密码机</a><br><a href="https://web.archive.org/web/20150730050426/http://oszine.com/enigma" target="_blank" rel="noopener">自己打造一台恩尼格码密码机</a><br><a href="https://www.bletchleypark.org.uk" target="_blank" rel="noopener">Bletchley Park</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Arduino </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>武功山游记</title>
      <link href="/2018-08/%E6%AD%A6%E5%8A%9F%E5%B1%B1%E6%B8%B8%E8%AE%B0/"/>
      <url>/2018-08/%E6%AD%A6%E5%8A%9F%E5%B1%B1%E6%B8%B8%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>在 7 月下旬，博主和同学前往江西萍乡的武功山露营，计划观看火星冲日、月全食等天文现象。博主携带了 Canon EOS 50D 相机，搭配 17-40mm f/4L 镜头，用以记录登山过程中的美景；还向朋友借了一个 70-200mm f/2.8 的长焦镜头，以备不时之需。下面就来用照片分享这次旅途的经历，每张照片的具体参数都附在后面。<br>先上三组『<a href="https://zh.moegirl.org / 显卡对比图" target="_blank" rel="noopener">AN 对比图</a>』。</p><p>优胜美地国家公园 vs 武功山金顶</p><p><img src="/images/2018-08/Yosemite.jpg" alt=""><br><img src="/images/2018-08/IMG_5604.jpg" alt=""></p><p><em>40mm f/4.0 1/400s</em></p><p>Mac Sky 壁纸 vs 日出前的云海</p><p><img src="/images/2018-08/Sky.jpg" alt=""><br><img src="/images/2018-08/IMG_5485.jpg" alt=""></p><p><em>19mm f/4.0 4s</em></p><a id="more"></a><p>Win XP 壁纸（北加州 Sonoma） vs 武功山『空中草原』</p><p><img src="/images/2018-08/Mascaloona-Bliss.jpg" alt=""><br><img src="/images/2018-08/IMG_5341.jpg" alt=""></p><p><em>17mm f/4.0 1/500s</em></p><p>虽然提前查看了天气预报，但天数有变，博主到达的那天下午，正看到乌云以肉眼可见的速度朝山上飘来。博主的心里凉了半截——毕竟，如果天公不作美，我们可能就要与天文奇观失之交臂了。在一场阵雨后，山上的空气湿度持续增加，入夜时营地被浓雾笼罩，颇有一种寂静岭的感觉。<br>这是阵雨后的夕阳和晚霞：</p><p><img src="/images/2018-08/IMG_5376.jpg" alt=""></p><p><em>40mm f/6.3 1/200s</em></p><p><img src="/images/2018-08/IMG_5389.jpg" alt=""></p><p><em>17mm f/4.0 1/30s</em></p><p>日落后的山庄：</p><p><img src="/images/2018-08/IMG_5443.jpg" alt=""></p><p><em>19mm f/4.0 96s</em></p><p>后半夜，浓雾逐渐散去，终于可以夜观天象啦！<br>长焦打月亮：</p><p><img src="/images/2018-08/IMG_5462.jpg" alt=""></p><p><em>200mm f/2.8 2.5s</em></p><p><strong> 效果并不好，如果有条件请使用天文望远镜 </strong></p><p>星空：</p><p><img src="/images/2018-08/IMG_5475.jpg" alt=""></p><p><em>17mm f/4.0 30s</em></p><p>在长时间的曝光下，可以明显地看到星空中恒星的转动轨迹。这是由于地球自转带来的周日视运动。<br>日出和朝霞也同样壮观：</p><p><img src="/images/2018-08/IMG_5532.jpg" alt=""></p><p><em>17mm f/7.1 1/160s</em></p><p>这次行程的遗憾便是器材仍不够强大，200mm 焦距对应的放大率难以看清月球表面的更多细节；不过，在旅途中也收获了很多精彩的镜头，而博主对于 B 门曝光的参数控制与设置也有了更多经验，未来将会作出更多的尝试。</p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 摄影 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Unicode 字符与颜文字表情</title>
      <link href="/2018-07/Unicode%E5%AD%97%E7%AC%A6%E4%B8%8E%E9%A2%9C%E6%96%87%E5%AD%97%E8%A1%A8%E6%83%85/"/>
      <url>/2018-07/Unicode%E5%AD%97%E7%AC%A6%E4%B8%8E%E9%A2%9C%E6%96%87%E5%AD%97%E8%A1%A8%E6%83%85/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>编码，是每个程序员绕不开的话题。对于前端工程师而言，字符更是会直观地展示在界面上。<br>提起文字，大部分人的脑中，都会定式为规整排列的字符。但是林子大了什么鸟都有，世界上可是存在着 6800 + 种文字，难免会飞出来一些诡异的鸟…<br>而号称『万国码』的 Unicode，在实现编码与展示的时候，也会不会遇到一些奇葩的事情呢？<br>事实上，可能你早已见识过了：</p><hr><p>x̙͈̝͍͕̙̄͛̽̆͌́̕͟g̘̣̠̝̟̤̥̼̼̽͑͋̈̑̒͟͞q̛̤̦̝̘͎͋̔̋͌͒̆̋̚͡f̵̢̙͇̮̠̋̀͌̅̉̃̔͜͜͠͡r̢̜̩͙̭̲͓͈̈̀͑̆͋̚͢͜m̷̛͙̝̣̲̭͍͉̊̓̾̈̋̿̚͢͟͠s̷̡̩͔̮͈̜̊̽͂̆̈́̃̓͋̏</p><p>热҈的҈字҈都҈出҈汗҈了҈</p><p>你的屏幕被蓝翔挖掘机给挖坏了不信你看;̷̸̨̀͒̏̃ͦ̈́̾̀́̎͢҉̵̶͚̼͉͖̺̥͔͇̰̹̮͙͉̻̼̭̻͕̮͇ͨͬͪ͗̇̑̽͋̀̋̊͌ͧͨͭ̓̅͐ͥ̂̔̊ͧ͊҉̶̵̷̞̩̦̳̺̳̬̬̩̣̫͇̯̥͖͍͕̠̦̼̗ͯ̽͌̔ͪͯ́́͋̍ͨ̿̿̎͒ͤ̓̅̀͂ͧ͋̏ͫͣ̔͘͜͠͏̶̵̸̧̧̥̺͓̘̺͎̜̥͕͈̝̫͎̺̮̱̤̠̠͖̳̻̥̣̪͍͕͇̮͙̹̪ͮͧͫ͂͒ͤͣ̌̽ͨͪ͒̄̄̉̒̊ͩ̅͆͘̚͘͘̚͟͟͝ͅ</p><hr><p>今天我们就来探讨一下这些奇怪的字符。</p><h2 id="文字可以戴帽子和穿鞋子"><a href="#文字可以戴帽子和穿鞋子" class="headerlink" title="文字可以戴帽子和穿鞋子"></a>文字可以戴帽子和穿鞋子</h2><p>提起泰文，很多朋友都会立即想到：<strong> 萨瓦迪卡（你好）</strong>。<br>但这句话是怎么写的呢？<br>其实这句你好，男生和女生之间还有差异，男生写法是：<code>สวัสดีครับ</code>，女生则是：<code>สวัสดีค่ะ</code>。<br>不过这并不重要，重要的是，我们发现某些字的上面，还带了特殊的符号。就好像是戴上了帽子。<br>事实上，泰文字符不仅会『戴帽子』，偶尔还会『穿鞋子』，比如这三个字符：<code>ผ ผู ผู้</code>。<br>如果脑洞再大一点，有人就会想，那是不是还可以戴多顶帽子呢？<br>的确如此… 泰文允许你穿一双鞋子，并且戴两顶帽子。完整的形式是这样的：</p><p><img src="/images/2018-07/FqLq54KAJkoSVA-7_jdJpSRI3fcI.png" alt=""></p><p>所以，平时看惯了中英文的我们，需要改变一下思路了。<br>世界上的文字，并不全是规规整整横向排列的格子，也存在像泰文这种变形金刚 <strong> 组合式 </strong> 的文字。<br>虽然标准的泰文里，『帽子』和『鞋子』的数量是有限制的，但由于国际码的迷之设计（先卖个关子），在计算机里显示的泰文字符，却可以拥有无数的帽子和鞋子。也就是说，它变成了一款可以在 Y 轴无限拓展的文字！<br>并且，咱不光可以往上喷，还可以有一定角度…</p><p><img src="/images/2018-07/Fr8cS9UX21MEgBtmOU_CDhreGqlO.jpeg" alt=""><br><img src="/images/2018-07/Fr-rlbbriydg4cUmoU_Zs6VQSbpU.jpeg" alt=""></p><p>还可以</p><p><img src="/images/2018-07/Fk0kXSTymPxute84rceAkzGd5PKA.jpeg" alt=""></p><p>简直是不讲道理。<br>（由于一些系统会崩溃，这里使用截图）</p><a id="more"></a><h2 id="人与机器的矛盾"><a href="#人与机器的矛盾" class="headerlink" title="人与机器的矛盾"></a>人与机器的矛盾</h2><p>然后我们会质问 Unicode，你为何不讲道理？<br>如此的设计，近乎是一个 bug；但即使是 bug，也应该早就修复了呀。<br>事实上，这样的设计，是为了解决一个问题：人与机器的矛盾。<br>首先是存储的矛盾。<br>如果把每个组合好的泰文用一个编码来表示，那么至少需要 <strong>44×21×4=3696</strong> 个编码（实际上可能要比这还多）。用如此多的编码来处理基本元素只有 <strong>69</strong> 个的文字是非常浪费的，因此电脑采用一套称为复杂文字编排（CTL）的设计来解决矛盾。<br>简单的说，泰文的每个基本字符对应一个编码，用户在输入法里依次输入多个基本字符进行拼合，最后敲一个特殊的 <strong>『结束字符』</strong>；这时前面输入的基本字符，就拼合成了一个 <strong> 单独 </strong> 的泰文字符，在屏幕中显示。<br>这样就解决了存储的空间浪费问题。<br>但这样就带来了第二个矛盾，识别的问题。<br>人可以轻松地识别一个泰文合字是否拼写正确、有意义；但机器在显示时却很难进行判断，即使可以也会带来相应的性能问题。<br>如何解决呢？如今会在输入法上做一些文章，比如打一个声调符号后就不能再输入了。不过，由于泰文这种基于结束标志合成字符的本质，你还是没法避免艺术家们使用复制粘贴、手工撰改字符位置等方式去进行创造，只能起到一些限制作用。<br>其次，在比较新版本的 Webkit 里，在显示上会阻止这种往上下冒的字符，这样至少不影响排版。所以有部分字符已经不会出现上下叠加的情形了，你可以在不同浏览器，观察一下这个字符的显示：ส็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็</p><h2 id="萌即正义的颜文字-ง-•̀-•́-ง"><a href="#萌即正义的颜文字-ง-•̀-•́-ง" class="headerlink" title="萌即正义的颜文字 (ง •̀_•́)ง"></a>萌即正义的颜文字 (ง •̀_•́)ง</h2><p>也许你觉得泰文奇葩，但它的声调就在文字里，看到就能准确地读出来。这样更容易传播，是不是也没了你读文言文要查字典的烦恼呢？所以文字的设计各有优劣。<br>这样的设计不止泰文，它只是一个典型的例子。除此之外常见的还有老挝文、藏文。<br>脑洞大开的艺术家们，又会想到另外一个好玩的事情：我能不能拿老挝文的『帽子』，组合藏文的『鞋子』，合成一个独立的字符呢？<br>他们赢了。不久，颜文字开始流行。<br>比如，这个表情：(;´༎ຶД༎ຶ`)<br>里面有眼睛流泪的一个字符：<code>༎ຶ</code><br>它是什么语言呢？<br>事实上，它并不属于世界上任何一种语言！眼睛部分是 <strong> 老挝文 </strong>，泪水部分属于 <strong> 藏文 </strong>。<br>但是，你在复制它的时候，可以发现它却是一个 <strong> 单独 </strong> 的字符，这就非常的神奇。原因我们在第二部分已经讲过了。<br>我是如何知道的呢？当然我并不是个语言学家，我们可以转码一下，发现 <code>༎ຶ</code> 对应的编码是 <code>\u0f0e\u0eb6</code>，再到 <a href="https://unicode-table.com/cn/#tibetan" target="_blank" rel="noopener">unicode-table</a> 里去查看就清楚了。<br>除此之外——</p><ul><li>▷ˋε´◁中ε是希腊字母</li><li>ʕ-‘ᴥ’-ʔ中ʕᴥʔ是国际音标</li><li>*(·ཀ·」∠)* 中ཀ是藏文</li><li>(ง •̀_•́ )ง中ง是泰文</li><li>罒д罒中罒是中文（同网），д是俄语西里尔字母</li></ul><p>看来如果你会发颜文字，就是名副其实的会十八国语言了呢 (๑✦ˑ̫✦)✧<br>这里有 B 站评论区自带的颜文字表情：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(= ・ω・ =)    (〜￣△￣)〜    o(￣ヘ￣o＃)    ⌇●﹏●⌇    (○･｀Д´･ ○)</span><br><span class="line">(･∀･)    (°∀°)ﾉ    (￣3￣)    ╮(￣▽￣)╭    (´_ゝ｀)    ヾ (^▽^*)))</span><br><span class="line">←_←    →_→    (&lt;_&lt;)    (&gt;_&gt;)    (;¬_¬)    (｀・ω・ ´)    (/TДT)/</span><br><span class="line">(⌒▽⌒)    (￣▽￣)    (ﾟДﾟ≡ﾟдﾟ)!?    Σ(ﾟдﾟ;)    (&quot;▔□▔)/    (ó﹏ò｡)</span><br><span class="line">(^ ・ω・ ^)    (｡･ω･｡)    (●￣(ｴ)￣●)    ε=ε=(ノ≧∇≦) ノ    (￣ε(#￣)Σ</span><br><span class="line">(-_-#)    (￣へ￣)    (ฅ´ω`ฅ)    ヽ (`Д´)ﾉ    (´･_･`)    (´；ω；`)</span><br><span class="line">(#-_-)┯━┯    _(:3」∠)_    (╯° 口 °)╯(┴—┴    (´▽｀) ノ♪    Σ(￣□￣||)</span><br></pre></td></tr></table></figure></p><p>Unicode 的转码可以在这里完成：<a href="https://galaxymimi.com/app/textoolbox.html" target="_blank" rel="noopener">主站&gt;应用&gt;实用工具 &gt; TexToolBox</a></p><h2 id="字体的错位"><a href="#字体的错位" class="headerlink" title="字体的错位"></a>字体的错位</h2><p>前面我们一直在谈字符的本质，但字符在屏幕中的展示，还有一个关键的因素：字体。<br>相同的字符，使用了不同的字体，它们的显示也会有差别。<br>一行中文，你设置黑体或草书，它大体来看还是规整的；但如果你设置一行英文为草书，可能就会有问题。<br>在浏览器里，如果对应编码在字体文件里为空，一般会展示成一个方格，起码不会影响其他正常字符的排版。但我们知道，Unicode 的林子实在太大了…<br>在某些字体里，就会对一些特殊的字符产生错误的排版。<br>比如：热҈的҈字҈都҈出҈汗҈了҈<br>把它转义一下，就得到编码是：<br><code>\u70ed\u0488\u7684\u0488\u5b57\u0488\u90fd\u0488\u51fa\u0488\u6c57\u0488\u4e86\u0488</code><br>其中 <code>\u0488</code> 就是 <code>҈</code> 这个字符的编码，它是一个组合用的<a href="https://unicode-table.com/cn/0488" target="_blank" rel="noopener">西里尔文百千符号</a>。<br>它在大部分常用字体里，都有错位问题；而其他一些字体，比如 Courier New 字体，则是分开的展示：</p><p><img src="/images/2018-07/Fk4jy-lOTJvqGmGul8nZfz8r9B7p.png" alt=""></p><p>那么，这两种展示哪种才是正常的呢？其实都不正常。<br>我们查看<a href="https://en.wikipedia.org/wiki/Cyrillic_numerals" target="_blank" rel="noopener">西里尔文计数法的 wiki</a>，可以看到它只有配合西里尔数字时，才能展示正常：</p><p><img src="/images/2018-07/Fn9DaIzvbgkExdrsLhSdCvJjCqX1.png" alt=""></p><p>至于你把它跟其他语言组合在一起时，我们要么看到错位，要么看到分离的展示。而且国际上并没有一个组织，去规定要怎么展示。事实上文字这么多，根本也管不过来，所以这也是混乱的原因。<br>最后补充一点，另外一小撮别有心裁的艺术家，还习惯使用这个字符去突破敏感词过滤…</p><h2 id="混乱与创新？"><a href="#混乱与创新？" class="headerlink" title="混乱与创新？"></a>混乱与创新？</h2><p>Unicode 是不可阻挡的潮流，它也一直在更新。比如我们常用的 <a href="https://unicode-table.com/cn/sets/emoji" target="_blank" rel="noopener">Emoji 表情</a>，就已经是 Unicode 的标准字符集。和泰文的组合一样，Emoji 表情也是可以叠加的，这一点在前面的一篇关于<a href="/2018-01/JavaScript 常用简写技术与扩展运算符 /">JavaScript 常用简写技术与扩展运算符</a> 的文章中也提到过。👪和👨‍👩‍👧‍👧就是典型的例子，它们展开后的编码就是👨👩👦🧒。<br>而本文中我们说到，大家在玩这些奇奇怪怪的字符时，都是基于类似 bug 的设定在搞事情。这就有很大的局限性。<br>那艺术家们又会有些大胆的想法：我能不能主动创造一些新字符，就是为了错位和组合呢？<br>我也不清楚这是创新，还是会带来更多的混乱。但事实是，iOS 系统自带的字符，已经有这样的尝试了。并且搜狗输入法在 iOS 系统提供的诸多符号里，挑选了一些，可供用户去使用。这个功能的名字，叫做花漾字。</p><p><img src="/images/2018-07/IMG_0151.png" alt=""></p><p>还是得感慨艺术家们的视角是多么独特。<br>既然都这样了… 最后，希望我们的国产表情包能有朝一日打入 Unicode 吧。</p><p>参考文章：<a href="http://litten.me/2017/11/13/strange-characters1" target="_blank" rel="noopener">人人都是艺术家！谈谈那些奇怪的字符（上）</a></p><p>拓展阅读：<br><a href="https://unicode-table.com/cn" target="_blank" rel="noopener">Unicode 字符百科</a><br><a href="https://segmentfault.com/a/1190000007594620" target="_blank" rel="noopener">Emoji 的编码以及常见问题处理</a><br><a href="https://lolico.moe/nodejs-memo/emoji.html" target="_blank" rel="noopener">Emoji 的处理 - 使用正则表达式匹配所有 Emoji</a><br><a href="https://css-tricks.com/more-unicode-patterns" target="_blank" rel="noopener">More Unicode Patterns</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>在网页中添加 Live2D 看板娘</title>
      <link href="/2018-07/%E5%9C%A8%E7%BD%91%E9%A1%B5%E4%B8%AD%E6%B7%BB%E5%8A%A0Live2D%E7%9C%8B%E6%9D%BF%E5%A8%98/"/>
      <url>/2018-07/%E5%9C%A8%E7%BD%91%E9%A1%B5%E4%B8%AD%E6%B7%BB%E5%8A%A0Live2D%E7%9C%8B%E6%9D%BF%E5%A8%98/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/2018-07/photo.jpg" alt=""></p><p>项目地址：<a href="https://github.com/stevenjoezhang/live2d-widget" target="_blank" rel="noopener">live2d-widget</a></p><p>克隆这个仓库到服务器上，并配置 <code>autoload.js</code>，修改其中的链接为各文件的绝对地址，即可在网页中添加 Live2D 看板娘。<br>相对于市面上广为流传的版本，博主对触发动作和语言进行了魔改（针对 Hexo NexT 主题），调整了图标样式、元素定位，并解决了 CSS 的前缀等问题。<br>更多内容可以参考项目文档及下方链接。<br>快来把萌萌哒的看板娘抱回家吧！</p><p>参考文章：<br><a href="https://www.fghrsh.net/post/123.html" target="_blank" rel="noopener">网页添加 Live2D 看板娘</a><br><a href="https://imjad.cn/archives/lab/add-dynamic-poster-girl-with-live2d-to-your-blog-02" target="_blank" rel="noopener">给博客添加能动的看板娘 (Live2D)- 将其添加到网页上吧</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> GitHub </tag>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>改变世界的 17 个公式</title>
      <link href="/2018-07/%E6%94%B9%E5%8F%98%E4%B8%96%E7%95%8C%E7%9A%8417%E4%B8%AA%E5%85%AC%E5%BC%8F/"/>
      <url>/2018-07/%E6%94%B9%E5%8F%98%E4%B8%96%E7%95%8C%E7%9A%8417%E4%B8%AA%E5%85%AC%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>In 2012, Mathematician Ian Stewart came out with an excellent and deeply researched book titled “In Pursuit of the Unknown: 17 Equations That Changed the World.”<br>在 2012 年，数学家斯图尔特（Ian Stewart）出版了一本精彩而深入研究的著作，名为《追寻未知：改变世界的 17 个公式》。<br>His book takes a look at the most pivotal equations of all time, and puts them in a human, rather than technical context.<br>他的书着眼于有史以来最关键的方程式，并将它们置于普通人而非专业的背景中。<br>“Equations definitely can be dull, and they can seem complicated, but that’s because they are often presented in a dull and complicated way,”Stewart told Business Insider.”I have an advantage over school math teachers: I’m not trying to show you how to do the sums yourself.”<br>『方程式肯定会显得沉闷，而且它们看起来很复杂，但那是因为它们经常以这样的方式呈现，』斯图尔特告诉 Business Insider。 『我比学校的数学老师更有优势：我不会试图告诉你如何自己算出它们。』<br>He explained that anyone can “appreciate the beauty and importance of equations without knowing how to solve them … The intention is to locate them in their cultural and human context, and pull back the veil on their hidden effects on history.”<br>他解释说，任何人都可以『欣赏方程式的美丽和重要性，而不去知道如何解它们…… 目的是将它们置于文化和人文环境中，并揭开它们对历史隐藏效应的面纱。』<br>Stewart continued that “equations are a vital part of our culture. The stories behind them — the people who discovered or invented them and the periods in which they lived — are fascinating.”<br>斯图尔特继续说道，『方程式是我们文化的重要组成部分。他们背后的故事——发现或发明它们的人以及他们生活的时期——都很吸引人。』<br>Here are 17 equations that have changed the world:<br>以下是改变世界的 17 个方程式：<br>Max Nisen contributed to an earlier version of this post.<br>Max Nisen 为本文的早期版本做出了贡献。</p><h2 id="The-Pythagorean-Theorem"><a href="#The-Pythagorean-Theorem" class="headerlink" title="The Pythagorean Theorem"></a>The Pythagorean Theorem</h2><p>$$a^{2}+b^{2}=c^{2}$$<br>Pythagoras, 530 BC<br>What does it mean? The square of the hypotenuse of a right triangle is equal to the sum of the squares of its legs.<br>作用：直角三角形的斜边的平方等于其直角边的平方和。<br>History: Though attributed to Pythagoras, it is not certain that he was the first person to prove it. The first clear proof came from Euclid, and it is possible the concept was known 1,000 years before Pythagoras by the Babylonians.<br>历史：虽然认为毕达哥拉斯（Pythagoras）发现了这个公式，但不确定他是否是第一个证明它的人。第一个明确的证明来自欧几里得，而这个概念可能是在毕达哥拉斯之前 1000 年就被巴比伦人知道了。<br>Importance: The equation is at the core of much of geometry, links it with algebra, and is the foundation of trigonometry. Without it, accurate surveying, mapmaking, and navigation would be impossible.<br>重要性：勾股定理是几何的核心，它与代数联系起来，是三角学的基础。没有它，准确的测量、地图制作和导航将是不可能的。<br>In terms of pure math, the Pythagorean Theorem defines normal, Euclidean plane geometry. For example, a right triangle drawn on the surface of a sphere like the Earth doesn’t necessarily satisfy the theorem.<br>在纯数学方面，毕达哥拉斯定理定义了正常的欧几里德平面几何。例如，在像地球一样的球体表面上绘制的直角三角形不一定满足该定理。<br>Modern use: Triangulation is used to this day to pinpoint relative location for GPS navigation.<br>现代用途：今天使用三角测量来确定 GPS 导航的相对位置。</p><a id="more"></a><h2 id="The-logarithm-and-its-identities"><a href="#The-logarithm-and-its-identities" class="headerlink" title="The logarithm and its identities"></a>The logarithm and its identities</h2><p>$$\log xy=\log x+\log y$$<br>John Napier, 1610<br>What does it mean? You can multiply numbers by adding related numbers.<br>作用：你可以将两个数字的对数相加来计算乘积。<br>History: The initial concept was discovered by the Scottish Laird John Napier of Merchiston in an effort to make the multiplication of large numbers, then incredibly tedious and time consuming, easier and faster. It was later refined by Henry Briggs to make reference tables easier to calculate and more useful.<br>历史：最初的概念是由苏格兰爱丁堡附近的小镇梅奇斯顿的地主约翰 · 纳皮尔（John Napier）发现的，旨在使大数乘法——当时令人难以置信的繁琐和耗时，变得更容易和更快。后来 Henry Briggs 对其进行了改进，使参考表更容易计算，更有用。<br>Importance: Logarithms were revolutionary, making calculation faster and more accurate for engineers and astronomers. That’s less important with the advent of computers, but they’re still an essential to scientists.<br>重要性：对数是革命性的，使工程师和天文学家的计算更快，更准确。随着计算机的出现，这一点就不那么重要了，但它们对科学家来说仍然是必不可少的。<br>Modern use: Logarithms, and the related exponential functions, are used to model everything from compound interest to biological growth to radioactive decay.<br>现代用途：对数和指数函数用于为从复利到生物生长到放射性衰变的所有事物建模。</p><h2 id="Calculus"><a href="#Calculus" class="headerlink" title="Calculus"></a>Calculus</h2><p>$$\frac{df}{dt}=\lim_{h \to 0}=\frac{f(t+h)-f(t)}{h}$$<br>Isaac Newton, 1668<br>What does it mean? Allows the calculation of an instantaneous rate of change.<br>作用：允许对瞬时变化率的计算。<br>History: Calculus as we currently know it was described around the same time in the late 17th century by Isaac Newton and Gottfried Leibniz. There was a lengthy debate over plagiarism and priority which may never be resolved. We use the leaps of logic and parts of the notation of both men today.<br>历史：我们现在所知道的微积分是在 17 世纪晚期由艾萨克 · 牛顿（Isaac Newton）和戈特弗里德 · 莱布尼兹（Gottfried Leibniz）几乎同时描述的。关于剽窃和谁先提出微积分的争论持续了很久，可能永远无法解决。我们今天使用的正是两人的逻辑推导和部分符号系统。<br>Importance: According to Stewart, “More than any other mathematical technique, it has created the modern world.” Calculus is essential in our understanding of how to measure solids, curves, and areas. It is the foundation of many natural laws, and the source of differential equations.<br>重要性：根据斯图尔特的说法，『它比任何其他数学技术都更能创造现代世界。』在我们理解如何测量固体，曲线和面积时，微积分是必不可少的。它是许多自然法则的基础，也是微分方程的来源。<br>Modern use: Any mathematical problem where an optimal solution is required. Essential to medicine, economics, physics, engineering, and computer science.<br>现代用途：需要最佳解决方案的任何数学问题。对医学，经济学，物理学，工程学和计算机科学至关重要。</p><h2 id="Newton’s-universal-law-of-gravitation"><a href="#Newton’s-universal-law-of-gravitation" class="headerlink" title="Newton’s universal law of gravitation"></a>Newton’s universal law of gravitation</h2><p>$$F=G\frac{m_1 m_2}{r^2}$$<br>Isaac Newton, 1687<br>What does it mean? Calculates the force of gravity between two objects.<br>作用：计算两个物体之间的引力大小。<br>History: Isaac Newton derived his laws based on earlier astronomical and mathematical work by Johannes Kepler. He also used, and possibly plagiarized the work of Robert Hooke.<br>历史：牛顿根据开普勒先前的天文学和数学工作得出了他的定律。他也使用了（也可能是抄袭）罗伯特 · 胡克的工作。<br>Importance: Used techniques of calculus to describe how the world works. Even though it was later supplanted by Einstein’s theory of relativity, it is still essential for a practical description of how objects in space, like stars, planets, and human-made spacecraft, interact with each other. We use it to this day to design orbits for satellites and probes.<br>重要性：使用微积分技术来描述世界是如何运作的。尽管它后来被爱因斯坦的相对论所取代，但对于空间中的物体如恒星，行星和人造宇宙飞船如何相互作用仍然是必不可少的。我们今天用它来设计卫星和探测器的轨道。<br>Philosophically, Newton’s law is important because it describes how gravity works everywhere, from a ball falling to the ground on Earth to the evolution of galaxies and the universe as a whole. While we take the idea of universal laws for granted today, in earlier eras the idea that the terrestrial and celestial worlds shared the same properties was revolutionary.<br>从哲学上讲，牛顿定律很重要，因为它描述了引力如何在任何地方起作用——从地球上的物体掉在地上，到星系和整个宇宙的演化。虽然我们今天认为普适的物理定律是理所当然的，但在早期的时代，地球和天体拥有相同属性的想法是革命性的。<br>Modern use: Although, as mentioned above, for practical uses Newton’s law has been augmented by Einstein’s theories, the basic idea of Newtonian gravity is still a useful approximation for how things behave in space.<br>现代用途：尽管如上所述，对于实际应用，牛顿定律已经被爱因斯坦的理论所增强，但牛顿引力的基本思想仍然是对事物在空间中表现的有用近似。</p><h2 id="Complex-numbers"><a href="#Complex-numbers" class="headerlink" title="Complex numbers"></a>Complex numbers</h2><p>$$i^2=-1$$<br>Euler, 1750<br>What does it mean? Mathematicians can expand our idea of what numbers are by introducing the square roots of negative numbers.<br>作用：数学家可以通过引入负数的平方根来扩展我们对数字的概念。<br>History: Imaginary numbers were originally posited by famed gambler/mathematician Girolamo Cardano, then expanded by Rafael Bombelli and John Wallis. They still existed as a peculiar, but essential problem in math until William Hamilton described this definition.<br>历史：虚数最初由著名的赌徒 / 数学家 Girolamo Cardano 提出，然后由 Rafael Bombelli 和 John Wallis 扩展。在威廉 · 汉密尔顿描述这个定义之前，它们仍然是数学中一个特殊的但必不可少的问题。<br>The imaginary and complex numbers are mathematically very elegant. Algebra works perfectly the way we want it to — any equation has a complex number solution, a situation that is not true for the real numbers: $x^2 + 4 = 0$ has no real number solution, but it does have a complex solution: the square root of -4, or 2i. Calculus can be extended to the complex numbers, and by doing so, we find some amazing symmetries and properties of these numbers.<br>虚数和复数在数学上非常优雅。代数以我们想要的方式完美地工作——任何方程都有一个复数解，而却不一定有实数解：$x^2 + 4 = 0$ 没有实数解，但它确实有一个复杂的解决方案：-4 的平方根或 2i。微积分可以扩展到复数，通过这样做，我们发现了这些数字的一些惊人的对称性和属性。<br>Importance: According to Stewart “…. most modern technology, from electric lighting to digital cameras could not have been invented without them.” The extension of calculus to the complex numbers, a branch of math called “complex analysis,” is essential to understanding electrical systems and a variety of modern data processing algorithms.<br>重要性：根据斯图尔特的说法『…… 最现代的技术，从电子照明到数码相机，如果没有它们，就无法发明。』微积分扩展到复数，这是一个称为『复分析』的数学分支，对于理解电气系统和各种现代数据处理算法至关重要。<br>Modern use: Used broadly in electrical engineering and mathematical theory.<br>现代用途：广泛用于电气工程和数学理论。</p><h2 id="Euler’s-formula-for-polyhedra"><a href="#Euler’s-formula-for-polyhedra" class="headerlink" title="Euler’s formula for polyhedra"></a>Euler’s formula for polyhedra</h2><p>$$V-E+F=2$$<br>Euler, 1751<br>What does it mean? Describes a numerical relationship that is true of all solid shapes of a particular type.<br>作用：描述了对特定类型的所有简单多面体都适用的数字关系。<br>History: This was developed by the great 18th century mathematician Leonhard Euler.Polyhedra are the three-dimensional versions of polygons, like the cube to the right. The corners of a polyhedron are called its vertices, the lines connecting the vertices are its edges, and the polygons covering it are its faces.<br>历史：这是由伟大的 18 世纪数学家莱昂哈德 · 欧拉（Leonhard Euler）开发的。Polyhedra，即多面体，是多边形的三维版本，它的角被称为顶点，连接顶点的线是它的边，覆盖它的多边形是它的面。<br>A cube has 8 vertices, 12 edges, and 6 faces. If I add the vertices and faces together, and subtract the edges, I get 8 + 6 - 12 = 2.<br>立方体有 8 个顶点，12 个边和 6 个面。如果我将顶点和面加在一起，并减去边，我得到 8 + 6 - 12 = 2。<br>Euler’s formula states that, as long as your polyhedron is somewhat well behaved, if you add the vertices and faces together, and subtract the edges, you will always get 2. This will be true whether your polyhedron has 4, 8, 12, 20, or any number of faces.<br>Euler 的公式表明，只要你的多面体是常规的，如果你将顶点和面加在一起，并减去边，你将总是得到 2。无论你的多面体是 4、8、12、20 还是任何数量的面数，都是如此。<br>Importance: Fundamental to the development of topology, which extends geometry to any continuous surface.<br>重要性：拓扑开发的基础，将几何扩展到任何连续的表面。<br>Modern use: Topology is used to understand the behavior and function of DNA, and it is an underlying part of the mathematical tool kit used to understand networks like social media and the internet.<br>现代用途：拓扑用于理解 DNA 的行为和功能，它是用于理解社交媒体和互联网等网络的数学工具包的基础部分。</p><h2 id="The-normal-distribution"><a href="#The-normal-distribution" class="headerlink" title="The normal distribution"></a>The normal distribution</h2><p>$$\Phi(x)=\frac{1}{\sqrt{2\pi\rho}}e^{\frac{(x-\mu)^2}{2\rho^{2}}}$$<br>C.F.Gauss, 1810<br>What does it mean? Defines the standard normal distribution, a bell shaped curve in which the probability of observing a point is greatest near the average, and declines rapidly as one moves away.<br>作用：定义了标准正态分布，一种钟形曲线，其中概率在平均值附近最大，并在离开平均值处迅速下降。<br>History: The initial work was by Blaise Pascal, but the distribution came into its own with Bernoulli. The bell curve as we currently comes from Belgian mathematician Adolphe Quetelet.<br>历史：最初的工作是由帕斯卡（Blaise Pascal）完成的，但是伯努利发扬了它。我们目前使用的来自比利时数学家 Adolphe Quetelet。<br>Importance: The equation is the foundation of modern statistics. Science and social science would not exist in their current form without it. Statistical experiment design relies on the properties of the normal curve, and how those properties relate to errors that can occur when taking a random sample.<br>重要性：这个式子是现代统计学的基础。没有它，科学和社会科学就不会以现在的形式存在。统计实验设计依赖于正态曲线的属性，以及这些属性如何与采用随机样本时可能发生的错误相关。<br>Modern use: Used to determine whether drugs are sufficiently effective in clinical trials.<br>现代用途：用于确定药物在临床试验中是否足够有效。</p><h2 id="The-wave-equation"><a href="#The-wave-equation" class="headerlink" title="The wave equation"></a>The wave equation</h2><p>$$\frac{\partial^2 u}{\partial t^2}=c^2\frac{\partial^2 u}{\partial x^2}$$<br>J.d’Almbert, 1746<br>What does it mean? A differential equation that describes the behavior of waves, like the behavior of a vibrating violin string.<br>作用：描述波动行为的微分方程，如振动的小提琴弦的行为。<br>History: The mathematicians Daniel Bournoulli and Jean D’Alembert were the first to describe this relationship in the 18th century, albeit in slightly different ways.<br>历史：数学家伯努利（Daniel Bournoulli）和达朗贝尔（Jean D’Alembert）是最初在 18 世纪描述这种关系的人，尽管方式略有不同。<br>Importance: The behavior of waves generalizes to the way sound works, how earthquakes happen, and the behavior of the ocean.<br>重要性：波动的行为概括了声音的产生，地震的发生方式以及海洋的行为。<br>The techniques developed to solve the wave equation have been very useful in solving similar types of equations as well.<br>为解决波动方程而开发的技术在解决相似类型的方程方面也非常有用。<br>Modern use: Oil companies set off explosives, then read data from the ensuing sound waves to predict geological formations.<br>现代用途：石油公司引爆炸药，然后从随后的声波中读取数据以预测地质构造。</p><h2 id="The-Fourier-transform"><a href="#The-Fourier-transform" class="headerlink" title="The Fourier transform"></a>The Fourier transform</h2><p>$$f(\omega)=\int_{-\infty}^{+\infty}f(x)e^{-2\pi ix\omega}dx$$<br>J. Fourier, 1822<br>What does it mean? Describes patterns in time as a function of frequency.<br>作用：描述作为频率函数的时间模式。<br>History: Joseph Fourier discovered the equation, which extended from his famous solution to a differential equation describing how heat flows, and the previously described wave equation.<br>历史：约瑟夫 · 傅立叶（Joseph Fourier）发现了这个等式，这是从他著名的热传导方程，以及前面的波动方程的解决方案所扩展得到的。<br>Importance: The equation allows for complex wave patterns, like music, speech, or images, to be broken up, cleaned up, and analyzed. This is essential in many types of signal analysis.<br>重要性：该等式允许分解、清理和分析复杂的波形图案，如音乐，语音或图像。这在许多类型的信号分析中都是必不可少的。<br>Modern use: Used to compress information for the JPEG image format and discover the structure of molecules.<br>现代用途：用于压缩 JPEG 图像格式的信息并发现分子的结构。</p><h2 id="The-Navier-Stokes-equations"><a href="#The-Navier-Stokes-equations" class="headerlink" title="The Navier-Stokes equations"></a>The Navier-Stokes equations</h2><p>$$\rho(\frac{\partial \vec{v}}{\partial t}+\vec{v}\cdot \nabla \vec{v})=-\nabla p+\nabla \cdot \stackrel{\rightarrow \rightarrow}{\mathbb{T}}+\rho\vec{f}$$<br>C.Navier, G.Stokes, 1845<br>What does it mean? The Navier-Stokes equations are the fundamental physical equation that describes how fluids work. The left side is the acceleration of a small amount of fluid, the right indicates the forces that act upon it.<br>作用：纳维尔 - 斯托克斯（Navier-Stokes）方程是描述流体如何运动的基本物理方程。左侧是少量液体的加速度，右侧表示作用在其上的力。<br>History: Leonhard Euler made the first attempt at modeling fluid movement. French engineer Claude-Louis Navier and Irish mathematician George Stokes made the leap to the model still used today.<br>历史：莱昂哈德 · 欧拉首次尝试对流体运动进行建模。法国工程师纳维尔（Claude-Louis Navier）和爱尔兰数学家斯托克斯（George Stokes）创建了今天仍在使用的模型，实现了质的飞跃。<br>Importance: Once computers became powerful enough to approximately solve this equation, it opened up a complex and very useful field of physics. It is particularly useful in making vehicles more aerodynamic.<br>重要性：一旦计算机变得强大到足以大致解决这个等式，它就开辟了一个复杂且非常有用的物理领域。它特别适用于使车辆设计得更具空气动力学性能。<br>While we can use modern computers to make practical approximate simulations of fluid dynamics that are useful in engineering, finding a mathematically exact solution (or even knowing whether or not an exact solution exists in all cases) is still an open question, one whose answer is attached to a million-dollar prize.<br>虽然我们可以使用现代计算机对工程中有用的流体动力学进行实际的近似模拟，但找到一个数学上精确的解决方案（或者甚至知道在所有情况下是否存在精确解决方案）仍然是一个悬而未决的问题，它被悬赏了一百万美元的奖金。<br>Modern use: Among other things, allowed for the development of modern passenger jets.<br>现代用途：现代客机的发展离不开它。</p><h2 id="Maxwell’s-equations"><a href="#Maxwell’s-equations" class="headerlink" title="Maxwell’s equations"></a>Maxwell’s equations</h2><p>$$\nabla\cdot\vec{E} = \frac{\rho}{\epsilon_0}$$<br>$$\nabla\cdot\vec{B} = 0 $$<br>$$\nabla\times\vec{E} = -\frac{\partial B}{\partial t} $$<br>$$\nabla\times\vec{B} = \mu_0\left(\vec{J}+\epsilon_0\frac{\partial E}{\partial t} \right)$$<br>J.C.Maxwell, 1865<br>What does it mean? Maps out the relationship between electric and magnetic fields.<br>作用：描述了电场和磁场之间的关系。<br>History: Michael Faraday did pioneering work on the connection between electricity and magnetism, and James Clerk Maxwell translated it into these equations. Maxwell’s equations were for classical electromagnetism what Newton’s laws of motion were for classical mechanics.<br>历史：迈克尔 · 法拉第（Michael Faraday）在电力和磁力之间的联系方面做了开创性的工作，而詹姆斯 · 克拉克斯 · 麦克斯韦（James Clerk Maxwell）将它们写入了方程组。麦克斯韦方程组用于经典电磁学，而牛顿的运动定律是经典力学的。<br>Importance: Helped understand electromagnetic waves, helping to create most modern electrical and electronic technology.<br>重要性：帮助了解电磁波，帮助创造了最现代化的电气和电子技术。<br>Modern use: Radar, television, and modern communications.<br>现代用途：雷达，电视和现代通讯。</p><h2 id="Second-law-of-thermodynamics"><a href="#Second-law-of-thermodynamics" class="headerlink" title="Second law of thermodynamics"></a>Second law of thermodynamics</h2><p>$$dS\ge0$$<br>L.Boltzmann, 1874<br>What does it mean? Energy and heat dissipate over time.<br>作用：孤立系统的熵随着时间的推移而增加。<br>History: Sadi Carnot first posited that nature does not have reversible processes. Mathematician Ludwig Boltzmann extended the law, and William Thomson formally stated it.<br>历史：萨迪 · 卡诺（Sadi Carnot）首先假定大自然没有可逆的过程。数学家玻尔兹曼（Ludwig Boltzmann）扩展了这一定律，威廉 · 汤姆森（William Thomson）正式声明了这一点。<br>Importance: Essential to our understanding of energy and the universe via the concept of entropy. Thermodynamic entropy is, roughly speaking, a measure of how disordered a system is. A system that starts out in an ordered, uneven state — say, a hot region next to a cold region — will always tend to even out, with heat flowing from the hot area to the cold area until evenly distributed.<br>重要性：通过熵的概念对能量和宇宙的理解是必不可少的。粗略地说，热力学熵是衡量系统混乱程度的一种方法。一个以有序，不均匀状态开始的系统——比如一个寒冷地区旁边的炎热区域——将始终趋于均匀，热量从热区流向冷区直到均匀分布。<br>Modern use: Thermodynamics underlies much of our understanding of chemistry and is essential in building any kind of power plant or engine.<br>现代用途：热力学是我们对化学的理解的基础，对于建造任何类型的发电厂或发动机至关重要。</p><h2 id="Einstein’s-theory-of-relativity"><a href="#Einstein’s-theory-of-relativity" class="headerlink" title="Einstein’s theory of relativity"></a>Einstein’s theory of relativity</h2><p>$$E=mc^2$$<br>Einstein, 1905<br>What does it mean? Energy and matter are two sides of the same coin.<br>作用：能量和物质是同一枚硬币的两面。<br>History: The genesis of Einstein’s equation was an experiment by Albert Michelson and Edward Morley that proved light did not move in a Newtonian manner in comparison to changing frames of reference. Einstein followed up on this insight with his famous papers on special relativity (1905) and general relativity (1915).<br>历史：爱因斯坦质能方程的起源是艾伯特 · 迈克尔逊和爱德华 · 莫雷的实验，他们证明光相对变化的参考系没有以牛顿预言的方式运动。爱因斯坦用他关于狭义相对论（1905）和广义相对论（1915）的着名论文跟进了这一见解。<br>Special relativity brought in ideas like the speed of light being a universal speed limit and the passage of time being different for people moving at different speeds.<br>狭义相对论带来了诸如光速是宇宙中速度上限的想法，以及时间的流逝对于以不同速度运动的人来说是不同的。<br>General relativity describes gravity as a curving and folding of space and time themselves, and was the first major change to our understanding of gravity since Newton’s law. General relativity is essential to our understanding of the origins, structure, and ultimate fate of the universe.<br>广义相对论将重力描述为空间和时间本身的弯曲和折叠，并且是自牛顿定律以来我们对引力理解的第一次重大改变。广义相对论对于我们理解宇宙的起源，结构和最终命运至关重要。<br>Importance: Probably the most famous equation in history. Completely changed our view of matter and reality.<br>重要性：可能是历史上最着名的等式。完全改变了我们对物质和现实的看法。<br>Modern use: Helped lead to nuclear weapons, and if GPS didn’t account for it, your directions would be off thousands of yards.<br>现代用途：质能方程是核武器制造的理论基础；而如果 GPS 没有考虑相对论，你的方向将偏离数千码。</p><h2 id="The-Schrodinger-equation"><a href="#The-Schrodinger-equation" class="headerlink" title="The Schrödinger equation"></a>The Schrödinger equation</h2><p>$$i\hbar\frac{\partial}{\partial t}\Psi=H\Psi$$<br>E.Schrodinger, 1927<br>What does it mean? This is the main equation in quantum physics. Models matter as a wave, rather than a particle.<br>作用：这是量子物理学的主要方程。模型的特性像波而非粒子。<br>History: Louis-Victor de Broglie pinpointed the dual nature of matter in 1924. The equation you see was derived by Erwin Schrödinger in 1927, building off of the work of physicists like Werner Heisenberg. It describes the way subatomic particles and atoms evolve over time.<br>历史：德布罗意（Louis-Victor de Broglie）在 1924 年确定了物质波粒二象性。你看到的等式是由薛定谔（Erwin Schrödinger）在 1927 年得出的，它建立了像海森堡（Werner Heisenberg）这样的物理学家的工作。它描述了亚原子粒子和原子随时间演变的方式。<br>Importance: Revolutionized the view of physics at small scales. The insight that particles at that level exist at a range of probable states was revolutionary.<br>重要性：在微观范围内彻底改变了物理学的观点。对于『微观状态下的粒子存在于一系列可能状态』的洞察是革命性的。<br>Modern quantum mechanics and general relativity are the two most successful scientific theories in history — all of the experimental observations we have made to date are entirely consistent with their predictions.<br>现代量子力学和广义相对论是历史上最成功的两个科学理论——我们迄今为止所做的所有实验观察都完全符合他们的预测。<br>Modern use: Quantum mechanics is necessary for most modern technology — nuclear power, semiconductor-based computers, and lasers are all built around quantum phenomena.<br>现代用途：量子力学是大多数现代技术所必需的——核能，半导体计算机和激光都是围绕量子现象建立的。</p><h2 id="Shannon’s-information-theory"><a href="#Shannon’s-information-theory" class="headerlink" title="Shannon’s information theory"></a>Shannon’s information theory</h2><p>$$H=-\sum p(x)logp(x)$$<br>C.Shannon, 1949<br>What does it mean? Estimates the amount of data in a piece of code by the probabilities of its component symbols.<br>作用：通过其组件符号的确定性来估计一段代码中的数据量。<br>History: Developed by Bell Labs engineer Claude Shannon in the years after World War 2.<br>历史：由贝尔实验室工程师香农（Claude Shannon）在第二次世界大战后的几年中开发。<br>Importance: The equation given here is for Shannon information entropy. As with the thermodynamic entropy given above, this is a measure of disorder. In this case, it measures the information content of a message — a book, a JPEG picture sent on the internet, or anything that can be represented symbolically. The Shannon entropy of a message represents a lower bound on how much that message can be compressed without losing some of its content.<br>重要性：这里给出的等式是香农信息熵。与上面给出的热力学熵一样，这是一种无序的量度。在这种情况下，它测量消息的信息内容——书籍，在互联网上发送的 JPEG 图片，或者可以象征性地表示的任何内容。消息的香农熵表示该消息可被压缩多少而不会丢失其某些内容的下限。<br>Modern use: Shannon’s entropy measure launched the mathematical study of information, and his results are central to how we communicate over networks today.<br>现代用途：信息熵的测量推出了信息的数学研究，他的结果对于我们今天如何通过网络进行通信至关重要。</p><h2 id="The-logistic-model-for-population-growth"><a href="#The-logistic-model-for-population-growth" class="headerlink" title="The logistic model for population growth"></a>The logistic model for population growth</h2><p>$$x_{t+1}=kx_t (1-x_t)$$<br>Robert May, 1975<br>What does it mean? Estimates the change in a population of creatures across generations with limited resources. Importantly, this equation can lead to chaotic behavior.<br>作用：估计资源有限的几代人生物群体的变化。重要的是，这个等式可能导致混沌的行为。<br>History: Robert May was the first to point out that this model of population growth could produce chaos in 1975. Important work by mathematicians Vladimir Arnold and Stephen Smale helped with the realization that chaos is a consequence of differential equations.</p><p>历史：罗伯特 · 梅（Robert May）是第一个指出这种人口增长模式可能在 1975 年产生混沌的人。数学家弗拉基米尔 · 阿诺德和斯蒂芬 · 萨马​​尔的重要工作有助于认识到混沌是微分方程的结果。<br>For certain values of k, the map shows chaotic behavior: if we start at some particular initial value of x, the process will evolve one way, but if we start at another initial value, even one very very close to the first value, the process will evolve a completely different way.<br>对于 k 的某些值，地图显示混沌行为：如果我们从 x 的某个特定初始值开始，则该过程将以单向进化，但如果我们从另一个初始值开始，即使非常接近第一个值，过程将以完全不同的方式发展。<br>Importance: Helped in the development of chaos theory, which has completely changed our understanding of the way that natural systems work.<br>重要性：帮助混沌理论的发展，这完全改变了我们对自然系统工作方式的理解。<br>We see chaotic behavior — behavior sensitive to initial conditions — like this in many areas. Weather is a classic example — a small change in atmospheric conditions on one day can lead to completely different weather systems a few days later, most commonly captured in the idea of a butterfly flapping its wings on one continent causing a hurricane on another continent.<br>我们看到混乱行为——对初始条件敏感的行为——在许多领域都是如此。天气是一个典型的例子——一天大气条件的微小变化可能导致几天后完全不同的天气系统，最常见的是蝴蝶在一个大陆上扇动翅膀，就可能导致另一个大陆上的飓风。<br>Modern use: Used to model earthquakes and forecast the weather.<br>现代用途：用于模拟地震和预报天气。</p><h2 id="The-Black–Scholes-model"><a href="#The-Black–Scholes-model" class="headerlink" title="The Black–Scholes model"></a>The Black–Scholes model</h2><p>$$\frac{1}{2}\sigma^2S^2\frac{\partial^2V}{\partial S^2}+rS\frac{\partial V}{\partial S}+\frac{\partial V}{\partial t}-rV=0$$<br>F.Black, M.Scholes, 1990<br>What does it mean? Prices a derivative based on the assumption that it is riskless and that there is no arbitrage opportunity when it is priced correctly.<br>作用：基于假设它是无风险的并且在正确定价时没有套利机会来定价衍生品。<br>History: Developed by Fischer Black and Myron Scholes, then expanded by Robert Merton. The latter two won the 1997 Nobel Prize in Economics for the discovery.<br>历史：由 Fischer Black 和 Myron Scholes 开发，然后由 Robert Merton 扩展。后两者因此获得了 1997 年诺贝尔经济学奖。<br>Importance: Helped create the now multi-trillion dollar derivatives market. It is argued that improper use of the formula (and its descendants) contributed to the financial crisis. In particular, the equation maintains several assumptions that do not hold true in real financial markets.<br>重要性：帮助创造了现在数万亿美元的衍生品市场。有人认为，不恰当地使用公式（及其推论）会导致金融危机。特别是，该等式保留了几个在实际金融市场中不成立的假设。<br>Modern use: Variants are still used to price most derivatives, even after the financial crisis.<br>现代用途：即使在金融危机之后，它的变体仍然被用来为大多数衍生品定价。</p><p>本文翻译自：<a href="https://www.businessinsider.com/equations-that-changed-the-world-2016-3" target="_blank" rel="noopener">17 Equations That Changed the World</a></p><p>购书链接：<a href="https://www.amazon.com/gp/product/0465029736" target="_blank" rel="noopener">17 Equations That Changed the World</a></p>]]></content>
      
      
      <categories>
          
          <category> 物理 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>详解 CSRF 与 XSS 攻击</title>
      <link href="/2018-07/%E8%AF%A6%E8%A7%A3CSRF%E4%B8%8EXSS%E6%94%BB%E5%87%BB/"/>
      <url>/2018-07/%E8%AF%A6%E8%A7%A3CSRF%E4%B8%8EXSS%E6%94%BB%E5%87%BB/</url>
      
        <content type="html"><![CDATA[<p>在 <a href="/2018-07/WordPress 中文验证码 /">之前的一篇文章</a> 中，提到了 WordPress 的插件审核机制，其中对于代码安全性的要求，主要就是对 CSRF 与 XSS 攻击的防范。官方邮件中这样写道：</p><blockquote><h2 id="Not-using-Nonces-and-or-checking-permissions"><a href="#Not-using-Nonces-and-or-checking-permissions" class="headerlink" title="Not using Nonces and/or checking permissions"></a>Not using Nonces and/or checking permissions</h2><p>Please add a nonce to your POST calls to prevent unauthorized access.<br>Keep in mind, check_admin_referer alone is NOT bulletproof security. Do not rely on nonces for authorization purposes. Use current_user_can() in order to prevent users without the right permissions from accessing things.</p></blockquote><blockquote><h2 id="Please-sanitize-escape-and-validate-your-POST-calls"><a href="#Please-sanitize-escape-and-validate-your-POST-calls" class="headerlink" title="Please sanitize, escape, and validate your POST calls"></a>Please sanitize, escape, and validate your POST calls</h2><p>When you include POST/GET/REQUEST/FILE calls in your plugin, it’s important to sanitize, validate, and escape them. The goal here is to prevent a user from accidentally sending trash data through the system, as well as protecting them from potential security issues.<br>SANITIZE: Data that is input (either by a user or automatically) must be sanitized. This lessens the possibility of XSS vulnerabilities and MITM attacks where posted data is subverted.<br>VALIDATE: All data should be validated as much as possible. Even when you sanitize, remember that you don’t want someone putting in’dog’ when the only valid values are numbers.<br>ESCAPE: Data that is output must be escaped properly, so it can’t hijack admin screens. There are many esc_*() functions you can use to make sure you don’t show people the wrong data.<br>To help you with this, WordPress comes with a number of sanitization and escaping functions. You can read about those here: <a href="https://developer.wordpress.org/plugins/security/securing-input/" target="_blank" rel="noopener">https://developer.wordpress.org/plugins/security/securing-input/</a><br>Remember: You must use the MOST appropriate functions for the context. If you’re sanitizing email, use sanitize_email(), if you’re outputting HTML, use esc_html(), and so on.<br>Clean everything, check everything, escape everything, and never trust the users to always have input sane data.</p></blockquote><p>下面通过维基百科的内容介绍 CSRF 与 XSS 攻击的具体形式。</p><a id="more"></a><h1 id="CSRF"><a href="#CSRF" class="headerlink" title="CSRF"></a>CSRF</h1><p>跨站请求伪造（英语：Cross-site request forgery），也被称为 one-click attack 或者 session riding，通常缩写为 CSRF 或者 XSRF，是一种挟制用户在当前已登录的 Web 应用程序上执行非本意的操作的攻击方法。跟跨网站脚本（XSS）相比，XSS 利用的是用户对指定网站的信任，CSRF 利用的是网站对用户网页浏览器的信任。</p><h2 id="攻击的细节"><a href="#攻击的细节" class="headerlink" title="攻击的细节"></a>攻击的细节</h2><p>跨站请求攻击，简单地说，是攻击者通过一些技术手段欺骗用户的浏览器去访问一个自己曾经认证过的网站并执行一些操作（如发邮件，发消息，甚至财产操作如转账和购买商品）。由于浏览器曾经认证过，所以被访问的网站会认为是真正的用户操作而去执行。这利用了 web 中用户身份验证的一个漏洞：<strong> 简单的身份验证只能保证请求发自某个用户的浏览器，却不能保证请求本身是用户自愿发出的 </strong>。</p><h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><p>假如一家银行用以执行转账操作的 URL 地址为 <code>http://www.examplebank.com/withdraw?account=AccoutName&amp;amount=1000&amp;for=PayeeName</code>，那么，一个恶意攻击者可以在另一个网站上放置如下代码：<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">&lt;img src="&lt;http://www.examplebank.com/withdraw?account=Alice<span class="variable">&amp;amount</span>=<span class="number">1000</span><span class="variable">&amp;for</span>=Badman&gt;</span><span class="string">"&gt;</span></span><br></pre></td></tr></table></figure></p><p>如果有账户名为 Alice 的用户访问了恶意站点，而她之前刚访问过银行不久，登录信息尚未过期，那么她就会损失 1000 资金。<br>这种恶意的网址可以有很多种形式，藏身于网页中的许多地方。此外，攻击者也不需要控制放置恶意网址的网站。例如他可以将这种地址藏在论坛，博客等任何用户生成内容的网站中。这意味着 <strong> 如果服务器端没有合适的防御措施的话，用户即使访问熟悉的可信网站也有受攻击的危险 </strong>。<br>透过例子能够看出，攻击者并不能通过 CSRF 攻击来直接获取用户的账户控制权，也不能直接窃取用户的任何信息。他们能做到的，是 <strong> 欺骗用户浏览器，让其以用户的名义执行操作 </strong>。</p><h2 id="防御措施"><a href="#防御措施" class="headerlink" title="防御措施"></a>防御措施</h2><h3 id="检查-Referer-字段"><a href="#检查-Referer-字段" class="headerlink" title="检查 Referer 字段"></a>检查 Referer 字段</h3><p>HTTP 头中有一个 Referer 字段，这个字段用以标明请求来源于哪个地址。在处理敏感数据请求时，通常来说，Referer 字段应和请求的地址位于同一域名下。以上文银行操作为例，Referer 字段地址通常应该是转账按钮所在的网页地址，应该也位于 <code>www.examplebank.com</code> 之下。而如果是 CSRF 攻击传来的请求，Referer 字段会是包含恶意网址的地址，不会位于 <code>www.examplebank.com</code> 之下，这时候服务器就能识别出恶意的访问。<br>这种办法简单易行，工作量低，仅需要在关键访问处增加一步校验。但这种办法也有其局限性，因其完全依赖浏览器发送正确的 Referer 字段。虽然 http 协议对此字段的内容有明确的规定，但并无法保证来访的浏览器的具体实现，亦无法保证浏览器没有安全漏洞影响到此字段。并且也存在攻击者攻击某些浏览器，篡改其 Referer 字段的可能。</p><h3 id="添加校验-token"><a href="#添加校验-token" class="headerlink" title="添加校验 token"></a>添加校验 token</h3><p>由于 CSRF 的本质在于攻击者欺骗用户去访问自己设置的地址，所以如果要求在访问敏感数据请求时，要求用户浏览器提供不保存在 cookie 中，并且攻击者无法伪造的数据作为校验，那么攻击者就无法再执行 CSRF 攻击。这种数据通常是表单中的一个数据项。服务器将其生成并附加在表单中，其内容是一个伪乱数。当客户端通过表单提交请求时，这个伪乱数也一并提交上去以供校验。正常的访问时，客户端浏览器能够正确得到并传回这个伪乱数，而通过 CSRF 传来的欺骗性攻击中，攻击者无从事先得知这个伪乱数的值，服务器端就会因为校验 token 的值为空或者错误，拒绝这个可疑请求。</p><h1 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h1><p>跨站脚本（英语：Cross-site scripting，通常简称为：XSS）是一种网站应用程序的安全漏洞攻击，是代码注入的一种。它允许恶意用户将代码注入到网页上，其他用户在观看网页时就会受到影响。这类攻击通常包含了 HTML 以及用户端脚本语言。<br>XSS 攻击通常指的是通过利用网页开发时留下的漏洞，通过巧妙的方法注入恶意指令代码到网页，使用户加载并执行攻击者恶意制造的网页程序。这些恶意网页程序通常是 JavaScript，但实际上也可以包括 Java，VBScript，ActiveX，Flash 或者甚至是普通的 HTML。攻击成功后，攻击者可能得到更高的权限（如执行一些操作）、私密网页内容、会话和 cookie 等各种内容。</p><h2 id="背景和现状"><a href="#背景和现状" class="headerlink" title="背景和现状"></a>背景和现状</h2><p>当网景（Netscape）最初推出 JavaScript 语言时，他们也察觉到准许网页服务器发送可执行的代码给一个浏览器的安全风险（即使仅是在一个浏览器的沙盒里）。它所造成的一个关键的问题在于用户同时打开多个浏览器视窗时，在某些例子里，网页里的片断代码被允许从另一个网页或对象取出数据，而因为恶意的网站可以用这个方法来尝试窃取机密信息，所以在某些情形，这应是完全被禁止的。为了解决这个问题，浏览器采用了同源决策——仅允许来自相同域名系统和使用相同协议的对象与网页之间的任何交互。这样一来，恶意的网站便无法借由 JavaScript 在另一个浏览器窃取机密数据。此后，为了保护用户免受恶意的危害，其他的浏览器与服务端指令语言采用了类似的访问控制决策。<br>XSS 漏洞可以追溯到 1990 年代。大量的网站曾遭受 XSS 漏洞攻击或被发现此类漏洞，如 Twitter，Facebook，MySpace，Orkut，新浪微博和百度贴吧。研究表明，最近几年 XSS 已经超过缓冲区溢出成为最流行的攻击方式，有 68% 的网站可能遭受此类攻击。根据开放网页应用安全计划（Open Web Application Security Project）公布的 2010 年统计数据，在 Web 安全威胁前 10 位中，XSS 排名第 2，仅次于代码注入（Injection）。</p><h2 id="攻击手段和目的"><a href="#攻击手段和目的" class="headerlink" title="攻击手段和目的"></a>攻击手段和目的</h2><p>攻击者使被攻击者在浏览器中执行脚本后，如果需要收集来自被攻击者的数据（如 cookie 或其他敏感信息），可以自行架设一个网站，让被攻击者通过 JavaScript 等方式把收集好的数据作为参数提交，随后以数据库等形式记录在攻击者自己的服务器上。<br>常用的 XSS 攻击手段和目的有：</p><ul><li>盗用 cookie，获取敏感信息。</li><li>利用植入 Flash，通过 crossdomain 权限设置进一步获取更高权限；或者利用 Java 等得到类似的操作。</li><li>利用 iframe、frame、XMLHttpRequest 或上述 Flash 等方式，以（被攻击）用户的身份执行一些管理动作，或执行一些一般的如发微博、加好友、发私信等操作。</li><li>利用可被攻击的域受到其他域信任的特点，以受信任来源的身份请求一些平时不允许的操作，如进行不当的投票活动。</li><li>在访问量极大的一些页面上的 XSS 可以攻击一些小型网站，实现 DDoS 攻击的效果。</li></ul><h2 id="漏洞的防御和利用"><a href="#漏洞的防御和利用" class="headerlink" title="漏洞的防御和利用"></a>漏洞的防御和利用</h2><h3 id="过滤特殊字符"><a href="#过滤特殊字符" class="headerlink" title="过滤特殊字符"></a>过滤特殊字符</h3><p>避免 XSS 的方法之一主要是将用户所提供的内容进行过滤，许多语言都有提供对 HTML 的过滤：</p><ul><li>PHP 的 <code>htmlentities()</code> 或是 <code>htmlspecialchars()</code>。</li><li>Python 的 <code>cgi.escape()</code>。</li><li>ASP 的 <code>Server.HTMLEncode()</code>。</li><li>ASP.NET 的 <code>Server.HtmlEncode()</code> 或功能更强的 Microsoft Anti-Cross Site Scripting Library。</li><li>Java 的 xssprotect(Open Source Library)。</li><li>Node.js 的 node-validator。</li></ul><h3 id="使用-HTTP-头指定类型"><a href="#使用-HTTP-头指定类型" class="headerlink" title="使用 HTTP 头指定类型"></a>使用 HTTP 头指定类型</h3><p>很多时候可以使用 HTTP 头指定内容的类型，使得输出的内容避免被作为 HTML 解析。如在 PHP 语言中使用以下代码：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    header(<span class="string">'Content-Type: text/javascript; charset=utf-8'</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p><p>即可强行指定输出内容为文本 / JavaScript 脚本（顺便指定了内容编码），而非可以引发攻击的 HTML。</p><h3 id="用户方面"><a href="#用户方面" class="headerlink" title="用户方面"></a>用户方面</h3><p>包括 Internet Explorer、Mozilla Firefox 在内的大多数浏览器皆有关闭 JavaScript 的选项，但关闭功能并非是最好的方法，因为许多网站都需要使用 JavaScript 语言才能正常运作。通常来说，一个经常有安全更新推出的浏览器，在使用上会比很久都没有更新的浏览器更为安全。</p><p>参考文章：<br><a href="https://en.wikipedia.org/wiki/Cross-site_request_forgery" target="_blank" rel="noopener">跨站请求伪造</a><br><a href="https://en.wikipedia.org/wiki/Cross-site_scripting" target="_blank" rel="noopener">跨站脚本</a><br><a href="https://codex.wordpress.org/WordPress_Nonces" target="_blank" rel="noopener">WordPress Nonces</a><br><a href="https://developer.wordpress.org/plugins/security/securing-input" target="_blank" rel="noopener">Securing Input</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo 内容压缩</title>
      <link href="/2018-07/Hexo%E5%86%85%E5%AE%B9%E5%8E%8B%E7%BC%A9/"/>
      <url>/2018-07/Hexo%E5%86%85%E5%AE%B9%E5%8E%8B%E7%BC%A9/</url>
      
        <content type="html"><![CDATA[<p>Hexo 生成的博客静态页面存在一些问题：页面中有大量空白行。虽然这对浏览器的渲染影响微乎其微，但是让强迫症极为难受。可以在博客的主目录下（与 public 文件夹同级）新建以下 Python 脚本：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment">#-*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">minify_html</span><span class="params">(srcPath)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(srcPath, topdown = <span class="keyword">True</span>):</span><br><span class="line">        <span class="keyword">for</span> name <span class="keyword">in</span> files:</span><br><span class="line">            <span class="keyword">if</span> name.find(<span class="string">".html"</span>) == <span class="number">-1</span>:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            filename = os.path.join(root, name)</span><br><span class="line">            <span class="keyword">with</span> open(filename, <span class="string">"r"</span>) <span class="keyword">as</span> p:</span><br><span class="line">                <span class="keyword">with</span> open(filename + <span class="string">".tmp"</span>, <span class="string">"w"</span>) <span class="keyword">as</span> t:</span><br><span class="line">                    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">                        l = p.readline()</span><br><span class="line">                        <span class="keyword">if</span> <span class="keyword">not</span> l:</span><br><span class="line">                            <span class="keyword">break</span></span><br><span class="line">                        l = l.strip()</span><br><span class="line">                        <span class="keyword">if</span> l:</span><br><span class="line">                            t.write(l + <span class="string">"\n"</span>)</span><br><span class="line">            os.remove(filename)</span><br><span class="line">            os.rename(filename + <span class="string">".tmp"</span>, filename)</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"\033[32mINFO\033[0m  Minified: \033[35m%s\033[0m"</span> % filename</span><br><span class="line"></span><br><span class="line">minify_html(<span class="string">"public"</span>)</span><br></pre></td></tr></table></figure></p><p>这样，在每次执行 <code>hexo d</code> 之前，执行该脚本，就可以上传压缩后的页面了。</p><a id="more"></a><p>如果 Hexo 博客托管在 GitHub Pages 等第三方平台上，为了减少页面的加载时间，对图片等内容进行 CDN 加速是一个不错的方法。当然，还有一个更为直接的方法，那就是通过降低分辨率来减少图片大小。这是压缩图片的脚本：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment">#-*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> os, shutil</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">compress_image</span><span class="params">(srcPath, dstPath)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> filename <span class="keyword">in</span> os.listdir(srcPath):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(dstPath):</span><br><span class="line">            os.makedirs(dstPath)</span><br><span class="line"></span><br><span class="line">        srcFile = os.path.join(srcPath, filename)</span><br><span class="line">        dstFile = os.path.join(dstPath, filename)</span><br><span class="line">        <span class="keyword">if</span> os.path.isfile(srcFile):</span><br><span class="line">            <span class="keyword">if</span> os.path.isfile(dstFile) <span class="keyword">or</span> (<span class="keyword">not</span> srcFile.endswith(<span class="string">".jpg"</span>) <span class="keyword">and</span> <span class="keyword">not</span> srcFile.endswith(<span class="string">".png"</span>)):</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">if</span> os.path.getsize(srcFile) &lt;= <span class="number">300000</span>:</span><br><span class="line">                shutil.copyfile(srcFile, dstFile)</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            sImg = Image.open(srcFile)</span><br><span class="line">            w, h = sImg.size</span><br><span class="line">            dImg = sImg.resize((w * <span class="number">2</span> / <span class="number">3</span>, h * <span class="number">2</span> / <span class="number">3</span>), Image.ANTIALIAS)</span><br><span class="line">            dImg.save(dstFile)</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"\033[32mINFO\033[0m  Minified: \033[35m%s\033[0m"</span> % dstFile</span><br><span class="line"></span><br><span class="line">        <span class="keyword">elif</span> os.path.isdir(srcFile):</span><br><span class="line">            compress_image(srcFile, dstFile)</span><br><span class="line"></span><br><span class="line">compress_image(<span class="string">"images"</span>, <span class="string">"source/images"</span>)</span><br></pre></td></tr></table></figure></p><p>在每次执行 <code>hexo g</code> 之前，在博客的主目录下执行该脚本，就可以将 images 目录下的高分辨率图片，压缩并存储到 source/images 目录下。如果要在 Markdown 文件中插入图片，使用 <code>![](/images/path/to/your/image)</code> 即可。<br>这里用了递归的写法，有兴趣的话，你也可以使用 <code>os.walk()</code> 方法改写以上脚本，这可能会更加简洁。</p><p>参考文章：<br><a href="https://blog.jiangjiaolong.com/hexo-next-theme-minify.html" target="_blank" rel="noopener">hexo next 主题大量空白行问题</a><br><a href="https://blog.csdn.net/u012234115/article/details/50248409" target="_blank" rel="noopener">python 脚本编程：批量压缩图片大小</a></p><p>本文更新于 2018 年 11 月 15 日：<br>也可以使用官方的插件：<a href="https://github.com/hexojs/hexo-html-minifier" target="_blank" rel="noopener">hexo-html-minifier</a><br>不过这个插件的去除注释功能不太智能，会把 <code>&lt;!-- more --&gt;</code> 也一并去除，导致 Read More 功能失效。</p><p>本文更新于 2018 年 11 月 20 日：<br>博主发现了一个不错的工具，涵盖了以上功能：<a href="https://github.com/chenzhutian/hexo-all-minifier" target="_blank" rel="noopener">hexo-all-minifier</a></p>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WordPress 中文验证码</title>
      <link href="/2018-07/WordPress%E4%B8%AD%E6%96%87%E9%AA%8C%E8%AF%81%E7%A0%81/"/>
      <url>/2018-07/WordPress%E4%B8%AD%E6%96%87%E9%AA%8C%E8%AF%81%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<p>反机器人和垃圾评论是个人博客老生常谈的话题。除了特征识别算法外，最普遍使用的屏蔽方法就是验证码了。在 WordPress 插件库中，有着各式各样的验证码插件。然而，很多验证码插件都依赖于 Google 的 reCAPTCHA，这在国内无法访问；而一些基于 Session 或文件验证的验证码插件功能和质量参差不齐，性能和安全性难以得到保障。虽然博主已经抛弃了 WordPress 转投 Hexo 静态博客（正如你所看到的这样），但考虑到 WordPress 中少有适合我国国情的验证码插件，故决定将一些主流图形验证码的功能进行整合，制作出一个全新的通用性更强的验证码解决方案。Mimi Captcha 就这样诞生了。<br>这是一个同时支持数字、大小写字母、中文、算术的图形验证码插件。它是基于 Vinoj Cardoza 的 <a href="https://wordpress.org/plugins/captcha-code-authentication" target="_blank" rel="noopener">Captcha Code</a> 在 GPL 协议下二次开发的。原项目存在的问题是，验证码中的字符采用同一字体在同一高度下顺序排列，这样非常容易被识别。改动过程中，加入了『超时时间』设置，以及对用户更为友好的『不区分大小写』设置。而验证码图片的生成算法，则进行了重构，很大程度上采用了 <a href="http://www.iteye.com/topic/469170" target="_blank" rel="noopener">流水孟春</a> 的方案。同时，在 IP 白名单等功能上，参考了 <a href="https://wordpress.org/plugins/captcha" target="_blank" rel="noopener">Captcha</a> 的代码。中文验证码和算术验证码则是新加入的功能，在原插件上拓展而成。最终效果如图：</p><p><img src="/images/2018-07/screenshot-1.png" alt=""></p><a id="more"></a><p><img src="/images/2018-07/screenshot-2.png" alt=""><br><img src="/images/2018-07/screenshot-3.png" alt=""></p><p>如果你对这个插件有任何意见或建议，敬请在评论区留言！<br>代码可以在 GitHub 上查看：<a href="https://github.com/stevenjoezhang/mimi-captcha" target="_blank" rel="noopener">Mimi Captcha</a><br>同时也发布在了 WordPress 插件库：<a href="https://wordpress.org/plugins/mimi-captcha" target="_blank" rel="noopener">Mimi Captcha</a><br>顺便吐槽一下 WordPress 官方团队粗暴无礼的插件审核机制，真的是非常严格呢。（不过要确保插件的可靠性，严格一点也是必要的）<br>最后要说的是，没有绝对安全的系统。中文验证码只是提高了机器人发布垃圾评论和暴力破解密码的成本，而管理员保持良好的使用习惯、进行合理的维护才是确保 WordPress 正常运行的关键。</p><p>拓展阅读：<br><a href="https://doc.yonyoucloud.com/doc/ae/920457.html" target="_blank" rel="noopener">知识库：使用 Tesseract 识别弱验证码</a><br><a href="https://pewae.com/2018/10/wordpress-settings-api-implementing-tabs-on-custom-menu-page.html" target="_blank" rel="noopener">【翻译】wordpress 在后台自定义菜单页面上实现 TAB 页</a></p>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WordPress </tag>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>贝利乌鸦嘴历史</title>
      <link href="/2018-06/%E8%B4%9D%E5%88%A9%E4%B9%8C%E9%B8%A6%E5%98%B4%E5%8E%86%E5%8F%B2/"/>
      <url>/2018-06/%E8%B4%9D%E5%88%A9%E4%B9%8C%E9%B8%A6%E5%98%B4%E5%8E%86%E5%8F%B2/</url>
      
        <content type="html"><![CDATA[<p>2018 年俄罗斯世界杯激战正酣，对于谁将捧起大力神杯，大家是不是已经做出了自己的预测？贝利近日在接受采访时就表示，现阶段自己更看好德国和法国队，因为德国是卫冕冠军，而法国队也具有很强的球队实力，他认为这两支球队有更大的可能会捧起今年的大力神杯。</p><p>众所周知，球王贝利不仅在绿茵场上令人害怕，更有一项技能让他在退役后依然使世界足坛胆寒——那就是贝利令人发指的足球预测。贝利被称为世界足坛第一乌鸦嘴，只要被球王的嘴开过光的球队，多半就会输球。以至于如今很多球迷都跪求球王别看好自己的主队。下面就来回顾一下贝利的乌鸦嘴历史：</p><ul><li>贝利 1977 年首次访问中国时曾表示：『中国队很快就能进入世界杯。』这句话之后，中国队苦苦挣扎了 20 年，才在 2002 年勉强挤入世界杯。接着，1991 年女足世界杯上，贝利进一步表扬中国男足，认为中国男足十年内能迈入世界一流行列，结果，中国男足根本不入流。除了中国队之外，贝利自 1990 年世界杯开始每逢大赛前都会进行预测，但是他的预测着实不太靠谱。</li><li>1990 年世界杯贝利公开预测南斯拉夫队将成为当届世界杯最大的黑马，结果，在预选赛第一场比赛后，南斯拉夫 1:4 被德国击败。该场比赛，马特乌斯进了两球。最后，南斯拉夫小组第二侥幸出线，四分之一决赛的时候，南斯拉夫被阿根廷『点杀』。贝利在预测谁将是黑马之后，又预测巴西队是最伟大最强的队伍，肯定夺冠，结果，巴西被阿根廷不多不少就打了一球，饮恨 8 分之一决赛。<br>从这个时候开始，巴西以及南斯拉夫球迷开始怀疑贝利的嘴巴有毒，但尚未成燎原之势。最为有趣的是，成全他『乌鸦嘴』名号的，居然正是死敌——阿根廷队。</li><li>在 1991 年世少赛上，加纳小将兰普提力压德尔 · 皮耶罗当选最佳球员。贝利预测兰普提将会是他的接班人。结果：兰普提并没能发挥他的足球潜质，职业生涯辗转于埃因霍温、阿斯顿维拉、考文垂和威尼斯等球队，后来甚至效力过甲 A 山东鲁能。而他的生活也是悲剧不断，他的两个孩子先后去世。</li><li>1992 年欧洲杯『一意孤行』的贝利又开『新手上路』般的乌鸦嘴，预测南斯拉夫能取得不俗战绩。结果大家也都知道了，南斯拉夫被禁赛。</li><li>1994 年世界杯贝利乌鸦嘴天下扬名，然而，代价却是哥伦比亚球员被枪杀。该届世界杯，贝利认定哥伦比亚队会一鸣惊人。结果，哥队 1 胜 2 负，小组都没冲出去，积分仅为 3 分。极端的哥伦比亚球迷枪杀了打进乌龙球的后卫埃斯科巴。这次悲剧之后，贝利乌鸦嘴天下闻名，南美媒体首次公开撰文让『贝利闭上他的鸟嘴！』</li><li>1996 年欧洲杯贝利别出心裁地公开赞美第一次打进欧洲杯决赛圈的土耳其队，并看好意大利夺冠，小组赛后，两个球队无一例外卷铺盖回家了。只是当时人们都惊诧于捷克的表现，贝利的这两次预言并没有得到舆论过多重视。</li><li>1998 年世界杯贝利认为西班牙小组出线不成问题，结果，西班牙先被尼日利亚戏耍，然后又被巴拉圭逼平，小组都没出线。鉴于尼日利亚的好表现，贝利对其大加赞美，结果 2 天之后，尼日利亚被丹麦打成筛子，1:4 屈辱地打道回府。自觉没有颜面的贝利在接受法国媒体采访时表示，巴西队将战胜法国队夺冠，结果，0:3，堂堂的巴西队就这样毙命。</li><li>2002 年世界杯小组赛前，吸取教训的贝利改道了，无论媒体怎么引诱，他就是不说巴西队夺冠之类的话语，而是很巧妙地说看好阿根廷和法国队这两个巴西队的仇人。这招果然恶毒，阿根廷、法国这两大热门都在小组赛中折戟沉沙，法国甚至连一个进球都没捞到，而阿根廷令人印象最深的则是巴蒂的眼泪。英格兰 3:0 战胜丹麦晋级 4 强，将对阵巴西，贝利一口咬定『英格兰夺冠』，结果可想而知，委屈的英格兰人即便欧文先洞穿巴西大门，随着里瓦、小罗的先后进球，不得不止步决赛的大墙外。最终，巴西夺冠，贝利『赢了』。</li><li>2004 年欧洲杯贝利在小组赛前看好意大利，托蒂吐向波尔森的口水被电视画面清晰地记录下来，结果停赛三场，意大利深受影响，2 平 1 胜，必须得看别人脸色，结果，即便最后一场 2:1 战胜保加利亚，但瑞典 2:2 丹麦，意大利人不得不哭别赛场。接下来，贝利又开始表演，表示看好英格兰，称赞鲁尼前途无限。结果鲁尼在与葡萄牙的比赛里受伤下场，英格兰点球 5:6 落败。随后，他又看好法国队，预言葡萄牙与荷兰的胜者会夺冠，亚军是捷克…… 最终结果却是希腊人在雷哈戈尔的率领下，一鸣惊人。</li><li>2006 年世界杯如今，地球人都晓得贝利乌鸦嘴的厉害了，只要他一开口，天下大惊。这次，他也闲不住，『魔嘴』伸向了巴德英意 4 个球队，随后细化到『巴西夺冠』。近日，贝利不知怀着何种心态，声称『英格兰队没有鲁尼照样是争夺世界杯群雄中最强大的球队』，吓出英格兰球迷一身冷汗。又说『就我个人而言，希望世界杯决赛能够在沙特和巴西之间进行。』结果沙特小组淘汰，巴西队，英格兰队相继淘汰，德国，意大利在 4 强相遇，又有一个要挂。巴西队这次终于中了贝利『魔嘴』。败于法国。今年是国际足联设立最佳新人奖的第一年，贝利认为：『如果阿根廷打入决赛，我认为梅西最有可能获此殊荣。另外 C· 罗纳尔多也是一个出色的球员。如果英格兰队主帅适当地给沃尔科特一些上场表现的机会，这也许会是一段传奇。我打进自己的首粒世界杯进球时，也只有 17 岁。』结果阿根廷，英格兰队被淘汰，C· 罗纳尔多在对阵荷兰的比赛中又受伤下场。</li><li>2008 年，当时还效力于 AC 米兰的罗纳尔多遭遇严重伤病，贝利说外星人玩完了，他即将挂靴。结果：2009 年 3 月罗纳尔多在科林蒂安复出，前 14 场比赛打进了 10 球！</li><li>2010 年南非世界杯，贝利再次做出了预测，称有一支非洲球队将和巴西进行决赛。令人瞠目结舌的是，贝利再次预言『准确』，代表非洲的六支球队仅加纳凭借一粒点球获胜，阿尔及利亚、尼日利亚和喀麦隆全部告负。第一轮小组赛战罢，最大滑铁卢就属非洲球队，6 战仅取得 1 胜 2 平 3 负，还不及亚洲球队 4 战 2 胜 2 负。而所谓『巴西队非洲队会师决赛』的愿望，也在巴西队出局后成为了泡影。</li><li>『尼基 · 巴姆比将成为比肩齐达内、罗纳尔多的超级巨星。』结果：巴姆比只是一个普通的球员，只有 23 次代表英格兰出场，甚至没有在世界杯出现过。09-10 赛季效力的赫尔城也在英超惨遭降级。</li><li>2014 年巴西世界杯，深知自己功力深厚的贝利，没有预测巴西队的前景，甚至拒绝了为 32 强抽签。不过在巴西高歌猛杀进四强之后，贝利忍不住开口了，看好没有内马尔的巴西也能夺冠。他的『乌鸦嘴』也再度显灵，送给东道主一场 1:7 的耻辱惨败。</li><li>不仅是足球，连排球比赛也能成为贝利的毒奶目标。对于 2016 年里约奥运会，贝利表示塞尔维亚女排将会夺冠：『这是一只成熟的队伍，拥有两位优秀的攻手，一位经验丰富的二传，一位出色的副攻以及一位老谋深算的教练。相信她们在决赛会给中国队带来足够的麻烦，她们将会 3:0 横扫中国队拿到金牌。』结果塞尔维亚 1:3 不敌中国女排。</li><li>在贝利和史泰龙以及迈克尔 · 凯恩等著名影星联袂主演的经典影片《胜利大逃亡》中（1981 年上映），上半场贝利被纳粹对手铲伤，他示意自己不能继续比赛了，并被担架抬下场。协约国联队以 0 比 4 落后。结果：贝利下半场还是回来了，并攻入一球帮助球队取得胜利。看，即使在电影中，贝利的预测还是错误的。</li><li>贝利还曾接受采访说：2012 世界末日根本是无稽之谈，我还要看巴西世界杯呢……（幸好这一次，他的预测没有出现问题）</li></ul><p>参考文章：<a href="https://zhidao。baidu。com/question/164350742。html" target="_blank" rel="noopener">贝利乌鸦嘴历史</a></p>]]></content>
      
      
      <categories>
          
          <category> 幽默 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python 标签云拟合图片</title>
      <link href="/2018-06/Python%E6%A0%87%E7%AD%BE%E4%BA%91%E6%8B%9F%E5%90%88%E5%9B%BE%E7%89%87/"/>
      <url>/2018-06/Python%E6%A0%87%E7%AD%BE%E4%BA%91%E6%8B%9F%E5%90%88%E5%9B%BE%E7%89%87/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/2018-06/tux_after.png" alt=""></p><p>借助 Python，可以轻松地用标签云拼出一副图片，就像上图这样。让我们一起看看具体的步骤吧。</p><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>需要安装的包：</p><ul><li>python3</li><li>pip3（即 <code>python3 -m pip</code>）</li></ul><p>需要使用 pip 安装的模块：</p><ul><li>matplotlib</li><li>numpy</li></ul><p>wordcloud 模块也是需要的，但使用 <code>pip3 install wordcloud</code> 大概率会报错。正确的安装方式是：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/amueller/word_cloud.git</span><br><span class="line"><span class="built_in">cd</span> word_cloud-master</span><br><span class="line">sudo pip install -r requirements.txt</span><br><span class="line">python setup.py install</span><br></pre></td></tr></table></figure></p><p>这样就完成安装了。</p><a id="more"></a><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> time, re, json</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> os <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud, ImageColorGenerator</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">pic = np.array(Image.open(<span class="string">"path/to/your/image.png"</span>))</span><br><span class="line">jsondict = &#123;</span><br><span class="line"><span class="string">"Unix"</span>: <span class="number">9</span>,</span><br><span class="line"><span class="string">"Linus Torvalds"</span>: <span class="number">8</span>,</span><br><span class="line"><span class="string">"Richard Stallman"</span>: <span class="number">8</span>,</span><br><span class="line"><span class="string">"open source"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"Gentoo"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"Archlinux"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"Void Linux"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"Guix"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"free software"</span>: <span class="number">8</span>,</span><br><span class="line"><span class="string">"RadHat"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"php"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"SUSE"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"Ruby"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"Python"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"Go"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"Mandriva"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"root"</span>: <span class="number">5</span>,</span><br><span class="line"><span class="string">"android"</span>: <span class="number">4</span>,</span><br><span class="line"><span class="string">"Lisp"</span>: <span class="number">6</span>,</span><br><span class="line"><span class="string">"C"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"Haskell"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"XMonad"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"javascript"</span>: <span class="number">6</span>,</span><br><span class="line"><span class="string">"clojure"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"bash"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"vim"</span>: <span class="number">4</span>,</span><br><span class="line"><span class="string">"emacs"</span>: <span class="number">4</span>,</span><br><span class="line"><span class="string">"vis"</span>: <span class="number">4</span>,</span><br><span class="line"><span class="string">"ls"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"cd"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"grep"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"sed"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"awk"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"pascal"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"GNU"</span>: <span class="number">9</span>,</span><br><span class="line"><span class="string">"irc"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"inkscape"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"github"</span>: <span class="number">5</span>,</span><br><span class="line"><span class="string">"gitlab"</span>: <span class="number">4</span>,</span><br><span class="line"><span class="string">"FOSDEM"</span>: <span class="number">5</span>,</span><br><span class="line"><span class="string">"GPL"</span>: <span class="number">4</span>,</span><br><span class="line"><span class="string">"Free as in Freedom"</span>: <span class="number">5</span>,</span><br><span class="line"><span class="string">"FOSS"</span>: <span class="number">4</span>,</span><br><span class="line"><span class="string">"Mozilla"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"Busybox"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"qemu"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"gnome"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"android"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"Fedora"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"R"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"xelatex"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"mupdf"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"chromium"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"riot"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"pidgin"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"vlc"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"deadbeef"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"xarchiver"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"calibre"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"s6"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"json"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"chez scheme"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"GIMP"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"gcc"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"debian"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"printf(\"Linux\")"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"echo Linux"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"(println \"Linux\")"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"console.log \"Linux\""</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"(format t \"Linux\")"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"writeln(\"Linux\")"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"PRINT \"Linux\""</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"(insert \"Linux\")"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"fmt.Println(\"Linux\")"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"main = putStrLn \"Linux\""</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"(display \"Linux\")"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"System.out.println(\"Linux\");"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"document.write(\"Linux\")"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"type [Linux]"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"disp('Linux')"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"&lt;?php\necho \"Linux\"\n?&gt;"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"Ubuntu"</span>: <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line">image_colors = ImageColorGenerator(pic, [<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>])</span><br><span class="line">wc = WordCloud(background_color = <span class="string">"white"</span>, mask = pic)</span><br><span class="line">wc.generate_from_frequencies(jsondict)</span><br><span class="line"></span><br><span class="line">plt.imshow(wc.recolor(color_func = image_colors), interpolation = <span class="string">"bilinear"</span>)</span><br><span class="line">plt.axis(<span class="string">"off"</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>将 <code>path/to/your/image.png</code> 换为你要制作的图片，例如下面这张：</p><p><img src="/images/2018-06/tux.png" alt=""></p><p>当然也可以替换为自己的图片，支持多种格式，但为了保证效果，非主体部分应填充白色。<br>jsondict 是标签云中文字的内容和权重（大小），自行修改即可。<br>保存后使用 python3 执行以上代码，即可得到拟合出的图片。</p>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux 下增加、删除 Swap 文件</title>
      <link href="/2018-06/Linux%E4%B8%8B%E5%A2%9E%E5%8A%A0%E3%80%81%E5%88%A0%E9%99%A4Swap%E6%96%87%E4%BB%B6/"/>
      <url>/2018-06/Linux%E4%B8%8B%E5%A2%9E%E5%8A%A0%E3%80%81%E5%88%A0%E9%99%A4Swap%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<p>在使用 VPS 时，如果出现内存不够用的情况，可能会产生各种奇怪的问题。这个时候，增加 Swap 空间，就可以起到救急的作用。下面就来看看具体步骤。</p><h2 id="创建-Swap-文件"><a href="#创建-Swap-文件" class="headerlink" title="创建 Swap 文件"></a>创建 Swap 文件</h2><h3 id="检查-Swap-空间"><a href="#检查-Swap-空间" class="headerlink" title="检查 Swap 空间"></a>检查 Swap 空间</h3><p>先检查一下系统里有没有既存的 Swap 文件：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swapon -s</span><br></pre></td></tr></table></figure></p><p>如果返回的信息概要是空的，则表示 Swap 文件不存在。</p><h3 id="计算参数"><a href="#计算参数" class="headerlink" title="计算参数"></a>计算参数</h3><p>创建 Swap 文件将用到 dd 命令，我们需要根据需求（即要分配的 Swap 文件的大小）来计算出参数。一种典型的做法是，每次读写 1KiB，重复 N 次，这样可以兼顾内存消耗和读写次数。因此，如果以 MiB 为单位计算你要分配的 Swap 文件的大小，那么读写次数（拷贝的块数）就是将该值乘以 1024 得到结果。例如，块大小为 1KiB 时，64MiB 的 Swap 文件拷贝的块数是 65536，而 1GiB 的 Swap 文件则是 1048576。</p><h3 id="使用-dd-命令来创建-Swap"><a href="#使用-dd-命令来创建-Swap" class="headerlink" title="使用 dd 命令来创建 Swap"></a>使用 dd 命令来创建 Swap</h3><p>根据前面的计算：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dd <span class="keyword">if</span>=/dev/zero of=/swapfile bs=1024 count=1048576 <span class="comment"># 分配 1G 的 Swap 空间 </span></span><br></pre></td></tr></table></figure></p><p>参数说明：</p><ul><li><code>if=input file</code>：输入文件名，缺省为标准输入。即指定源文件。</li><li><code>of=output file</code>：输出文件名，缺省为标准输出。即指定目的文件。</li><li><code>bs=bytes</code>：同时设置读入 / 输出的块大小为 bytes 个字节，取为 1024。</li><li><code>count=blocks</code>：拷贝的块数，块大小等于 bs 指定的字节数。将前面算出的数字填入即可。</li></ul><p>这里的 <code>if=/dev/zero</code> 意味着向 <code>/swapfile</code> 填满空字符。你也可以尝试将它换成 <code>/dev/random</code>，或许也可以正常初始化。</p><a id="more"></a><h2 id="权限设置"><a href="#权限设置" class="headerlink" title="权限设置"></a>权限设置</h2><p>分配空间后，需要赋予 Swap 文件适当的权限：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chown root:root /swapfile</span><br><span class="line">chmod 0600 /swapfile</span><br></pre></td></tr></table></figure></p><h2 id="启用-Swap"><a href="#启用-Swap" class="headerlink" title="启用 Swap"></a>启用 Swap</h2><p>创建好 Swap 文件，还需要格式化后才能使用。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 初始化并激活 Swap</span></span><br><span class="line">mkswap /swapfile</span><br><span class="line">swapon /swapfile</span><br></pre></td></tr></table></figure></p><p>如果要机器重启的时候自动挂载 Swap，那么还需要修改 fstab 配置。<br>用 vim 打开 <code>/etc/fstab</code> 文件，在其最后添加如下一行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/swapfile  Swap Swap   defaults 0 0</span><br></pre></td></tr></table></figure></p><p>当下一次系统启动时，新的 swap 文件就打开了。<br>添加新的 swap 文件并开启后，检查 <code>cat /proc/swaps</code> 或者 free 命令的输出来查看 swap 是否已打开。</p><h2 id="删除-Swap-分区"><a href="#删除-Swap-分区" class="headerlink" title="删除 Swap 分区"></a>删除 Swap 分区</h2><p>最后，是删除 Swap 分区的方法。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">swapoff /swapfile <span class="comment"># 卸载 swap 文件 </span></span><br><span class="line">rm -rf /swapfile <span class="comment"># 删除文件 </span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>震惊！黄金卡包竟能出橙</title>
      <link href="/2018-06/%E9%9C%87%E6%83%8A%EF%BC%81%E9%BB%84%E9%87%91%E5%8D%A1%E5%8C%85%E7%AB%9F%E8%83%BD%E5%87%BA%E6%A9%99/"/>
      <url>/2018-06/%E9%9C%87%E6%83%8A%EF%BC%81%E9%BB%84%E9%87%91%E5%8D%A1%E5%8C%85%E7%AB%9F%E8%83%BD%E5%87%BA%E6%A9%99/</url>
      
        <content type="html"><![CDATA[<p>暴雪或将濒临破产。</p><p><img src="/images/2018-06/al-akir.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 电子游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 炉石传说 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PS 制作科幻电路板</title>
      <link href="/2018-06/PS%E5%88%B6%E4%BD%9C%E7%A7%91%E5%B9%BB%E7%94%B5%E8%B7%AF%E6%9D%BF/"/>
      <url>/2018-06/PS%E5%88%B6%E4%BD%9C%E7%A7%91%E5%B9%BB%E7%94%B5%E8%B7%AF%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<p>科幻大片里的电路背景看上去是非常复杂的也是非常炫酷的，不过用滤镜来制作却不是很复杂。先把一些纹理处理成网格效果，然后用查找边缘等滤镜加强网络的边缘线条，后期细化一下线条，调整一下颜色即可。<br><img src="/images/2018-06/14513532189940.jpg" alt=""></p><a id="more"></a><h2 id="创建图层"><a href="#创建图层" class="headerlink" title="创建图层"></a>创建图层</h2><p>创建大小为 1920*1200 像素的空白背景，前景色为白色，分辨率为 72dpi，快捷键『d』设置前景色与背景色分别为黑色与白色，新建一个图层，命名为『背景』。</p><p><img src="/images/2018-06/14513532184190.jpg" alt=""></p><h2 id="添加滤镜"><a href="#添加滤镜" class="headerlink" title="添加滤镜"></a>添加滤镜</h2><p>现在我们要利用滤镜来完成我们的背景咯，童鞋们按照步骤来，选择：滤镜 → 渲染 → 云彩。</p><p><img src="/images/2018-06/14513532181161.jpg" alt=""></p><p>滤镜 → 像素化 → 马赛克，参数就这样。</p><p><img src="/images/2018-06/14513532188496.jpg" alt=""></p><p>滤镜 → 模糊 → 径向模糊，参数设置如下。</p><p><img src="/images/2018-06/14513532192604.jpg" alt=""><br><img src="/images/2018-06/14513532197212.jpg" alt=""></p><p>滤镜 → 风格化 → 浮雕效果，这样来设置参数。</p><p><img src="/images/2018-06/14513532199690.jpg" alt=""><br><img src="/images/2018-06/14513532196078.jpg" alt=""></p><p>滤镜 → 滤镜库 → 画笔描边 → 强化的边缘，参数设置。</p><p><img src="/images/2018-06/14513532197207.jpg" alt=""><br><img src="/images/2018-06/14513532198108.jpg" alt=""></p><p>滤镜 → 风格化 → 查找边缘。</p><p><img src="/images/2018-06/14513532192879.jpg" alt=""></p><p>最后一个滤镜咯，选择：滤镜 → 滤镜库 → 风格化 → 照亮边缘，参数如图。</p><p><img src="/images/2018-06/14513532194296.jpg" alt=""></p><h2 id="后续处理"><a href="#后续处理" class="headerlink" title="后续处理"></a>后续处理</h2><p>图像 → 调整 → 色相 / 饱和度，参数在这儿。</p><p><img src="/images/2018-06/14513532208491.jpg" alt=""></p><p>我们需要把它修改得锐利一点，滤镜 → 模糊 → 表面模糊，参数如下。</p><p><img src="/images/2018-06/1451353220939.jpg" alt=""></p><h2 id="最终效果"><a href="#最终效果" class="headerlink" title="最终效果"></a>最终效果</h2><p><img src="/images/2018-06/14513532181130.jpg" alt=""><br><img src="/images/2018-06/1451353218261.jpg" alt=""></p><p>本文转载自：<a href="https://www.yiihuu.com/twjc/29791.html" target="_blank" rel="noopener">PS 十步制作科幻电路板</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Photoshop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python 开发表情包网站</title>
      <link href="/2018-06/Python%E5%BC%80%E5%8F%91%E8%A1%A8%E6%83%85%E5%8C%85%E7%BD%91%E7%AB%99/"/>
      <url>/2018-06/Python%E5%BC%80%E5%8F%91%E8%A1%A8%E6%83%85%E5%8C%85%E7%BD%91%E7%AB%99/</url>
      
        <content type="html"><![CDATA[<p>『表情包』是一种利用图片来表示感情的方式。在各种社交软件的带动下，『表情包』已经形成了一种流行文化。互联网上，基本人人都会发表情；很多实时通讯软件中，『斗图』成为了一种活跃气氛的常见方式。不知你是否曾有过找不到表情包去应对别人的时候？<br>今天博主分享用 Python 开发个人专属的表情包网站的方法，想用什么表情包搜一下就有了！<br><strong> 目标：获取海量表情包，存入数据库，然后搭建简单网站，通过输入关键字获取对应的的表情包。</strong></p><h2 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h2><p>首先，我们要从这个网站爬取表情包：<a href="http://www.doutula.com/photo/list/?page=0" target="_blank" rel="noopener">斗图啦</a>。<br>我们先来分析一下这个网页的源代码：</p><p><img src="/images/2018-06/1.png" alt=""></p><p>通过源码，我们可以发现需要获取的内容包括每个 img 标签的 data-original 和 alt 属性。通过爬虫获取网页，用正则表达式提取内容，然后存入数据库即可。<br>首先，安装 mysql，如果你在使用 macOS，并配置好了 Homebrew：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install mysql</span><br></pre></td></tr></table></figure></p><p>其它系统可参考文章 <a href="/2018-03/MySQL%208.0 的安装和使用 /">MySQL 8.0 的安装和使用</a>。<br>安装完成后，可能需要使用 <code>mysql.server start</code> 或者 <code>systemctl start mysqld</code> 等命令手动开启 mysql 服务。可以通过运行 <code>lsof -i:3306</code> 查看 mysql 是否正确工作在 3306 端口。初次登陆时可能需要用到 MySQL 生成的随机密码，查看方法是：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">'temporary password'</span> /var/<span class="built_in">log</span>/mysqld.log</span><br></pre></td></tr></table></figure></p><p>然后使用以下命令登录：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br><span class="line"><span class="comment"># 按下回车后，输入密码，无回显 </span></span><br></pre></td></tr></table></figure></p><p>如果你登录后设置了新的 root 密码，一定要记住。<br>接下来，你可以用 root，也可以创建一个新用户，来新建数据库和数据表，用来存放表情包：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> images;</span><br><span class="line"># 建立数据库 images</span><br><span class="line"><span class="keyword">USE</span> images;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> images (</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">UNSIGNED</span> PRIMARY <span class="keyword">KEY</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">1000</span>),</span><br><span class="line">  imageUrl <span class="built_in">varchar</span>(<span class="number">200</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"># 然后在该数据库中新建一个表，并添加相应的 name 和 imageUrl</span><br><span class="line">QUIT;</span><br></pre></td></tr></table></figure></p><p>至此数据库方面的工作就完成了。</p><a id="more"></a><h2 id="获取海量表情包"><a href="#获取海量表情包" class="headerlink" title="获取海量表情包"></a>获取海量表情包</h2><p>创建 python 文件，并用 python3 执行（记得将密码换成你自己的）：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="comment"># 连接数据库 </span></span><br><span class="line">db = pymysql.connect(host = <span class="string">'127.0.0.1'</span>, <span class="comment"># 主机，一般没有服务器就填本机吧 </span></span><br><span class="line">    port = <span class="number">3306</span>, <span class="comment"># 端口，mysql 数据库的默认端口就是 3306</span></span><br><span class="line">    db = <span class="string">'images'</span>, <span class="comment"># 数据库名，与之前创建的相同 </span></span><br><span class="line">    user = <span class="string">'username'</span>, <span class="comment"># 用户名，如果是创建的用户需要在 mysql 中授权 </span></span><br><span class="line">    passwd = <span class="string">'password'</span>, <span class="comment"># 密码，换成你的 </span></span><br><span class="line">    charset = <span class="string">'utf8'</span></span><br><span class="line">)</span><br><span class="line"><span class="comment"># 创建游标 </span></span><br><span class="line">cursor = db.cursor()</span><br><span class="line">cursor.execute(<span class="string">'select * from images'</span>)</span><br><span class="line"><span class="comment"># print(cursor.fetchall())</span></span><br><span class="line"><span class="comment"># 获取图片列表 </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getImagesList</span><span class="params">(page)</span>:</span></span><br><span class="line">    <span class="comment"># 获取斗图网源代码 </span></span><br><span class="line">    html = requests.get(<span class="string">'http://www.doutula.com/photo/list/?page=&#123;&#125;'</span>.format(page), headers = &#123;<span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:22.0) Gecko/20100101 Firefox/22.0'</span>&#125;).text</span><br><span class="line">    <span class="comment"># 正则表达式  通配符  .*?  匹配所有   分组匹配 </span></span><br><span class="line">    reg = <span class="string">r'data-original="(.*?)".*?alt="(.*?)"'</span></span><br><span class="line">    <span class="comment"># 增加匹配效率的  S 多行匹配 </span></span><br><span class="line">    reg = re.compile(reg,re.S)</span><br><span class="line">    imagesList = re.findall(reg,html) <span class="comment"># 获取 name 和 imageUrl</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> imagesList:</span><br><span class="line">        image_url = i[<span class="number">0</span>]</span><br><span class="line">        image_title = i[<span class="number">1</span>]</span><br><span class="line">        <span class="comment"># format 字符串格式化 %s</span></span><br><span class="line">        cursor.execute(<span class="string">"insert into images values(null,'&#123;&#125;','&#123;&#125;') "</span>.format(image_title, image_url))</span><br><span class="line">        print(<span class="string">'正在保存 %s'</span> % image_title)</span><br><span class="line">        db.commit()</span><br><span class="line"><span class="comment"># 截止目前，网站共有 1600 多页，如果未来有更新，可以手动改下面 range 的范围 </span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">1650</span>):</span><br><span class="line">    print(<span class="string">'第 &#123;&#125; 页'</span>.format(i))</span><br><span class="line">    getImagesList(i)</span><br><span class="line"></span><br><span class="line">db.close() <span class="comment"># 不要忘记了关闭数据库连接 </span></span><br></pre></td></tr></table></figure></p><h2 id="搭建网站前端"><a href="#搭建网站前端" class="headerlink" title="搭建网站前端"></a>搭建网站前端</h2><p>然后就是网站方面了，写一个简单的网站，实现输入关键字得到对应的图片。上代码：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> render_template</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> request</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="comment"># 装饰器 </span></span><br><span class="line"><span class="meta">@app.route('/')  # route 路由 </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># return "hello world"</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">'index.html'</span>)</span><br><span class="line"><span class="meta">@app.route('/search')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">search</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># 接收用户关键字 </span></span><br><span class="line">    keyword = request.args.get(<span class="string">'kw'</span>)</span><br><span class="line">    count = request.args.get(<span class="string">'count'</span>)</span><br><span class="line">    cursor.execute(<span class="string">"select * from images where name like'%&#123;&#125;%'"</span>.format(keyword))</span><br><span class="line">    <span class="comment"># 这里是一个模糊匹配，就是匹配和你输入的关键字类似的 name，关键字是要用'%&#123;&#125;%'代替，用 format 传入 </span></span><br><span class="line">    data = cursor.fetchmany(int(count))</span><br><span class="line">    <span class="comment"># 这里 fetchmany 就是匹配 count 条数据库中的数据 </span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">'index.html'</span>, images = data)</span><br><span class="line">    <span class="comment"># render_template 模板能返回一个网页，而网页得存在新创建的 templates 文件夹里面才可以 </span></span><br><span class="line"><span class="comment"># 程序的入口 </span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    db = pymysql.connect(host = <span class="string">'127.0.0.1'</span>,</span><br><span class="line">        port = <span class="number">3306</span>,</span><br><span class="line">        db=<span class="string">'images'</span>,</span><br><span class="line">        user = <span class="string">'username'</span>,</span><br><span class="line">        passwd = <span class="string">'password'</span>, <span class="comment"># 将密码换成你的 </span></span><br><span class="line">        charset = <span class="string">'utf8'</span>,</span><br><span class="line">        cursorclass = pymysql.cursors.DictCursor <span class="comment"># 这里默认从数据库中查到的数据返回回来是列表形式，这里改为了 dict 形式 </span></span><br><span class="line">    )</span><br><span class="line">    <span class="comment"># 创建游标 </span></span><br><span class="line">    cursor = db.cursor()</span><br><span class="line">    <span class="comment"># 调试模式 </span></span><br><span class="line">    <span class="comment"># port 端口号 默认 5000</span></span><br><span class="line">    app.run(debug = <span class="keyword">True</span>, port = <span class="number">5000</span>, host = <span class="string">'0.0.0.0'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># index.html &#123;&#123;&#125;&#125; 是放变量 &#123;%%&#125; 是放方法 </span></span><br></pre></td></tr></table></figure></p><p>这里的 <code>host = &#39;0.0.0.0&#39;</code> 意味着程序将监听所有的流量，而不只是本机。<br>将这个文件命名为 <code>index.py</code>。在这个 py 文件的同一目录下，新建文件夹，命名为 <code>templates</code>，在该文件夹内创建 <code>index.html</code>：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span> 斗图网站 < span class="tag">&lt;/<span class="name">title</span>&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span> = <span class="string">'/search'</span>&gt;</span></span><br><span class="line">    关键字：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">'text'</span> <span class="attr">name</span> = <span class="string">'kw'</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    查询的数量：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">'text'</span> <span class="attr">name</span> = <span class="string">'count'</span> <span class="attr">value</span> = <span class="string">'100'</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">'submit'</span> <span class="attr">value</span> = <span class="string">'查询'</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;% for i in images %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span> = <span class="string">"&#123;&#123;i.imageUrl&#125;&#125;"</span> <span class="attr">alt</span> = <span class="string">"&#123;&#123;i.name&#125;&#125;"</span>&gt;</span></span><br><span class="line">&#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>完成后，回到上一目录，在命令行执行 <code>python3 index.py</code>，然后访问 <code>localhost:5000</code> 即可开始斗图了！</p><p><img src="/images/2018-06/2.png" alt=""></p><p>其他设备获取本机 IP 后，通过 5000 端口也可以正常浏览。</p><p>参考文章：<br><a href="https://blog.csdn.net/three_co/article/details/78575634" target="_blank" rel="noopener">关于 Python 爬虫之获取海量表情包 + 存入数据库 + 搭建网站通过关键字查询表情包</a><br><a href="https://mp.weixin.qq.com/s/dpJOMSdDzkONzV79z7RgYQ" target="_blank" rel="noopener">Python 开发个人专属表情包网站，表情在手，天下我有</a></p>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一些 CSS 的小技巧</title>
      <link href="/2018-06/%E4%B8%80%E4%BA%9BCSS%E7%9A%84%E5%B0%8F%E6%8A%80%E5%B7%A7/"/>
      <url>/2018-06/%E4%B8%80%E4%BA%9BCSS%E7%9A%84%E5%B0%8F%E6%8A%80%E5%B7%A7/</url>
      
        <content type="html"><![CDATA[<h2 id="p-标签换行"><a href="#p-标签换行" class="headerlink" title="p 标签换行"></a>p 标签换行</h2><p>CSS 自动换行、强制不换行、强制断行、超出显示省略号</p><p>P 标签是默认是自动换行的，因此设置好宽度之后，能够较好的实现效果，但是最近的项目中发现，使用 ajax 加载数据之后，p 标签内的内容没有换行，导致布局错乱，于是尝试着使用换行样式，虽然解决了问题，但是并没有发现本质原因。经过研究，其本质在于，当时获取的数据是一长串的数字，浏览器应该是对数字和英文单词处理方式相近，不会截断。<br>先给出各种方式，再具体介绍每一个属性。<br>强制不换行：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123; <span class="attribute">white-space</span>: nowrap; &#125;</span><br></pre></td></tr></table></figure></p><p>自动换行：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123; <span class="attribute">word-wrap</span>: break-word; &#125;</span><br></pre></td></tr></table></figure></p><p>强制英文单词断行：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123; <span class="attribute">word-break</span>: break-all; &#125;</span><br></pre></td></tr></table></figure></p><p><strong> 注意：设置强制将英文单词断行，需要将行内元素设置为块级元素。</strong><br>超出显示省略号：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123; <span class="attribute">text-overflow</span>: ellipsis; <span class="attribute">overflow</span>: hidden; &#125;</span><br></pre></td></tr></table></figure></p><p>white-space 属性设置如何处理元素内的空白。</p><ul><li>normal 默认。空白会被浏览器忽略</li><li>pre 空白会被浏览器保留。其行为方式类似 HTML 中的 pre 标签</li><li>nowrap 文本不会换行，文本会在在同一行上继续，直到遇到 br 标签为止</li><li>pre-wrap 保留空白符序列，但是正常地进行换行</li><li>pre-line 合并空白符序列，但是保留换行符</li><li>inherit 规定应该从父元素继承 white-space 属性的值</li></ul><p>word-wrap 属性用来标明是否允许浏览器在单词内进行断句，这是为了防止当一个字符串太长而找不到它的自然断句点时产生溢出现象。</p><ul><li>normal 只在允许的断字点换行 (浏览器保持默认处理)</li><li>break-word 在长单词或 URL 地址内部进行换行</li></ul><p>word-break 属性用来标明怎么样进行单词内的断句。</p><ul><li>normal 使用浏览器默认的换行规则</li><li>break-all 允许再单词内换行</li><li>keep-all 只能在半角空格或连字符处换行</li></ul><a id="more"></a><p>测试代码：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 网站编码格式，UTF-8 国际编码，GBK 或 gb2312 中文编码 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html;charset=utf-8"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"Keywords"</span> <span class="attr">content</span>=<span class="string">"关键词一，关键词二"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"Description"</span> <span class="attr">content</span>=<span class="string">"网站描述内容"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"Author"</span> <span class="attr">content</span>=<span class="string">"Yvette Lau"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--css js 文件的引入 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">            <span class="selector-class">.word</span> &#123;</span></span><br><span class="line"><span class="css">                <span class="selector-tag">background</span>: <span class="selector-id">#E4FFE9</span>;</span></span><br><span class="line"><span class="undefined">                width: 250px;</span></span><br><span class="line"><span class="undefined">                margin: 50px auto;</span></span><br><span class="line"><span class="undefined">                padding: 20px;</span></span><br><span class="line"><span class="undefined">                font-family: "microsoft yahei";</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="css">            <span class="comment">/* 强制不换行 */</span></span></span><br><span class="line"><span class="css">            <span class="selector-class">.nowrap</span> &#123;</span></span><br><span class="line"><span class="undefined">                white-space: nowrap;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            /* 允许单词内断句，首先会尝试挪到下一行，看看下一行的宽度够不够，</span></span><br><span class="line"><span class="undefined">            不够的话就进行单词内的断句 */</span></span><br><span class="line"><span class="css">            <span class="selector-class">.breakword</span> &#123;</span></span><br><span class="line"><span class="undefined">                 word-wrap: break-word;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="css">            <span class="comment">/* 断句时，不会把长单词挪到下一行，而是直接进行单词内的断句 */</span></span></span><br><span class="line"><span class="css">            <span class="selector-class">.breakAll</span> &#123;</span></span><br><span class="line"><span class="undefined">                word-break: break-all;</span></span><br><span class="line"><span class="undefined">            &#125;            </span></span><br><span class="line"><span class="css">            <span class="comment">/* 超出部分显示省略号 */</span></span></span><br><span class="line"><span class="css">            <span class="selector-class">.ellipsis</span> &#123;</span></span><br><span class="line"><span class="undefined">                text-overflow: ellipsis;</span></span><br><span class="line"><span class="undefined">                overflow: hidden;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"word"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"nowrap"</span>&gt;</span>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Alias delectus neque aspernatur aliquid, dignissimos ipsa sed porro illum optio, autem ut minima magnam deserunt deleniti! Maiores consectetur veritatis, quaerat tempora?<span class="tag">&lt;/<span class="name">p</span>&gt;</span>          </span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"breakword"</span>&gt;</span>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Alias delectus neque aspernatur aliquid, dignissimos ipsa sed porro illum optio, autem ut minima magnam deserunt deleniti! Maiores consectetur veritatis, quaerat tempora?<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"breakAll"</span>&gt;</span>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Alias delectus neque aspernatur aliquid, dignissimos ipsa sed porro illum optio, autem ut minima magnam deserunt deleniti! Maiores consectetur veritatis, quaerat tempora?<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"normal"</span>&gt;</span>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Alias delectus neque aspernatur aliquid, dignissimos ipsa sed porro illum optio, autem ut minima magnam deserunt deleniti! Maiores consectetur veritatis, quaerat tempora?<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"ellipsis"</span>&gt;</span>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Alias delectus neque aspernatur aliquid, dignissimos ipsa sed porro illum optio, autem ut minima magnam deserunt deleniti! Maiores consectetur veritatis, quaerat tempora?<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="contenteditable"><a href="#contenteditable" class="headerlink" title="contenteditable"></a>contenteditable</h2><p>contenteditable 属性规定是否可编辑元素的内容。例如一段可编辑的段落：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">contenteditable</span>=<span class="string">"true"</span>&gt;</span> 这是一段可编辑的段落。请试着编辑该文本。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="CSS3-calc-方法"><a href="#CSS3-calc-方法" class="headerlink" title="CSS3 calc() 方法"></a>CSS3 calc() 方法</h2><p>calc() 表达式可以更加方便的控制元素大小，例如：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">header</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#f60</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">984px</span>; <span class="comment">/*Fallback for browsers that don't support the calc() function*/</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">-moz-calc</span>(100% - 40px);</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">-webkit-calc</span>(100% - 40px);</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>(100% - 40px);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>calc() 使用通用的数学运算规则，但是也提供更智能的功能：</p><ul><li>使用 <code>+</code>、<code>-</code>、<code>*</code> 和 <code>/</code> 四则运算</li><li>可以使用百分比、px、em、rem 等单位</li><li>可以混合使用各种单位进行计算</li><li>表达式中有 <code>+</code> 和 <code>-</code> 时，其前后必须要有空格，如 <code>width: calc(12%+5em)</code> 这种没有空格的写法是错误的</li><li>表达式中有 <code>*</code> 和 <code>/</code> 时，其前后可以没有空格，但建议留有空格</li></ul><h2 id="content-属性"><a href="#content-属性" class="headerlink" title="content 属性"></a>content 属性</h2><p>content 内容生成技术以及应用</p><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>content 属性早在 CSS2.1 的时候就被引入了，可以使用: before 以及: after 伪元素生成内容。此特性目前已被大部分的浏览器支持：(Firefox 1.5+, Safari 3.5+, IE 8+, Opera 9.2+, Chrome 0.2+)。另外，目前 Opera 9.5+ 和 Safari 4 已经支持所有元素的 content 属性，而不仅仅是: before 和: after 伪元素。<br>在 CSS 3 Generated Content 工作草案中，content 属性添加了更多的特征，例如：插入以及移除文档内容的能力，以创建脚注，结语，及段落注释。但是目前还没有浏览器支持 content 的扩展功能。<br>下面将展示 content 内容生成的基本使用，以及一些你可以应用的特别的技术。</p><h3 id="最基本的—–生成内容"><a href="#最基本的—–生成内容" class="headerlink" title="最基本的—–生成内容"></a>最基本的—–生成内容</h3><p>content 使用如下：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h2</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"我是额外文字！"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span> 我是 h2<span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure><p>此段样式的作用是在每个 h2 标签的前面添加文字『我是额外文字』。<br>content 属性的值除了使用文本值外，还可以使用标签的一些属性值，方法是 attr()，参见如下代码：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-class">.content</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="built_in">attr</span>(href);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"content"</span> <span class="attr">href</span>=<span class="string">"http://www.zhangxinxu.com/"</span>&gt;</span> 此标签的 href 值是：<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>对应 a 标签内的文字值的最后添加了此标签的 href 属性的值。<br>注意：当使用 <code>attr()</code> 获取标签属性名的时候，千万不要添加引号!</p><p>你还可以使用计数器产生动态数字或运用 <code>url(/path/to/your/file)</code> 路径插入图片。要想获得更多信息，请继续看下面的应用实例。</p><h3 id="使用计数器创建号码内容"><a href="#使用计数器创建号码内容" class="headerlink" title="使用计数器创建号码内容"></a>使用计数器创建号码内容</h3><p>如果你想插入一系列递增的值，比如说『图片 1，图片 2，图片 3，图片 4……』，你就可以使用计数器在每个列表项的前面插入递增的序号值。CSS 代码如下：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ol</span> &#123;</span><br><span class="line">    <span class="attribute">list-style-type</span>: none;</span><br><span class="line">    <span class="attribute">counter-reset</span>: sectioncounter;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ol</span> <span class="selector-tag">li</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"图片"</span> <span class="built_in">counter</span>(sectioncounter) <span class="string">"："</span>;</span><br><span class="line">    <span class="attribute">counter-increment</span>: sectioncounter;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>HTML 代码如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"mm1.jpg"</span> <span class="attr">width</span>=<span class="string">"128"</span> <span class="attr">height</span>=<span class="string">"96"</span> /&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"mm3.jpg"</span> <span class="attr">width</span>=<span class="string">"128"</span> <span class="attr">height</span>=<span class="string">"96"</span> /&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>说明：<br><code>&lt;ol&gt;</code> 标签应用 <code>counter-reset</code> 属性，<code>&lt;li&gt;</code> 标签应用 <code>counter-increment</code> 属性，值均为 <code>sectioncounter</code>，再配合 <code>content</code> 属性，以及 <code>counter</code> 计数器就可以实现递增的效果了。<br>如果你指定了元素 <code>display:none</code>，则 <code>content</code> 下的计数器不会产生递增值。<br>当然，如果浏览器不支持此方法，那么就不会有数字出现，你使用 <code>firebug</code> 或是之类的工具查看真实的 HTML 时不会看到产生的数值，不要有疑惑，<code>content</code> 属性动态生成的内容是纯粹的装饰而已，虚假的表象。<br>如果你对 CSS 计数器感兴趣，想深入了解，可以参见 David Storey 一篇优秀的文章：<a href="https://dev.opera.com/articles/automatic-numbering-with-css-counters" target="_blank" rel="noopener">Automatic numbering with CSS Counters</a></p><h3 id="为多语言内容插入正确的引号"><a href="#为多语言内容插入正确的引号" class="headerlink" title="为多语言内容插入正确的引号"></a>为多语言内容插入正确的引号</h3><p>不同的语言使用不同的引号字符。比如英文的引号就是 <code>&quot;&quot;</code>，而中文引号就是 <code>『』</code>。使用 content 可以使得不同的语言使用对应的一些字符。例如，我们需要对下面的些文字添加其对应语言的引号，该怎么办呢？<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span><span class="tag">&lt;<span class="name">q</span>&gt;</span>It's only work if somebody makes you do it.<span class="tag">&lt;/<span class="name">q</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">lang</span>=<span class="string">"no"</span>&gt;</span><span class="tag">&lt;<span class="name">q</span>&gt;</span>Hvis du forteller meg nok en vits, så skal jeg slå deg til jorden.<span class="tag">&lt;/<span class="name">q</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">lang</span>=<span class="string">"ch"</span>&gt;</span><span class="tag">&lt;<span class="name">q</span>&gt;</span> 欢迎来到上海，欢迎参观世博会！<span class="tag">&lt;/<span class="name">q</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>我们不妨试试下面的代码：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 为不同语言指定引号的表现 */</span></span><br><span class="line"><span class="selector-pseudo">:lang(en)</span> &gt; <span class="selector-tag">q</span> &#123; <span class="attribute">quotes</span>:<span class="string">'"'</span> <span class="string">'"'</span>; &#125;</span><br><span class="line"><span class="selector-pseudo">:lang(no)</span> &gt; <span class="selector-tag">q</span> &#123; <span class="attribute">quotes</span>:<span class="string">"«"</span> <span class="string">"»"</span>; &#125;</span><br><span class="line"><span class="selector-pseudo">:lang(ch)</span> &gt; <span class="selector-tag">q</span> &#123; <span class="attribute">quotes</span>:<span class="string">"『"</span> <span class="string">"』"</span>; &#125;</span><br><span class="line"><span class="comment">/* 在 q 标签的前后插入引号 */</span></span><br><span class="line"><span class="selector-tag">q</span><span class="selector-pseudo">:before</span> &#123; <span class="attribute">content</span>: open-quote; &#125;</span><br><span class="line"><span class="selector-tag">q</span><span class="selector-pseudo">:after</span> &#123; <span class="attribute">content</span>: close-quote; &#125;</span><br></pre></td></tr></table></figure></p><p>此技术可以应用于各类元素，而不仅仅是 q 标签。</p><h3 id="用图片替换文字"><a href="#用图片替换文字" class="headerlink" title="用图片替换文字"></a>用图片替换文字</h3><p>关于图片替换技术，可以参见这里：<a href="http://www.mezzoblue.com/tests/revised-image-replacement" target="_blank" rel="noopener">several image replacement techniques</a>，里面提供了几种方法。而这里展示的则是另外不同的用图片替换方法，使用的是 content。</p><p>你可以参见下面的代码：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-class">.logo</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="built_in">url</span>(logo.png);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>这种图片替换技术的优点在于文字内容确实被替换了。因此，你没有必要设定高宽为图片的显示创造空间，或是使用 text-indent 或是 padding 隐藏最初的文字。</p><p>然而，就目前而言，还是有不少需要注意的：</p><ul><li>你不能对图片进行重复或平铺，或是使用 image sprite。</li><li>目前仅在 Opera 9.5+ 和 Safari 4 + 浏览器下起作用，因为这些浏览器支持所有元素的 content 方法，而不仅仅局限于: after 或是: before。</li></ul><p>替换的图片无法应用 alt 属性，所以一些特殊的使用屏幕阅读器的用户可能无法理解你替换的图片的含义。</p><h3 id="显示相对应的链接图标"><a href="#显示相对应的链接图标" class="headerlink" title="显示相对应的链接图标"></a>显示相对应的链接图标</h3><p>指的是针对不同的链接类型，在链接的后面显示对应链接类型的图标，例如，链接的对象是一个图片，则显示图片的小图标，如果链接对象是视频，则显示视频小图标，如果链接就是个 URL 网页链接，则显示链接的小图标。你可以参见下面的代码：<br>CSS 代码：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> <span class="selector-tag">a</span><span class="selector-attr">[href $=".pdf"]</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="built_in">url</span>(../image/icon_pdf.png);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span> <span class="selector-tag">a</span><span class="selector-attr">[rel = "external"]</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="built_in">url</span>(../image/icon_link.png);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>HTML 代码：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span> 你可以查看此 PDF 文件：<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/sample.pdf"</span>&gt;</span>web 站点的性能优化. pdf<span class="tag">&lt;/<span class="name">a</span>&gt;</span>，或是在线查看，<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.zhangxinxu.com/wordpress/"</span> <span class="attr">rel</span>=<span class="string">"external"</span>&gt;</span> 点击这里 < span class="tag">&lt;/<span class="name">a</span>&gt;</span>。<span class="tag">&lt;/<span class="name">p</span>&gt;</span><br></pre></td></tr></table></figure></p><h3 id="使用属性值作为-content-内容"><a href="#使用属性值作为-content-内容" class="headerlink" title="使用属性值作为 content 内容"></a>使用属性值作为 content 内容</h3><p>使用属性值当作 content 内容指的是将标签的 title, src, href, alt 等值当作内容显示在标签的内部，这是很强大的一个功能。由于此技术目前远未到普及的程度，所以这里简单介绍一下，你可以参见下面的两小段样式代码：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"("</span> <span class="built_in">attr</span>(href) <span class="string">")"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">abbr</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"("</span> <span class="built_in">attr</span>(title) <span class="string">")"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>这里理解和使用都不难，关键就是 CSS3 的 attr() 方法。</p><h3 id="前瞻：强大的-CSS3-attr-方法"><a href="#前瞻：强大的-CSS3-attr-方法" class="headerlink" title="前瞻：强大的 CSS3 attr() 方法"></a>前瞻：强大的 CSS3 attr() 方法</h3><p>CSS3 Values and Units 草案扩展了 attr() 表达式的范围，除了返回字符串，还可以返回诸如 CSS colors, CSS integer, length, angle, time, frequency 以及其他一些单元。<br>通过使用自定义的 data 属性，可以实现一些非常强大的效果，诸如简单图表图形的渲染，动画效果的实现。例如我们可以设置根据元素的 attribute 值设定 background-color 的颜色值，这在显示在线调色板上会大放异彩；我们还可以根据 attribute 值指定元素的大小，就像定义图表每个条形的长度一样。总之，attr() 的潜力惊人。</p><h2 id="更多"><a href="#更多" class="headerlink" title="更多"></a>更多</h2><p>推荐阅读：<br><a href="https://www.zhangxinxu.com/wordpress/2015/03/background-object-position-value-percent" target="_blank" rel="noopener">CSS <position> 值简介理解 background 百分比定位</position></a><br><a href="https://www.zhangxinxu.com/wordpress/2013/06 / 伪元素 - 表单样式 - pseudo-elements-style-form-controls" target="_blank" rel="noopener">伪元素表单控件默认样式重置与自定义大全</a></p><p>参考文章：<br><a href="https://blog.csdn.net/liuyan19891230/article/details/50969393" target="_blank" rel="noopener">CSS 自动换行、强制不换行、强制断行、超出显示省略号</a><br><a href="https://www.zhangxinxu.com/wordpress/2010/04/css-content 内容生成技术以及应用" target="_blank" rel="noopener">CSS content 内容生成技术以及应用</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Crontab 定时写法整理</title>
      <link href="/2018-05/Crontab%E5%AE%9A%E6%97%B6%E5%86%99%E6%B3%95%E6%95%B4%E7%90%86/"/>
      <url>/2018-05/Crontab%E5%AE%9A%E6%97%B6%E5%86%99%E6%B3%95%E6%95%B4%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>在前面的文章 <a href="/2018-05/Nginx 配置 SSL/">NGINX 配置 SSL</a> 中，提到了关于创建 Crontab 定时任务的内容。事实上，在使用 Linux 系统时（特别是在服务器上），经常会碰到需要在某个特定时间执行某些任务的情况。博主近期研究了 Crontab 的机制，并对常见的 Crontab 用法做了一个总结，收集了一些关于计划任务的实例，现把相关内容分享出来，同时也给自己一个备忘。</p><h2 id="Crontab-使用方式"><a href="#Crontab-使用方式" class="headerlink" title="Crontab 使用方式"></a>Crontab 使用方式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">crontab [-u user] file</span><br><span class="line">crontab [-u user] [ -e | -l | -r ]</span><br></pre></td></tr></table></figure><p>各参数为：</p><ul><li><code>-u user</code>：用来设定某个用户的 crontab 服务。</li><li><code>file</code>：file 是命令文件的名字，表示将 file 做为 crontab 的任务列表文件并载入 crontab。如果在命令行中没有指定这个文件，crontab 将接受从标准输入（如键盘）中键入的命令，并将它们载入 crontab 任务列表。</li><li><code>-e</code>：编辑某个用户的 crontab 文件内容。如果不指定用户，则表示编辑当前用户的 crontab 文件。</li><li><code>-l</code>：显示某个用户的 crontab 文件内容。如果不指定用户，则表示显示当前用户的 crontab 文件内容。</li><li><code>-r</code>：从 <code>/var/spool/cron</code> 目录中删除某个用户的 crontab 文件。如果不指定用户，则默认删除当前用户的 crontab 文件。</li><li><code>-i</code>：在删除用户的 crontab 文件时给确认提示。</li></ul><h2 id="Crontab-文件格式"><a href="#Crontab-文件格式" class="headerlink" title="Crontab 文件格式"></a>Crontab 文件格式</h2><p>用户所建立的 crontab 文件中，每一行都代表一项任务，每行的每个字段代表一项设置，它的格式共分为六个字段，前五段是时间设定段，第六段是要执行的命令段，格式如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">minute hour day month week command</span><br><span class="line">分　时　日　月　周　命令</span><br></pre></td></tr></table></figure></p><p>具体来说，每一列的内容分别是：</p><ul><li>分钟，可以是从 0 到 59 之间的任何整数。</li><li>小时，可以是从 0 到 23 之间的任何整数（0 表示 0 点）。</li><li>日期，可以是从 1 到 31 之间的任何整数。</li><li>月份，可以是从 1 到 12 之间的任何整数。</li><li>星期几，可以是从 0 到 7 之间的任何整数，这里的 0 或 7 代表星期日。</li><li>要执行的命令，可以是系统命令，也可以是自己编写的脚本文件。</li></ul><p><img src="/images/2018-05/crontab_thumb.png" alt=""></p><p>在以上各个字段中，还可以使用以下特殊字符：</p><ul><li>星号（*）：代表所有可能的值，例如 month 字段如果是星号，则表示在满足其它字段的制约条件后每月都执行该命令操作。</li><li>逗号（,）：可以用逗号隔开的值指定一个列表范围，例如 <code>1,2,5,7,8,9</code>。</li><li>中杠（-）：可以用整数之间的中杠表示一个整数范围，例如 <code>2-6</code> 表示 <code>2,3,4,5,6</code>。</li><li>正斜线（/）：可以用正斜线指定时间的间隔频率，例如 <code>0-23/2</code> 表示每两小时执行一次。</li></ul><p>同时正斜线可以和星号一起使用，例如 <code>*/10</code>，如果用在 minute 字段，表示每十分钟执行一次。又如，每分钟可以用 <code>*</code> 或者 <code>*/1</code> 表示。</p><a id="more"></a><h2 id="Crontab-文件样例"><a href="#Crontab-文件样例" class="headerlink" title="Crontab 文件样例"></a>Crontab 文件样例</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">30 21 * * * /usr/<span class="built_in">local</span>/etc/rc.d/lighttpd restart</span><br><span class="line"><span class="comment"># 每晚的 21:30 重启 apache</span></span><br><span class="line">45 4 1,10,22 * * /usr/<span class="built_in">local</span>/etc/rc.d/lighttpd restart</span><br><span class="line"><span class="comment"># 每月 1、10、22 日的 4:45 重启 apache</span></span><br><span class="line">10 1 * * 6,0 /usr/<span class="built_in">local</span>/etc/rc.d/lighttpd restart</span><br><span class="line"><span class="comment"># 每周六、周日的 1:10 重启 apache</span></span><br><span class="line">0,30 18-23 * * * /usr/<span class="built_in">local</span>/etc/rc.d/lighttpd restart</span><br><span class="line"><span class="comment"># 每天 18:00 至 23:00 之间每隔 30 分钟重启 apache</span></span><br><span class="line">0 23 * * 6 /usr/<span class="built_in">local</span>/etc/rc.d/lighttpd restart</span><br><span class="line"><span class="comment"># 每星期六的 11:00pm 重启 apache</span></span><br><span class="line">0 */1 * * * /usr/<span class="built_in">local</span>/etc/rc.d/lighttpd restart</span><br><span class="line"><span class="comment"># 每一小时重启 apache</span></span><br><span class="line">0 23-7/1 * * * /usr/<span class="built_in">local</span>/etc/rc.d/lighttpd restart</span><br><span class="line"><span class="comment"># 晚上 11 点到早上 7 点之间，每隔一小时重启 apache</span></span><br><span class="line">0 11 4 * mon-wed /usr/<span class="built_in">local</span>/etc/rc.d/lighttpd restart</span><br><span class="line"><span class="comment"># 每月的 4 号与每周一到周三的 11 点重启 apache</span></span><br><span class="line">0 4 1 jan * /usr/<span class="built_in">local</span>/etc/rc.d/lighttpd restart</span><br><span class="line"><span class="comment"># 一月一号的 4 点重启 apache</span></span><br><span class="line">0 7 * * * /bin/ls</span><br><span class="line"><span class="comment"># 每天早上 7 点执行一次 /bin/ls</span></span><br><span class="line">0 6-12/3 * 12 * /usr/bin/backup</span><br><span class="line"><span class="comment"># 在 12 月内，每天的早上 6 点到 12 点，每隔 3 个小时执行一次 /usr/bin/backup</span></span><br><span class="line">0 17 * * 1-5 mail -s <span class="string">"hi"</span> alex@domain.name &lt; /tmp/maildata</span><br><span class="line"><span class="comment"># 周一到周五每天下午 5:00 寄一封信给 alex@domain.name</span></span><br><span class="line">20 0-23/2 * * * <span class="built_in">echo</span> <span class="string">"haha"</span></span><br><span class="line"><span class="comment"># 每月每天的午夜 0 点 20 分，2 点 20 分，4 点 20 分等执行 echo "haha"</span></span><br><span class="line">0 */2 * * * date <span class="built_in">command</span></span><br><span class="line"><span class="comment"># 每两个小时执行 command</span></span><br><span class="line">0 23-7/2,8 * * * date <span class="built_in">command</span></span><br><span class="line"><span class="comment"># 晚上 11 点到早上 8 点之间每两个小时，早上 8 点执行 command</span></span><br><span class="line">0 11 4 * mon-wed date <span class="built_in">command</span></span><br><span class="line"><span class="comment"># 每个月的 4 号和每个礼拜的礼拜一到礼拜三的早上 11 点执行 command</span></span><br><span class="line">0 4 1 jan * date <span class="built_in">command</span></span><br><span class="line"><span class="comment">#1 月份日早上 4 点执行 command</span></span><br><span class="line">* * * * * <span class="built_in">command</span></span><br><span class="line"><span class="comment"># 每 1 分钟执行一次 command</span></span><br><span class="line">3,15 * * * * <span class="built_in">command</span></span><br><span class="line"><span class="comment"># 每小时的第 3 和第 15 分钟执行</span></span><br><span class="line">3,15 8-11 * * * <span class="built_in">command</span></span><br><span class="line"><span class="comment"># 在上午 8 点到 11 点的第 3 和第 15 分钟执行</span></span><br><span class="line">3,15 8-11 */2 * * <span class="built_in">command</span></span><br><span class="line"><span class="comment"># 每隔两天的上午 8 点到 11 点的第 3 和第 15 分钟执行</span></span><br><span class="line">3,15 8-11 * * 1 <span class="built_in">command</span></span><br><span class="line"><span class="comment"># 每个星期一的上午 8 点到 11 点的第 3 和第 15 分钟执行</span></span><br><span class="line">01 * * * * root run-parts /etc/cron.hourly</span><br><span class="line"><span class="comment"># 每小时执行 / etc/cron.hourly 目录内的脚本</span></span><br></pre></td></tr></table></figure><p><strong> 注意：当程序在你所指定的时间执行后，系统会寄一封邮件给你，显示该程序执行的内容，若你不希望收到这样的信，请在每一行空一格之后加上 <code>&gt; /dev/null 2&gt;&amp;1</code>，否则会产生不必要的浪费。</strong></p><p>参考文章及更多内容：<br><a href="https://blog.csdn.net/bsf5521/article/details/76522222" target="_blank" rel="noopener">crontab 定时写法整理</a><br><a href="https://www.cnblogs.com/xingzc/p/5969777.html" target="_blank" rel="noopener">crontab 命令</a><br><a href="http://www.opsers.org/base/crontab-linux-system-tasks-and-examples-of-projects.html" target="_blank" rel="noopener">Linux 系统的计划任务 Crontab 及实例</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客迁移至 Hexo</title>
      <link href="/2018-05/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E8%87%B3Hexo/"/>
      <url>/2018-05/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E8%87%B3Hexo/</url>
      
        <content type="html"><![CDATA[<p>由于之前使用的 WordPress 博客在更新后出现未知错误（最后证实是主机商的问题），同时考虑到 WordPress 存在的一些弊端，例如：</p><ul><li>较为臃肿的 PHP 后端</li><li>除了官方主题外，难以找到适合博客写作的主题，大多只适合做展示站</li><li>在不安装插件的情况下，只能用自带的编辑器手写 HTML，而无法使用 Markdown 来编辑文章</li><li>静态文件的管理也让人头痛，『媒体库』的设计初衷很好，但实际上严重影响效率</li></ul><p>可见，用 WordPress 写文章，特别是长文，是一件非常麻烦的事情——你很难专注于写作。虽然它也有不少优点：</p><ul><li>丰富的插件库，可以拓展大量的功能</li><li>完善的评论系统，无需依赖第三方服务</li><li>更新非常方便</li></ul><p>这些特点是静态博客所不具有的，但最终喜欢折腾的博主还是决定将所有内容导出，转而使用 Hexo 进行渲染，并部署到 GitHub Pages 上。借助于 <code>hexo-migrator-wordpress</code>，这一工作进行的非常顺利。当然，除了 Hexo，也有很多其他的解决方案可以考虑，常见的包括 Typecho 或 Hugo 等。<br>迁移后的新站点使用了 zhangshuqiao.org 的域名，目前已可以通过 https 正常访问。旧的 WordPress 博客仍会保留，但不再更新，未来可能更多的用于进行插件的测试。<br>Galaxy Mimi 站点近期也实装了全新 LOGO（使用 Monodraw 制作）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">     ___           ___           ___       ___           ___           ___      </span><br><span class="line">    /\  \         /\  \         /\__\     /\  \         |\__\         |\__\     </span><br><span class="line">   /::\  \       /::\  \       /:/  /    /::\  \        |:|  |        |:|  |    </span><br><span class="line">  /:/\:\  \     /:/\:\  \     /:/  /    /:/\:\  \       |:|  |        |:|  |    </span><br><span class="line"> /:/  \:\  \   /::\~\:\  \   /:/  /    /::\~\:\  \      |:|__|__      |:|__|__  </span><br><span class="line">/:/__/_\:\__\ /:/\:\ \:\__\ /:/__/    /:/\:\ \:\__\ ____/::::\__\     /::::\__\ </span><br><span class="line">\:\  /\ \/__/ \/__\:\/:/  / \:\  \    \/__\:\/:/  / \::::/~~/~       /:/~~/~    </span><br><span class="line"> \:\ \:\__\        \::/  /   \:\  \        \::/  /   ~~|:|~~|       /:/  /      </span><br><span class="line">  \:\/:/  /        /:/  /     \:\  \       /:/  /      |:|  |       \/__/       </span><br><span class="line">   \::/  /        /:/  /       \:\__\     /:/  /       |:|  |                   </span><br><span class="line">    \/__/         \/__/         \/__/     \/__/         \|__|                   </span><br><span class="line">                   ___                       ___                                </span><br><span class="line">                  /\__\          ___        /\__\          ___                  </span><br><span class="line">                 /::|  |        /\  \      /::|  |        /\  \                 </span><br><span class="line">                /:|:|  |        \:\  \    /:|:|  |        \:\  \                </span><br><span class="line">               /:/|:|__|__      /::\__\  /:/|:|__|__      /::\__\               </span><br><span class="line">              /:/ |::::\__\  __/:/\/__/ /:/ |::::\__\  __/:/\/__/               </span><br><span class="line">              \/__/~~/:/  / /\/:/  /    \/__/~~/:/  / /\/:/  /                  </span><br><span class="line">                    /:/  /  \::/__/           /:/  /  \::/__/                   </span><br><span class="line">                   /:/  /    \:\__\          /:/  /    \:\__\                   </span><br><span class="line">                  /:/  /      \/__/         /:/  /      \/__/                   </span><br><span class="line">                  \/__/                     \/__/</span><br></pre></td></tr></table></figure></p><p>同时博主计划于下半年将原来 Galaxy Mimi 站点的所有静态页面进行一次大型的改进，敬请期待。</p><p>本文更新于 2018 年 7 月 8 日：<br>由于在国内 GitHub Pages 加载速度不稳定，且由于 GitHub 政策不利于 SEO，博主已将所有托管在 GitHub Pages 上的页面迁移至另一台独立服务器。<br>目前全站已支持 HTTPS 访问，并启用了 HSTS，未来时机成熟时将开启 HTTP/2 访问。</p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 系统日志 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx 配置 SSL</title>
      <link href="/2018-05/Nginx%E9%85%8D%E7%BD%AESSL/"/>
      <url>/2018-05/Nginx%E9%85%8D%E7%BD%AESSL/</url>
      
        <content type="html"><![CDATA[<h2 id="安装-CertBot"><a href="#安装-CertBot" class="headerlink" title="安装 CertBot"></a>安装 CertBot</h2><p>首先，克隆 Certbot 在 GitHub 上的仓库到本地：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/certbot/certbot.git</span><br></pre></td></tr></table></figure></p><p>在 certbot 文件夹下，有一个 shell 脚本，名为 certbot-auto。你可以将其软链接为 certbot，方便进行接下来的步骤。具体操作是，在你的家目录 <code>~</code> 下的 <code>.bashrc</code> 或 <code>.bash_profile</code> 文件中追加以下内容：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> certbot=/path/to/your/certbot/certbot-auto</span><br></pre></td></tr></table></figure></p><p>然后执行 <code>source ~/.bashrc</code> 或 <code>source ~/.bash_profile</code>，这样就可以直接使用 certbot 命令进行接下来的操作了。<br>当然，你也可以使用包管理工具安装 certbot。以 yum 为例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y install yum-utils</span><br><span class="line">yum-config-manager --<span class="built_in">enable</span> rhui-REGION-rhel-server-extras rhui-REGION-rhel-server-optional</span><br><span class="line">yum install certbot</span><br></pre></td></tr></table></figure></p><p>其它系统的安装方式可以在 <a href="https://certbot.eff.org" target="_blank" rel="noopener">Certbot 官网</a> 上查询。<br>不过经博主测试，这种安装方式可能会产生错误，因此不建议使用。<br>安装完成后，可以使用<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot -h</span><br></pre></td></tr></table></figure></p><p>查看安装是否成功。如果报错，也可以尝试使用 <code>pip install certbot</code>。<br>如果你使用了 nginx 服务器，还可以执行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install certbot-nginx</span><br></pre></td></tr></table></figure></p><p>安装 Certbot 的 Nginx 拓展。</p><h2 id="配置-CertBot"><a href="#配置-CertBot" class="headerlink" title="配置 CertBot"></a>配置 CertBot</h2><p>执行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot --nginx</span><br></pre></td></tr></table></figure></p><p>即可自动完成配置。不过由于涉及到修改 nginx.conf，建议手动进行配置：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot certonly --webroot -w /path/to/your/webroot -d yourdomain.com,www.yourdomain.com</span><br></pre></td></tr></table></figure></p><p>将 <code>/path/to/your/webroot</code> 替换为 nginx 的根目录，<code>yourdomain.com</code> 替换为你的域名，多个域名用逗号隔开。<br>如果要申请泛域名证书，将上面的命令改为：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot certonly --server https://acme-v02.api.letsencrypt.org/directory --manual --preferred-challenges dns -d yourdomain.com,*.yourdomain.com</span><br></pre></td></tr></table></figure></p><p>泛域名证书还需要验证 TXT 记录，比较麻烦。可以参考这篇文章：<a href="https://imjad.cn/archives/lab/letsencrypt-wildcard-certificate-support-is-live" target="_blank" rel="noopener">Let’s Encrypt 现已正式支持泛域名证书</a>。<br>如果一切顺利，会输出以下内容：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">IMPORTANT NOTES:</span><br><span class="line"> - Congratulations! Your certificate and chain have been saved at</span><br><span class="line">   /etc/letsencrypt/live/yourdomain.com/fullchain.pem. Your cert</span><br><span class="line">   will expire on 20XX-XX-XX. To obtain a new or tweaked version of</span><br><span class="line">   this certificate <span class="keyword">in</span> the future, simply run certbot again. To</span><br><span class="line">   non-interactively renew *all* of your certificates, run <span class="string">"certbot</span></span><br><span class="line"><span class="string">   renew"</span></span><br><span class="line"> - If you like Certbot, please consider supporting our work by: </span><br><span class="line">   Donating to ISRG / Let<span class="string">'s Encrypt:   https://letsencrypt.org/donate</span></span><br><span class="line"><span class="string">   Donating to EFF:                    https://eff.org/donate-le</span></span><br></pre></td></tr></table></figure></p><p>生成的证书将会存放在 <code>/etc/letsencrypt/live/</code> 目录下。</p><a id="more"></a>  <h2 id="配置-Nginx"><a href="#配置-Nginx" class="headerlink" title="配置 Nginx"></a>配置 Nginx</h2><p>接下来配置 nginx.conf：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    listen [::]:80; <span class="comment"># 监听 ipv6，如果没有必要可以删去</span></span><br><span class="line">    <span class="comment"># 如果硬性要求全部走 https 协议，注释上两行</span></span><br><span class="line">    listen 443 ssl;</span><br><span class="line">    listen [::]:443 ssl; <span class="comment"># 监听 ipv6，如果没有必要可以删去</span></span><br><span class="line">    server_name yourdomain.com;</span><br><span class="line">    ssl_certificate /etc/letsencrypt/live/yourdomain.com/fullchain.pem;</span><br><span class="line">    ssl_certificate_key /etc/letsencrypt/live/yourdomain.com/privkey.pem;</span><br><span class="line">    ssl_trusted_certificate /etc/letsencrypt/live/yourdomain.com/chain.pem;</span><br><span class="line">    <span class="comment"># 其余内容省略，无需更改</span></span><br></pre></td></tr></table></figure></p><p>同理，将 <code>yourdomain.com</code> 替换为你的域名。如果还要支持 HTTP/2，请确保编译 Nginx 时设置了参数 <code>--with-http_v2_module</code>，然后在这个配置文件中，将 <code>listen 443 ssl;</code> 改为 <code>listen 443 ssl http2;</code>，ipv6 同理。<br>更改完成后，执行 <code>nginx -s reload</code> 重新加载配置，这时就可以使用 https 访问了。</p><h2 id="更新证书"><a href="#更新证书" class="headerlink" title="更新证书"></a>更新证书</h2><p>先在命令行模拟证书更新：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot renew --dry-run</span><br></pre></td></tr></table></figure></p><p>模拟更新成功的效果如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">Processing /etc/letsencrypt/renewal/yourdomain.com.conf</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">** DRY RUN: simulating <span class="string">'certbot renew'</span> close to cert expiry</span><br><span class="line">**          (The <span class="built_in">test</span> certificates below have not been saved.)</span><br><span class="line"></span><br><span class="line">Congratulations, all renewals succeeded. The following certs have been renewed:</span><br><span class="line">  /etc/letsencrypt/live/yourdomain.com/fullchain.pem (success)</span><br><span class="line">** DRY RUN: simulating <span class="string">'certbot renew'</span> close to cert expiry</span><br><span class="line">**          (The <span class="built_in">test</span> certificates above have not been saved.)</span><br></pre></td></tr></table></figure></p><p>如果模拟成功，就可以使用<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot renew &gt;&gt; /var/<span class="built_in">log</span>/le-renew.log</span><br></pre></td></tr></table></figure></p><p>手动进行更新（注：证书只有在有效期小于一个月的时候才会更新，否则 CertBot 会提示无需更新）。<br>当然，你也可以通过 Crontab 来启用定时任务，自动更新证书。在命令行执行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo crontab -e</span><br></pre></td></tr></table></figure></p><p>在打开的文件中添加配置：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">30 2 * * 1 /path/to/your/certbot renew &gt;&gt; /var/<span class="built_in">log</span>/le-renew.log</span><br></pre></td></tr></table></figure></p><p>这里建议使用 certbot 或 certbot-auto 的绝对地址，避免出现问题。这样，在每周一半夜 2 点 30 分就会执行 renew 任务，自动更新证书。<br>如果一切 OK，那么我们的配置到此结束！</p><h2 id="关于-HSTS"><a href="#关于-HSTS" class="headerlink" title="关于 HSTS"></a>关于 HSTS</h2><p>如果你能够确保在未来足够长的时间内保持证书的有效性，则可以配置 HSTS。HSTS 是 HTTP Strict Transport Security 的缩写，它可以阻止基于 SSLStrip 的中间人攻击，这将增加访问的安全性。在 http 头中做出如下设置即可开启 HSTS：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Strict-Transport-Security: max-age=expireTime [; includeSubDomains] [; preload]</span><br></pre></td></tr></table></figure></p><p>其中 <code>expireTime</code> 是过期时间，一旦用户通过 https 访问你开启了 HSTS 的站点，那么在 <code>expireTime</code> 之内再次访问，浏览器将强制启用 https——这样可以防止发送不安全的流量。但是，如果你的证书此时过期了，那么用户将无法访问你的网站，因为 http 访问会被浏览器禁止。<br>更进一步，你可以把自己的网站提交到 HSTS preload list 中。这是 Chrome 浏览器中的 HSTS 预载入列表，在该列表中的网站，使用 Chrome 浏览器访问时，会自动转换成 HTTPS。Firefox、Safari、Edge 浏览器也在采用这个列表。<br>加入 HSTS preload list 的条件为：</p><ul><li>有效的证书（如果使用 SHA-1 证书，必须是 2016 年前就会过期的）</li><li>将所有 HTTP 流量重定向到 HTTPS</li><li>确保所有子域名启用 HTTPS，特别是 www 子域名</li></ul><p>同时输出的 HSTS 响应头部需要满足以下条件：</p><ul><li>max-age 至少为一年，31536000 秒</li><li>必须指定 includeSubdomains 参数</li><li>必须支持 preload 参数</li></ul><p>所以，一个典型满足 HSTS preload list 的响应头部为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Strict-Transport-Security: max-age=31536000; includeSubDomains; preload;</span><br></pre></td></tr></table></figure></p><p>通过配置 Nginx，利用 <code>add_header</code> 加上这个响应头，然后就可以在 HSTS preload list 的 <a href="https://hstspreload.org" target="_blank" rel="noopener">官方网站</a> 上进行申请了。从申请到审核通过，时间在几天到几周不等。申请后，你可以随时查询最新的状态，也可以在 Chrome 浏览器的地址框中输入 <code>chrome://net-internals/#hsts</code> 查看。从审核通过到正式加入到 Chrome 的 stable release 版本中还需要一段时间，因为还要经过 canary、dev、beta 以及 stable progression 等步骤。</p><p>参考文章：<br><a href="https://blog.csdn.net/p793049488/article/details/53483381" target="_blank" rel="noopener">nginx+ssl 配置 http 和 https 共存</a><br><a href="https://segmentfault.com/a/1190000005797776" target="_blank" rel="noopener">手把手教你在 Nginx 上使用 CertBot</a></p><p>本文更新于 2018 年 7 月 28 日：<br>在较新版本中，<code>ssl on</code> 不再被使用，否则会报错：[warn] the “ssl” directive is deprecated, use the “listen … ssl” directive instead；将推荐的 CertBot 安装方式由包管理工具改为 Git 项目。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>有趣的 Linux 命令行工具</title>
      <link href="/2018-05/%E6%9C%89%E8%B6%A3%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7/"/>
      <url>/2018-05/%E6%9C%89%E8%B6%A3%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7/</url>
      
        <content type="html"><![CDATA[<p>Linux is fun! Huhhh. OK so you don’t believe me. Mind me at the end of this article you will have to believe that Linux is actually a fun box.<br>Linux 是非常有趣的，别不相信——看完这篇文章，你一定会发现 Linux 系统神奇的用法。<br>请注意，下面部分命令给出了两种包管理软件的安装方式，如果是 Debian 系的系统，请使用 <code>apt</code>，如果是 Red Hat 系的系统，请使用 <code>yum</code>。如果你使用了其他 Linux 发行版，或使用了其他包管理工具（例如 macOS 上的 brew），可能无法找到所有这些命令。<br><strong> 注：为了在代码块中区别输入输出，以 <code>$</code> 开头的行代表输入。</strong></p><h2 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h2><p>命令：curl<br>curl 用于互联网传输数据，支持多种协议。通过以下命令可以查看天气：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -4 http://wttr.in</span><br></pre></td></tr></table></figure></p><h2 id="sl-Steam-Locomotive"><a href="#sl-Steam-Locomotive" class="headerlink" title="sl (Steam Locomotive)"></a>sl (Steam Locomotive)</h2><p>命令：sl（蒸汽机车的缩写）<br>You might be aware of command ‘ls’ the list command and use it frequently to view the contents of a folder but because of miss-typing sometimes you would result in ‘sl’, how about getting a little fun in terminal and not “command not found”.<br>你一定知道 ls 是用来显示文件夹内容的常见命令，但如果不小心打成 sl 呢？通过包管理工具安装它，你就能看见一辆跑过屏幕的火车，而不是『找不到命令』：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ apt install sl <span class="comment">#In Debian like OS, or aptitude based system</span></span><br><span class="line">$ yum install sl <span class="comment">#In Red Hat like OS, or yum based system</span></span><br><span class="line">$ sl</span><br></pre></td></tr></table></figure></p><p>This command works even when you type ‘LS’ and not ‘ls’.</p><h2 id="telnet"><a href="#telnet" class="headerlink" title="telnet"></a>telnet</h2><p>命令：telnet<br>No! No!! it is not as much complex as it seems. You would be familiar with telnet. Telnet is a text-oriented bidirectional network protocol over network. Here is nothing to be installed. What you should have is a Linux box and a working Internet.<br>不！它并不像看上去那样复杂。你会熟悉它的。Telnet 是一个基于文本的双向网络协议。你无需安装它，只需要一台能够联网的 linux 机器就行。<br>输入以下命令即可观看 ASCII 版星球大战：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ telnet towel.blinkenlights.nl</span><br></pre></td></tr></table></figure></p><p>而以下命令将会在你的命令行中生成一个 ASCII 世界地图：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ telnet mapscii.me</span><br></pre></td></tr></table></figure></p><p>是不是很有趣？</p><h2 id="fortune"><a href="#fortune" class="headerlink" title="fortune"></a>fortune</h2><p>命令：fortune What about getting your random fortune, sometimes funny in<br>terminal.<br>在终端获取随机的人生经验，听上去不错吧？<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ apt install fortune</span><br><span class="line">$ yum install fortune</span><br><span class="line">$ fortune</span><br><span class="line"></span><br><span class="line">You<span class="string">'re not my type.  For that matter, you'</span>re not even my species!!!</span><br><span class="line">Future looks spotty.  You will spill soup <span class="keyword">in</span> late evening.</span><br><span class="line">You worry too much about your job.  Stop it.  You are not paid enough to worry.</span><br><span class="line">Your love life will be... interesting.</span><br></pre></td></tr></table></figure></p><a id="more"></a><h2 id="rev-Reverse"><a href="#rev-Reverse" class="headerlink" title="rev (Reverse)"></a>rev (Reverse)</h2><p>命令：rev（反转的缩写）<br>It reverse every string given to it, is not it funny.<br>它会反转任何输入的字符串，然后输出。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ rev</span><br><span class="line"></span><br><span class="line">123abc</span><br><span class="line">cba321</span><br><span class="line">xuniL eb ot nrob</span><br><span class="line">born to be Linux</span><br></pre></td></tr></table></figure></p><h2 id="factor"><a href="#factor" class="headerlink" title="factor"></a>factor</h2><p>命令：factor Time for some Mathematics, this command output all the possible factors of a given number.<br>数学时间到：这个命令会输出一个数字的所有质因数。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ factor 5</span><br><span class="line"></span><br><span class="line">5</span><br><span class="line">5: 5</span><br><span class="line">12</span><br><span class="line">12: 2 2 3</span><br><span class="line">1001</span><br><span class="line">1001: 7 11 13</span><br><span class="line">5442134</span><br><span class="line">5442134: 2 2721067</span><br></pre></td></tr></table></figure></p><h2 id="script"><a href="#script" class="headerlink" title="script"></a>script</h2><p>shell 脚本<br>OK fine this is not a command and a script but it is nice.<br>它会输出乘法口诀表。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..9&#125;; <span class="keyword">do</span> <span class="keyword">for</span> j <span class="keyword">in</span> $(seq 1 <span class="variable">$i</span>); <span class="keyword">do</span> <span class="built_in">echo</span> -ne <span class="variable">$i</span>*<span class="variable">$j</span>=$((i*j))\\t;<span class="keyword">done</span>; <span class="built_in">echo</span>;<span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">1*1=1</span><br><span class="line">2*1=2   2*2=4</span><br><span class="line">3*1=3   3*2=6   3*3=9</span><br><span class="line">4*1=4   4*2=8   4*3=12  4*4=16</span><br><span class="line">5*1=5   5*2=10  5*3=15  5*4=20  5*5=25</span><br><span class="line">6*1=6   6*2=12  6*3=18  6*4=24  6*5=30  6*6=36</span><br><span class="line">7*1=7   7*2=14  7*3=21  7*4=28  7*5=35  7*6=42  7*7=49</span><br><span class="line">8*1=8   8*2=16  8*3=24  8*4=32  8*5=40  8*6=48  8*7=56  8*8=64</span><br><span class="line">9*1=9   9*2=18  9*3=27  9*4=36  9*5=45  9*6=54  9*7=63  9*8=72  9*9=81</span><br></pre></td></tr></table></figure></p><h2 id="cowsay"><a href="#cowsay" class="headerlink" title="cowsay"></a>cowsay</h2><p>命令：cowsay<br>An ASCII cow in terminal that will say what ever you want.<br>一个终端里由 ASCII 码组成的牛，你想让它说什么，它就会说什么。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ apt install cowsay</span><br><span class="line">$ yum install cowsay</span><br><span class="line">$ cowsay I Love *nix</span><br><span class="line"></span><br><span class="line"> _____________</span><br><span class="line">&lt; I Love *nix &gt;</span><br><span class="line"> -------------</span><br><span class="line">        \   ^__^</span><br><span class="line">         \  (oo)\_______</span><br><span class="line">            (__)\       )\/\</span><br><span class="line">                ||----w |</span><br><span class="line">                ||     ||</span><br></pre></td></tr></table></figure></p><p>How about pipelineing ‘fortune command’, described above with cowsay?<br>通过管道指令将 fortune 命令的输出作为 cowsay 的输入：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ fortune | cowsay</span><br><span class="line"></span><br><span class="line">_________________________________________</span><br><span class="line">/ Q: How many Oregonians does it take to  \</span><br><span class="line">| screw <span class="keyword">in</span> a light bulb? A: Three. One to |</span><br><span class="line">| screw <span class="keyword">in</span> the light bulb and two to fend |</span><br><span class="line">| off all those                           |</span><br><span class="line">|                                         |</span><br><span class="line">| Californians trying to share the        |</span><br><span class="line">\ experience.                             /</span><br><span class="line">-----------------------------------------</span><br><span class="line">        \   ^__^</span><br><span class="line">         \  (oo)\_______</span><br><span class="line">            (__)\       )\/\</span><br><span class="line">                ||----w |</span><br><span class="line">                ||     ||</span><br></pre></td></tr></table></figure></p><p>Note: ‘|‘ is called pipeline instruction and it is used where the output of one command needs to be the input of another command. In the above example the output of ‘fortune’ command acts as an input of ‘cowsay’ command. This pipeline instruction is frequently used in scripting and programming.<br>注意：’|‘被称为管道指令，用于将一个命令的输出作为另一个命令的输入。在上面的例子中，fortune 命令的输出作为 cowsay 命令的输入。管道指令经常用于脚本和编程。<br>xcowsay is a graphical program which response similar to cowsay but in a graphical manner, hence it is X of cowsay.<br>xcowsay 是一个图形程序，其效果类似于 cowsay，但是是以图形方式显示说话的牛。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ apt install xcowsay</span><br><span class="line">$ yum install xcowsay</span><br><span class="line">$ xcowsay I Love nix</span><br></pre></td></tr></table></figure></p><p>cowthink is another command, just run “cowthink Linux is sooo funny” and see the difference in output of cowsay and cowthink. cowthink 是另一个命令，你可以执行 “cowthink Linux is sooo funny” 看看它和 cowthink 的输出差异。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ apt install cowthink</span><br><span class="line">$ yum install cowthink</span><br><span class="line">$ cowthink ....Linux is sooo funny</span><br><span class="line"></span><br><span class="line"> _________________________</span><br><span class="line">( ....Linux is sooo funny )</span><br><span class="line"> -------------------------</span><br><span class="line">        o   ^__^</span><br><span class="line">         o  (oo)\_______</span><br><span class="line">            (__)\       )\/\</span><br><span class="line">                ||----w |</span><br><span class="line">                ||     ||</span><br></pre></td></tr></table></figure></p><p>注：你可以查看以上命令的帮助菜单，可以把牛换成其他会说话的动物。</p><h2 id="yes"><a href="#yes" class="headerlink" title="yes"></a>yes</h2><p>命令：yes<br>It is funny but useful as well, specially in scripts and for System Administrators where an automated predefined response can be passed to terminal or generated.<br>它很有趣，也很实用。使用 yes，终端将会不断输出你所输入的字符串。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ yes I Love Linux</span><br><span class="line"></span><br><span class="line">I Love Linux</span><br><span class="line">I Love Linux</span><br><span class="line">I Love Linux</span><br><span class="line">I Love Linux</span><br><span class="line">I Love Linux</span><br><span class="line">I Love Linux</span><br></pre></td></tr></table></figure></p><p>Note: (Till you interrupt i.e ctrl+c).<br>直到你使用 ctrl+c 结束它，否则会一直输出。</p><h2 id="toilet"><a href="#toilet" class="headerlink" title="toilet"></a>toilet</h2><p>命令：toilet<br>What? Are u kidding, huhh no! Definitely not, but for sure this command name itself is too funny, and I don’t know from where this command gets it’s name.<br>什么？你在开玩笑吗，不！绝对不是，但肯定这个命令名称本身太有趣了，我不知道这个命令从哪里得到它的名字。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ apt install toilet</span><br><span class="line">$ yum install toilet</span><br><span class="line">$ toilet mimi</span><br><span class="line"></span><br><span class="line">          <span class="string">""</span></span><br><span class="line"> mmmmm  mmm    mmmmm  mmm</span><br><span class="line"> <span class="comment"># # #    #    # # #    #</span></span><br><span class="line"> <span class="comment"># # #    #    # # #    #</span></span><br><span class="line"> <span class="comment"># # #  mm#mm  # # #  mm#mm</span></span><br></pre></td></tr></table></figure></p><p>It even offers some kind of color and fonts style.<br>它甚至提供了颜色和字体样式。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ toilet -f mono12 -F metal mimi.com</span><br></pre></td></tr></table></figure></p><p>Note: Figlet is another command that more or less provide such kind of effect in terminal.<br>注意：Figlet 是另一个或多或少在终端提供这种效果的命令。</p><h2 id="cmatrix"><a href="#cmatrix" class="headerlink" title="cmatrix"></a>cmatrix</h2><p>命令：cmatrix<br>You might have seen Hollywood movie ‘matrix’ and would be fascinated with power, Neo was provided with, to see anything and everything in matrix or you might think of an animation that looks alike Hacker’s desktop.<br>你可能已经看过好莱坞电影《黑客帝国》，并且会被 Neo 获取的力量所吸引——在矩阵中看到一切；或许你也会想到一个看起来和 Hacker 的桌面一样的动画。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ apt install cmatrix</span><br><span class="line">$ brew install cmatrix</span><br><span class="line">$ cmatrix</span><br></pre></td></tr></table></figure></p><p>yum 上似乎找不到，可以使用 <a href="https://github.com/abishekvashok/cmatrix" target="_blank" rel="noopener">源码</a> 编译安装。</p><h2 id="oneko"><a href="#oneko" class="headerlink" title="oneko"></a>oneko</h2><p>命令：oneko<br>OK so you believe that mouse pointer of Linux is the same silly black/white pointer where no animation lies then I fear you could be wrong. “oneko” is a package that will attach a “Jerry” with you mouse pointer and moves along with you pointer.<br>如果你觉得 Linux 的鼠标就是一个愚蠢的黑色 / 白色指针，而没有动画，我担心你可能是错的。使用 “oneko” 命令，就可以创造一只与你的鼠标指针玩耍的猫。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ apt install oneko</span><br><span class="line">$ yum install oneko</span><br><span class="line">$ oneko</span><br></pre></td></tr></table></figure></p><p>Note: Once you close the terminal from which oneko was run, jerry will disappear, nor will start at start-up. You can add the application to start up and continue enjoying.<br>注意：一旦你关闭了运行 oneko 的终端，小猫就会消失。你可以把它添加到开机启动中，继续享受撸猫的乐趣。</p><h2 id="while"><a href="#while" class="headerlink" title="while"></a>while</h2><p>命令：while<br>The below “while” command is a script which provides you with colored date and file till you interrupt (ctrl + c). Just copy and paste the below code in terminal.<br>下面的 “while” 命令是一个脚本，它会为你提供彩色日期和文件，直到你用 ctrl + c 中断。只需在终端中复制并粘贴以下代码即可。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="string">"<span class="variable">$(date'+%D %T'| toilet -f term -F border --gay)</span>"</span>; sleep 1; <span class="keyword">done</span></span><br></pre></td></tr></table></figure></p><p>Note: The above script when modified with following command, will gives similar output but with a little difference, check it in your terminal.<br>注意：上面的脚本在使用以下命令修改后，会给出类似的输出，但有一点区别，请在终端中检查它。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span> clear; <span class="built_in">echo</span> <span class="string">"<span class="variable">$(date'+%D %T'| toilet -f term -F border --gay)</span>"</span>; sleep 1; <span class="keyword">done</span></span><br></pre></td></tr></table></figure></p><h2 id="espeak"><a href="#espeak" class="headerlink" title="espeak"></a>espeak</h2><p>命令：espeak<br>Just Turn the Knob of your multimedia speaker to full before pasting this command in your terminal and let us know how you felt listening the god’s voice.<br>在将此命令粘贴到终端之前，请将你的音箱音量开到最大，让我们知道你是如何聆听上帝的声音的。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ apt install espeak</span><br><span class="line">$ yum install espeak</span><br><span class="line">$ espeak <span class="string">"This is a very good website dedicated to Foss Community"</span></span><br></pre></td></tr></table></figure></p><h2 id="aafire"><a href="#aafire" class="headerlink" title="aafire"></a>aafire</h2><p>命令：aafire<br>How about fire in your terminal. Just type “aafire” in the terminal, without quotes and see the magic. Press any key to interrupt the program.<br>在你的终端放火，听上去如何？只需在终端输入 aafire，就可以看到神奇的现象。按任意键中断程序。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ apt install libaa-bin</span><br><span class="line">$ aafire</span><br></pre></td></tr></table></figure></p><h2 id="bb"><a href="#bb" class="headerlink" title="bb"></a>bb</h2><p>命令：bb<br>First install “apt insatll bb” and then, type “bb” in terminal and see what happens.<br>首先用 apt 安装 bb 命令，然后在终端输入 bb，看看会发生什么。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ apt install bb</span><br><span class="line">$ bb</span><br></pre></td></tr></table></figure></p><h2 id="url"><a href="#url" class="headerlink" title="url"></a>url</h2><p>命令：url<br>Won’t it be an awesome feeling for you if you can update you twitter status from command line in front of your friend and they seems impressed. OK just replace username, password and your status message with your’s username, password and “your status message”.<br>如果你可以在你的朋友面前通过命令行更新你的 Twitter 状态，这绝对是超棒的感觉——而且他们也会印象深刻。好的，只需把下面的 YourUsername，YourPassword 和 Your status message 替换为你自己的用户名，密码和状态信息即可。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ url -u YourUsername:YourPassword -d status=<span class="string">"Your status message"</span> http://twitter.com/statuses/update.xml</span><br></pre></td></tr></table></figure></p><h2 id="ASCIIquarium"><a href="#ASCIIquarium" class="headerlink" title="ASCIIquarium"></a>ASCIIquarium</h2><p>命令：ASCIIquarium<br>How it will be to get an aquarium in terminal.<br>怎样才能在终端获得一个水族馆？<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ apt install libcurses-perl</span><br><span class="line">$ <span class="built_in">cd</span> /tmp</span><br><span class="line">$ wget http://search.cpan.org/CPAN/authors/id/K/KB/KBAUCOM/Term-Animation-2.4.tar.gz</span><br><span class="line">$ tar -zxvf Term-Animation-2.4.tar.gz</span><br><span class="line">$ <span class="built_in">cd</span> Term-Animation-2.4</span><br><span class="line">$ perl Makefile.PL &amp;&amp; make &amp;&amp; make <span class="built_in">test</span></span><br><span class="line">$ make install</span><br></pre></td></tr></table></figure></p><p>Now Download and Install ASCIIquarium.<br>现在下载并安装 ASCIIquarium。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /tmp</span><br><span class="line">$ wget http://www.robobunny.com/projects/asciiquarium/asciiquarium.tar.gz</span><br><span class="line">$ tar -zxvf asciiquarium.tar.gz</span><br><span class="line">$ <span class="built_in">cd</span> asciiquarium_1.1</span><br><span class="line">$ cp asciiquarium /usr/<span class="built_in">local</span>/bin</span><br><span class="line">$ chmod 0755 /usr/<span class="built_in">local</span>/bin/asciiquarium</span><br></pre></td></tr></table></figure></p><p>And finally run “asciiquarium” or “/usr/local/bin/asciiquarium” in terminal without quotes and be a part of magic that will be taking place in front of your eyes.<br>最后在终端中运行 asciiquarium，水族馆便展现在你面前。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ asciiquarium</span><br></pre></td></tr></table></figure></p><h2 id="Fork-Bomb"><a href="#Fork-Bomb" class="headerlink" title="Fork Bomb"></a>Fork Bomb</h2><p>Fork 炸弹<br>This is a very nasty piece of code. Run this at your own risk. This actually is a fork bomb which exponentially multiplies itself till all the system resource is utilized and the system hangs. (To check the power of above code you should try it once, but all at your own risk, close and save all other programs and file before running fork bomb).<br>这是一段非常讨厌的代码。运行这个需要自担风险。这实际上是一个 Fork 炸弹，它以指数方式自我增殖，直到所有系统资源被利用并且系统挂起。（要体会上述代码的威力，你可以尝试一次，但所有风险自负：谨记，在运行 Fork 炸弹之前关闭并保存所有其他程序和文件）。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ :()&#123; :|:&amp; &#125;:</span><br></pre></td></tr></table></figure></p><h2 id="更多"><a href="#更多" class="headerlink" title="更多"></a>更多</h2><p>Have fun, you can say me thanks later :) yup your comment is highly appreciated which encourages us write more. Tell us which command you liked the most. Stay tuned i will be back soon with another article worth reading.</p><p>本文翻译自：<a href="https://www.tecmint.com/20-funny-commands-of-linux-or-linux-is-fun-in-terminal" target="_blank" rel="noopener">20 Funny Commands of Linux or Linux is Fun in Terminal</a></p><p>拓展阅读：<br><a href="https://www.zhihu.com/question/20034686/answer/52858899" target="_blank" rel="noopener">计算机领域有哪些经典的典故或笑话？</a><br><a href="https://www.zhihu.com/question/285586045/answer/475593167" target="_blank" rel="noopener">一行代码可以做什么？</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux 命令行常用快捷键</title>
      <link href="/2018-05/Linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/"/>
      <url>/2018-05/Linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/</url>
      
        <content type="html"><![CDATA[<p>通过快捷键，可以方便地在 Linux 命令行下快速移动光标、编辑命令、编辑后执行历史命令、Bang(!)命令、控制命令等，有效提高工作效率。</p><h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><ul><li><code>Ctrl - k</code>: 先按住 Ctrl 键，然后再按 k 键</li><li><code>Ctrl - kl</code>: 先按住 Ctrl 键，然后再按 k 键，然后松开 k 键，再按 l 键</li><li><code>Alt - k</code>: 先按住 Alt 键，然后再按 k 键</li><li><code>M - k</code>: 先单击 Meta(Esc) 键，然后再按 k 键</li></ul><h2 id="移动光标"><a href="#移动光标" class="headerlink" title="移动光标"></a>移动光标</h2><ul><li><code>Ctrl - 左右键</code>: 在单词之间跳转</li><li><code>Ctrl - a</code>: 移到行首</li><li><code>Ctrl - e</code>: 移到行尾</li><li><code>Ctrl - b</code>: 往回 (左) 移动一个字符</li><li><code>Ctrl - f</code>: 往后 (右) 移动一个字符</li><li><code>Ctrl - xx</code>: 在命令行尾和光标之间移动</li><li><code>Alt - b</code>: 往回 (左) 移动一个单词</li><li><code>Alt - f</code>: 往后 (右) 移动一个单词</li><li><code>M - b</code>: 往回 (左) 移动一个单词</li><li><code>M - f</code>: 往后 (右) 移动一个单词</li></ul><h2 id="编辑命令"><a href="#编辑命令" class="headerlink" title="编辑命令"></a>编辑命令</h2><ul><li><code>Ctrl - h</code>: 删除光标左方位置的字符</li><li><code>Ctrl - d</code>: 删除光标右方位置的字符（注意：<code>Ctrl - d</code> 也代表 EOF，当前命令行没有任何字符时，会注销系统或结束终端）</li><li><code>Ctrl - w</code>: 由光标位置开始，往左删除单词(往行首删)</li><li><code>Alt - d</code>: 由光标位置开始，往右删除单词(往行尾删)</li><li><code>M - d</code>: 由光标位置开始，删除单词，直到该单词结束</li><li><code>Ctrl - u</code>: 由光标所在位置开始，删除左方所有的字符，直到该行开始</li><li><code>Ctrl - k</code>: 由光标所在位置开始，删除右方所有的字符，直到该行结束</li><li><code>Ctrl - y</code>: 粘贴 <code>Ctrl - u</code> 或 <code>Ctrl - k</code> 剪切的内容到光标后</li><li><code>Ctrl - t</code>: 交换光标处和之前两个字符的位置</li><li><code>Alt - .</code>: 使用上一条命令的最后一个参数</li><li><code>Ctrl - _</code>: 回复之前的状态，撤销操作</li></ul><p>另外，<code>Ctrl - ak</code> 或 <code>Ctrl - eu</code> 或 <code>Ctrl - ku</code> 组合可删除整行。</p><a id="more"></a><h2 id="Bang-命令"><a href="#Bang-命令" class="headerlink" title="Bang(!)命令"></a>Bang(!)命令</h2><ul><li><code>!!</code>: 执行上一条命令</li><li><code>^foo^bar</code>: 把上一条命令里的 <code>foo</code> 替换为 <code>bar</code>，并执行</li><li><code>!wget</code>: 执行最近的以 <code>wget</code> 开头的命令</li><li><code>!wget:p</code>: 仅打印最近的以 <code>wget</code> 开头的命令，不执行</li><li><code>!$</code>: 上一条命令的最后一个参数，与 <code>Alt - .</code> 和 <code>$_</code> 相同</li><li><code>!\*</code>: 上一条命令的所有参数</li><li><code>!\*:p</code>: 打印上一条命令是所有参数，也即 <code>!*</code> 的内容</li><li><code>^abc</code>: 删除上一条命令中的 <code>abc</code></li><li><code>^foo^bar</code>: 将上一条命令中的 <code>foo</code> 替换为 <code>bar</code></li><li><code>^foo^bar^</code>: 将上一条命令中的 <code>foo</code> 替换为 <code>bar</code></li><li><code>!-n</code>: 执行前 n 条命令，例如 <code>!-1</code> 执行上一条命令，而 <code>!-5</code> 执行前 5 条命令</li></ul><h2 id="查找历史命令"><a href="#查找历史命令" class="headerlink" title="查找历史命令"></a>查找历史命令</h2><ul><li><code>Ctrl - p</code>: 显示当前命令的上一条历史命令</li><li><code>Ctrl - n</code>: 显示当前命令的下一条历史命令</li><li><code>Ctrl - r</code>: 搜索历史命令，随着输入会显示历史命令中的一条匹配命令，Enter 键执行匹配命令；ESC 键在命令行显示而不执行匹配命令</li><li><code>Ctrl - g</code>: 从历史搜索模式（即 <code>Ctrl - r</code>）退出</li></ul><h2 id="控制命令"><a href="#控制命令" class="headerlink" title="控制命令"></a>控制命令</h2><ul><li><code>Ctrl - l</code>: 清除屏幕，然后，在最上面重新显示目前光标所在的这一行的内容</li><li><code>Ctrl - o</code>: 执行当前命令，并选择上一条命令</li><li><code>Ctrl - s</code>: 阻止屏幕输出</li><li><code>Ctrl - q</code>: 允许屏幕输出</li><li><code>Ctrl - c</code>: 终止命令</li><li><code>Ctrl - z</code>: 挂起命令</li></ul><h2 id="重复执行操作动作"><a href="#重复执行操作动作" class="headerlink" title="重复执行操作动作"></a>重复执行操作动作</h2><ul><li><code>M - 操作次数</code>: 指定操作次数，重复执行指定的操作</li></ul><p>本文转载自：<a href="https://www.linuxidc.com/Linux/2016-10/136027.htm" target="_blank" rel="noopener">Linux 命令行常用光标移动快捷键</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在 GitHub 热点图上绘画</title>
      <link href="/2018-05/%E5%9C%A8GitHub%E7%83%AD%E7%82%B9%E5%9B%BE%E4%B8%8A%E7%BB%98%E7%94%BB/"/>
      <url>/2018-05/%E5%9C%A8GitHub%E7%83%AD%E7%82%B9%E5%9B%BE%E4%B8%8A%E7%BB%98%E7%94%BB/</url>
      
        <content type="html"><![CDATA[<p>借助这个项目，你可以在 GitHub 热点图（动态图）上绘制图案，并由此生成 shell 脚本；在空项目中执行该脚本，便能创造过去的 commit 记录；而将该项目 push 到 GitHub 上，你的热点图就变得和绘制的图案完全相同。</p><p><img src="/images/2018-05/gitdraw.png" alt=""></p><p>项目地址：<a href="https://github.com/stevenjoezhang/git-draw" target="_blank" rel="noopener">git-draw</a><br>原项目是一个 Chrome 插件，由于长期没有维护，且 GitHub 改变了页面结构，导致插件不可用。新项目重写了部分 JavaScript 代码，使得其能够正常运行。快来试试吧！</p>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CUPT 地震仪的实现</title>
      <link href="/2018-05/CUPT%E5%9C%B0%E9%9C%87%E4%BB%AA%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
      <url>/2018-05/CUPT%E5%9C%B0%E9%9C%87%E4%BB%AA%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p>2018 年 CUPT 的第一题：</p><blockquote><p><strong>Invent Yourself</strong><br>Construct a simple seismograph that amplifies a local disturbance by mechanical, optical or electrical methods. Determine the typical response curve of your device and investigate the parameters of the damping constant. What is the maximum amplification that you can achieve?<br><strong> 自主发明 </strong><br>建造一个可以通过力学、光学或电学方法放大局部扰动的简单地震仪。确定你装置的标准响应曲线并且研究阻尼常数的参量。你能达到的最大放大率是多少？</p></blockquote><p>此题的关键便是将地震仪的反应谱通过可观测量进行表示。实现的思路有很多，力学、光学或电学方法都是可行的。综合考虑了实现难度和测量精度后，决定采用以下方案：通过力学方法放大震动，然后利用霍尔片和磁铁将力学量转换为电学量，借助 Arduino 单片机的模数转换，通过串口将信号输入到电脑，电脑用 Python 监听串口，将获得的数据保存并实时分析、绘图。</p><p>仪器的整体构造如图：</p><p><img src="/images/2018-05/1.jpg" alt=""></p><a id="more"></a><p>磁铁与霍尔片的细节：</p><p><img src="/images/2018-05/2.png" alt=""></p><p>Arduino 的连接：</p><p><img src="/images/2018-05/3.png" alt=""></p><p>仪器的工作状态：</p><p><img src="/images/2018-05/4.png" alt=""><br><img src="/images/2018-05/5.jpg" alt=""></p><p>测得的『地震』波（由敲击桌子和将小物件扔到桌子上产生）：</p><p><img src="/images/2018-05/6.jpg" alt=""></p><p>具体的代码包括 Arduino 读取模拟信号和串口输出部分（需要使用 Arduino IDE 编译上传至设备），以及 Python 监听串口、保存数据、绘图部分。<br>所有代码已开源：<a href="https://github.com/stevenjoezhang/CUPT-Seismograph" target="_blank" rel="noopener">CUPT-Seismograph</a></p><p>本文更新于 2018 年 10 月 31 日：<br>其实电脑上还有一个更好的采样方式——声卡。通过 Python 直接读取声卡的模拟输入，也可以达到效果，并且采样率和精度可以做得更高。<code>pyaudio</code> 库可以提供相关功能，有兴趣的话可以按这个思路实现。</p>]]></content>
      
      
      <categories>
          
          <category> 物理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Arduino </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>文艺的代码</title>
      <link href="/2018-04/%E6%96%87%E8%89%BA%E7%9A%84%E4%BB%A3%E7%A0%81/"/>
      <url>/2018-04/%E6%96%87%E8%89%BA%E7%9A%84%E4%BB%A3%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> world;</span><br><span class="line"><span class="keyword">unsigned</span> letter;</span><br><span class="line"><span class="keyword">short</span> stay;</span><br><span class="line"><span class="keyword">long</span> memories;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> ago;</span><br><span class="line"><span class="keyword">float</span> cloud;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"I miss you.\n"</span>);</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (everynight <span class="keyword">in</span> mydreams) &#123;</span><br><span class="line">    i.see(you);</span><br><span class="line">    i.feel(you);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> world <span class="keyword">where</span> someone <span class="keyword">like</span> <span class="string">'%you%'</span>;</span><br></pre></td></tr></table></figure><p>Nothing is absolute.<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">* &#123; <span class="attribute">position</span>: relative; &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>物是人非事事休，欲语泪先流。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(item &amp;&amp; !people) everything = <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">if</span> (tears.setFlowing()) <span class="keyword">try</span> &#123;</span><br><span class="line">    Speaker skr = <span class="keyword">new</span> Speaker();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> &#123;</span><br><span class="line">    IOException e;</span><br><span class="line">&#125; ()</span><br></pre></td></tr></table></figure></p><p>先天下之忧而忧，后天下之乐而乐。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (others.rejoice() == <span class="literal">true</span>) &#123;</span><br><span class="line">    self.rejoice();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    self.worry();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><a id="more"></a><p>寻寻觅觅，冷冷清清，凄凄惨惨戚戚。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Seeking++;</span><br><span class="line">Loneliness++;</span><br><span class="line">(Misery++) + (Sadness++);</span><br></pre></td></tr></table></figure></p><p>野火烧不尽，春风吹又生。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    Grass *gr;</span><br><span class="line">    <span class="keyword">if</span> (springBreeze.isComing()) &#123;</span><br><span class="line">        gr = <span class="keyword">new</span> Grass;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (wildFire.isComing()) &#123;</span><br><span class="line">        <span class="keyword">delete</span> gr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>假作真时真亦假，无为有处有还无。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (FALSE == <span class="literal">true</span>) TRUE = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">NULL</span> == exist) exist = <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure></p><p>欲穷千里目，更上一层楼。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (sight.getRange() &lt;= <span class="number">1000</span>) building.level++;</span><br></pre></td></tr></table></figure></p><p>明日复明日，明日何其多。我生待明日，万事成蹉跎。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (tomorrow.hasNext()) &#123;</span><br><span class="line">    howMany(tomorrow);</span><br><span class="line">    tomorrow.next();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">this</span>.wait(WHOLE_LIFE);</span><br><span class="line"><span class="keyword">return</span> (<span class="literal">null</span> == everything) ? <span class="literal">null</span> : <span class="literal">null</span>;</span><br></pre></td></tr></table></figure></p><p>路漫漫兮修远兮，吾将上下而求索。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">roadAheadEnding.isVisual = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span> (!spareEffort()) &#123;</span><br><span class="line">    i.searchWith(willUnbending);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>但愿人长久，千里共婵娟。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)wish: (People *) longNine &#123;</span><br><span class="line">    BOOL km = YES;</span><br><span class="line">    BOOL moon = YES;</span><br><span class="line">    return km &amp;&amp; moon;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>东风不与周郎便，铜雀春深锁二乔。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!eastWind.help(zhouyu)) &#123;</span><br><span class="line">    season = spring;</span><br><span class="line">    bronzeBird.lock(bigQiao);</span><br><span class="line">    bronzeBird.lock(smallQiao);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>两岸猿声啼不住，轻舟已过万重山。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    listen(Ape1Cry &amp;&amp; Ape2Cry);</span><br><span class="line">    Boat.pass(Mountain);</span><br><span class="line">    <span class="keyword">if</span> (Mountain &gt; <span class="number">10000</span>) <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>桃花潭水深千尺，不及汪伦送我情。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">peachFlowerLake.deep = <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">if</span> (peachFlowerLake.deep &lt; wl.friendship) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// 运算结果：true</span></span><br></pre></td></tr></table></figure></p><p>黑夜给了我黑色的眼睛，我却用它来寻找光明。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">eye = dark.poll();</span><br><span class="line"><span class="keyword">if</span> (eye.color == black) &#123;</span><br><span class="line">    eye.seek_for(bright);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>鱼和熊掌不可兼得。<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hold ? fish : palm;</span><br></pre></td></tr></table></figure></p><p>笑渐不闻声渐悄，多情却被无情恼。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">laugh--;</span><br><span class="line">sound--;</span><br><span class="line">person(feeling &gt; <span class="number">999</span>).bothered_by(person(feeling == <span class="number">0</span>));</span><br></pre></td></tr></table></figure></p><p>举头望明月，低头思故乡。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>.Head.SetDirection(TheMoon.GetInstance().Position)) &#123;</span><br><span class="line">    <span class="keyword">this</span>.Head.SetDirection(GROUND_DIRECTION);</span><br><span class="line">    <span class="keyword">this</span>.ThinkAbout(<span class="keyword">this</span>.OriginalPlace);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>一直在做程序员，直到膝盖中了一箭。<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        ActAs(Programmer);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (KneeTilledException e) &#123;</span><br><span class="line">        <span class="keyword">if</span> (e.Weapon <span class="keyword">is</span> Arror) <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>抽刀断水水更流，举杯消愁愁更愁。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cutWater(getKnife()) &#123;</span><br><span class="line">    water++;</span><br><span class="line">&#125;</span><br><span class="line">reduceWorry(toast) &#123;</span><br><span class="line">    worry++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>驿寄梅花，鱼传尺素，砌成此恨无重数。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (received(friend.plumBlossom) &amp;&amp; received(friend.letter)) &#123;</span><br><span class="line">    nostalgicThoughts++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>总为浮云能蔽日，长安不见使人愁。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (cloudsHideSun == <span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!seeChangan) &#123;</span><br><span class="line">        self.worry();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>人生得意须尽欢，莫使金樽空对月。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (life.satisfied()) &#123;</span><br><span class="line">    <span class="keyword">while</span> (happy--) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!goldenCup.empty() &amp;&amp; moon.visible()) &#123;</span><br><span class="line">            goldenCup.fulfill();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>苟利国家生死以，岂因祸福避趋之。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dog(pear -&gt; fruit).home.deliver(death, 1);</span><br><span class="line">flag in [ disaster, fortune ] -&gt; () &#123; pen.go(arguments[0]) &#125;;</span><br></pre></td></tr></table></figure></p><p>以上内容大部分来源于微博：<a href="https://weibo.com/1814392721/xDOh7ErYZ" target="_blank" rel="noopener">猜一宋词名句 - 程序员幽默</a></p><p>更多可参考：<a href="https://www.zhihu.com/question/20982625" target="_blank" rel="noopener">程序员如何用代码写一首诗？</a></p>]]></content>
      
      
      <categories>
          
          <category> 幽默 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>搭建 MCPE 服务器</title>
      <link href="/2018-04/%E6%90%AD%E5%BB%BAMCPE%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
      <url>/2018-04/%E6%90%AD%E5%BB%BAMCPE%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<p>目前搭建 MCPE 服务器的方法主要有两种：<a href="https://github.com/pmmp/PocketMine-MP" target="_blank" rel="noopener">PocketMine-MP</a>和<a href="https://github.com/NukkitX/Nukkit" target="_blank" rel="noopener">Nukkit</a>。前者基于 PHP，而后者基于 Java。<br>无论选择哪一种方法，都要确保游戏客户端和服务器端均是最新版本。如果版本不匹配，可能造成无法连接等问题。</p><h2 id="PocketMine-MP"><a href="#PocketMine-MP" class="headerlink" title="PocketMine-MP"></a>PocketMine-MP</h2><p>运行 PocketMine-MP 需要 php7 环境和大量的拓展库，例如 php-leveldb 和 yaml 等。即使你已经通过 brew、yum 等包管理工具安装了 php，也可能无法正确启动服务器——它们一般是不会自带这些拓展库的。为了免去手动编译安装拓展的麻烦，比较简单的解决方法是使用<a href="https://github.com/pmmp/php-build-scripts" target="_blank" rel="noopener">php-build-scripts</a>。它会编译出带有所有必要的拓展库的 php，供 PocketMine-MP 使用，并且不会与系统原有的 php 环境冲突。比如在 Mac 下，执行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/pmmp/php-build-scripts.git</span><br><span class="line"><span class="built_in">cd</span> php-build-scripts</span><br><span class="line">bash compile.sh -t mac64 -l -j4 -f</span><br></pre></td></tr></table></figure></p><p>即可编译安装 php（Linux 将参数对应改为 <code>-t linux64</code> 即可）。<br>完成后，再执行 <code>bash installer.sh</code>，就会自动下载 <code>PocketMine-MP.phar</code> 等必要程序。最后，执行 <code>bash start.sh</code> 就可以运行了，接下来根据提示进行配置即可。这种方式非常方便，只要记得使用 <code>screen</code>，然后等上几分钟就行。更多配置可以参考其官方文档。</p><h2 id="Nukkit"><a href="#Nukkit" class="headerlink" title="Nukkit"></a>Nukkit</h2><p>Nukkit 的原版似乎已经失去维护，其官方网站 <a href="https://nukkit.io" target="_blank" rel="noopener">Nukkit.io</a> 也无法打开。这里介绍的是一个 fork 出的分支。<br>Nukkit 需要 Java8 环境，如果没有安装，可以前往 <a href="https://www.oracle.com/index.html" target="_blank" rel="noopener">ORACLE 官网</a> 下载。运行方式也很简单，克隆这个仓库后，依次执行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git submodule update --init</span><br><span class="line">mvn clean package</span><br><span class="line">java -jar Nukkit.jar</span><br></pre></td></tr></table></figure></p><p>当然，在其新维护者的官网上也有发布的版本，无需自行编译 Jar 文件，可以前往 <a href="https://nukkitx.com" target="_blank" rel="noopener">NukkitX</a> 查看。<br>Nukkit 的主要问题是不支持 leveldb，也就是无法打开较新的 MCPE 存档，只支持 MC 存档和上古的 MCPE 存档，因此建议使用第一种方法。</p><h2 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h2><p>PocketMine-MP 和 Nukkit 启动后默认都会监听 19132 端口，配置服务器时填写局域网或公网 IP / 域名即可。更多的设置项可以参考它们的文档。</p><h2 id="更多"><a href="#更多" class="headerlink" title="更多"></a>更多</h2><p>转换存档的格式可以用这个脚本：<a href="https://github.com/ljyloo/LevelDb2Avnil" target="_blank" rel="noopener">LevelDb2Avnil</a>，不过看上去兼容性仍存在问题，请谨慎使用。</p>]]></content>
      
      
      <categories>
          
          <category> 电子游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 我的世界 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mac 启动 Apache 服务器</title>
      <link href="/2018-04/Mac%E5%90%AF%E5%8A%A8Apache%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
      <url>/2018-04/Mac%E5%90%AF%E5%8A%A8Apache%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<p>macOS 自带了 Apache 服务器和 php 环境，还包括大量动态拓展。只需要简单的配置，就可以让它运行起来。<br>你可以通过 <code>apachectl -version</code> 查看 Apache 的版本；通过 <code>php -v</code> 可以查看 php 版本，<code>php -m</code> 可以查看所有拓展。</p><h2 id="启动-Apache"><a href="#启动-Apache" class="headerlink" title="启动 Apache"></a>启动 Apache</h2><p>在终端输入 <code>sudo apachectl start</code>，即可启动 Apache 服务器。用浏览器打开 <code>http://localhost</code>，若显示『It works!』，说明服务器启动成功。<br>关闭和重启服务器的命令分别是 <code>sudo apachectl stop</code> 和 <code>sudo apachectl restart</code>。<br>如果需要开机启动服务器，可以编辑 <code>/System/Library/LaunchDaemons/org.apache.httpd.plist</code>，将<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>Disabled<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">true</span>/&gt;</span></span><br></pre></td></tr></table></figure></p><p>改为<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>Disabled<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">false</span>/&gt;</span></span><br></pre></td></tr></table></figure></p><p>即可。</p><h2 id="配置服务器"><a href="#配置服务器" class="headerlink" title="配置服务器"></a>配置服务器</h2><p>Apache 的配置文件为 <code>/etc/apache2/httpd.conf</code>，为防止出现问题，请将其备份后进行编辑。如果更新了 Mac 系统，可能需要重新进行配置。<br>Apache 默认的根目录在 <code>/Library/WebServer/Documents/</code> 下，你可以通过编辑配置文件中的 <code>DocumentRoot</code> 属性来修改它。<br>你也可以配置启用 PHP 等模块。在 httpd.conf 中，找到<br><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LoadModule php7_module libexec/apache2/libphp7.so</span><br></pre></td></tr></table></figure></p><p>将其行首用于注释的 <code>#</code> 去掉，即可启用 PHP。<br>如果你使用 brew 或通过源码编译安装了其他版本的 PHP，将 <code>libphp7.so</code> 的路径替换为对应的文件即可，例如 <code>/usr/local/opt/php/lib/httpd/modules/libphp7.so</code>。具体的安装方法将在后文介绍。<br><code>httpd.conf</code> 还可以设置很多其它的内容，可以自行寻找教程，此处不再赘述。<br>还有一件事情是，要确保运行 Apache 的用户（默认为 <code>_www</code>）对其根目录有读写权限，可以通过右键点击 <code>Documents</code> 文件夹，选择『显示简介』来修改权限，或通过 <code>chmod</code> 和 <code>chown</code> 命令递归的修改之。</p><h2 id="关于-PHP"><a href="#关于-PHP" class="headerlink" title="关于 PHP"></a>关于 PHP</h2><p>系统自带的 PHP 版本较旧，可以自行安装新版本。如果使用 brew 安装，执行 <code>brew install php</code> 即可安装最新版本；如果要安装特定版本，先执行 <code>brew search php</code> 查看可用的版本，然后再选择一个自己需要的版本安装，例如 <code>brew install php@7.1</code>。<br>如果要通过源码编译 PHP，可以 <a href="https://secure.php.net/downloads.php" target="_blank" rel="noopener">在此处下载</a> 源码。需要注意的是，编译 PHP 时要指定 <code>make ZEND_EXTRA_LIBS=&#39;-liconv&#39;</code>，否则可能会出现 <code>undefined reference to &#39;libiconv&#39;</code> 的错误。<br>安装完成后，仍然可以通过 <code>php -v</code> 和 <code>php -m</code> 检查环境是否正确。</p><h2 id="PHP-拓展"><a href="#PHP-拓展" class="headerlink" title="PHP 拓展"></a>PHP 拓展</h2><p>很多 PHP 应用都需要拓展模块的支持，例如搭建 Minecraft 服务器的 PocketMine-MP 需要 leveldb 支持，而生成图片验证码需要 gd2 支持，一些应用可能还需要 redis 等。PHP 支持动态拓展，编译安装后可以通过 <code>php.ini</code> 进行配置。以安装 phpredis 为例，具体步骤为：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /path/to/your/phpredis</span><br><span class="line">phpize</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure></p><p>拓展编译完成后，在 <code>php.ini</code> 中加入 <code>extension=redis.so</code>，重启服务后即可启用拓展模块。Mac 系统自带的 PHP 配置文件为 <code>/private/etc/php.ini</code>（把该目录下的 <code>php.ini.default</code> 复制一份），用 brew 安装的则是 <code>/usr/local/etc/php/7.2/php.ini</code>。如果你的软件包安装较为混乱，找不到 <code>php.ini</code>，那么可以通过 <code>php -i | grep &quot;/php.ini&quot;</code> 获得它所在的目录。更多方法可以参考：<a href="https://blog.flxxyz.com/technology/2018/find-php-ini.html" target="_blank" rel="noopener">PHP 查找 php.ini</a>。</p><h2 id="报错信息"><a href="#报错信息" class="headerlink" title="报错信息"></a>报错信息</h2><p>如果使用 <code>sudo apachectl start</code> 命令启动 Apache 服务器，是不会显示错误信息的。因此，如果启动失败，还需要使用 <code>sudo /usr/sbin/httpd -k start</code> 查看报错信息。如果是 httpd.conf 配置出现问题，请对照报错的行数进行修改。如果是找不到目录等问题，检查相应的目录或权限即可。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>真正的红黑树</title>
      <link href="/2018-04/%E7%9C%9F%E6%AD%A3%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91/"/>
      <url>/2018-04/%E7%9C%9F%E6%AD%A3%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/2018-04/IMG_4171.jpg" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Shell 中数学运算总结</title>
      <link href="/2018-04/Shell%E4%B8%AD%E6%95%B0%E5%AD%A6%E8%BF%90%E7%AE%97%E6%80%BB%E7%BB%93/"/>
      <url>/2018-04/Shell%E4%B8%AD%E6%95%B0%E5%AD%A6%E8%BF%90%E7%AE%97%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>shell 中的赋值和操作默认都是字符串处理，在此记下 shell 中进行数学运算的几个特殊方法。</p><h2 id="错误方法"><a href="#错误方法" class="headerlink" title="错误方法"></a>错误方法</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var=1+1</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var</span></span><br></pre></td></tr></table></figure><p>输出的结果是 1+1<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var=1</span><br><span class="line">var=<span class="variable">$var</span>+1</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var</span></span><br></pre></td></tr></table></figure></p><p>输出结果是 1+1</p><h2 id="正确方法"><a href="#正确方法" class="headerlink" title="正确方法"></a>正确方法</h2><h3 id="使用-let"><a href="#使用-let" class="headerlink" title="使用 let"></a>使用 let</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var=1</span><br><span class="line"><span class="built_in">let</span> <span class="string">"var+=1"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var</span></span><br></pre></td></tr></table></figure><p>输出结果为 2<br>注意：</p><ul><li>经测试，let 几乎支持所有的运算符，包括自加、自减以及括号等，且不同运算的优先级都得到了很好的支持</li><li>方幂运算应使用 <code>**</code>，如 <code>2**10</code></li><li>参数在表达式中直接访问，不必加 $</li><li>一般情况下算数表达式可以不加双引号，但是若表达式中有 bash 中的关键字则需加上</li><li>let 后的表达式只能进行整数运算</li></ul><h3 id="使用"><a href="#使用" class="headerlink" title="使用 (())"></a>使用 (())</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var=1</span><br><span class="line">((var+=1))</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var</span></span><br></pre></td></tr></table></figure><p>输出结果为 2<br>注意：<br>(()) 的使用方法与 let 完全相同</p><a id="more"></a><h3 id="使用-1"><a href="#使用-1" class="headerlink" title="使用 $[]"></a>使用 <code>$[]</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var=1</span><br><span class="line">var=$[<span class="variable">$var</span>+1]</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var</span></span><br></pre></td></tr></table></figure><p>输出结果为 2<br>注意：</p><ul><li><code>$[]</code> 将中括号内的表达式作为数学运算先计算结果再输出</li><li>对 <code>$[]</code> 中的变量进行访问时前面需要加 $</li><li><code>$[]</code> 支持的运算符与 let 相同，也只支持整数运算</li></ul><h3 id="使用-expr"><a href="#使用-expr" class="headerlink" title="使用 expr"></a>使用 expr</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var=1</span><br><span class="line">var=`expr <span class="variable">$var</span> + 1`</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var</span></span><br></pre></td></tr></table></figure><p>输出结果为 2<br>注意：</p><ul><li>expr 后的表达式个符号间需用空格隔开</li><li>expr 支持的操作符有：|、&amp;、&lt;、&lt;=、=、!=、&gt;=、&gt;、+、-、*、/、%</li><li>expr 支持的操作符中所在使用时需用 \ 进行转义的有：|、&amp;、&lt;、&lt;=、&gt;=、&gt;、*</li><li>expr 同样只支持整数运算</li></ul><h3 id="使用-bc-支持浮点数计算"><a href="#使用-bc-支持浮点数计算" class="headerlink" title="使用 bc(支持浮点数计算)"></a>使用 bc(支持浮点数计算)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var=1</span><br><span class="line">var=`<span class="built_in">echo</span> <span class="string">"<span class="variable">$var</span>+1"</span>|bc`</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var</span></span><br></pre></td></tr></table></figure><p>输出结果为 2<br>介绍：<br>bc 是 linux 下的一个简单计算器，可以进行浮点数计算，在命令行下输入 bc 即进入计算器程序，而我们想在程序中直接进行浮点数计算时，利用一个简单的管道即可解决问题。<br>注意：<br>经测试，bc 支持除位操作运算符之外的所有运算符。bc 中要使用 scale 进行精度设置<br>浮点数计算实例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var=3.14</span><br><span class="line">var=`<span class="built_in">echo</span> <span class="string">"scale=2;<span class="variable">$var</span>*3"</span>|bc`</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var</span></span><br></pre></td></tr></table></figure></p><p>输出结果为 9.42</p><h3 id="使用-awk-支持浮点数计算"><a href="#使用-awk-支持浮点数计算" class="headerlink" title="使用 awk(支持浮点数计算)"></a>使用 awk(支持浮点数计算)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var=1</span><br><span class="line">var=`<span class="built_in">echo</span> <span class="string">"<span class="variable">$var</span> 1"</span>|awk <span class="string">'&#123;printf("%g",$1+$2)&#125;'</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var</span></span><br></pre></td></tr></table></figure><p>输出结果为 2<br>介绍：<br>awk 是一种文本处理工具，同时也是一种程序设计语言，作为一种程序设计语言，awk 支持多种运算，而我们可以利用 awk 来进行浮点数计算，和上面 bc 一样，通过一个简单的管道，我们便可在程序中直接调用 awk 进行浮点数计算。<br>注意：</p><ul><li>awk 支持除微操作运算符之外的所有运算符</li><li>awk 内置有 log、sqr、cos、sin 等函数</li></ul><p>浮点数计算实例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var=3.14</span><br><span class="line">var=`<span class="built_in">echo</span> <span class="string">"<span class="variable">$var</span> 2"</span>|awk <span class="string">'&#123;printf("%g",sin($1/$2))&#125;'</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var</span></span><br></pre></td></tr></table></figure></p><p>输出结果为 1</p><p>本文转载自：<a href="https://www.cnblogs.com/liujiahi/archive/2011/03/30/2196400.html" target="_blank" rel="noopener">shell 中数学计算总结</a></p>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>你的使用说明书</title>
      <link href="/2018-04/%E4%BD%A0%E7%9A%84%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E%E4%B9%A6/"/>
      <url>/2018-04/%E4%BD%A0%E7%9A%84%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E%E4%B9%A6/</url>
      
        <content type="html"><![CDATA[<p>____擅于发现美的事物，并从中吸收能量，变得越来越好看。<br>____笑起来像个孩子，把他带在身边，能带来青春永驻的效果。<br>请多给予 ____一点睡眠时间。<br>____偶尔也有像天使一样温柔的时候。<br>____喜欢自由，适合经常带出去放养。<br>肚子饿了就会心情不好，带 ____一起去吃美味的食物吧！<br>____常常给身边的人带来好运。<br>____因为太可爱了，会令人陷入沉迷，属于正常现象。<br>____遇到香喷喷的东西就会变圆。<br>可能因为材质特殊，____对外界的攻击有折射能力。<br>____虽然经过多次更新迭代，但依然有颗纯真的心。<br>____发光的时候，可能会使对象产生短时眩晕，使用时请注意。<br>____拥有迷之运气，中乐透的实力异于常人。<br>只要缘分到了，____自己就会瘦下来。<br>____拥有高性能大脑，可快速运转，但过度工作（学习）容易发热。<br>____买买买时会释放出强大气场，胆子也会变大。<br>____常常因为无法体验人类的乐趣而神伤。<br>____是能带来元气和灵感的谜之吉祥物。<br>____心心念念的梦，会在某个不经意的时候实现。<br>____的光芒太耀眼，但也不至于会刺瞎别人。<br>____历经严苛质检品控，是市面上难得一遇的珍品。<br>只要对 ____倾注感情，他就能成为最可靠的伙伴，遇到危机可无限次召唤。<br>____的出厂设定就是温暖的守护者，也是周围人快乐和活力的源泉。<br>____有极为罕见的感官知觉，对他说谎可不是明智之举。<br>____装备了精准的探测仪，能发觉并把握住人生中真正的机会。<br>____能通过每次挑战完成升级，获得更高的智慧和运气。<br>____具备安全与稳定性，是居家、旅行必备的小能手。<br>____能快速拆卸烦恼，重新制作出充满乐趣和创造力的产物。<br>变态（萌）是 ____的常态。<br>保温杯和泡脚桶，可延长 ____的使用寿命。<br>____偶尔会孤单，但也能享受孤单，是一款自由的产品。<br>____对时间的感知力弱，所以不知不觉又加班了。</p><a id="more"></a><p>____拥有读气氛的技巧和超高感知力，自己却毫无察觉。<br>____是怪人，但接触后会很有趣，一款来自外星的产品。<br>____听到喜爱的音乐，就能触发运气开挂的效果。<br>____还在努力融入人类世界，拥有地球人不具备的思维方式。<br>____肯花费大量时间和精力，超出预期的完成任务。<br>要定期给予 ____喂食，他相当单纯。<br>请用纤细的语调对 ____说话吧。<br>如果做事开始慢腾腾，及时给 ____一点吃的。<br>____如果发生故障，就给他一个拥抱吧。<br>____喜欢被夸奖，所以一天表扬他一次吧。<br>____一困就会情绪低落，请给予他适当的睡眠时间。<br>____即使心情低落，也会保持精神，这时候给他送些点心吧。<br>____心情不好的时候，给他吃一点甜甜的东西吧！<br>____最大的兴趣就是睡觉。<br>____能带给你更神奇的经历… 当你带他出去玩的时候。<br>____看着对方眼睛说话就会脸红。<br>____对气温变化的感知力很弱，可能因为内心一直是暖的。<br>____脑子里塞满天真的幻想，能拍成一部高分动画片。<br>____遇到寒冷的温度就会变圆。<br>____吃越少，越会变胖<br>吃饭也是 ____缓解压力的一种办法<br>____易燃，需要时刻为他准备好灭火器。<br>____拥有巨大内存，收到的关心（和红包）他都会记得。<br>如果丢开 ____不管，要小心他自己溜走了！<br>未来的道路上，____会因为无敌而略感寂寞。<br>____不擅长向别人求助。如果有人察觉到的话请主动帮他一下。<br>____的脑部为 S 级原装货，其他身体部分都是普通零件。<br>如果你觉得 ____发量开始减少，那一定是出现了幻觉。<br>____只要一出门就会变漂亮。<br>____遇到刮痕损伤不会自己修理。<br>____对地球充满好奇，喜欢人类（不工作时）的生活方式。<br>____只要开启降噪模式，就能获得坚定追随内心和直觉的勇气。<br>____早上起床时容易发生爆炸。<br>____按时睡觉的程序被设计的太复杂，很难执行。</p><p>可以在这里查看 JavaScript 版本：<a href="https://galaxymimi.com/163.html" target="_blank" rel="noopener">主站 &gt; 更多 &gt; 你的使用说明书</a></p>]]></content>
      
      
      <categories>
          
          <category> 幽默 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Bilibili 弹幕文件的解析</title>
      <link href="/2018-03/Bilibili%E5%BC%B9%E5%B9%95%E6%96%87%E4%BB%B6%E7%9A%84%E8%A7%A3%E6%9E%90/"/>
      <url>/2018-03/Bilibili%E5%BC%B9%E5%B9%95%E6%96%87%E4%BB%B6%E7%9A%84%E8%A7%A3%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<p>B 站的每个视频都有 aid 和 cid 两个参数，在已知视频 aid（即 AV 号）的情况下，可以通过链接 <code>https://www.bilibili.com/widget/getPageList?aid=10492</code> 获取 cid（将 10492 替换为你要查询的视频的 aid）。<br>视频的更多信息则可以通过 <code>https://api.bilibili.com/view?type=jsonp&amp;appkey=8e9fc618fbd41e28&amp;id=10492</code> 获取。<br>视频的弹幕文件采用 xml 格式存储，地址与其 cid 有关，为 <code>https://comment.bilibili.com/$cid.xml</code>（将 $cid 替换为视频的 cid）。<br>对于有许多分 P 的视频，它们的 aid（AV 号）相同，每个分 P 则对应一个不同的 cid。而在同一个页面下的番剧、影视等内容，每一分集的 cid 也是唯一的。<br>弹幕内容的存储方式为：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">d</span> <span class="attr">p</span>=<span class="string">"0,1,25,16777215,1312863760,0,eff85771,42759017"</span>&gt;</span> 前排占位置 < span class="tag">&lt;/<span class="name">d</span>&gt;</span><br></pre></td></tr></table></figure></p><p>这个元素中的各个参数由逗号分割，其意义分别为：</p><ul><li>弹幕出现的时间，以秒为单位</li><li>弹幕的模式：1～3 滚动弹幕 4 底端弹幕 5 顶端弹幕 6 逆向弹幕 7 精准定位 8 高级弹幕</li><li>字号：12 非常小 16 特小 18 小 25 中 36 大 45 很大 64 特别大</li><li>字体的颜色：将 HTML 六位十六进制颜色转为十进制表示，例如 #FFFFFF 会被存储为 16777215，因为 $(FFFFFF)_{16}=(16777215)_{10}$</li><li>Unix 时间戳，以毫秒为单位，基准时间为 1970-1-1 08:00:00</li><li>弹幕池：0 普通池 1 字幕池 2 特殊池（注：目前特殊池为高级弹幕专用）</li><li>发送者的 ID，用于『屏蔽此弹幕的发送者』功能</li><li>弹幕在弹幕数据库中 rowID，用于『历史弹幕』功能</li></ul><p>将 Bilibili 弹幕的 xml 文件转为 ass 字幕，可以使用以下脚本：<br><a href="http://tiansh.github.io/us-danmaku/bilibili" target="_blank" rel="noopener">bilibili ASS 弹幕在线转换</a><br><a href="https://github.com/tiansh/us-danmaku" target="_blank" rel="noopener">us-danmaku</a></p><p>关于 ass 字幕格式可以参考以下文章：<a href="https://www.douban.com/note/658520175" target="_blank" rel="noopener">ASS 字幕格式规范</a></p><p>拓展阅读：<br><a href="https://zhuanlan.zhihu.com/p/24599052" target="_blank" rel="noopener">Bilibili 视频播放页面接口整理（不定期更新）</a><br><a href="https://www.jianshu.com/p/f628679883e3" target="_blank" rel="noopener">Bilibili 爬取视频信息进行数据分析</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Quine——输出自身的程序</title>
      <link href="/2018-03/Quine%E2%80%94%E2%80%94%E8%BE%93%E5%87%BA%E8%87%AA%E8%BA%AB%E7%9A%84%E7%A8%8B%E5%BA%8F/"/>
      <url>/2018-03/Quine%E2%80%94%E2%80%94%E8%BE%93%E5%87%BA%E8%87%AA%E8%BA%AB%E7%9A%84%E7%A8%8B%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<p>能够输出自身的代码被称为 Quine，以哲学家 Willard van Orman Quine（1908-2000）而命名。<br>Quine 在图灵完备的语言中都是可行的。在可计算性理论（computability theory）中，图灵等价指的是：对于两个计算机 A 和 B，如果 A 可以模拟 B，B 可以模拟 A，就称他们是图灵等价的。根据『丘奇 - 图灵』理论，图灵机是表达能力最强大的计算系统，对现实世界中的任何计算机，都可以用图灵机来模拟它。<br>套用上面的定义，如果一个编程语言可以完全模拟图灵机，那么它就是图灵完备的。大部分编程语言都是图灵完备的，因为他们需要解决各种问题的通用能力，而这正是图灵机所具备的。不过也存在一些语言不是图灵完备的，他们通常是被设计用来解决某些特殊的问题，比如 SQL 以及正则表达式。</p><p>Shell<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">z=\<span class="string">'a='</span>z=\\<span class="variable">$z</span> a=<span class="variable">$z</span><span class="variable">$a</span><span class="variable">$z</span>\; <span class="built_in">eval</span> <span class="built_in">echo</span> \<span class="variable">$a</span><span class="string">'; eval echo $a</span></span><br></pre></td></tr></table></figure></p><p>PHP<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> file_get_content(<span class="keyword">__FILE__</span>);</span><br></pre></td></tr></table></figure></p><p>JavaScript<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!<span class="function"><span class="keyword">function</span> $(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="string">'!'</span>+$+<span class="string">'()'</span>)&#125;()</span><br></pre></td></tr></table></figure></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">'var%20s%20%3D%20%27__%27%3B%20console.log%28unescape%28s%29.replace%28%27__%27%2C%20s%29%29'</span>; <span class="built_in">console</span>.log(<span class="built_in">unescape</span>(s).replace(<span class="string">'__'</span>, s))</span><br></pre></td></tr></table></figure><p>Python<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">r=<span class="string">'r=%r;print r%%r'</span>;<span class="keyword">print</span> r%r</span><br></pre></td></tr></table></figure></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x=<span class="string">'y="x="+`x`+"\\n"\nprint y+x'</span></span><br><span class="line">y=<span class="string">"x="</span>+`x`+<span class="string">"\n"</span></span><br><span class="line"><span class="keyword">print</span> y+x</span><br></pre></td></tr></table></figure><a id="more"></a><p>Perl<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$_=<span class="string">q&#123;print"\$_=q&#123;$_&#125;</span>;<span class="keyword">eval</span><span class="string">"&#125;;eval</span></span><br></pre></td></tr></table></figure></p><p>Pascal<br><figure class="highlight pascal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CONST</span> T=<span class="string">';BEGIN WRITE(#67#79#78#83#84#32#84#61#39,T,#39,T)END.'</span>;<span class="keyword">BEGIN</span> <span class="keyword">WRITE</span>(<span class="string">#67#79#78#83#84#32#84#61#39</span>,T,<span class="string">#39</span>,T)<span class="keyword">END</span>.</span><br></pre></td></tr></table></figure></p><p>C<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span>*s=<span class="string">"char*s=%c%s%c;main()&#123;printf(s,34,s,34);&#125;"</span>;main()&#123;<span class="built_in">printf</span>(s,<span class="number">34</span>,s,<span class="number">34</span>);&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">main()&#123;<span class="keyword">char</span> s[]=<span class="string">"main()&#123;char s[]=%c%s%c;printf(s,34,s,34);return 0;&#125;"</span>;<span class="built_in">printf</span>(s,<span class="number">34</span>,s,<span class="number">34</span>);<span class="keyword">return</span> <span class="number">0</span>;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span></span></span><br><span class="line"><span class="keyword">char</span> buff[<span class="number">80</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">FILE *fp;</span><br><span class="line">fp = fopen(__FILE__, <span class="string">"r"</span>);</span><br><span class="line"><span class="keyword">while</span>(!feof(fp)) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%s"</span>,fgets(buff,<span class="number">79</span>,fp));</span><br><span class="line">&#125;</span><br><span class="line">fclose(fp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Brainfuck<br><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span>&gt;&gt;&gt;<span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span>&gt;&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span>&gt;&gt;&gt;&gt;<span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;&gt;&gt;&gt;<span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span>&gt;&gt;&gt;&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span>&gt;&gt;&gt;&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;&gt;&gt;<span class="literal">+</span>&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;&gt;&gt;<span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;&gt;&gt;<span class="literal">+</span>&gt;<span class="literal">+</span>&gt;&gt;&gt;<span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;&gt;<span class="literal">+</span>&gt;<span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;&gt;&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span>&gt;&gt;&gt;&gt;<span class="literal">+</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+</span><span class="literal">+</span>&gt;<span class="literal">+</span>&gt;&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&gt;&gt;&gt;<span class="literal">+</span><span class="title">[</span><span class="title">[</span><span class="literal">-</span>&gt;&gt;<span class="literal">+</span>&lt;&lt;<span class="title">]</span>&lt;<span class="literal">+</span><span class="title">]</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="title">[</span><span class="literal">-</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&lt;<span class="title">]</span>&gt;<span class="string">.</span><span class="title">[</span><span class="literal">+</span><span class="title">]</span>&gt;&gt;<span class="title">[</span>&lt;&lt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="title">[</span><span class="literal">-</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&lt;<span class="title">]</span>&gt;<span class="literal">-</span><span class="string">.</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="literal">-</span><span class="title">[</span><span class="literal">-</span>&lt;<span class="string">.</span>&lt;<span class="literal">+</span>&gt;&gt;<span class="title">]</span>&lt;<span class="title">[</span><span class="literal">+</span><span class="title">]</span>&lt;<span class="literal">+</span>&gt;&gt;&gt;<span class="title">]</span>&lt;&lt;&lt;<span class="title">[</span><span class="literal">-</span><span class="title">[</span><span class="literal">-</span><span class="title">[</span><span class="literal">-</span><span class="title">[</span>&gt;&gt;<span class="literal">+</span>&lt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="title">[</span><span class="literal">-</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&lt;<span class="title">]</span><span class="title">]</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&lt;<span class="title">]</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&lt;<span class="title">]</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="title">[</span><span class="literal">-</span>&gt;<span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span><span class="literal">+</span>&lt;<span class="title">]</span>&gt;<span class="literal">+</span>&lt;&lt;&lt;<span class="literal">-</span><span class="title">[</span><span class="literal">-</span>&gt;&gt;&gt;<span class="literal">+</span><span class="literal">+</span>&lt;&lt;&lt;<span class="title">]</span>&gt;<span class="title">[</span><span class="literal">-</span>&gt;&gt;<span class="string">.</span>&lt;&lt;<span class="title">]</span>&lt;&lt;<span class="title">]</span></span><br></pre></td></tr></table></figure></p><p>Lisp（mit-scheme）<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">((<span class="name">lambda</span> (<span class="name">x</span>) (<span class="name">list</span> x (<span class="name">list</span> (<span class="name">quote</span> quote) x))) (<span class="name">quote</span> (lambda (x) (list x (list (quote quote) x)))))</span><br></pre></td></tr></table></figure></p><p>参考文章：<br><a href="https://www.cnblogs.com/boring09/p/4865640.html" target="_blank" rel="noopener">最小的图灵完备语言——BrainFuck</a><br><a href="https://www.zhihu.com/question/63454918" target="_blank" rel="noopener">能不能写出一个代码，使代码的运行结果是输出这段代码本身？</a></p><p>拓展阅读：<br><a href="https://www.nyx.net/~gthompso/quine.htm" target="_blank" rel="noopener">The Quine Page</a><br><a href="https://www.zhihu.com/question/22006572/answer/47959891" target="_blank" rel="noopener">是否无法写一段代码将这段代码自己打印出来？</a><br><a href="https://www.zhihu.com/question/28277116/answer/311814137" target="_blank" rel="noopener">编程领域都有哪些牛逼闪闪的『禁术』？</a></p>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>使用 Electron 构建桌面应用</title>
      <link href="/2018-03/%E4%BD%BF%E7%94%A8Electron%E6%9E%84%E5%BB%BA%E6%A1%8C%E9%9D%A2%E5%BA%94%E7%94%A8/"/>
      <url>/2018-03/%E4%BD%BF%E7%94%A8Electron%E6%9E%84%E5%BB%BA%E6%A1%8C%E9%9D%A2%E5%BA%94%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>Electron 是基于 Node.js 的桌面应用开发框架，所有代码均在 Chrome『外壳』下运行，因而可以调用所有 Node.js 和浏览器的 API，并且具有跨平台的特性。下面介绍如何使用 Electron 构建简单的桌面应用。你可以参照官方给出的入门程序：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/electron/electron-quick-start.git</span><br></pre></td></tr></table></figure></p><p>一个 Electron 应用应包含以下内容：</p><h2 id="main-js"><a href="#main-js" class="headerlink" title="main.js"></a>main.js</h2><p>当你使用 npm start 启动 Electron 程序时，这是最先被执行的脚本。在 main.js 中可以创建窗口对象以构建图形界面。一个典型的 main.js 如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> electron = <span class="built_in">require</span>(<span class="string">'electron'</span>)</span><br><span class="line"><span class="keyword">const</span> app = electron.app</span><br><span class="line"><span class="keyword">const</span> BrowserWindow = electron.BrowserWindow</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>)</span><br><span class="line"><span class="keyword">let</span> mainWindow</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createWindow</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    mainWindow = <span class="keyword">new</span> BrowserWindow(&#123;<span class="attr">width</span>: <span class="number">800</span>, <span class="attr">height</span>: <span class="number">600</span>&#125;)</span><br><span class="line">    mainWindow.loadURL(url.format(&#123;</span><br><span class="line">        pathname: path.join(__dirname, <span class="string">'index.html'</span>),</span><br><span class="line">        protocol: <span class="string">'file:'</span>,</span><br><span class="line">        slashes: <span class="literal">true</span></span><br><span class="line">    &#125;))</span><br><span class="line">    mainWindow.on(<span class="string">'closed'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        mainWindow = <span class="literal">null</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">app.on(<span class="string">'ready'</span>, createWindow)</span><br><span class="line">app.on(<span class="string">'window-all-closed'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (process.platform !== <span class="string">'darwin'</span>) &#123;</span><br><span class="line">        app.quit()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">app.on(<span class="string">'activate'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (mainWindow === <span class="literal">null</span>) &#123;</span><br><span class="line">        createWindow()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><a id="more"></a><p>mainWindow 即为 BrowserWindow 窗口对象。mainWindow 有很多参数可以设置，例如，可以将默认的 <code>width: 800, height: 600</code> 替换为<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">width: electron.screen.getPrimaryDisplay().workAreaSize.width,</span><br><span class="line">height: electron.screen.getPrimaryDisplay().workAreaSize.height</span><br></pre></td></tr></table></figure></p><p>来实现全屏。在创建了窗口对象后，可以使用<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mainWindow.setAlwaysOnTop(<span class="literal">true</span>, <span class="string">""</span>)</span><br></pre></td></tr></table></figure></p><p>来使应用置顶（在 macOS 下，第二个参数将决定置顶的级别，例如，第二个参数取 “floating” 会使窗口置于大部分应用之前，但会被 KeyNote 等权限更高的应用挡住；而取 “main-menu” 则即使在演示 KeyNote 该窗口也能置于顶层）。 如果窗口设置了全屏置顶，就需要配合以下代码使用：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mainWindow.setIgnoreMouseEvents(<span class="literal">true</span>)</span><br></pre></td></tr></table></figure></p><p>这样可以使窗口忽略鼠标事件，否则就不能正常操作其他窗口了。 接下来，使用 mainWindow.loadURL() 来加载页面内容。loadURL 中 index.html 可以替换为任何自定义页面。<code>process.platform !== &#39;darwin&#39;</code> 的作用是，在 macOS 上，关闭所有窗口并不意味着退出程序——你可以点击 Dock 中的程序图标唤醒它（即触发 <code>activate</code> 事件）；而在 Windows 中，关闭所有窗口的默认行为是直接退出程序。</p><h2 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h2><p>这是窗口的 HTML 文件。前面讲到的 main.js 中 pathname 应指向它。在创建窗口后，index.html 会在 Chrome 环境下执行，接下来的工作就是进行前端设计，来构建桌面应用的页面——你甚至可以使用 jQuery，react.js 或 vue.js 等框架。不过需要注意的是，如果使用 jQuery，需要在页面中增加以下内容：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"><span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">module</span> === <span class="string">"object"</span>) &#123;<span class="built_in">window</span>.jQuery = <span class="built_in">window</span>.$ = <span class="built_in">module</span>.exports&#125;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>否则无法正确运行。还要注意的是，全屏状态下使用 <code>alert()</code> 会导致问题，应该使用<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;dialog&#125; = <span class="built_in">require</span>(<span class="string">"electron"</span>).remote</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showMessage</span>(<span class="params">msg</span>) </span>&#123;</span><br><span class="line">    dialog.showMessageBox(&#123;<span class="attr">message</span> : msg&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>然后用 <code>showMessage()</code> 函数显示消息。 Electron 提供了在不同页面间进行通讯的 API，在父页面使用<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mainWindow.webContents.send(channel, messageContent)</span><br></pre></td></tr></table></figure></p><p>发送消息，其中 channel 是任意字符串，表示通信频道，messageContent 是消息内容。在子页面使用<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ipcRender = <span class="built_in">require</span>(<span class="string">"electron"</span>).ipcRenderer</span><br><span class="line">ipcRender.on(channel, <span class="function"><span class="keyword">function</span>(<span class="params">event, message</span>) </span>&#123;</span><br><span class="line">    alert(messgae)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>监听消息即可。</p><h2 id="renderer-js"><a href="#renderer-js" class="headerlink" title="renderer.js"></a>renderer.js</h2><p>默认里面就一堆注释，用来放业务相关 JS 的，和网页 JS 的区别在于，这里的 JS 不仅可以访问 DOM，还能使用 Node.js 所有的 API。能前能后，想怎么玩都行。</p><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>如果你需要更多的页面，可以创建 HTML 文件并使用 <code>new BrowserWindow()</code> 加载这些页面。在设计完成后，使用命令 <code>npm start</code> 即可运行。如果需要将应用打包，可以使用 electron-packager（用 npm 安装），在 Windows 系统下就会打包成. exe 格式，macOS 则为. app。 发挥你的想象力，便能使用 Electron 构建功能丰富的跨平台应用啦！</p><p>参考文章：<a href="http://www.zhangxinxu.com/wordpress/2017/05/electron-node-js-desktop-application-experience" target="_blank" rel="noopener">使用 electron 构建跨平台 Node.js 桌面应用经验分享</a></p><p>官方文档：<a href="https://electronjs.org/docs" target="_blank" rel="noopener">Electron 文档</a></p>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数学笑话</title>
      <link href="/2018-03/%E6%95%B0%E5%AD%A6%E7%AC%91%E8%AF%9D/"/>
      <url>/2018-03/%E6%95%B0%E5%AD%A6%E7%AC%91%E8%AF%9D/</url>
      
        <content type="html"><![CDATA[<p>A point walks into A bar. $\bar{A}$ says, “We’re closed.”$e^{x}$ is walking down the street when it sees $\pi$ running towards him.”Help!”, $\pi$ shouts, There’s a differential operator coming my way, and if it catches me, I’ll be reduced to nothing! $e^{x}$ confidently says”Stand beside me, $\pi$! Together, we’ll be safe from any differential operators we come across!” Suddenly, the differential operator appears and asks “Who are you?” They respond “We are $\pi e^{x}$. Who are you?” It smiles and says “$\frac{\partial}{\partial{y}}$”.</p><p><img src="/images/2018-03/calczilla.png" alt=""></p><a id="more"></a><p>Q: What Thanksgiving treat can you make by dividing the circumference of a pumpkin by its diameter?<br>A: Pumpkin Pi!<br>Q: What does the “B” in Benoit B. Mandelbrot stand for?<br>A: Benoit B. Mandelbrot<br>Q: What is an anagram of “Banach-Tarski”?<br>A: Banach-Tarski Banach-Tarski</p><p>Paul Erdos once said that mathematicians are machines that turn coffee into theorems. By duality, we have that comathematicians are comachines that turn cotheorems into ffee.</p><p>A mathematician calls over a clerk in the produce aisle. “Pardon me sir, but I think this mislabeled. A coconut is just a nut.”</p><p>If Wedderburn says it’s obvious, everybody in the room has seen it ten minutes ago. If Bohnenblust says it’s obvious, it’s obvious. If Bochner says it’s obvious, you can figure it out in half an hour. If von Neumann says it’s obvious, you can prove it in three months if you are a genius. If Lefschetz says it’s obvious, it’s wrong.</p><p>Our computer science professor was joking that our student cafeteria serves Fibonacci soup. The soup of today is the mix of yesterday’s soup and the day before.</p><p>Computational results are believed by no one, except for the person who wrote the code. Experimental results are believed by everyone, except for the person who ran the experiment.</p><p>Theory is when you know everything but nothing works. Practice is when everything works but no one knows why. In our lab, theory and practice are combined: nothing works and nobody knows why.</p><p>西江月 · 证明<br>即得易见平凡，仿照上例显然。留作习题答案略，读者自证不难。<br>反之亦然同理，推论自然成立。略去过程 Q.E.D.，由上可知证毕。</p><p>参考文章：<br><a href="https://abstrusegoose.com/26" target="_blank" rel="noopener">Abstruse Goose - Calc-zilla</a><br><a href="https://www.zhihu.com/question/22212241" target="_blank" rel="noopener">数学领域有哪些经典的笑话？</a></p>]]></content>
      
      
      <categories>
          
          <category> 幽默 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>开源项目 elder-jiang</title>
      <link href="/2018-03/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AEelder-jiang/"/>
      <url>/2018-03/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AEelder-jiang/</url>
      
        <content type="html"><![CDATA[<p>这是一个简单的 C 语言项目，但却能产生无与伦比的效果。<br>请注意：目前仅支持类 UNIX 系统，Windows 版本正在开发中。<br>你们一定要问我对这个项目资瓷不资瓷，它现在是开源的，我们怎么能不资瓷开源的？<br>项目地址：<a href="https://github.com/stevenjoezhang/elder-jiang" target="_blank" rel="noopener">elder-jiang</a><br><figure class="highlight cal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''</span>;</span><br><span class="line"><span class="string">''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''</span>;</span><br><span class="line"><span class="string">''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''</span>;</span><br><span class="line"><span class="string">''''''''''''''''''''''''''''''''''''''''''''';;;'</span>;;;;;<span class="string">''';;;;;'</span>;;;;;;;;;;;;;;;;;;;;;;;;;;<span class="string">';;;;;;;;;;;;;;;;;;;</span></span><br><span class="line"><span class="string">'''''''''''''''''''''''''</span>;;;;;;;;;;;;;;;;;;;;;;;<span class="string">''</span>;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span><br><span class="line"><span class="string">''''''''''';;;;;;;;;;;;;;;;;;;;;;;;;;;'</span>#############################<span class="string">';;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></span><br><span class="line"><span class="string">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;'</span>+###############+###+##+#+#++++##++######<span class="string">';;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></span><br><span class="line"><span class="string">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;##@#######+####++++'</span>+++<span class="string">''</span>+<span class="string">'+++''+'</span>++++#++<span class="string">'++#+#+'</span>;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span><br><span class="line">;;;;;;;;;;;;;;;;;;;;;;;;;;;;###########+++++<span class="string">''''''</span>;;;:;;;;;;:;:;;;<span class="string">';'''''</span>+++++<span class="string">'++;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></span><br><span class="line"><span class="string">;;;;;;;;;;;;;;;;;;;;;;;;;;########++++'''';;;;;;;::::::::::::::::::::::;;;''++'</span>+###;;;;;;;;;;;;;;;;;;;;;;;;;;</span><br><span class="line">;;;;;;;;;;;;;;;;;;;;;;;;@@@@####+++<span class="string">''''''</span>;;;;;;::::::::::::::,,,,::::::::::;<span class="string">'++''+#@;::;;;;;;;::;;;;;;;;;;;;:</span></span><br><span class="line"><span class="string">;;;;;;;;;;;;;;;;;;;;;:+@@@@@###++'''</span>+<span class="string">''';;;;;;;;::::::::,:,:,,,,,,,,,,,,::::;'''</span>+####::::::::::::::::::::::::</span><br><span class="line">;;;;;::::::::::::::::;@@@@@@####+<span class="string">''</span>++++<span class="string">''</span>;;;;;;;::::::::,:,,,,,,,,,,,,,,,::::;;<span class="string">'#####'</span>:::::::::::::::::::::::</span><br><span class="line">:::::::::::::::::::::#@@@@@@###++<span class="string">'+++++'';;;;;::::::,,:,,::::::,,,,,,,,,:::::;;'</span>+###@::::::::::::::::::::::::</span><br><span class="line">:::::::::::::::::::::<span class="string">'@@@@@@###+#+++++++'''''</span>;;;::::,:,::,,::::,,,,,,::,:::::;<span class="string">''</span>###@@::::::::::::::::::::::::</span><br><span class="line">::::::::::::::::::::::+@@@@@##+#++++#@@#<span class="string">''';;:;;'</span>###;::;:,,;;;;+######+<span class="string">';;;:::''+###+::::::::::::::::::::::::</span></span><br><span class="line"><span class="string">:::::::::::::::::::::::;###@@##@@+#@++++++++'''':'</span>;;:;@#<span class="string">'+@@'''';:::;:::::::##;###@'</span>::,,,,,:,,::::::::::::::,</span><br><span class="line">:::::::::::::::::,,,,,,<span class="string">'+++##+++++@+++++++'''</span>;:::<span class="string">'#+'</span>+@@@#@:;<span class="string">''''''</span>;;;;+::::;@@<span class="string">''</span>++:,,,,,,,,,,,,,,,,,,,,,,,,,</span><br><span class="line">:::::,,,,,,,,,,,,,,,,,,,++++++++++@<span class="string">''''''';;;;;;;;''#@#;,,:@;:;'</span>;;;::::::::::##::;;,,,,,,,,,,,,,,,,,,,,,,,,,,</span><br><span class="line">,,,,,,,,,,,,,,,,,,,,,,,,<span class="string">'++++++++++#'''';;;::::::;###'</span>;:,,,:@;;;;::::::,::::,:;::;:,,,,,,,,,,,,,,,,,,,,,,,,,,</span><br><span class="line">,,,,,,,,,,,,,,,,,,,,,,,,,+++++++++++++<span class="string">'++########+''++;::,,::'</span>+#;;;;;:::,+#:;::::,,,,,,,,,,,,,,,,,,,,,,,,,,,,</span><br><span class="line">,,,,,,,,,,,,,,,,,,,,,,,,,<span class="string">'++++++++++++'</span>;;;;:::<span class="string">'+++@@@@#+'</span>;;@@<span class="string">';,:;:::::::::::::,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,</span></span><br><span class="line"><span class="string">,,,,,,,,,,,,,,,,,,,,,,,,,,+'</span>++++++++++++<span class="string">''''''''''''''':::,,,,,,,,,:'';;;;;:::,,,.......,,,..,,,,..,.,,.,,...</span></span><br><span class="line"><span class="string">,,,,,,,,,,,,,,,,,...,.....,.++++++++++'''</span>+<span class="string">'++'''';;;;::::,,,,,:,:::;;;;;:::::::..............................</span></span><br><span class="line"><span class="string">,...........................:++++++++++'</span>;;++#+#######+++++<span class="string">'++++'</span>,;;;:::::::::................................</span><br><span class="line">.............................+++++++++++<span class="string">''';'''''</span>;;;;;;;::::,,:,,:::::::::;;.................................</span><br><span class="line">.............................@++++++++++++<span class="string">';'</span>+<span class="string">''';;;'</span>;;;;;::::::::::;;;;;;;..................................</span><br><span class="line">............................#@@#+++++++++#++<span class="string">';'';;;::::::,,,,,:,:::;;;;;:....................................</span></span><br><span class="line"><span class="string">.........................#@@@@@@@;#++++++####+++'''';;;;;;;::;;;;'</span>;<span class="string">''</span>;:,````````````````````.................</span><br><span class="line">.........````````.#@@@@@@@@@@@@@@@@+;;+#++++####++++++++++++++<span class="string">''';;;;::.`````````````````````````............</span></span><br><span class="line"><span class="string">`````````````+##@@@@@@@@@@@@@@@@@@@@@+;;;;+++++++++++++++++'''''';;:.+###########.````````````````````.......</span></span><br><span class="line"><span class="string">````````;#########@@@@@@@@@@@@@@@@@@@@@@;;::::::;+++++'</span>++<span class="string">''</span>::::::  ``+##################+````````````````....</span><br><span class="line">:####################@@@@@@@@@@@@@@@@@@@@#;:::,,.``` .<span class="string">''</span>+<span class="string">''</span>;:.   ````@##########################;``````````..</span><br><span class="line">########################@@##@##@@@@@@@@@@###:,,,..```++<span class="string">'+;;'</span>+++<span class="string">'` ```##################################,````,</span></span><br><span class="line"><span class="string">########################@@@##################'</span>...,######+<span class="string">'+:+++##'</span>:``++#####################################;</span><br><span class="line">########################@@@@###################+`<span class="string">'''+######+++#,''''`.+######################################</span></span><br><span class="line"><span class="string">########################@@@######################..'';::####+++``````'</span>;######################################</span><br><span class="line">########################@@@########################`.++<span class="string">'####+++#`````''+#####################################</span></span><br><span class="line"><span class="string">##########################@@@@@@@@@@#################:+##+##++''+``..'''</span>#####################################</span><br><span class="line">@@##############################@@#########################<span class="string">'+++++++.''''####################################+</span></span><br><span class="line"><span class="string">@@@############################@########################@###++'</span>+++<span class="string">':###'</span>#####################################</span><br><span class="line">#@@@@########################@@#############################+::++<span class="string">':+:###@###################################+</span></span><br><span class="line"><span class="string">###@@@@######################@@@@###########################'</span>+++<span class="string">'++;+########################################</span></span><br><span class="line"><span class="string">@###@@@@######################@@@@###########################+'</span>+++++++@#+####################################</span><br><span class="line">@@@@#@@@@@######################@@@@@##########################<span class="string">''</span>++++#@#<span class="string">'###################################+</span></span><br><span class="line"><span class="string">####@@@@@@@@######################@@@@##########################+;'</span>+<span class="string">'#@@#####################################</span></span><br><span class="line"><span class="string">######@@@@@@@#######################@@@@@########################+++'</span>@@@@@###################################</span><br><span class="line">######@@@@@@@@@#######################@@@@@########################+#@@@@@##################################+</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mac 反编译 apk 程序</title>
      <link href="/2018-03/Mac%E5%8F%8D%E7%BC%96%E8%AF%91apk%E7%A8%8B%E5%BA%8F/"/>
      <url>/2018-03/Mac%E5%8F%8D%E7%BC%96%E8%AF%91apk%E7%A8%8B%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<p>本教程以 macOS 10.13 为例。</p><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="下载最新的-JDK"><a href="#下载最新的-JDK" class="headerlink" title="下载最新的 JDK"></a>下载最新的 JDK</h3><p>前往 <a href="https://www.oracle.com/index.html" target="_blank" rel="noopener">ORACLE 官网</a>，在底部找到 <a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="noopener">Download Java for Developers</a>，点击该链接，在打开的页面中找到 JDK，选择 Download，然后下载对应的版本即可。</p><p><img src="/images/2018-03/jdk.png" alt=""></p><h3 id="配置-JDK"><a href="#配置-JDK" class="headerlink" title="配置 JDK"></a>配置 JDK</h3><p>下载完成后，打开 dmg 镜像进行安装。JDK 会被安装到 <code>/Library/Java/JavaVirtualMachines</code> 目录下。为了能在终端正确运行最新的 JDK，需要配置环境变量。在 <code>~/.bash_profile</code> 中增加以下内容：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_40.jdk/Contents/Home</span><br><span class="line">PATH=<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span>:.</span><br><span class="line">CLASSPATH=<span class="variable">$JAVA_HOME</span>/lib/tools.jar:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:.</span><br><span class="line"><span class="built_in">export</span> JAVA_HOME</span><br><span class="line"><span class="built_in">export</span> PATH</span><br><span class="line"><span class="built_in">export</span> CLASSPATH</span><br></pre></td></tr></table></figure></p><p>其中，将 <code>jdk1.8.0_40.jdk</code> 换成你所安装的 JDK 对应的版本和目录。修改完成后，重开终端或使用<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure></p><p>使环境变量生效。</p><a id="more"></a><h3 id="下载-apk-反编译组件"><a href="#下载-apk-反编译组件" class="headerlink" title="下载 apk 反编译组件"></a>下载 apk 反编译组件</h3><p>需要下载的程序包括：</p><ul><li><a href="https://ibotpeaches.github.io/Apktool/install" target="_blank" rel="noopener">Apktool</a></li><li><a href="https://github.com/pxb1988/dex2jar/releases" target="_blank" rel="noopener">dex2jar</a></li><li><a href="http://jd.benow.ca" target="_blank" rel="noopener">JD-GUI</a></li></ul><h2 id="进行反编译"><a href="#进行反编译" class="headerlink" title="进行反编译"></a>进行反编译</h2><h3 id="运行-Apktool"><a href="#运行-Apktool" class="headerlink" title="运行 Apktool"></a>运行 Apktool</h3><p>按照官网上的教程，将下载 Apktool 后得到的 shell 脚本和 <code>apktool.jar</code> 移动到 <code>/usr/local/bin</code>，然后在终端执行 <code>apktool -h</code>，如果能正确显示帮助信息，则安装正常。<br>将需要反编译的 apk 文件（例如 <code>example.apk</code>）放入任意目录中，cd 进入该目录，执行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apktool d example.apk</span><br></pre></td></tr></table></figure></p><p>即可进行反编译，这时会生成一个名为 example 的目录，用于存储反编译出的文件。如果要回编译，执行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apktool b example</span><br></pre></td></tr></table></figure></p><p>同样，直接解压 <code>example.apk</code> 也可以得到一部分信息，如 <code>classes.dex</code> 等。</p><h3 id="用-dex2jar-将-apk-转成-jar-文件"><a href="#用-dex2jar-将-apk-转成-jar-文件" class="headerlink" title="用 dex2jar 将 apk 转成 jar 文件"></a>用 dex2jar 将 apk 转成 jar 文件</h3><p>下载 dex2jar 的 releases 版本后，解压进入文件夹，然后运行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./d2j-dex2jar.sh path/to/example.apk</span><br></pre></td></tr></table></figure></p><p>在 dex2jar 目录下将得到 example-dex2jar.jar 文件</p><h3 id="查看源代码"><a href="#查看源代码" class="headerlink" title="查看源代码"></a>查看源代码</h3><p>打开 <code>JD-GUI.app</code>，将 <code>example-dex2jar.jar</code> 拖进去就能看到源码了。<br>需要注意的是，如果你使用了 JAVA9，打开 JD-GUI 时可能会出现问题，解决方法是修改 <code>JD-GUI.app/Contents/Info.plist</code>，找到<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>VMOptions<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">string</span>&gt;</span>-Xms512m<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>改为<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>VMOptions<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">string</span>&gt;</span>-Xms512m --add-opens java.base/jdk.internal.loader=ALL-UNNAMED --add-opens jdk.zipfs/jdk.nio.zipfs=ALL-UNNAMED<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>即可正常启动。<br>通过看 java 源码对比 smali 文件，修改后回编译就 ok 了！</p><p>参考文章：<br><a href="https://blog.csdn.net/vvv_110/article/details/72897142" target="_blank" rel="noopener">MAC 安装 JDK 及环境变量配置</a><br><a href="https://blog.csdn.net/yanzi1225627/article/details/48215549" target="_blank" rel="noopener">MAC 上反编译 android apk—apktool, dex2jar, jd-jui 安装使用 (含手动签名)</a><br><a href="https://blog.csdn.net/wh_19910525/article/details/7915738" target="_blank" rel="noopener">apk 反编译获取完整源码 及 apk 反编译后的处理</a><br><a href="https://github.com/java-decompiler/jd-gui/issues/187" target="_blank" rel="noopener">Java 9 Compatibility</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL 8.0 的安装和使用</title>
      <link href="/2018-03/MySQL%208.0%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/"/>
      <url>/2018-03/MySQL%208.0%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="MySQL-的安装"><a href="#MySQL-的安装" class="headerlink" title="MySQL 的安装"></a>MySQL 的安装</h2><p>在 MySQL 官网的 <a href="https://dev.mysql.com/downloads" target="_blank" rel="noopener">下载页</a> 上，提供了各种系统和环境的安装方法。你可以选择通过包管理工具的软件源安装，也可以通过源码编译安装。不过编译是非常吃内存的（至少需要 4GiB 内存），并且还很耗时（毕竟是 C++ 写的），因此不推荐。具体来说，你可以：</p><h3 id="使用包管理工具"><a href="#使用包管理工具" class="headerlink" title="使用包管理工具"></a>使用包管理工具</h3><p>以 yum 为例，首先增加并启用 MySQL 软件源，在 <a href="https://dev.mysql.com/downloads/repo/yum" target="_blank" rel="noopener">这个页面</a> 找到适合你的版本，然后下载并启用之：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://dev.mysql.com/get/mysql80-community-release-el7-1.noarch.rpm <span class="comment"># 换成适合你的版本</span></span><br><span class="line">rpm -ivh mysql80-community-release-el7-1.noarch.rpm</span><br><span class="line">yum-config-manager --<span class="built_in">enable</span> mysql80-community</span><br></pre></td></tr></table></figure></p><p>这样，就可以直接通过 yum 安装 MySQL 服务器了。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mysql-community-server</span><br></pre></td></tr></table></figure></p><p>安装完成后，会在 <code>/usr/sbin/</code> 和 <code>/usr/bin/</code> 目录下出现 MySQL 的可执行文件，而 <code>mysqld.service</code> 会自动加载好。MySQL 的配置文件则是 <code>/etc/my.cnf</code>。</p><h3 id="使用源码编译安装"><a href="#使用源码编译安装" class="headerlink" title="使用源码编译安装"></a>使用源码编译安装</h3><p>再次提醒：源码编译安装方式非常麻烦，如果可以的话请使用包管理工具安装。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget wget https://cdn.mysql.com//Downloads/MySQL-8.0/mysql-boost-8.0.13.tar.gz</span><br><span class="line">tar -xzvf mysql-boost-8.0.13.tar.gz</span><br><span class="line"><span class="built_in">cd</span> mysql-boost-8.0.13</span><br><span class="line">cmake . -DCMAKE_INSTALL_PREFIX=/usr/<span class="built_in">local</span>/mysql -DMYSQL_DATADIR=/data/mysql -DDOWNLOAD_BOOST=1 -DWITH_BOOST=boost -DSYSCONFDIR=/etc -DWITH_INNOBASE_STORAGE_ENGINE=1 -DWITH_PARTITION_STORAGE_ENGINE=1 -DWITH_FEDERATED_STORAGE_ENGINE=1 -DWITH_BLACKHOLE_STORAGE_ENGINE=1 -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_EMBEDDED_SERVER=1 -DENABLE_DTRACE=0 -DENABLED_LOCAL_INFILE=1 -DDEFAULT_CHARSET=utf8mb4 -DEXTRA_CHARSETS=all</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure></p><p>这里的 <code>-DCMAKE_INSTALL_PREFIX</code> 和 <code>-DMYSQL_DATADIR</code> 参数指定了 MySQL 的安装目录和数据文件存储目录。</p><a id="more"></a><h2 id="MySQL-的配置"><a href="#MySQL-的配置" class="headerlink" title="MySQL 的配置"></a>MySQL 的配置</h2><p>为了正确地让 PHP 链接 MySQL 数据库，在 <code>/etc/my.cnf</code> 中，配置以下内容：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">datadir=/data/mysql</span><br><span class="line">socket=/tmp/mysql.sock</span><br><span class="line"></span><br><span class="line"><span class="built_in">log</span>-error=/var/<span class="built_in">log</span>/mysqld.log</span><br><span class="line">pid-file=/var/run/mysqld/mysqld.pid</span><br><span class="line"></span><br><span class="line">[client]</span><br><span class="line">socket=/tmp/mysql.sock</span><br></pre></td></tr></table></figure></p><p>这里的 datadir 是数据文件存储目录，请确保用户 mysql 对其拥有访问权限。如果是覆盖升级安装，需要确保它与之前版本 MySQL 使用的目录相同。<br>而 socket 是 UNIX 套接字，使用它的地方要保持一致。具体来说，你需要保证：</p><ul><li><code>/etc/my.cnf</code> 中，<code>[mysqld]</code> 下的 <code>socket</code> 值</li><li><code>/etc/my.cnf</code> 中，<code>[client]</code> 下的 <code>socket</code> 值</li><li><code>php.ini</code> 中，<code>[Pdo_mysql]</code> 下的 <code>pdo_mysql.default_socket</code> 值</li><li><code>php.ini</code> 中，<code>[MySQLi]</code> 下的 <code>mysqli.default_socket</code> 值</li></ul><p>这四个值是一致的。而之所以选择 <code>/tmp/mysql.sock</code>，是因为 PHP 默认的 MySQL 套接字在这个位置，配置好 <code>my.cnf</code> 就行，而不用修改 PHP 的配置（即 php.ini 中的对应项留空即可，会采用默认值）；如果用了其他的目录，就需要修改 <code>php.ini</code>。<br><code>php.ini</code> 根据你的安装方式，可能出现在 <code>/etc</code> 或 <code>/usr/local/php</code> 下的某个位置，可以自行处理。<br>为了优化 MySQL，还可以在 <code>/etc/my.cnf</code> 中增加如下设置：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[mysql]</span><br><span class="line">no-auto-rehash</span><br><span class="line">connect_timeout=2</span><br><span class="line">prompt=<span class="string">"MySQL [\\d]&gt;"</span></span><br><span class="line"></span><br><span class="line">[mysqldump]</span><br><span class="line">quick</span><br><span class="line">max_allowed_packet = 500M</span><br></pre></td></tr></table></figure></p><p>其中，<code>[mysql]</code> 下的 <code>prompt</code> 允许个性化设置提示符，在操作数据库时更加方便快捷。可用的参数有：</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>\c</td><td>A counter that increments for each statement you issue</td></tr><tr><td>\D</td><td>The full current date</td></tr><tr><td>\d</td><td>The default database</td></tr><tr><td>\h</td><td>The server host</td></tr><tr><td>\l</td><td>The current delimiter (new in 5.0.25)</td></tr><tr><td>\m</td><td>Minutes of the current time</td></tr><tr><td>\n</td><td>A newline character</td></tr><tr><td>\O</td><td>The current month in three-letter format (Jan, Feb, …)</td></tr><tr><td>\o</td><td>The current month in numeric format</td></tr><tr><td>\P</td><td>am/pm</td></tr><tr><td>\p</td><td>The current TCP/IP port or socket file</td></tr><tr><td>\R</td><td>The current time, in 24-hour military time (0–23)</td></tr><tr><td>\r</td><td>The current time, standard 12-hour time (1–12)</td></tr><tr><td>\S</td><td>Semicolon</td></tr><tr><td>\s</td><td>Seconds of the current time</td></tr><tr><td>\t</td><td>A tab character</td></tr><tr><td>\U</td><td>Your full user_name@host_name account name</td></tr><tr><td>\u</td><td>Your user name</td></tr><tr><td>\v</td><td>The server version</td></tr><tr><td>\w</td><td>The current day of the week in three-letter format (Mon, Tue, …)</td></tr><tr><td>\Y</td><td>The current year, four digits</td></tr><tr><td>\y</td><td>The current year, two digits</td></tr><tr><td>\_</td><td>A space</td></tr><tr><td>\</td><td>A space (a space follows the backslash)</td></tr><tr><td>\’</td><td>Single quote</td></tr><tr><td>\”</td><td>Double quote</td></tr><tr><td>\\</td><td>A literal “\” backslash character</td></tr><tr><td>\x</td><td>x, for any “x” not listed above</td></tr></tbody></table><p>这里的配置将会显示当前的数据库名。<br>完成设置后，重新启动 mysqld 即可：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart mysqld</span><br></pre></td></tr></table></figure></p><p>如果你是初次登陆，通过以下方式查看临时 root 密码：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">'temporary password'</span> /var/<span class="built_in">log</span>/mysqld.log</span><br></pre></td></tr></table></figure></p><p>然后执行 <code>mysql -u root -p</code>，随后输入密码，即可登录。<br>如果是升级安装的，需要执行 <code>mysql_upgrade -u root -p</code> 来升级数据库。</p><h2 id="MySQL-命令"><a href="#MySQL-命令" class="headerlink" title="MySQL 命令"></a>MySQL 命令</h2><p>登录的命令是 <code>mysql -u username -p</code>，按回车后输入密码即可。如果要直接登录某个数据库，执行：<code>mysql -h host -u user -p dbname</code>。<br>以下所有命令均需要以 <code>;</code> 结尾，大小写取决于系统设置。</p><ul><li>显示版本：<code>SHOW VARIABLES LIKE &quot;%version%&quot;;</code></li><li>查看所有的库：<code>SHOW DATABASES;</code></li><li>创建数据库：<code>CREATE DATABASE dbname;</code></li><li>删库：<code>DROP DATABASE dbname;</code></li><li>跑路：略</li><li>使用某个库：<code>USE dbname;</code></li><li>查看库有哪些表：<code>SHOW TABLES;</code></li><li>查看表的列：<code>DESCRIBE tablename;</code></li><li>创建表需要用 <code>CREATE TABLE</code> 并指定数据结构</li><li>删除某个表：<code>DROP TABLE tablename</code></li><li>添加用户：<code>CREATE USER &#39;username&#39;@&#39;host&#39; IDENTIFIED BY &#39;password&#39;;</code></li><li>删除用户：<code>DROP USER &#39;username&#39;@&#39;host&#39;;</code></li><li>显示用户信息：<code>SELECT User, Host FROM mysql.user;</code></li><li>授权：<code>GRANT SELECT, UPDATE ON dbname.* TO &#39;username&#39;@&#39;host&#39; WITH GRANT OPTION;</code></li><li>所有权限：<code>GRANT ALL ON dbname.* TO &#39;username&#39;@&#39;host&#39; WITH GRANT OPTION;</code></li><li>刷新权限：<code>FLUSH PRIVILEGES;</code></li><li>退出：<code>QUIT;</code></li></ul><p>MySQL 8.0 的用户授权和之前有所区别，老版本的常用授权语句在 8.0 中会报错。<br>在执行命令时，如果数据库名、表名等包含特殊字符，例如 <code>-</code> 等，要避免出现语法错误。例如：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">DATABASE</span> hello-world;</span><br></pre></td></tr></table></figure></p><p>直接这样输入会造成问题，正确做法是：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">DATABASE</span> <span class="string">`hello-world`</span>;</span><br></pre></td></tr></table></figure></p><p>如果对这些命令不熟悉，也可以安装 phpMyAdmin 之类的辅助软件。</p><h3 id="AUTO-INCREMENT-的重置"><a href="#AUTO-INCREMENT-的重置" class="headerlink" title="AUTO_INCREMENT 的重置"></a>AUTO_INCREMENT 的重置</h3><p>在 WordPress 中，文章、用户的 ID 都是通过 <code>AUTO_INCREMENT</code> 分配的，如果要改变其值，可以在 <code>wp_usermeta</code> 和 <code>wp_users</code> 数据表中执行：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`wp_usermeta`</span></span><br><span class="line">  <span class="keyword">MODIFY</span> <span class="string">`umeta_id`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT, AUTO_INCREMENT=<span class="number">177</span>;</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure></p><p>以及<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`wp_users`</span></span><br><span class="line">  <span class="keyword">MODIFY</span> <span class="string">`ID`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT, AUTO_INCREMENT=<span class="number">6</span>;</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure></p><p>将 <code>AUTO_INCREMENT</code> 根据你自己的情况，修改为当前的行数。<br>对于存储评论信息的 <code>wp_comments</code> 也是类似的。</p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>MySQL8.0 是 MySQL5.7 的后继版本，这次更新带来了许多新特性，比如更好的字符集支持、降序排列的优化等。官方宣传性能提高了 2 倍。<br>不过版本号从 5.7 之间跨越到了 8.0 确实是一次大飞跃，PHP 6、Windows 9 和 iPhone 9 点了个赞，Sketch 和 Java 笑而不语。<br>当然，这样还有一个好处是，避免<a href="https://groups.google.com/forum/#!topic/nodejs/iAPl--KJhK8" target="_blank" rel="noopener">版本 6.4 被 GFW 屏蔽</a>。嗯，仿佛没有什么问题。</p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一行代码为网站添加访客地图</title>
      <link href="/2018-02/%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E4%B8%BA%E7%BD%91%E7%AB%99%E6%B7%BB%E5%8A%A0%E8%AE%BF%E5%AE%A2%E5%9C%B0%E5%9B%BE/"/>
      <url>/2018-02/%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E4%B8%BA%E7%BD%91%E7%AB%99%E6%B7%BB%E5%8A%A0%E8%AE%BF%E5%AE%A2%E5%9C%B0%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<p>Revolver Maps 是一个交互式的网站访客地图。每一个浏览者的位置都会实时在由 Canvas 渲染的地球上标记出来。在它的 <a href="https://www.revolvermaps.com/?target=gallery" target="_blank" rel="noopener">官方网站</a> 上，可以轻松地选择地图样式，并生成用于插入 HTML 页面的 script 标签。</p><p><img src="/images/2018-02/revolvermaps-1.png" alt=""></p><p>其中，RevolverMaps Standard GL 样式是响应式的，会自适应父元素大小，非常适合作为访客地图使用。点击『Get this Widget!』按钮，在新的页面中调整参数，可以自定义颜色、缩放、旋转等等。完成后，将生成的 script 标签复制下来，并放在你想要生成地图的地方即可。例如：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"//ra.revolvermaps.com/0/0/8.js?i=0pdvpgzth5r&amp;amp;m=7&amp;amp;c=ff0000&amp;amp;cr1=ffffff&amp;amp;f=arial&amp;amp;l=33&amp;amp;v0=20&amp;amp;z=11"</span> <span class="attr">async</span>=<span class="string">"async"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>类似地，你也可以把它放到 WordPress 博客的侧边小工具栏中，像下图这样：</p><p><img src="/images/2018-02/revolvermaps-2.png" alt=""></p><p>访问站点时，访客地图就会自动显示了。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>米米弹幕系统正式上线</title>
      <link href="/2018-02/%E7%B1%B3%E7%B1%B3%E5%BC%B9%E5%B9%95%E7%B3%BB%E7%BB%9F%E6%AD%A3%E5%BC%8F%E4%B8%8A%E7%BA%BF/"/>
      <url>/2018-02/%E7%B1%B3%E7%B1%B3%E5%BC%B9%E5%B9%95%E7%B3%BB%E7%BB%9F%E6%AD%A3%E5%BC%8F%E4%B8%8A%E7%BA%BF/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/2018-02/danmaku.png" alt=""></p><p>经过数天的调试，全新的米米弹幕系统已经可以正常使用了。经过重制的弹幕系统，使用 WebSocket 代替了原先效率极低的 Ajax 轮询，实现了消息即时收发、自定义弹幕颜色、大小等功能。下一步我们将把弹幕系统整合到直播中。附上链接：<br><a href="https://galaxymimi.com/danmaku/" target="_blank" rel="noopener">米米弹幕</a><br>同时还开放了一个随机生成用户名（来自魔兽世界）的 API：<br><a href="https://api.galaxymimi.com/name/" target="_blank" rel="noopener">随机用户名</a></p><p>本文更新于 2018 年 5 月 18 日：<br>zsq.im 和 galaxymimi.com 即日起全站支持 https 访问，ws 连接也升级为了 wss。</p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 系统日志 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS 7 启动 bbr 教程</title>
      <link href="/2018-02/CentOS%207%E5%90%AF%E5%8A%A8bbr%E6%95%99%E7%A8%8B/"/>
      <url>/2018-02/CentOS%207%E5%90%AF%E5%8A%A8bbr%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p>自 Google 于 2016 年 9 月宣布将 BBR 开源起，世界各国的极客们就开始研究了，对于常年受制于特殊网络环境下的我国民众，长期都在寻找各种提速的方法。之前流行的锐速（后开始收费）以及 FinalSpeed 等都曾备受大家的爱戴。对于 bbr 而言，通俗来讲就是对 Linux 内核 TCP 协议的优化从而达到提速的目的。</p><h2 id="yum-系统更新"><a href="#yum-系统更新" class="headerlink" title="yum 系统更新"></a>yum 系统更新</h2><p>将 CentOS 系统版本更新到 7.3 或更高：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum update</span><br><span class="line">yum upgrade</span><br></pre></td></tr></table></figure></p><p>查看系统版本<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/redhat-release</span><br></pre></td></tr></table></figure></p><p>输出如下，则表示已升级到 7.3<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CentOS Linux release 7.3.1611 (Core)</span><br></pre></td></tr></table></figure></p><h2 id="安装-elrepo-并升级内核"><a href="#安装-elrepo-并升级内核" class="headerlink" title="安装 elrepo 并升级内核"></a>安装 elrepo 并升级内核</h2><p>执行 <code>uname -r</code> 查看内核版本，例如：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4.9.0-1.el7.elrepo.x86_64</span><br></pre></td></tr></table></figure></p><p>如果内核版本低于 4.9，需要升级内核；否则可以跳过这一步，直接到『开启 bbr』部分。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org</span><br><span class="line">rpm -Uvh http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm</span><br></pre></td></tr></table></figure></p><p>这时，执行 <code>yum repolist all</code> 可以看到所有安装的源，可以启用 <code>elrepo-kernal</code>：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum-config-manager --<span class="built_in">enable</span> elrepo-kernel</span><br><span class="line">yum install kernel-ml -y</span><br></pre></td></tr></table></figure></p><p>如果只是执行一次，也可以使用：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum --enablerepo=elrepo-kernel install kernel-ml -y</span><br></pre></td></tr></table></figure></p><p>正常情况下将输出如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Transaction Summary</span><br><span class="line">================================================================================</span><br><span class="line">Install  1 Package</span><br><span class="line"></span><br><span class="line">Total download size: 39 M</span><br><span class="line">Installed size: 169 M</span><br><span class="line">Downloading packages:</span><br><span class="line">kernel-ml-4.9.0-1.el7.elrepo.x86_64.rpm                    |  39 MB   00:00</span><br><span class="line">Running transaction check</span><br><span class="line">Running transaction <span class="built_in">test</span></span><br><span class="line">Transaction <span class="built_in">test</span> succeeded</span><br><span class="line">Running transaction</span><br><span class="line">Warning: RPMDB altered outside of yum.</span><br><span class="line">  Installing : kernel-ml-4.9.0-1.el7.elrepo.x86_64                          1/1</span><br><span class="line">  Verifying  : kernel-ml-4.9.0-1.el7.elrepo.x86_64                          1/1</span><br><span class="line"></span><br><span class="line">Installed:</span><br><span class="line">  kernel-ml.x86_64 0:4.9.0-1.el7.elrepo</span><br><span class="line"></span><br><span class="line">Complete!</span><br></pre></td></tr></table></figure></p><p>随后更新 grub 文件并重启，来启动最新内核：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">egrep ^menuentry /etc/grub2.cfg | cut -f 2 -d \<span class="string">'</span></span><br><span class="line"><span class="string"># 所有可用的内核会被输出，记下新内核所在的行数，第一行为 0，第二行为 1</span></span><br><span class="line"><span class="string">grub2-set-default 0</span></span><br><span class="line"><span class="string"># 把 0 替换成新内核所在的行数</span></span><br><span class="line"><span class="string">reboot</span></span><br></pre></td></tr></table></figure></p><p>重启后，ssh 会断开，稍等一会儿重新连接。可以再次查看内核版本，检查更新是否成功。下一步就是启动 bbr 了。</p><a id="more"></a><h2 id="开启-bbr"><a href="#开启-bbr" class="headerlink" title="开启 bbr"></a>开启 bbr</h2><p>执行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysctl.conf</span><br></pre></td></tr></table></figure></p><p>添加如下内容：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net.core.default_qdisc = fq</span><br><span class="line">net.ipv4.tcp_congestion_control = bbr</span><br></pre></td></tr></table></figure></p><p>加载系统参数（正常情况下会输出我们之前加入的内容）：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl -p</span><br></pre></td></tr></table></figure></p><h2 id="确定-bbr-已经开启"><a href="#确定-bbr-已经开启" class="headerlink" title="确定 bbr 已经开启"></a>确定 bbr 已经开启</h2><h3 id="查看-sysctl"><a href="#查看-sysctl" class="headerlink" title="查看 sysctl"></a>查看 sysctl</h3><p>若执行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl net.ipv4.tcp_available_congestion_control</span><br></pre></td></tr></table></figure></p><p>输出<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net.ipv4.tcp_available_congestion_control = bbr cubic reno</span><br></pre></td></tr></table></figure></p><p>则表明成功。<br><strong> 注：如果提示未找到命令，请确保 SELinux 已关闭，方法是编辑 <code>/etc/selinux/config</code>。</strong></p><h3 id="查看-lsmod"><a href="#查看-lsmod" class="headerlink" title="查看 lsmod"></a>查看 lsmod</h3><p>若执行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmod | grep bbr</span><br></pre></td></tr></table></figure></p><p>返回形如<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcp_bbr                16384  1</span><br></pre></td></tr></table></figure></p><p>则表明成功。</p><p>本文转载自：<a href="https://www.vmvps.com/speed-up-your-vps-with-installing-bbr-to-centos-7.html" target="_blank" rel="noopener"># 为 VPS 加速度# CentOS 7 安装 bbr 教程</a></p><p>本文更新于 2018 年 6 月：<br>bbr 的效果是非常显著的，只要带宽足够，流畅播放 YouTube 上 4320p 的视频毫无压力。可以通过 <a href="https://www.youtube.com/channel/UCqOecsBLULnuUtls0tISTCw" target="_blank" rel="noopener">Timestorm Films</a> 发布的超高分辨率视频测试效果～</p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>米米直播平台正式上线</title>
      <link href="/2018-02/%E7%B1%B3%E7%B1%B3%E7%9B%B4%E6%92%AD%E5%B9%B3%E5%8F%B0%E6%AD%A3%E5%BC%8F%E4%B8%8A%E7%BA%BF/"/>
      <url>/2018-02/%E7%B1%B3%E7%B1%B3%E7%9B%B4%E6%92%AD%E5%B9%B3%E5%8F%B0%E6%AD%A3%E5%BC%8F%E4%B8%8A%E7%BA%BF/</url>
      
        <content type="html"><![CDATA[<p>经过为期半个月的测试，米米直播平台成功实现了多线路及多种播放方式的直播：<br>线路一是无需 Flash 支持的 HLS 直播，对移动端支持极为友好，只是由于原理所限，延时约为 45 秒；线路一的播放方式有原生 HLS 和 Video.js 解码的 HLS，能够覆盖大部分设备。<br>线路二是基于 Bilibili 开源的 <a href="https://github.com/Bilibili/flv.js" target="_blank" rel="noopener">flv.js</a> 的 HTTP FLV 直播，同样无须 Flash，且延时仅有 3 秒；该播放方式兼容大部分桌面浏览器，但由于需要<a href="https://w3c.github.io/media-source" target="_blank" rel="noopener">Media Source Extensions</a> API 支持，对移动端不友好；该线路各项直播数据已经可以媲美各大主流直播平台。<br>线路三为基于 video.js 和 Flash 的 RTMP 直播流，延时亦为 3 秒左右；不过考虑到 Flash 的种种弊端，线路三只是作为备用线路。原生 HTML5 直播在性能上明显优于 Flash。</p><p><img src="/images/2018-02/mimilive.png" alt=""></p><p>根据最新规划，米米视频将专注于视频点播功能，点播的视频大部分为原创作品；而米米直播目前已开放了一个<a href="https://galaxymimi.com/live/?room=mimi&amp;player=1" target="_blank" rel="noopener">测试频道</a>，未来将进行拓展。关于推流码验证的相关功能正在完善。附上链接：<br><a href="https://galaxymimi.com/player/" target="_blank" rel="noopener">米米视频</a><br><a href="https://galaxymimi.com/live/" target="_blank" rel="noopener">米米直播</a></p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 系统日志 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>制造 MD5 碰撞</title>
      <link href="/2018-02/%E5%88%B6%E9%80%A0MD5%E7%A2%B0%E6%92%9E/"/>
      <url>/2018-02/%E5%88%B6%E9%80%A0MD5%E7%A2%B0%E6%92%9E/</url>
      
        <content type="html"><![CDATA[<p>下面这两张图片拥有相同的 MD5 值 <code>253dd04e87492e4fc3471de5e776bc3d</code>：</p><p><img src="/images/2018-02/plane.jpg" alt=""><br><img src="/images/2018-02/ship.jpg" alt=""></p><a id="more"></a><p>使用 Python 计算文件 MD5 值的脚本：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment">#-*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">GetFileMd5</span><span class="params">(filename)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.isfile(filename):</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    myhash = hashlib.md5()</span><br><span class="line">    f = file(filename, <span class="string">'rb'</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        b = f.read(<span class="number">8192</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> b:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        myhash.update(b)</span><br><span class="line">    f.close()</span><br><span class="line">    <span class="keyword">return</span> myhash.hexdigest()</span><br><span class="line"></span><br><span class="line">filepath = raw_input(<span class="string">'请输入文件路径：'</span>)</span><br><span class="line"><span class="keyword">print</span> GetFileMd5(filepath)</span><br></pre></td></tr></table></figure></p><p>拓展阅读：<br><a href="https://www.zhihu.com/question/265534528/answer/300135154" target="_blank" rel="noopener">至今有没有发现哪几个字符串的 MD5 相同?</a><br><a href="https://natmchugh.blogspot.de/2015/02/create-your-own-md5-collisions.html" target="_blank" rel="noopener">Create your own MD5 collisions</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于 Nginx 搭建视频直播服务器</title>
      <link href="/2018-01/%E5%9F%BA%E4%BA%8ENginx%E6%90%AD%E5%BB%BA%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
      <url>/2018-01/%E5%9F%BA%E4%BA%8ENginx%E6%90%AD%E5%BB%BA%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<p>最近几年，网络视频直播处于蓬勃的发展期，各大直播平台的竞争也趋于白热化。在游戏直播领域，就有许多电子竞技的前职业选手，退役后转行游戏主播，收入不菲。当然，网络直播的用处不仅仅是娱乐行业，诸如实时视频监控等应用方向，同样潜力无限。如果没有太高的并发播放需求，完全可以自行搭建直播服务器。借助于 Nginx 和一些拓展模块，你就可以轻松地运行一个小型的直播平台。<br>博主在参看了大量教程后，成功地在 VPS 上搭建了这样的视频直播服务器，而且在昨晚经过测试，能够正常地使用 OBS Studio 推流，在浏览器上实现 HTML5 播放。下面附上具体步骤，请将所有 <code>yourdomain.com</code> 替换为你的域名或者服务器 IP。</p><h2 id="Nginx-环境搭建"><a href="#Nginx-环境搭建" class="headerlink" title="Nginx 环境搭建"></a>Nginx 环境搭建</h2><p>首先，需要下载可编译的 Nginx 源代码，以及必要的拓展库。如果你是萌新，请按照👇教程安装搭建 lnmp 环境！<br><a href="https://lnmp.org/install.html" target="_blank" rel="noopener">lnmp 环境一键安装脚本</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载并安装 lnmp 环境，将 1.4 替换为最新版本</span></span><br><span class="line">wget -c http://soft.vpser.net/lnmp/lnmp1.4.tar.gz</span><br><span class="line">tar -xzvf lnmp1.4.tar.gz</span><br><span class="line"><span class="built_in">cd</span> lnmp1.4</span><br><span class="line">./install.sh lnmp</span><br></pre></td></tr></table></figure><p>请按照脚本的提示选择你要安装的各个组件版本，若不确定，选择默认选项即可。安装完成后，命令行输出：</p><p><img src="/images/2018-01/1774338-dc544ac657937d0d.png" alt=""></p><p>此时访问服务器地址会出现如下界面：</p><p><img src="/images/2018-01/1774338-b0eb1df8603e632d.png" alt=""></p><p><strong> 注意：安装时生成的解压文件夹 lnmp1.4 先别删除！</strong></p><p>如果你对在 Linux 上安装配置 Nginx 有所了解，可以直接使用源码安装，不必通过 lnmp。Nginx 源码<a href="https://nginx.org/en/download.html" target="_blank" rel="noopener">在此处下载</a>，configure 的参数后文会讲到，可以参考。</p><a id="more"></a><h2 id="安装-Nginx-的扩展模块"><a href="#安装-Nginx-的扩展模块" class="headerlink" title="安装 Nginx 的扩展模块"></a>安装 Nginx 的扩展模块</h2><h3 id="下载-nginx-http-flv-module"><a href="#下载-nginx-http-flv-module" class="headerlink" title="下载 nginx-http-flv-module"></a>下载 nginx-http-flv-module</h3><p>GitHub 项目地址：<a href="https://github.com/winshining/nginx-http-flv-module" target="_blank" rel="noopener">nginx-http-flv-module</a>，克隆到本地即可：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 为 nginx 创建扩展模块目录</span></span><br><span class="line">mkdir /usr/<span class="built_in">local</span>/nginx/extend_module</span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/nginx/extend_module</span><br><span class="line"><span class="comment"># 下载扩展包到 nginx 扩展模块目录下</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/winshining/nginx-http-flv-module.git</span><br></pre></td></tr></table></figure></p><h3 id="关闭-nginx、php-fpm-服务"><a href="#关闭-nginx、php-fpm-服务" class="headerlink" title="关闭 nginx、php-fpm 服务"></a>关闭 nginx、php-fpm 服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 关闭 nginx</span></span><br><span class="line">systemctl stop nginx</span><br><span class="line"><span class="comment"># 关闭 php-fpm</span></span><br><span class="line">systemctl stop php-fpm</span><br></pre></td></tr></table></figure><p>注意：在部分系统下需要使用 <code>service</code> 代替 <code>systemctl</code> 命令。</p><h3 id="查看-nginx-配置参数"><a href="#查看-nginx-配置参数" class="headerlink" title="查看 nginx 配置参数"></a>查看 nginx 配置参数</h3><p>执行 <code>nginx -V</code> 会输出配置参数，类似于这样：</p><p><img src="/images/2018-01/2018-07-16.png" alt=""></p><p>复制 <code>configure arguments</code> 后的所有参数，例如：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--prefix=/usr/<span class="built_in">local</span>/nginx --user=www --group=www --with-http_stub_status_module --with-http_v2_module --with-http_ssl_module --with-http_gzip_static_module --with-ipv6 --with-http_sub_module</span><br></pre></td></tr></table></figure></p><p>这会在后面用到。</p><h3 id="重新编译-nginx"><a href="#重新编译-nginx" class="headerlink" title="重新编译 nginx"></a>重新编译 nginx</h3><p>进入安装时生成的文件夹，并执行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> lnmp1.4/src</span><br><span class="line"><span class="comment"># 解压 nginx 源码包，将 1.14.0 替换为你的版本，下同</span></span><br><span class="line">tar -xzvf nginx-1.14.0.tar.gz</span><br><span class="line"><span class="comment"># 进入 nginx 源码目录</span></span><br><span class="line"><span class="built_in">cd</span> nginx-1.14.0</span><br><span class="line"><span class="comment"># 安装 rtmp 扩展模块，参数形式是：</span></span><br><span class="line"><span class="comment">#./configure 加上 刚才复制的 nginx configure 参数 加上 --add-module=nginx-http-flv-module 扩展包的目录</span></span><br><span class="line"><span class="comment"># 例如：</span></span><br><span class="line">./configure --user=www --group=www --prefix=/usr/<span class="built_in">local</span>/nginx --with-http_stub_status_module --with-http_ssl_module --with-http_v2_module --with-http_gzip_static_module --with-ipv6 --with-http_sub_module --add-module=/usr/<span class="built_in">local</span>/nginx/extend_module/nginx-http-flv-module</span><br><span class="line"><span class="comment"># 如果 lnmp 编译的 nginx 包含 --add-module=openssl 等，也需要一并解压，否则会报错找不到文件</span></span><br><span class="line"><span class="comment"># 编译</span></span><br><span class="line">make</span><br><span class="line"><span class="comment"># 安装</span></span><br><span class="line">make install</span><br><span class="line"><span class="comment"># 重启 nginx</span></span><br><span class="line">systemctl start nginx</span><br><span class="line">systemctl start php-fpm</span><br></pre></td></tr></table></figure></p><p>重新启动 nginx 后，再次执行 <code>nginx -V</code> 查看安装状态，如果 <code>configure arguments</code> 后出现 <code>nginx-http-flv-module</code> 说明安装成功！</p><h2 id="服务器开放-1935-端口"><a href="#服务器开放-1935-端口" class="headerlink" title="服务器开放 1935 端口"></a>服务器开放 1935 端口</h2><p><strong> 注：若服务器防火墙已关闭，请跳过此步。</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开放 1935 端口</span></span><br><span class="line">/sbin/iptables -I INPUT -p tcp --dport 1935 -j ACCEPT</span><br><span class="line"><span class="comment"># 保存配置</span></span><br><span class="line">/etc/rc.d/init.d/iptables save</span><br><span class="line"><span class="comment"># 或 service iptables save</span></span><br><span class="line"><span class="comment"># 重启服务</span></span><br><span class="line">/etc/rc.d/init.d/iptables restart</span><br><span class="line"><span class="comment"># 查看端口开放状态</span></span><br><span class="line">/etc/init.d/iptables status</span><br></pre></td></tr></table></figure></p><p>执行 <code>iptables -L</code> 查看防火墙设置是否生效。</p><h2 id="配置-HLS-或-http-flv"><a href="#配置-HLS-或-http-flv" class="headerlink" title="配置 HLS 或 http-flv"></a>配置 HLS 或 http-flv</h2><p>对 <code>nginx.conf</code> 进行修改：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编辑配置</span></span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf</span><br></pre></td></tr></table></figure></p><p>需要修改的是 <code>http</code> 下 <code>server</code> 的配置，其内容可参照：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">server</span><br><span class="line">&#123;</span><br><span class="line">    listen 80 default_server;</span><br><span class="line">    <span class="comment">#listen [::]:80 default_server ipv6only=on;</span></span><br><span class="line">    server_name yourdomain.com;</span><br><span class="line">    index index.html index.htm index.php;</span><br><span class="line">    root  /home/www/; <span class="comment"># 服务器的根目录</span></span><br><span class="line">    <span class="comment">#error_page 404 /404.html;</span></span><br><span class="line">    include <span class="built_in">enable</span>-php.conf;</span><br><span class="line">     </span><br><span class="line">    <span class="comment"># 加入 hls 支持</span></span><br><span class="line">    location /hls &#123;</span><br><span class="line">        types &#123;</span><br><span class="line">            application/vnd.apple.mpegurl m3u8; </span><br><span class="line">            <span class="comment"># 或 application/x-mpegURL</span></span><br><span class="line">            video/mp2t ts;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">alias</span> /home/hls/; <span class="comment"># 视频流文件目录(自己创建，与下方 hls_path 相同)</span></span><br><span class="line">        expires -1;</span><br><span class="line">        add_header Cache-Control no-cache;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"># 加入 http-flv 支持</span></span><br><span class="line">    location /flv &#123;</span><br><span class="line">        flv_live on;</span><br><span class="line">        chunked_transfer_encoding on;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">#server 下的其余配置无需改变，此处省略</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 在文档末尾加入 rtmp 配置</span></span><br><span class="line">rtmp &#123;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen 1935; <span class="comment"># 监听的端口</span></span><br><span class="line">        chunk_size 4000;</span><br><span class="line">        application live &#123; <span class="comment">#rtmp 推流请求路径</span></span><br><span class="line">            live on;</span><br><span class="line">            record off;</span><br><span class="line">            <span class="comment">#publish_notify on; #推流验证，和下一行需一起使用</span></span><br><span class="line">            <span class="comment">#on_publish http://localhost/auth.php; #推流验证，具体可参照后文</span></span><br><span class="line"></span><br><span class="line">            hls on;</span><br><span class="line">            hls_path /home/hls/<span class="built_in">test</span>; <span class="comment"># 视频流 hls 切片文件目录(自己创建)</span></span><br><span class="line">            hls_fragment 3s; <span class="comment">#hls 单个切片时长，会影响延迟</span></span><br><span class="line">            hls_playlist_length 32s; <span class="comment">#hls 总缓存时间，会影响延迟</span></span><br><span class="line"></span><br><span class="line">            meta on; <span class="comment"># 如果 http-flv 播放时首帧出现问题，可改为 off</span></span><br><span class="line">            gop_cache on; <span class="comment"># 可以减少首帧延迟</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>参数说明：</p><ul><li><code>rtmp</code> 协议名称</li><li><code>server</code> 说明内部中是服务器相关配置</li><li><code>listen</code> 监听的端口号，rtmp 协议的默认端口号是 1935</li><li><code>application</code> 访问的应用路径是，这里设置为了 live</li><li><code>live on</code> 开启直播</li><li><code>record off</code> 不记录数据</li></ul><p><strong> 修改完后执行 <code>nginx -s reload</code> 重载 nginx 配置 </strong></p><h2 id="创建目录及文件"><a href="#创建目录及文件" class="headerlink" title="创建目录及文件"></a>创建目录及文件</h2><p>根据前面配置文件中的 <code>hls_path</code> 创建子目录 hls，例如 <code>/home/hls</code>，确保 nginx 服务器对其具有读写权限。<br>在服务器的根目录，例如 <code>/home/www</code> 下创建 test.html 文件，进行 hls 播放：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--test.html--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">video</span> <span class="attr">autoplay</span> <span class="attr">webkit-playsinline</span> <span class="attr">controls</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"http://yourdomain.com/hls/test.m3u8"</span> <span class="attr">type</span>=<span class="string">"application/vnd.apple.mpegurl"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"warning"</span>&gt;</span>Your browser does not support HTML5 video.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">video</span> <span class="attr">controls</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"http://yourdomain.com/hls/test.m3u8"</span> <span class="attr">type</span>=<span class="string">"application/x-mpegURL"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="开始推流"><a href="#开始推流" class="headerlink" title="开始推流"></a>开始推流</h2><p>如果要使用 OBS Studio 等软件推流，地址设置为 <code>rtmp://yourdomain.com:1935/live/test</code>。<br>ffmpeg 也可以进行推流，用法是：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -re -stream_loop -1 -i /path/to/your/video.mp4 -vcodec libx264 -acodec aac -f flv rtmp://yourdomain.com:1935/live/<span class="built_in">test</span></span><br></pre></td></tr></table></figure></p><p>版本较老的 ffmpeg 无法设置 <code>-stream_loop -1</code>，可以前往 <a href="http://ffmpeg.org/download.html" target="_blank" rel="noopener">官方网站</a> 下载最新版本。</p><h3 id="hls-播放"><a href="#hls-播放" class="headerlink" title="hls 播放"></a>hls 播放</h3><p>用 http 访问之前创建的 test.html，即可观看直播。<br>如直播没有声音，请参考<a href="https://www.jianshu.com/p/55325f29ae5a" target="_blank" rel="noopener">ffmpeg 没有声音</a><br><strong> 附录：浏览器对 hls 的支持 </strong></p><p><img src="/images/2018-01/1774338-c2443fa915f45ef1.png" alt=""></p><p>如果浏览器并不原生支持 hls，可使用第三方插件，例如 <a href="https://github.com/video-dev/hls.js" target="_blank" rel="noopener">hls.js</a>；或者使用<a href="https://github.com/videojs/video.js" target="_blank" rel="noopener">video.js</a> 配合<a href="https://github.com/videojs/videojs-contrib-hls" target="_blank" rel="noopener">videojs-contrib-hls</a>，这也是不错的解决方案。</p><h3 id="http-flv-播放"><a href="#http-flv-播放" class="headerlink" title="http-flv 播放"></a>http-flv 播放</h3><p>对于 http-flv 播放，可以使用 VLC 等软件测试拉流，拉流地址为 <code>http://yourdomain.com/flv?app=live&amp;stream=test</code>。<br>如果要实现 HTML5 播放，可以使用 B 站开源的<a href="https://github.com/Bilibili/flv.js" target="_blank" rel="noopener">flv.js</a>，更多内容可以参照其文档，此处不做更多说明。</p><h3 id="推流验证"><a href="#推流验证" class="headerlink" title="推流验证"></a>推流验证</h3><p>如果配置文件中开启了 <code>publish_notify</code>，那么 <code>on_publish</code> 项设置的页面将会被用作推流验证。如果验证失败，使这个页面返回 404 头即可。<br>比如你设置了 <code>on_publish http://localhost/auth.php</code>，那么在 <code>auth.php</code> 中加入一下内容即可实现：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">@$name = $_POST[<span class="string">'name'</span>];</span><br><span class="line">@$pass = $_POST[<span class="string">'pass'</span>];</span><br><span class="line"><span class="comment">// 在某些情况下，$_POST 需要改为 $_GET 或 $_REQUEST，请自行测试</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">empty</span>($name) || <span class="keyword">empty</span>($pass)) &#123;</span><br><span class="line">    header(<span class="string">"HTTP/1.0 404 Not Found"</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"串码流不正确!"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> ($pass == <span class="string">"password"</span>) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"串码流正确!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        header(<span class="string">"HTTP/1.0 404 Not Found"</span>);</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"串码流不正确!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p><p>这时的推流地址也要对应改为 <code>rtmp://yourdomain.com:1935/live/test?pass=password</code>。</p><h2 id="更多"><a href="#更多" class="headerlink" title="更多"></a>更多</h2><p>参考文章：<br><a href="https://www.cnblogs.com/jys509/p/5649066.html" target="_blank" rel="noopener">Mac 上搭建直播服务器 Nginx+rtmp</a><br><a href="https://www.alloyteam.com/2016/05/h5-camera-literacy" target="_blank" rel="noopener">H5 视频直播扫盲</a><br><a href="https://www.jianshu.com/p/0296a7be7928" target="_blank" rel="noopener">基于 Nginx 搭建 RTMP/HLS 视频直播服务器</a><br>更多内容可以参考文中提到的模块在 GitHub 上的文档。</p><p>原文使用的是<a href="https://github.com/arut/nginx-rtmp-module" target="_blank" rel="noopener">nginx-rtmp-module</a>，其功能被本文介绍的模块完全涵盖，故不再赘述。</p><p>本文更新于 2018 年 5 月 30 日：<br>由于 nginx-http-flv-module 一直在更新中，其配置文件的参数设置可能略有调整，请以文档为准，本文仅供参考。</p><p>本文更新于 2018 年 11 月：<br>在很多文章中都提到了一个 RTMP 源：<code>rtmp://live.hkstv.hk.lxdns.com/live/hks</code>，不过最近它已经失效了，不能用于拉流。你可以使用前面提到的 OBS Studio 和 ffmpeg 进行测试。</p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript 常用简写技术与扩展运算符</title>
      <link href="/2018-01/JavaScript%E5%B8%B8%E7%94%A8%E7%AE%80%E5%86%99%E6%8A%80%E6%9C%AF%E4%B8%8E%E6%89%A9%E5%B1%95%E8%BF%90%E7%AE%97%E7%AC%A6/"/>
      <url>/2018-01/JavaScript%E5%B8%B8%E7%94%A8%E7%AE%80%E5%86%99%E6%8A%80%E6%9C%AF%E4%B8%8E%E6%89%A9%E5%B1%95%E8%BF%90%E7%AE%97%E7%AC%A6/</url>
      
        <content type="html"><![CDATA[<h2 id="三元操作符"><a href="#三元操作符" class="headerlink" title="三元操作符"></a>三元操作符</h2><p>当想写 <code>if...else</code> 语句时，使用三元操作符来代替。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> x = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">let</span> answer;</span><br><span class="line"><span class="keyword">if</span> (x &gt; <span class="number">10</span>) &#123;</span><br><span class="line">    answer = <span class="string">'is greater'</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    answer = <span class="string">'is lesser'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>简写：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> answer = x &gt; <span class="number">10</span> ? <span class="string">'is greater'</span> : <span class="string">'is lesser'</span>;</span><br><span class="line"></span><br><span class="line">也可以嵌套 < span class="keyword">if</span> 语句：<br><span class="line"><span class="string">``</span><span class="string">`javascript</span></span><br><span class="line"><span class="string">const big = x &gt; 10 ? "greater 10" : x</span></span><br></pre></td></tr></table></figure></p><h2 id="短路求值简写方式"><a href="#短路求值简写方式" class="headerlink" title="短路求值简写方式"></a>短路求值简写方式</h2><p>当给一个变量分配另一个值时，想确定源始值不是 <code>null</code>，<code>undefined</code> 或空值。可以写撰写一个多重条件的 if 语句。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (variable1 !== <span class="literal">null</span> || variable1 !== <span class="literal">undefined</span> || variable1 !== <span class="string">''</span>) &#123;</span><br><span class="line">     <span class="keyword">let</span> variable2 = variable1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>或者可以使用短路求值方法：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> variable2 = variable1  || <span class="string">'new'</span>;</span><br></pre></td></tr></table></figure></p><h2 id="声明变量简写方法"><a href="#声明变量简写方法" class="headerlink" title="声明变量简写方法"></a>声明变量简写方法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x;</span><br><span class="line"><span class="keyword">let</span> y;</span><br><span class="line"><span class="keyword">let</span> z = <span class="number">3</span>;</span><br></pre></td></tr></table></figure><p>简写方法：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x, y, z=<span class="number">3</span>;</span><br></pre></td></tr></table></figure></p><a id="more"></a><h2 id="if-存在条件简写方法"><a href="#if-存在条件简写方法" class="headerlink" title="if 存在条件简写方法"></a>if 存在条件简写方法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (likeJavaScript === <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">简写：</span><br><span class="line"><span class="string">``</span><span class="string">`javascript</span></span><br><span class="line"><span class="string">if (likeJavaScript)</span></span><br></pre></td></tr></table></figure><p>只有 <code>likeJavaScript</code> 是真值时，二者语句才相等。<br>如果判断值不是真值，则可以这样：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a;</span><br><span class="line"><span class="keyword">if</span> ( a !== <span class="literal">true</span> ) &#123;</span><br><span class="line">    <span class="comment">// do something...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>简写：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a;</span><br><span class="line"><span class="keyword">if</span> ( !a ) &#123;</span><br><span class="line">    <span class="comment">// do something...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="JavaScript-循环简写方法"><a href="#JavaScript-循环简写方法" class="headerlink" title="JavaScript 循环简写方法"></a>JavaScript 循环简写方法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; allImgs.length; i++)</span><br></pre></td></tr></table></figure><p>简写：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> index <span class="keyword">in</span> allImgs)</span><br></pre></td></tr></table></figure></p><p>也可以使用 <code>Array.forEach</code>：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logArrayElements</span>(<span class="params">element, index, array</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"a["</span> + index + <span class="string">"] ="</span> + element);</span><br><span class="line">&#125;</span><br><span class="line">[<span class="number">2</span>, <span class="number">5</span>, <span class="number">9</span>].forEach(logArrayElements);</span><br><span class="line"><span class="comment">// logs:</span></span><br><span class="line"><span class="comment">// a[0] = 2</span></span><br><span class="line"><span class="comment">// a[1] = 5</span></span><br><span class="line"><span class="comment">// a[2] = 9</span></span><br></pre></td></tr></table></figure></p><h2 id="短路评价"><a href="#短路评价" class="headerlink" title="短路评价"></a>短路评价</h2><p>给一个变量分配的值是通过判断其值是否为 <code>null</code> 或 <code>undefined</code>，则可以：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> dbHost;</span><br><span class="line"><span class="keyword">if</span> (process.env.DB_HOST) &#123;</span><br><span class="line">    dbHost = process.env.DB_HOST;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    dbHost = <span class="string">'localhost'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>简写：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dbHost = process.env.DB_HOST || <span class="string">'localhost'</span>;</span><br></pre></td></tr></table></figure></p><h2 id="十进制指数"><a href="#十进制指数" class="headerlink" title="十进制指数"></a>十进制指数</h2><p>当需要写数字带有很多零时（如 10000000），可以采用指数（1e7）来代替这个数字：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;&#125;</span><br><span class="line"></span><br><span class="line">简写：</span><br><span class="line"><span class="string">``</span><span class="string">`javascript</span></span><br><span class="line"><span class="string">for (let i = 0; i &lt; 1e7; i++) &#123;&#125;</span></span><br><span class="line"><span class="string">// 下面都是返回 true</span></span><br><span class="line"><span class="string">1e0 === 1;</span></span><br><span class="line"><span class="string">1e1 === 10;</span></span><br><span class="line"><span class="string">1e2 === 100;</span></span><br><span class="line"><span class="string">1e3 === 1000;</span></span><br><span class="line"><span class="string">1e4 === 10000;</span></span><br><span class="line"><span class="string">1e5 === 100000;</span></span><br></pre></td></tr></table></figure></p><h2 id="对象属性简写"><a href="#对象属性简写" class="headerlink" title="对象属性简写"></a>对象属性简写</h2><p>如果属性名与 key 名相同，则可以采用 ES6 的方法：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">x</span>:x, <span class="attr">y</span>:y &#125;;</span><br></pre></td></tr></table></figure></p><p>简写：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; x, y &#125;;</span><br></pre></td></tr></table></figure></p><h2 id="箭头函数简写"><a href="#箭头函数简写" class="headerlink" title="箭头函数简写"></a>箭头函数简写</h2><p>传统函数编写方法很容易让人理解和编写，但是当嵌套在另一个函数中，则这些优势就荡然无存。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Hello'</span>, name);</span><br><span class="line">&#125;</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Loaded'</span>)</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br><span class="line">list.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(item);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>简写：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sayHello = <span class="function"><span class="params">name</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'Hello'</span>, name);</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'Loaded'</span>), <span class="number">2000</span>);</span><br><span class="line">list.forEach(<span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">console</span>.log(item));</span><br></pre></td></tr></table></figure></p><h2 id="隐式返回值简写"><a href="#隐式返回值简写" class="headerlink" title="隐式返回值简写"></a>隐式返回值简写</h2><p>经常使用 <code>return</code> 语句来返回函数最终结果，一个单独语句的箭头函数能隐式返回其值（函数必须省略 <code>{}</code> 为了省略 <code>return</code> 关键字） 为返回多行语句（例如对象字面表达式），则需要使用 <code>()</code> 包围函数体。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calcCircumference</span>(<span class="params">diameter</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.PI * diameter</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">foo</span>: <span class="number">1</span> &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>简写：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">calcCircumference = <span class="function"><span class="params">diameter</span> =&gt;</span> (</span><br><span class="line">    <span class="built_in">Math</span>.PI * diameter;</span><br><span class="line">)</span><br><span class="line"><span class="keyword">var</span> func = <span class="function"><span class="params">()</span> =&gt;</span> (&#123; <span class="attr">foo</span>: <span class="number">1</span> &#125;);</span><br></pre></td></tr></table></figure></p><h2 id="默认参数值"><a href="#默认参数值" class="headerlink" title="默认参数值"></a>默认参数值</h2><p>为了给函数中参数传递默认值，通常使用 if 语句来编写，但是使用 ES6 定义默认值，则会很简洁：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">volume</span>(<span class="params">l, w, h</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (w === <span class="literal">undefined</span>)</span><br><span class="line">        w = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">if</span> (h === <span class="literal">undefined</span>)</span><br><span class="line">        h = <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">return</span> l * w * h;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>简写：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">volume = <span class="function">(<span class="params">l, w = <span class="number">3</span>, h = <span class="number">4</span> </span>) =&gt;</span> (l * w * h);</span><br><span class="line">volume(<span class="number">2</span>) <span class="comment">//output: 24</span></span><br></pre></td></tr></table></figure></p><h2 id="模板字符串"><a href="#模板字符串" class="headerlink" title="模板字符串"></a>模板字符串</h2><p>传统的 JavaScript 语言，输出模板通常是这样写的。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> welcome = <span class="string">'You have logged in as'</span> + first + <span class="string">''</span> + last + <span class="string">'.'</span></span><br><span class="line"><span class="keyword">const</span> db = <span class="string">'http://'</span> + host + <span class="string">':'</span> + port + <span class="string">'/'</span> + database;</span><br></pre></td></tr></table></figure></p><p>ES6 可以使用反引号和 <code>${}</code> 简写：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> welcome = <span class="string">`You have logged in as <span class="subst">$&#123;first&#125;</span> <span class="subst">$&#123;last&#125;</span>`</span>; </span><br><span class="line"><span class="keyword">const</span> db = <span class="string">`http://<span class="subst">$&#123;host&#125;</span>:<span class="subst">$&#123;port&#125;</span>/<span class="subst">$&#123;database&#125;</span>`</span>;</span><br></pre></td></tr></table></figure></p><h2 id="解构赋值简写方法"><a href="#解构赋值简写方法" class="headerlink" title="解构赋值简写方法"></a>解构赋值简写方法</h2><p>在 web 框架中，经常需要从组件和 API 之间来回传递数组或对象字面形式的数据，然后需要解构它<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> observable = <span class="built_in">require</span>(<span class="string">'mobx/observable'</span>);</span><br><span class="line"><span class="keyword">const</span> action = <span class="built_in">require</span>(<span class="string">'mobx/action'</span>);</span><br><span class="line"><span class="keyword">const</span> runInAction = <span class="built_in">require</span>(<span class="string">'mobx/runInAction'</span>);</span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">this</span>.props.store;</span><br><span class="line"><span class="keyword">const</span> form = <span class="keyword">this</span>.props.form;</span><br><span class="line"><span class="keyword">const</span> loading = <span class="keyword">this</span>.props.loading;</span><br><span class="line"><span class="keyword">const</span> errors = <span class="keyword">this</span>.props.errors;</span><br><span class="line"><span class="keyword">const</span> entity = <span class="keyword">this</span>.props.entity;</span><br></pre></td></tr></table></figure></p><p>简写：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; observable, action, runInAction &#125; <span class="keyword">from</span> <span class="string">'mobx'</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; store, form, loading, errors, entity &#125; = <span class="keyword">this</span>.props;</span><br></pre></td></tr></table></figure></p><p>也可以分配变量名：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; store, form, loading, errors, <span class="attr">entity</span>:contact &#125; = <span class="keyword">this</span>.props;</span><br><span class="line"><span class="comment">// 最后一个变量名为 contact</span></span><br></pre></td></tr></table></figure></p><h2 id="多行字符串简写"><a href="#多行字符串简写" class="headerlink" title="多行字符串简写"></a>多行字符串简写</h2><p>需要输出多行字符串，需要使用 <code>+</code> 来拼接：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> lorem = <span class="string">'Lorem ipsum dolor sit amet, consectetur\n'</span></span><br><span class="line">    + <span class="string">'adipisicing elit, sed do eiusmod tempor incididunt\n'</span></span><br><span class="line">    + <span class="string">'ut labore et dolore magna aliqua. Ut enim ad minim\n'</span></span><br><span class="line">    + <span class="string">'veniam, quis nostrud exercitation ullamco laboris\n'</span></span><br><span class="line">    + <span class="string">'nisi ut aliquip ex ea commodo consequat. Duis aute\n'</span></span><br><span class="line">    + <span class="string">'irure dolor in reprehenderit in voluptate velit esse.\n'</span></span><br></pre></td></tr></table></figure></p><p>使用反引号，则可以达到简写作用：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> lorem = <span class="string">`Lorem ipsum dolor sit amet, consectetur</span></span><br><span class="line"><span class="string">    adipisicing elit, sed do eiusmod tempor incididunt</span></span><br><span class="line"><span class="string">    ut labore et dolore magna aliqua. Ut enim ad minim</span></span><br><span class="line"><span class="string">    veniam, quis nostrud exercitation ullamco laboris</span></span><br><span class="line"><span class="string">    nisi ut aliquip ex ea commodo consequat. Duis aute</span></span><br><span class="line"><span class="string">    irure dolor in reprehenderit in voluptate velit esse.`</span></span><br></pre></td></tr></table></figure></p><h2 id="强制参数简写"><a href="#强制参数简写" class="headerlink" title="强制参数简写"></a>强制参数简写</h2><p>JavaScript 中如果没有向函数参数传递值，则参数为 <code>undefined</code>。为了增强参数赋值，可以使用 <code>if</code> 语句来抛出异常，或使用强制参数简写方法。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">bar</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(bar === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Missing parameter!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bar;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>简写：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mandatory = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Missing parameter!'</span>);</span><br><span class="line">&#125;</span><br><span class="line">foo = <span class="function">(<span class="params">bar = mandatory(</span>)) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> bar;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="Array-find-简写"><a href="#Array-find-简写" class="headerlink" title="Array.find 简写"></a>Array.find 简写</h2><p>想从数组中查找某个值，则需要循环。在 ES6 中，<code>find()</code> 函数能实现同样效果。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pets = [</span><br><span class="line">    &#123; <span class="attr">type</span>: <span class="string">'Dog'</span>, <span class="attr">name</span>: <span class="string">'Max'</span>&#125;,</span><br><span class="line">    &#123; <span class="attr">type</span>: <span class="string">'Cat'</span>, <span class="attr">name</span>: <span class="string">'Karl'</span>&#125;,</span><br><span class="line">    &#123; <span class="attr">type</span>: <span class="string">'Dog'</span>, <span class="attr">name</span>: <span class="string">'Tommy'</span>&#125;,</span><br><span class="line">]</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findDog</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i&lt;pets.length; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(pets[i].type === <span class="string">'Dog'</span> &amp;&amp; pets[i].name === name) &#123;</span><br><span class="line">            <span class="keyword">return</span> pets[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>简写：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pet = pets.find(<span class="function"><span class="params">pet</span> =&gt;</span> pet.type ===<span class="string">'Dog'</span> &amp;&amp; pet.name === <span class="string">'Tommy'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(pet); <span class="comment">// &#123; type: 'Dog', name: 'Tommy' &#125;</span></span><br></pre></td></tr></table></figure></p><h2 id="Object-key-简写"><a href="#Object-key-简写" class="headerlink" title="Object[key]简写"></a>Object[key]简写</h2><p>考虑一个验证函数<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">validate</span>(<span class="params">values</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!values.first)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(!values.last)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(validate(&#123;<span class="attr">first</span>:<span class="string">'Bruce'</span>,<span class="attr">last</span>:<span class="string">'Wayne'</span>&#125;)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p><p>假设当需要不同域和规则来验证，能否编写一个通用函数在运行时确认？<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对象验证规则</span></span><br><span class="line"><span class="keyword">const</span> schema = &#123;</span><br><span class="line">    first: &#123;</span><br><span class="line">        required:<span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    last: &#123;</span><br><span class="line">        required:<span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 通用验证函数</span></span><br><span class="line"><span class="keyword">const</span> validate = <span class="function">(<span class="params">schema, values</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">for</span>(field <span class="keyword">in</span> schema) &#123;</span><br><span class="line">        <span class="keyword">if</span>(schema[field].required) &#123;</span><br><span class="line">            <span class="keyword">if</span>(!values[field]) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(validate(schema, &#123;<span class="attr">first</span>:<span class="string">'Bruce'</span>&#125;)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(validate(schema, &#123;<span class="attr">first</span>:<span class="string">'Bruce'</span>,<span class="attr">last</span>:<span class="string">'Wayne'</span>&#125;)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p><p>现在可以有适用于各种情况的验证函数，不需要为了每个而编写自定义验证函数了</p><h2 id="双重非位运算简写"><a href="#双重非位运算简写" class="headerlink" title="双重非位运算简写"></a>双重非位运算简写</h2><p>有一个有效用例用于双重非运算操作符。可以用来代替 <code>Math.floor()</code>，其优势在于运行更快，可以阅读此 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators" target="_blank" rel="noopener">文章</a> 了解更多位运算。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Math</span>.floor(<span class="number">4.9</span>) === <span class="number">4</span>  <span class="comment">//true</span></span><br></pre></td></tr></table></figure></p><p>简写<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~~<span class="number">4.9</span> === <span class="number">4</span>  <span class="comment">//true</span></span><br></pre></td></tr></table></figure></p><h2 id="扩展运算符简写"><a href="#扩展运算符简写" class="headerlink" title="扩展运算符简写"></a>扩展运算符简写</h2><p>扩展运算符有几种用例让 JavaScript 代码更加有效使用，可以用来代替某个数组函数。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// joining arrays</span></span><br><span class="line"><span class="keyword">const</span> odd = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">const</span> nums = [<span class="number">2</span> ,<span class="number">4</span> , <span class="number">6</span>].concat(odd);</span><br><span class="line"><span class="comment">// cloning arrays</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">const</span> arr2 = arr.slice()</span><br></pre></td></tr></table></figure></p><p>简写：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// joining arrays</span></span><br><span class="line"><span class="keyword">const</span> odd = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span> ];</span><br><span class="line"><span class="keyword">const</span> nums = [<span class="number">2</span> ,<span class="number">4</span> , <span class="number">6</span>, ...odd];</span><br><span class="line"><span class="built_in">console</span>.log(nums); <span class="comment">// [ 2, 4, 6, 1, 3, 5 ]</span></span><br><span class="line"><span class="comment">// cloning arrays</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">const</span> arr2 = [...arr];</span><br></pre></td></tr></table></figure></p><p>不像 <code>concat()</code> 函数，可以使用扩展运算符来在一个数组中任意处插入另一个数组。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> odd = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span> ];</span><br><span class="line"><span class="keyword">const</span> nums = [<span class="number">2</span>, ...odd, <span class="number">4</span> , <span class="number">6</span>];</span><br></pre></td></tr></table></figure></p><p>也可以使用扩展运算符解构：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; a, b, ...z &#125; = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span>, <span class="attr">d</span>: <span class="number">4</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(z) <span class="comment">// &#123; c: 3, d: 4 &#125;</span></span><br></pre></td></tr></table></figure></p><p>也可以不使用 Apply 方法呼叫函数：这里指的是 <code>Function.prototype.apply</code>，它允许我们将实参以数组形式传入函数并依次对应到形参上。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doStuff</span> (<span class="params">x, y, z</span>) </span>&#123; &#125;</span><br><span class="line"><span class="keyword">var</span> args = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="comment">// Call the function, passing args</span></span><br><span class="line">doStuff.apply(<span class="literal">null</span>, args);</span><br></pre></td></tr></table></figure></p><p>通过扩展运算符我们可以避免使用 <code>apply</code> 并且轻松地使用它呼叫函数。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">doStuff(...args);</span><br></pre></td></tr></table></figure></p><p>代码更少，更干净，而且不需要使用多余的 <code>null</code>！</p><p>很多 Emoji 字符不是独立的 Unicode 字符，而是由多个 Emoji 组合而成。最常见的就是家庭 Emoji 和有肤色的 Emoji，例如👪和👨‍👩‍👧‍👧。<br>神奇的事情是，如果使用扩展运算符的话，它们是可以拆散的！</p><p><img src="/images/2018-01/spread-operator-emoji.jpg" alt=""></p><p>这些复合 emoji 字符甚至还允许做替换，形成新的 emoji 字符。</p><p><img src="/images/2018-01/emoji-replace.jpg" alt=""></p><p>不得不说这是一种绝妙的使用方式。</p><p>本文转载自：<a href="https://juejin.im/post/5948db9661ff4b006c061b2b" target="_blank" rel="noopener">19 个 JavaScript 常用的简写技术</a></p><p>拓展阅读：<br><a href="https://www.sitepoint.com/shorthand-javascript-techniques" target="_blank" rel="noopener">19+ JavaScript Shorthand Coding Techniques</a><br><a href="http://lightcss.com/6-spread-operator" target="_blank" rel="noopener">[译] 6 种 JavaScript 展开操作符的绝妙使用</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MCPE 地图的正确使用方式</title>
      <link href="/2018-01/MCPE%E5%9C%B0%E5%9B%BE%E7%9A%84%E6%AD%A3%E7%A1%AE%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F/"/>
      <url>/2018-01/MCPE%E5%9C%B0%E5%9B%BE%E7%9A%84%E6%AD%A3%E7%A1%AE%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>在我的世界中，制作不同区域的地图后，可以使用物品展示框将它们挂起来，这样便能拼出一幅巨大的高分辨率地图。这是博主对一个经营了多年的存档拍摄的『卫星图』：</p><p><img src="/images/2018-01/IMG_4541.png" alt=""></p><p>效果还是挺不错的。</p>]]></content>
      
      
      <categories>
          
          <category> 电子游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 我的世界 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>为了联盟</title>
      <link href="/2018-01/%E4%B8%BA%E4%BA%86%E8%81%94%E7%9B%9F/"/>
      <url>/2018-01/%E4%B8%BA%E4%BA%86%E8%81%94%E7%9B%9F/</url>
      
        <content type="html"><![CDATA[<p>为了荣耀！</p><p><img src="/images/2018-01/IMG_4186.jpg" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 电子游戏 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>将电键变为鼠标和键盘——实现篇</title>
      <link href="/2018-01/%E5%B0%86%E7%94%B5%E9%94%AE%E5%8F%98%E4%B8%BA%E9%BC%A0%E6%A0%87%E5%92%8C%E9%94%AE%E7%9B%98%E2%80%94%E2%80%94%E5%AE%9E%E7%8E%B0%E7%AF%87/"/>
      <url>/2018-01/%E5%B0%86%E7%94%B5%E9%94%AE%E5%8F%98%E4%B8%BA%E9%BC%A0%E6%A0%87%E5%92%8C%E9%94%AE%E7%9B%98%E2%80%94%E2%80%94%E5%AE%9E%E7%8E%B0%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<p><a href="/2018-01 / 将摩尔斯电键改造为 USB 键盘 /">上一篇文章</a> 介绍了使用 Teensy 3.2 将摩尔斯电键变为键盘的方法。经过研究，博主决定使用 Arduino Leonardo 实现之。相比 Teensy 3.2，Arduino Leonardo 成本更低，并且实现起来也较为简单。电键则采用全新产品，无需手动走线、打磨底座等，避免了使用二战时期古董带来的种种问题。</p><p><img src="/images/2018-01/IMG_4488.jpg" alt=""></p><p>Arduino Leonardo 是基于 ATmega32U4 微控制器的开发板。它有 20 个输入 / 输出引脚（在写入程序时可以定义各个引脚的作用，其中最多有 7 个可用于 PWM 输出、12 个可用于模拟输入），一个 16 MHz 的晶体振荡器，一个 Micro USB 接口，一个 DC 接口，一个 ICSP 接口，一个复位按钮。它包含了支持微控制器所需的一切，你可以简单地通过把它连接到计算机的 USB 接口来驱动它。<br>Leonardo 不同于之前所有的 Arduino 控制器，他直接使用了 ATmega32U4 的 USB 通信功能，取消了 USB 转 UART 芯片。这使得 Leonardo 不仅可以作为一个虚拟的（CDC）串行 / COM 端口，还可以作为鼠标或者键盘连接到计算机。更多内容可以 <a href="https://store.arduino.cc/usa/arduino-leonardo-with-headers" target="_blank" rel="noopener">参考文档</a>（在 DOCUMENTATION 选单中包含完整电路图）。</p><a id="more"></a><h2 id="硬件准备工作"><a href="#硬件准备工作" class="headerlink" title="硬件准备工作"></a>硬件准备工作</h2><p>需要准备</p><ul><li>Arduino Leonardo 开发板 1 一块</li><li>摩尔斯电键一个（例如 K4 型重型电键）</li><li>面包板、导线（杜邦头连接线）及 USB 线</li></ul><p>取决于摩尔斯电键的输出方式，可能还需要一个 3.5mm/6.5mm 音频接口<br>有必要的话，还可以准备万用表等辅助工具</p><h2 id="软件准备工作"><a href="#软件准备工作" class="headerlink" title="软件准备工作"></a>软件准备工作</h2><ul><li><a href="https://www.arduino.cc/en/Main/Software" target="_blank" rel="noopener">Arduino IDE</a></li><li><a href="/files/MimiMorse.zip">准备烧录的程序源代码</a></li><li><a href="https://playground.arduino.cc/Code/Bounce" target="_blank" rel="noopener">Bounce2 库</a></li></ul><p>理论上 Arduino Leonardo 在 Mac 下可以无需驱动，即插即用；如果出现系统无法识别设备（串口）的情况，可以到相关论坛寻求帮助。出现这种情况，常见的可能是 FTDI 驱动冲突，或者是由 macOS 系统完整性保护造成的问题。你可以试试重启 Arduino Leonardo 并等待几秒、外接 9V 电源或者检查驱动问题。Windows 下情况暂未测试。</p><h2 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h2><ul><li>打开 Arduino IDE，导入下载的 Bounce2 库。</li></ul><p><img src="/images/2018-01/ArduinoLeonardo1.png" alt=""></p><ul><li>将 Arduino Leonardo 开发板通过 USB 线连接到电脑上，在 Arduino IDE 的『工具』菜单下设置正确的开发板和端口，如图所示。</li></ul><p><img src="/images/2018-01/ArduinoLeonardo3.png" alt=""><br><img src="/images/2018-01/ArduinoLeonardo4.png" alt=""></p><ul><li>如果是初次使用，在『文件』菜单下选择示例，找到 Blink，打开后，依次点击编译、上传。如果出现未响应、无法找到端口等现象，请点击开发板上的按钮重启。如果上传成功，并且二极管 L 以 0.5Hz 的频率闪烁，则说明配置正确。</li></ul><p><img src="/images/2018-01/ArduinoLeonardo2.png" alt=""></p><ul><li>解压并打开下载的源代码文件。其中 Keyboard 文件能够将摩尔斯电键变为虚拟键盘，通过敲击字符的摩尔斯电码输入；Mouse 文件能够将摩尔斯电键变为虚拟鼠标，按下即触发一次鼠标点击。选择你需要的文件，使用 Arduino IDE 打开，然后依次点击编译、上传。</li><li>请使用物理方法将摩尔斯电键的两端分别连到 Arduino Leonardo 的 GND 和 12 端口，如图所示（当然，你可以更改源代码来使用别的端口）。如果是虚拟键盘模式，连接 GND 和 8 端口可以输入大写字母，不连接则输入小写字母。</li></ul><p><img src="/images/2018-01/IMG_4490.jpg" alt=""></p><ul><li>如果一切就绪，那么，当你按下电键或输入摩尔斯电码，电脑就会作出正确的反应。</li></ul><p><img src="/images/2018-01/IMG_4491.jpg" alt=""></p><p>以上就是用摩尔斯电键作鼠标和键盘的教程。当然，Arduino Leonardo 开发板的作用远远不止这些，如果发现更为有趣的应用，我会继续分享出来。</p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Morse Code </tag>
            
            <tag> Arduino </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>将摩尔斯电键改造为 USB 键盘</title>
      <link href="/2018-01/%E5%B0%86%E6%91%A9%E5%B0%94%E6%96%AF%E7%94%B5%E9%94%AE%E6%94%B9%E9%80%A0%E4%B8%BAUSB%E9%94%AE%E7%9B%98/"/>
      <url>/2018-01/%E5%B0%86%E6%91%A9%E5%B0%94%E6%96%AF%E7%94%B5%E9%94%AE%E6%94%B9%E9%80%A0%E4%B8%BAUSB%E9%94%AE%E7%9B%98/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/2018-01/Vi93ahx.jpg" alt=""></p><p>The finished Morse key sitting happily on my laptop. Full project details below.<br>最终完成的莫尔斯键盘与笔记本电脑的合影～整个项目的细节如下：</p><p>Background: I can just about remember growing up around beautifully designed analogue devices like rotary dial phones, typewriters, and record players. I’ve always like the idea of converting these largely defunct objects into digital devices, and my Dad’s old Morse key seemed like a simple project to get started on.<br>背景：打从记事以来，我就生活在设计精美的模拟设备的环境中，比如旋转式拨号电话，打字机和唱片机。我一直有把这些大部分现在不常用的东西转换成数字设备的想法，而这其中，老爸的旧莫尔斯电键看起来像是一个简单的项目。</p><a id="more"></a><p>Morse code is an internationally recognised way of representing letters of the alphabet (a-z) and numbers (0–9) as a series of dots and dashes. During WW1 and WW2, it became a handy way of sending encrypted messages across long distances and quite possibly sent carrier pigeon unemployment rates skyrocketing. A conventional Morse key acts like a switch, making and breaking a circuit connection to transmit these dots and dashes as short and long beeps over radio waves.<br>莫尔斯电码是一种将国际公认的字母表（a-z）和数字（0-9）字母表示为一系列点和破折号的方式。在一战和二战期间，它变成了一个十分方便发送加密的信息的方式。传统的莫尔斯电键就像一个开关，联通和断开电路连接就能通过无线电波传播这些点和点的音长。</p><p>The idea was that the Morse key would behave like a keyboard when plugged into any laptop or PC’s USB 3.0 port; the user could key in messages in Morse code, and the corresponding English alphanumeric characters would appear on screen. Code for the project is here (<a href="https://github.com/nomblr/morse" target="_blank" rel="noopener">https://github.com/nomblr/morse/</a>) and full details are below.<br>所以我就想到当插入任何笔记本电脑或 PC 的 USB 3.0 端口时，莫尔斯键的行为就像一个键盘；用户可以用莫尔斯电码键入信息，并在屏幕上出现相应的英文字母数字字符。这个项目的代码我 po 到了 Github 上，有心人都可以去尝试一下。</p><p><img src="/images/2018-01/wb72Pzy.jpg" alt=""></p><p>The Morse key was incredibly dusty and attached to a nasty plastic base, so I took the whole thing apart, scrapped the base, and gave the Morse key a good clean.<br>莫尔斯电键积了很多灰尘，而且装在一个很丑的塑料基地上，因此我准备把所有东西都拆开，把莫尔斯电键清洁干净。</p><p><img src="/images/2018-01/k8vNI65.jpg" alt=""></p><p>Some wet wipes did the job nicely, and I also sanded down the two metal contacts (the ‘switch’) a tiny bit to improve the electrical connection and remove some of the accumulated gunk.<br>使用湿纸巾，这项工作完成的很出色。并且我还仔细打磨了两个金属触点（即『开关』），改善电路连接的情况并去除一些沉积的脏东西。</p><p><img src="/images/2018-01/4kpenAM.jpg" alt=""></p><p>Converting the (VERY analogue) Morse key into a digital device was the next step. To do this I used a tiny, cheap micro-controller aptly named a Teensy 3.2 (<a href="https://www.pjrc.com/teensy" target="_blank" rel="noopener">https://www.pjrc.com/teensy/</a>). The Teensy has 28 pins, each of which can be configured as an input or an output; because I wanted to the Teensy to receive signals from the Morse key, I configured Pin 7 of the Teensy as an input and wired it to one connection on Morse key. (This was an arbitrary choice, any of the I/O pins would have worked just fine.) I then wired the ground pin of the Teensy to the other connection on the Morse key.<br>接下来就是将电键转换为数字设备。为了实现这一点，我使用一个小巧，便宜的微型控制器——Teensy 3.2。</p><p>This was my first foray into working with electronics or microcomputers so feel free to imagine a progress montage punctuated by thoughtful moustache stroking scenes, eighties music and gratuitous but entirely pointless shots of the terminal.<br>这是我第一次尝试做这种事，你可以想象当我点亮并且成功运行的时候，我的内心是多么喜悦。</p><p>I wrote some test code for the Teensy to make sure it was working with the Morse key as expected; I expected to see ‘KEY PRESS’ printed out once every time I pressed the Morse key down once. This is where I hit my first problem. Mechanical switches don’t make perfect physical or electrical contact when they’re pressed; they’ll typically oscillate between being’open’and’closed’a few times over ～1ms before settling down to a stable’closed’state. Microcomputers are fast enough to detect these oscillations so when I pressed my Morse key down just once, the Teensy detected several rapid key presses as shown in the photo. This effect is called’bounce’and luckily there’s a built-in Teensy library (<a href="https://playground.arduino.cc/Code/Bounce" target="_blank" rel="noopener">https://playground.arduino.cc/Code/Bounce</a>) that compensates for it.<br>为了确保 Teensy 正确按照预期『翻译』莫尔斯密码，我为 Teensy 写了一些测试代码。因此每当按下莫尔斯电键一次，我就会看到电脑端有字符输出。然而很快我就遇到了一个问题：机械开关按下时不能形成完美的物理接触（通常在『通路』和『断路』之间摆动几次，持续约 1ms，然后稳定到『通路』状态）。计算机能够快速检测到这些振荡，所以当我按下我的莫尔斯电键时，Teensy 检测到照片中显示的几个快速按键。这种效应称为『反弹』，幸好内置的 Teensy 库能够补偿它。</p><p>Once the Teensy could successfully detect single Morse key presses, I needed a way to differentiate the pauses between dots, dashes, letters, and words. Implementing a method for the Teensy to figure out relative timings for individual users would’ve involved a fair amount of faff, so I used absolute timings based on my own keying speeds. A threshold of 150ms was used to differentiate dots from dashes, and pauses between letters and words were set to 500ms and 3000ms. Of course, this configuration will break down with a faster or slower Morse operator, but as my old engineering tutor used to say,”good engineers are smart but lazy”, which for the purposes of this project I will choose to interpret as”good engineers are lazy”.<br>为了 Teensy 能够成功检测到每次点击莫尔斯电键的不同，来区分点、破折号、字母和单词之间的停顿。我在绝对时间的基础上结合自己的键控速度。用 150ms 的阈值来区分短划线，并且字母和单词之间的时间间隔被设置为 500ms 和 3000ms。当然，每个人的习惯都不一样，这个就要自己把握了。</p><p><img src="/images/2018-01/hncjuCW.jpg" alt=""></p><p>With the Teensy fully programmed, I was ready to build a wooden base to hide the electronics underneath the Morse key, with holes to feed through the two wires connecting the Morse key to the Teensy. I’d like to say I chose wood for aesthetic reasons, but in reality all my attempts at 3D printing a base failed so abysmally that I decided to try my luck with a plank I found lying around at my local Hackspace, of approximate width 130mm and depth 20mm.<br>Teensy 编程完后，我准备制作一个隐藏莫尔斯电键下方的电子设备的木质底座，并且底座上有两个孔，用于连接 Teensy 到莫尔斯电键的电线。为啥选木材而不是 3D 打印呢？其实不是美观不美观的问题，而是因为用 3D 打印出来的底座都适配失败了。</p><p><img src="/images/2018-01/WjlHEcO.jpg" alt=""></p><p>I sawed the plank down to 110x90mm so the Morse key would fit nicely on top, and chiselled out an indentation of approximate dimensions 50x40x10mm on the underside, so fit the Teensy and wiring.<br>我把木板锯成 110x90mm，这样莫尔斯电键可以很恰当地放在上面。在下方我凿出了一个尺寸约为 50x40x10mm 的凹痕，用于放置微控制器 Teensy 和布线。</p><p><img src="/images/2018-01/ocVQDyq.jpg" alt=""></p><p>I sanded the whole thing down and connected it to my laptop. You can see it in action here: <a href="https://www.youtube.com/watch?v=qh_apYcr4xI" target="_blank" rel="noopener">https://www.youtube.com/watch?v=qh_apYcr4xI</a><br>最后我打磨了一下新的键盘，并将其连接到我的笔记本电脑上。</p><p>本文翻译自：<a href="https://imgur.com/gallery/lNAtQ" target="_blank" rel="noopener">I Turned my Dad’s 1950s Morse Key into a USB Keyboard</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Morse Code </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2017——生命中的一年</title>
      <link href="/2017-12/2017%E2%80%94%E2%80%94%E7%94%9F%E5%91%BD%E4%B8%AD%E7%9A%84%E4%B8%80%E5%B9%B4/"/>
      <url>/2017-12/2017%E2%80%94%E2%80%94%E7%94%9F%E5%91%BD%E4%B8%AD%E7%9A%84%E4%B8%80%E5%B9%B4/</url>
      
        <content type="html"><![CDATA[<blockquote><p>标题来自纪录片《J.K. 罗琳——生命中的一年》。</p></blockquote><p>不知不觉就到了 2017 年的最后一天。由于没有写日记的习惯，总感觉还是需要做些什么，以免一些事情太快被遗忘。于是决定写篇文章，记录一下这一年里的经历（实际上只是些流水账）。</p><a id="more"></a><p>在 2016 年 11 月的 CPhO，我幸运地进入了国家集训队，这意味着 2017 年我不再有来自高考的压力；有大量闲暇时时间，去探索未知、追寻自我。<br>2016 年 12 月 24 日，结束了在北大的集训，回到武汉。2017 年上半年的生活节奏，大概从这时就奠定了。<br>2017 年 1 月 6 日，公布了 IPhO 与 CPhO 国家队的名单，我并没有入选。这是意料之中的，毕竟量子考试做错了一道大题。虽然还有再战一年的机会，但已经对物理竞赛感到疲倦的我无心恋战；也许是时候做些更有意义的事情。<br>2 月 18 日，我开始进行物理竞赛及自主招生的辅导工作，对象主要是高中的学弟学妹。这是一个不错的工作，也有助于提高自己的水平。<br>3 月很平常，偶尔是帮竞赛老师讲课、改卷子。<br>4 月收到了到培尖教育做助教的邀请。4 月 25 日，抵达杭州，开始了为期两周的助教生涯。在此期间，得知了 APhO 八位同学全部夺金的消息。<br>5 月初，培尖的课程结束后，到宋城、西湖游玩了一天，于 5 月 11 日返回武汉。比较遗憾的是，在杭州时错过了高中拍摄毕业照。</p><p><img src="/images/2017-12/IMG_3493.jpg" alt=""></p><blockquote><p>过去两年，由于忙于学习物理竞赛的知识，假期往往是在培训机构和大学的实验室里度过的，抑或是宅在家里刷题。这次才算是一场真正的旅行。</p></blockquote><p>5 月 19 日，与高中同学一起游览了九真山。这是高考之前全班进行的最后一次大型集体活动。</p><p><img src="/images/2017-12/IMG_3548.jpg" alt=""></p><blockquote><p>『从此天各一方』</p></blockquote><p>6 月 5 日，在 B 站上投稿了炉石传说游戏视频，并取得了不错的播放量。希望未来能坚持下来，定期更新一些游戏测试等内容。<br>7 月开始，继续在物理竞赛上指导了几位学弟学妹。我对自己的教学水平还是很有信心的。<br>在暑假期间，试图养成每天健身、学英语的习惯，从结果上来看失败了。<br>8 月 21 日，在国子学做了一天助教，这段时间要准备去北大旁听的事宜了。<br>8 月 28 日，北大分班，大学生活即将开始。这也意味着，要准备去迎接新的挑战了。<br>9 月 8 日，生日，也是北京大学开学典礼的日子。<br>9 月 15 日，围观隔壁军训，与高中同学谈笑风生。顺便到隔壁食堂蹭了顿饭。生活还是轻松愉快而惬意的。<br>9 月 17 日，复赛与北大力免考试同在这一天。我选择了免修力学。<br>10 月 1 日，在国庆放假回家的火车上搭建了个人博客，同时开始自学 HTML、CSS 和 JavaScript。虽然多年前就已经有此计划，但是当时比较 naive，从未接触 Web 开发，对程序设计也一窍不通，故未能实施。<br>10 月 18 日，设计并制作了两面旗帜，挂在寝室增加气氛。于是又入了 Illustrator 这个大坑。<br>11 月 18 日，和同学去围观了新生杯篮球赛决赛，见证了物院篮球队夺冠。<br>11 月 27 日，基本完成了 JavaScript 游戏 Play Coins! 的制作。同时，为了找学长抄代码，重拾了多年前注册但一直没有动静的 GitHub 账号。<br>12 月 3 日，听了潘建伟院士的报告。这坚定了我成为一名科研工作者的决心。</p><p><img src="/images/2017-12/IMG_4361.jpg" alt=""></p><blockquote><p>『格物路修远，一生物理人』</p></blockquote><p>12 月 11 日，重回华师一参加 2018 高考报名，见到了初中时的挚友，感慨万千。<br>12 月 16 日，参与制作了《情系华一》北大部分的宣传片，负责后期特效，并且制作了一个漫威风的片头。<br>12 月 19 日，因为队友全部划水，一人完成了计算概论课大作业一个小组的全部内容。这是我做的第一个较为完整的 C 语言项目。</p><p>如果简要地回顾 2017 年，它似乎并不如 2016 年那样令人激动、充满精彩与高光的时刻。这一年的经历，更加平凡，更为低调。这一年，我学到了很多，见识了很多，感悟了很多。相比高中时，我更深切地体会到，人外有人，天外有天：在北大，身边的每一个人都是奆佬，每天我都在经历着神仙打架。我似乎始终是一个追逐者，尝试着跟上他们的步伐，就如我高中时所做的那样。<br>2018 年，继续前行吧。</p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>下载 70 年代美帝拍摄的卫星图</title>
      <link href="/2017-12/%E4%B8%8B%E8%BD%BD70%E5%B9%B4%E4%BB%A3%E7%BE%8E%E5%B8%9D%E6%8B%8D%E6%91%84%E7%9A%84%E5%8D%AB%E6%98%9F%E5%9B%BE/"/>
      <url>/2017-12/%E4%B8%8B%E8%BD%BD70%E5%B9%B4%E4%BB%A3%E7%BE%8E%E5%B8%9D%E6%8B%8D%E6%91%84%E7%9A%84%E5%8D%AB%E6%98%9F%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/2017-12/kh1.jpg" alt=""></p><p>这是 1972 年 5 月 29 日美国间谍卫星拍摄的北京大学。这张照片来自美国地质调查局（USGS）图片数据库。美国于 90 年代以及 21 世纪初分几批解密了冷战时期美国间谍卫星拍摄的照片。作为冷战时期的敌国，间谍卫星记录下了当时几乎中国全境的高清卫星照片，这里分享一下照片下载的具体方法。</p><a id="more"></a><p>首先登录美国地质调查局（USGS）EarthExplorer 网站：<a href="https://earthexplorer.usgs.gov" target="_blank" rel="noopener">Earth Explorer</a><br>由于该网站调用了 google 提供的验证码和地图服务，可能需要翻墙才能正确使用。<br>下载图片必须要登录，先点击右上角的 Register 注册。推荐使用 gmail 邮箱注册，如果用 qq 邮箱等国内邮箱注册可能会收不到验证邮件。完成注册、登录后，就可以搜索并下载图片了。<br>首先，我们在右侧的地图上通过点选，划定需要搜索的区域，或者通过输入经纬度坐标确定位置。<br>接下来我们就可以点击 Data Sets 来进行下一步，选择数据库。</p><p><img src="/images/2017-12/kh2.jpg" alt=""></p><p>被解密的冷战时期照片主要集中在 Declassified Data 数据库中，我们展开它，勾选 Declass 1 (1996)，这一组数据库主要是长条状推扫式卫星照片，拍摄年代集中在 60 年代末期。Declass 2 (2002) 则大多是框幅式的照片，拍摄年代集中在 70 年代初。Declass 3 (2013) 则照片较少。</p><p><img src="/images/2017-12/kh3.png" alt=""></p><p>我们以 Declass 1 (1996) 为例。点击 Additional Criteria 进入下一步，然后来选择一些参数进行进一步筛选。因为不是所有的照片都提供免费下载，而且分辨率较低的照片没有必要去看，因此我们通过设置把需要付费和低分辨率的照片剔除掉。如图，我们将 Camera Resolution 限定为 Stereo High，将 Download Available 限定为 Yes，这样我们就可以直接筛选出高清、可下载的照片了。点击 Results 来获得结果。</p><p><img src="/images/2017-12/kh4.png" alt=""></p><p>如下图所示，在左侧列表中我们看到了筛选结果，列表中会显示每一个照片的拍摄时间等信息。</p><p><img src="/images/2017-12/kh5.png" alt=""></p><p>每一个搜索结果上都有一个工具栏。其中，点击脚印图标可以获取该照片在地球上的位置（照片覆盖范围）。比如下图中，我点选了两张图片的脚印图标，就可以预览显示他们分别覆盖了地球上的哪块区域。</p><p><img src="/images/2017-12/kh6.jpg" alt=""></p><p>这样的好处是，如果发现你需要搜索的区域和该照片仅仅是有一丁点儿交集，那么就可以优先下载其他的照片了，因为在区域的边界处，照片总是不那么清晰，尤其是需要查看的区域出现在照片两端时，镜头畸变会造成图片极为不清晰。<br>另外值得一提的是，照片覆盖区域只是一个参考，并不能精确地和右侧的谷歌地图重合。为了避免这种情况，你可以点击第四个图标。页面上会弹出窗口显示图片的 Meta Data，并且提供了一张低分辨率的缩略图。根据缩略图，你可以大致识别一些地理特征，并确定这张图片是不是你需要的，避免下载下来的照片和想象的有误差。<br>点击每一个项目第五个带绿色箭头的图标就可以下载了。每个照片包从几百 M 到几个 G 不等，十分庞大。有时候需要等待很长时间才能开始下载。<br>下载照片包以后进行解压。因为每张照片太大，大多数都被切分成了 3 至 4 张照片，每个文件依然有几百 M。需要注意的是，有的照片是南北相反的，需要通过手动进行翻转。<br>在我首次打开这些资料时，我比较好奇在没有发现巨磁阻效应的年代，美帝如何保存和传输的这些资料，毕竟磁带啥的并不现实。结果事实证明我还是 too young，美帝的间谍卫星直接拍照保存到胶片上，然后将胶片仓抛回地球，而这些数码图片都是后来重新扫描的。依靠胶片而非无线电传输数据的间谍卫星工作寿命都非常有限，例如初代的锁眼侦查卫星。</p><p>参考文章：<a href="https://zhuanlan.zhihu.com/p/30953275" target="_blank" rel="noopener">如何下载 50 年前自己家乡的高清卫星照片</a></p><p>更多信息可以参考维基百科：<a href="https://en.wikipedia.org/wiki/Key_Hole" target="_blank" rel="noopener">Key Hole</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript 运算符</title>
      <link href="/2017-12/JavaScript%E8%BF%90%E7%AE%97%E7%AC%A6/"/>
      <url>/2017-12/JavaScript%E8%BF%90%E7%AE%97%E7%AC%A6/</url>
      
        <content type="html"><![CDATA[<p>按优先级排列：</p><table><thead><tr><th>运算符</th><th>描述</th></tr></thead><tbody><tr><td>. [] ()</td><td>字段访问、数组下标、函数调用以及表达式分组</td></tr><tr><td>++ – - ~ ! delete new typeof void</td><td>一元运算符、返回数据类型、对象创建、未定义值</td></tr><tr><td>* / %</td><td>乘法、除法、取模</td></tr><tr><td>+ - +</td><td>加法、减法、字符串连接</td></tr><tr><td>&lt;&lt; &gt;&gt; &gt;&gt;&gt;</td><td>移位</td></tr><tr><td>&lt; &lt;= &gt; &gt;= instanceof</td><td>小于、小于等于、大于、大于等于、instanceof</td></tr><tr><td>== != === !==</td><td>等于、不等于、严格相等、非严格相等</td></tr><tr><td>&amp;</td><td>按位与</td></tr><tr><td>^</td><td>按位异或</td></tr><tr><td>&#124;</td><td>按位或</td></tr><tr><td>&amp;&amp;</td><td>逻辑与</td></tr><tr><td>&#124;&#124;</td><td>逻辑或</td></tr><tr><td>?:</td><td>条件</td></tr><tr><td>= oP=</td><td>赋值、运算赋值</td></tr><tr><td>,</td><td>多重求值</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>近期完成的数个游戏及应用</title>
      <link href="/2017-12/%E8%BF%91%E6%9C%9F%E5%AE%8C%E6%88%90%E7%9A%84%E6%95%B0%E4%B8%AA%E6%B8%B8%E6%88%8F%E5%8F%8A%E5%BA%94%E7%94%A8/"/>
      <url>/2017-12/%E8%BF%91%E6%9C%9F%E5%AE%8C%E6%88%90%E7%9A%84%E6%95%B0%E4%B8%AA%E6%B8%B8%E6%88%8F%E5%8F%8A%E5%BA%94%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>最近这段时间，博主沉迷编程，除了课内的作业需要肝 DDL 之外，也做了一些娱乐项目。下面一一道来。</p><h2 id="生命游戏"><a href="#生命游戏" class="headerlink" title="生命游戏"></a>生命游戏</h2><p>康威生命游戏（Conway’s Game of Life）是英国数学家约翰 · 何顿 · 康威在 1970 年发明的细胞自动机。它最初于 1970 年 10 月在《科学美国人》杂志上马丁 · 葛登能的『数学游戏』专栏出现。</p><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>生命游戏是一个零玩家游戏。它包括一个二维矩形世界，这个世界中的每个方格居住着一个活着的或死了的细胞。一个细胞在下一个时刻生死取决于相邻八个方格中活着的或死了的细胞的数量。如果相邻方格活着的细胞数量过多，这个细胞会因为资源匮乏而在下一个时刻死去；相反，如果周围活细胞过少，这个细胞会因太孤单而死去。实际中，玩家可以设定周围活细胞的数目怎样时才适宜该细胞的生存。如果这个数目设定过高，世界中的大部分细胞会因为找不到太多的活的邻居而死去，直到整个世界都没有生命；如果这个数目设定过低，世界中又会被生命充满而没有什么变化。<br>实际中，这个数目一般选取 2 或者 3；这样整个生命世界才不至于太过荒凉或拥挤，而是一种动态的平衡。这样的话，游戏的规则就是：当一个方格周围有 2 或 3 个活细胞时，方格中的活细胞在下一个时刻继续存活；即使这个时刻方格中没有活细胞，在下一个时刻也会『诞生』活细胞。</p><h3 id="规则"><a href="#规则" class="headerlink" title="规则"></a>规则</h3><p>根据前面的描述，在生命游戏中，对于任意细胞，一种典型的规则如下：</p><ul><li>每个细胞有两种状态——存活或死亡，每个细胞与以自身为中心的周围八格细胞产生互动。</li><li>当前细胞为存活状态时，当周围低于 2 个存活细胞时，该细胞变成死亡状态。（模拟生命数量稀少）</li><li>当前细胞为存活状态时，当周围有 2 个或 3 个存活细胞时，该细胞保持原样。</li><li>当前细胞为存活状态时，当周围有 3 个以上的存活细胞时，该细胞变成死亡状态。（模拟生命数量过多）</li><li>当前细胞为死亡状态时，当周围有 3 个存活细胞时，该细胞变成存活状态。（模拟繁殖）</li></ul><h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><p>可以把最初的细胞结构定义为种子，当所有在种子中的细胞同时被以上规则处理后，可以得到第一代细胞图。按规则继续处理当前的细胞图，可以得到下一代的细胞图，周而复始。<br>在这个游戏中，还可以设定一些更加复杂的规则，例如当前方格的状况不仅由父一代决定，而且还考虑祖父一代的情况。玩家还可以作为这个世界的『上帝』，随意设定某个方格细胞的死活，以观察对世界的影响。<br>在游戏的进行中，杂乱无序的细胞会逐渐演化出各种精致、有形的结构；这些结构往往有很好的对称性，而且每一代都在变化形状。一些形状已经锁定，不会逐代变化。有时，一些已经成形的结构会因为一些无序细胞的『入侵』而被破坏。但是形状和秩序经常能从杂乱中产生出来。<br>这个游戏被许多计算机程序实现了。Unix 世界中的许多黑客喜欢玩这个游戏，他们用字符代表一个细胞，在一个计算机屏幕上进行演化。比较著名的例子是，GNU Emacs 编辑器中就包括这样一个小游戏。<br>查看更多信息：<a href="http://www.conwaylife.com" target="_blank" rel="noopener">ConwayLife.com</a><br>多平台元胞自动机模拟软件 Golly，下载地址：<a href="https://sourceforge.net/projects/golly" target="_blank" rel="noopener">Golly - sourceforge</a><br>访问地址：<a href="https://galaxymimi.com/app/life.html" target="_blank" rel="noopener">主站 &gt; 应用 &gt; 小游戏 &gt; Life</a></p><a id="more"></a><h2 id="Bad-Apple"><a href="#Bad-Apple" class="headerlink" title="Bad Apple!!"></a>Bad Apple!!</h2><p>这是一个二次开发的项目，能够在 HTML 页面中播放 Bad Apple!! 字符画。实现方式比较 naive，通过 Ajax 请求不断地获取新画面，然后播放出来，并与音轨保持同步。可以改进的地方有很多，比如请求的文件含有大量相同符号，可以进行压缩来增加缓冲效率。<br>访问地址：<a href="https://galaxymimi.com/app/life.html" target="_blank" rel="noopener">主站 &gt; 应用 &gt; 魔改项目 &gt; BadApple</a></p><h2 id="Play-Coins"><a href="#Play-Coins" class="headerlink" title="Play Coins!"></a>Play Coins!</h2><p>这个弹硬币的游戏来自于高中时在教室里进行的娱乐活动。本项目于 2017 年 11 月 23 日晚开始构思，11 月 24 日完成了框架，包括物理引擎的相关计算，11 月 25 日完成了跨平台适配，11 月 26 日加入了背景音乐，修复了大量 bug，11 月 27 日加入了欢呼音效和音频的跨浏览器适配。现在，它已经可以流畅地在全平台运行了。<br>访问地址：<a href="https://galaxymimi.com/app/coin/" target="_blank" rel="noopener">主站 &gt; 应用 &gt; 原创游戏 &gt; Coin</a></p><h2 id="任意位整数计算器"><a href="#任意位整数计算器" class="headerlink" title="任意位整数计算器"></a>任意位整数计算器</h2><p>这个项目被命名为 MHC - MHC Hyper Calculator，是一个用 C 语言编写的计算器，作为本学期计算概论课程大作业的成果。该计算器支持任意大数字的加减乘除求余乘方阶乘运算，拓展功能则是 RSA 加密和中文输出。<br>虽然在这个项目上耗费了不少时间，算是摸清楚了 RSA 算法的门道，但由于只是完成作业，就不把项目源代码贴出来献丑了。这种重复造轮子的工作，还是应该以提升自己的水平为主要目的。</p><p>拓展阅读：<br><a href="https://www.guokr.com/article/439770" target="_blank" rel="noopener">【果壳网专访】斯蒂芬 · 沃尔夫勒姆：宇宙的本质是计算</a><br><a href="https://blog.csdn.net/qmickecs/article/details/39676655" target="_blank" rel="noopener">RSA 算法之实现篇</a></p>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>游戏圈的鄙视链</title>
      <link href="/2017-12/%E6%B8%B8%E6%88%8F%E5%9C%88%E7%9A%84%E9%84%99%E8%A7%86%E9%93%BE/"/>
      <url>/2017-12/%E6%B8%B8%E6%88%8F%E5%9C%88%E7%9A%84%E9%84%99%E8%A7%86%E9%93%BE/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/2017-12/IMG_4370.jpg" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 电子游戏 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>潘建伟院士莅临我校讲座</title>
      <link href="/2017-12/%E6%BD%98%E5%BB%BA%E4%BC%9F%E9%99%A2%E5%A3%AB%E8%8E%85%E4%B8%B4%E6%88%91%E6%A0%A1%E8%AE%B2%E5%BA%A7/"/>
      <url>/2017-12/%E6%BD%98%E5%BB%BA%E4%BC%9F%E9%99%A2%E5%A3%AB%E8%8E%85%E4%B8%B4%E6%88%91%E6%A0%A1%E8%AE%B2%E5%BA%A7/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/2017-12/IMG_4364.jpg" alt=""></p><p>2017 年 12 月 3 日晚，潘建伟院士莅临我校，向数百位学校师生以及大量民间科学爱好者作了关于量子通信的报告。在听众提问环节，众多民间科学爱好者抛出了诸如『由量子计算机和人工智能能否计算暗物质』『我去年 9 月就听了您的报告，还送了您一本（我写的民科）书，您评价如何』『听到您的讲座，我很欣慰，您能否详细介绍……』这样的问题，讲堂里充满了快活的空气。潘院士始终面带微笑，与民间科学爱好者们谈笑风生，并耐心地解答他们提出的问题。看来，中国基础教育还有很长的路要走。</p>]]></content>
      
      
      <categories>
          
          <category> 物理 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>炉石传说真尼玛好玩</title>
      <link href="/2017-11/%E7%82%89%E7%9F%B3%E4%BC%A0%E8%AF%B4%E7%9C%9F%E5%B0%BC%E7%8E%9B%E5%A5%BD%E7%8E%A9/"/>
      <url>/2017-11/%E7%82%89%E7%9F%B3%E4%BC%A0%E8%AF%B4%E7%9C%9F%E5%B0%BC%E7%8E%9B%E5%A5%BD%E7%8E%A9/</url>
      
        <content type="html"><![CDATA[<p>炉石传说真尼玛好玩！</p><p><img src="/images/2017-11/AstralDruid.jpg" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 电子游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 炉石传说 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>苏东政治笑话</title>
      <link href="/2017-11/%E8%8B%8F%E4%B8%9C%E6%94%BF%E6%B2%BB%E7%AC%91%E8%AF%9D/"/>
      <url>/2017-11/%E8%8B%8F%E4%B8%9C%E6%94%BF%E6%B2%BB%E7%AC%91%E8%AF%9D/</url>
      
        <content type="html"><![CDATA[<p>此处的『苏东』，指的是苏联和东欧。这些笑话的出处，据称很大一部分来源于美帝对苏修的抹黑；而最早从六十年代中苏交恶时开始在国内流传。博主最近在知乎上看到了相关问题后，觉得极为有趣，于是将这些内容整理了下来。<br>例行姓名扫盲：</p><ul><li>弗拉基米尔同志 = 弗拉基米尔 · 伊里奇 · 乌里昂诺夫（列宁）</li><li>约瑟夫同志 = 约瑟夫 · 维萨里昂诺维奇 · 朱加什维利（斯大林）</li><li>尼基塔同志 = 尼基塔 · 谢尔盖耶维奇 · 赫鲁晓夫</li><li>列昂尼德同志 = 列昂尼德 · 伊里奇 · 勃列日涅夫</li><li>尤里同志 = 尤里 · 弗拉基米罗维奇 · 安德罗波夫</li><li>康斯坦丁同志 = 康斯坦丁 · 乌斯季诺维奇 · 契尔年科</li><li>米哈伊尔同志 = 米哈伊尔 · 谢尔盖耶维奇 · 戈尔巴乔夫</li><li>拉甫连季同志 = 拉甫连季 · 巴甫洛维奇 · 贝利亚</li><li>鲍里斯 = 鲍里斯 · 尼古拉耶维奇 · 叶利钦</li><li>约翰先生 = 约翰 · 菲茨杰拉德 · 肯尼迪</li><li>吉米先生 = 吉米 · 卡特</li><li>罗纳德先生 = 罗纳德 · 里根</li><li>英迪拉先生 = 英迪拉 · 甘地</li><li>安瓦尔先生 = 安瓦尔 · 萨达特</li></ul><p>1）<br>一位公民打电话到亚美尼亚电台问主持人：『共产主义到底是艺术还是科学？』<br>主持人说：『我也不清楚，但我肯定不是科学。』<br>『为什么？』<br>『如果是科学的话，他们应该拿狗做试验。』</p><p>2）<br>斯大林的权威<br>斯大林在大会上引经据典地说：『马克思和列宁说一加一等于二，而托洛茨基和布哈林说一加一不等于三。是托洛茨基和布哈林说的对呢？还是马克思和列宁说得对呢？（下面听众一脸疑惑）毫无疑问，是马克思和列宁说的对！』（台下热烈鼓掌）『托洛茨基和布哈林是帝国主义派来的间谍，这些说一加一不等于三的人多么多么无耻啊……』</p><p>3）<br>有个人向尼基塔同志汇报说：『现在大剧院正上演一个剧，里面有您出现，每当您一出场，下面就热烈鼓掌。』尼基塔同志听了以后非常得意。有一天他买了一张普通票，去看这个剧，他陷入了沉思，忘记了鼓掌，这时旁边有人推了他一把，紧张地说：『哎！你为什么不鼓掌？不要命啦？！』</p><p>4）<br>在苏共二十三次代表大会上，列昂尼德同志作报告，他问：『我们这里有没有敌人？』<br>一个人回答：『有一个，他坐在第四排第十八号位子上。』<br>『为什么他是敌人？』<br>『因为列宁说过「敌人是不会打瞌睡的」，而我发现全场只有他一个人没有打瞌睡！』</p><p>5）<br>苏联偷盗现象严重，人民不满。有人问：『到什么时候才没有偷盗现象呢？』有人回答：『到共产主义就没有人偷了，因为在社会主义一切都被偷光了。』</p><p>6）<br>美术馆里有一幅描写亚当和夏娃的画。<br>一个英国人看了，说：『他们一定是英国人，男士有好吃的东西就和女士分享。』<br>一个法国人看了，说：『他们一定是法国人，情侣裸体散步。』<br>一个苏联人看了，说：『他们一定是苏联人，他们没有衣服，吃得很少，却还以为自已在天堂！』</p><a id="more"></a><p>7）<br>一个莫斯科市民的鹦鹉丢了。这是只会骂人的鹦鹉，要是落到克格勃的手里可糟了。这人便在报纸上发表了一篇声明：『本人遗失鹦鹉一只。另，本人不同意它的政治观点。』</p><p>8）<br>列宁的夫人克鲁普斯卡娅曾经当面指出斯大林的专制独裁统治，令后者气急败坏，斯大林说：『你再说，我就宣布你不是列宁的妻子！』</p><p>9）<br>弗拉基米尔同志、约瑟夫同志、尼基塔同志、列昂尼德同志、米哈伊尔同志一起坐火车旅行。<br>铁轨到了尽头，火车停下。<br>弗拉基米尔同志号召：『立即发动无产者搞星期六义务劳动，修铁路，直通共产主义！』<br>约瑟夫同志抽着烟斗，严肃地下令：『给我从西伯利亚调 100 万劳改犯来，修不通铁路，统统枪毙。』<br>尼基塔同志敲着皮鞋喊：『把后面的铁路接到前面去，火车继续开！』<br>列昂尼德同志拉上了窗帘，然后对车上所有人说：『同志们，不如拉上所有的窗帘，坐在座位上自己摇动身体，做出列车还在前进的样子……！』<br>米哈伊尔同志摸了摸宽大的前额说：『同志们，管他火车开到哪里，只要把沿途标上「社会主义」的牌子就行了！』</p><p>10）<br>一个老师愁眉苦脸，贝利亚同志关切的询问：『怎么啦？我能帮您什么忙？』<br>老师说：『拉甫连季同志，您帮不上忙，您看，现在的孩子都怎么啦：今天我问柳芭「列夫 · 托尔斯泰是怎么死的？」她却说「不是我干的。」我问萨沙，他也说「不是我干的。」我问尼古拉，回答也一样！』<br>第二天，贝利亚同志找到老师：『您可以放心了，他们已经招认他们杀了列夫 · 托尔斯泰。』</p><p>11）<br>列昂尼德同志去新德里拜访英迪拉先生，发现阿三随地小便，窃笑不已。<br>英迪拉先生十分不快，去莫斯科回访的时候便满大街找，不禁感叹苏联人民素质高，但又很不甘心。皇天不负，英迪拉先生终于发现有个人在路边浇墙呢，大喜。<br>列昂尼德同志恼羞成怒，下令追查，并回复说——<br>『那人是印度驻苏大使。』</p><p>12）<br>一个英国人，一个法国人，一个苏联人在一起聊天。<br>英国人：最幸福的事情就是冬天晚上回家，穿着羊毛裤坐在壁炉前面。<br>法国人：你们英国人就是古板，最幸福的事情是和一个金发女郎一起去地中海度假，然后我们好和好散。<br>苏联人：最幸福的事情就是半夜有人敲门，开门后：<br>『康斯坦丁，你被捕了。』<br>『你弄错了，康斯坦丁在隔壁。』</p><p>13）<br>一天米哈伊尔同志因私外出，嫌司机车开的太慢，催促了好几次。但因交通拥挤，还是不能让他满意。最后米哈伊尔同志一把抢过方向盘，把司机推到后面，自己开起来。他一路横冲直撞，造成一片混乱。有人打电话向交通局长反映。<br>局长大怒，质问该地段交警。<br>局长：『看到肇事者没有？』<br>警察：『看到了。』<br>局长：『为什么不逮捕他？』<br>警察：『我不敢？』<br>局长：『为什么？』<br>警察：『他的官很大。』<br>局长：『有多大？』<br>警察：『不知道，反正他的司机是戈尔巴乔夫。』</p><p>14）<br>米哈伊尔同志视察农场，看到猪儿乖乖，一时兴起站在猪中间照了张像。<br>待到报纸准备发表时，编辑为照片的标题犯了难——<br>『戈尔巴乔夫同志和猪在一起』，不好；<br>『猪和戈尔巴乔夫同志在一起』，也不好；<br>……<br>报纸出版后，照片下的说明文字是——<br>『左起第三位是戈尔巴乔夫同志。』</p><p>15）<br>列昂尼德同志和吉米先生在瑞士开会，休息时间两个人很无聊，就开始比谁的保镖更忠诚。吉米先生把自己的保镖叫进来，推开窗（外面是 20 层楼）说：<br>『约翰，从这里跳下去！』<br>约翰哭着说：<br>『您怎么能这样呢，我还有老婆孩子呐。』<br>吉米先生被感动了，流着泪说是自己不对，叫约翰走了，然后轮到列昂尼德同志，他也大声叫自己的保镖伊万。<br>『伊万，从这里跳下去！』<br>伊万二话不说就要往下跳，吉米先生一把抱住他说：<br>『你疯了？跳下去会死的！』<br>伊万一边挣扎着要跳下去，一边说：<br>『放开我，混蛋，我还有老婆孩子呐。』</p><p>16）<br>吉米先生到苏联访问列昂尼德同志，列昂尼德同志陪他参观『建设的伟大成就』，并且得意的说：『到了下一个五年计划，每个苏联家庭都可以拥有一架私人飞机！』<br>吉米先生惊讶地问：『他们要飞机干什么呢？』<br>列昂尼德同志说：『当然有用啊…… 譬如你在莫斯科听说列宁格勒开始供应面包了，你可以马上开着飞机赶去排上队。』<br>吉米先生：『……』</p><p>17）<br>弗拉基米尔同志快去世了，叫赶快把继承人斯大林召进克里姆林宫来，临终有几句话要嘱托。<br>『不瞒你说，我还有一个隐忧啊，斯大林同志。』<br>『说吧，亲爱的弗拉基米尔同志。』斯大林专心地听着。<br>『那就是，人们会跟你走吗？不知你想过了没有？』<br>『他们一定会跟我走的。』斯大林强调说，『一定会！』<br>『但愿如此。』弗拉基米尔同志说，『我只是担心，万一他们不跟你走，你怎么办？』<br>『没问题！』斯大林答道：『那他们就得跟你走！』</p><p>18）<br>尼基塔同志和约翰先生交谈，各自吹嘘，约翰先生说：『美国医学发达，有种药片死人吃了可以复活。』尼基塔同志说：『苏联体育发达，有人十分钟可以从莫斯科跑到华盛顿。』约翰先生要求兑现，尼基塔同志慌了手脚，召集委员们商量对策。<br>卡冈诺维奇说：『这很好办，你先让肯尼迪把药片拿来，让斯大林同志吃了；斯大林同志如果真的复活，那么你用不了五分钟就可以从苏联跑到美国。』</p><p>19）<br>尼基塔同志的汽车被一头牛挡住了，怎么也赶不走，尼基塔同志便下车对牛说：『你再不走，我就把你送到集体农庄去。』牛听了便一溜烟的跑开了。</p><p>20）<br>鲍里斯 · 叶利钦的演讲：<br>『多年来，在戈尔巴乔夫的领导下，我们的祖国俄罗斯一直处在悬崖的边缘。现在，我终于可以自豪地宣布，赶跑了戈尔巴乔夫，我们伟大的俄罗斯终于向前迈出了一大步。』</p><p>21）<br>尼基塔同志喜欢以农业专家自居。一次参观某集体农庄养猪场，发现一头病歪歪的小猪。农庄主席解释说这猪从小营养不良，养僵了。<br>尼基塔同志想想自己幼年当猪倌的经历，当即说，『让我把这猪抱到克里姆林宫去，保证两个月养肥还给你们。』<br>尼基塔同志回家怎么摆弄那猪也不长。情急下决定把猪处理掉。他在傍晚时分将猪放入婴儿车，准备推到莫斯科河边抛掉。谁知半路上偏偏遇上米高扬同志。<br>『尼基塔同志，散步哪。』<br>『啊…… 出来走走……』<br>『这是谁啊？』<br>『哦，是我…… 小外孙。』<br>『我看看。哦，多好的孩子，长得真像他外祖父！』</p><p>22）<br>《神曲》的作者但丁决定下地狱体验一下他诗中的生活。在地狱里犯人们有淹在血泊里的，有的被火烧烤着。但丁突然发现一个最可恶的坏蛋下面的血泊只淹到膝盖。但丁十分奇怪，上前一看，认出了是贝利亚。<br>但丁问：『看样子，你挺舒服的啊。为什么血只淹到你的膝盖以下呢？拉甫连季 · 巴甫洛维奇？』<br>贝利亚得意的回答道：『我是站在约瑟夫 · 维萨里昂诺维奇 · 斯大林同志的肩膀上呢！』</p><p>23）<br>理查德先生访问苏联。在记者招待会上，理查德先生想借机宣扬美国式的民主，于是说：『在我们美国言论自由，任何人都可以在白宫前大骂：「理查德 · 米尔豪斯 · 尼克松是王八蛋！」肯定没有警察来抓他。』<br>列昂尼德同志不动声色的说：『在苏联同样也是言论自由，任何人也都可以在克里姆林宫前大骂：「理查德 · 米尔豪斯 · 尼克松是王八蛋」同样也没有警察来抓他！』</p><p>24）<br>赫鲁晓夫在揭露斯大林同志的暴行时，台下有人递条子上去。赫鲁晓夫同志当场宣读了条子的内容：『当时你在干什么？』。然后厉声喝道：『这是谁写的，请站出来！』<br>连问三次，台下一直没有人站出来。<br>赫鲁晓夫于是说道：『现在让我来回答你吧，当时我就坐在你的位置上。』</p><p>25）<br>一天列昂尼德同志在克里姆林宫的走廊上，正好撞上了安德罗波夫。<br>『早上好列昂尼德 · 伊里奇！我有个好谜语，看你猜不猜得出？我爹的儿子但又不是我本人，这会是谁？』<br>『嗯…………』，列昂尼德同志绞尽脑汁就是答不上来，『这条谜倒挺有水平的，算了！我猜不上来。』<br>『我兄弟！』<br>列昂尼德同志一听，果然有理，非常欣赏，夸奖了安德罗波夫同志聪明。<br>再往前没走多远，列昂尼德同志又碰上了前来汇报工作的戈尔巴乔夫同志，他于是把刚从尤里同志那儿听来的谜语拿来在米哈伊尔同志面前卖弄一番，问道：『米哈伊尔同志，你来听这个谜语如何？我爹的儿子但又不是我本人，这会是谁？』<br>没想到戈尔巴乔夫也答不上来。列昂尼德同志顿时得意非凡地大叫：『哈哈，你真他妈笨！连尤里 · 弗拉基米罗维奇的兄弟都不知道！』</p><p>26）<br>尤里 · 安德罗波夫执政仅一年零三个月，他的大部分时间是在医院度过的，他患有严重的肾病。康斯坦丁同志同志终于明白了为什么尤里同志登上列宁墓讲话时，前面总有两个麦克风。<br>他神秘地对米哈伊尔同志说：『你知道为什么尤里同志前面总有两个麦克风吗？一个是讲话用的，而另一个是给他输送氧气的。』</p><p>27）<br>伊万看电视，是列昂尼德同志在演讲。伊万觉得无聊，换了一个，还是列昂尼德同志在演讲，又换一个，还是他。伊万一连拨了几十个台，最后累了，准备关电视。这时候电视画面变成了克格勃的尤里同志，怒气冲冲地叫：『你再敢换？再敢换？再换判你 10 年大牢！』</p><p>28）<br>集体农庄庄员伊万在河里捉到一条大鱼，高兴的回到家里和老婆说：『看，我们有炸鱼吃了！』<br>『没有油啊。』<br>『那就煮！』<br>『没锅。』<br>『烤鱼！』<br>『没柴。』<br>伊万气死了，走到河边把鱼扔了回去。那鱼在水里划了一个半圆，上身出水，举起右鳍激动地高呼：<br>『斯大林万岁！』</p><p>29）<br>来了一个格鲁吉亚代表团。他们被斯大林接见，谈话，然后离开，斯大林开始找他的烟斗，找不到。<br>他叫贝利亚来：『拉甫连季 · 巴甫洛维奇，去追代表团，找找谁拿了我的烟斗。』<br>贝利亚赶忙去追代表团。<br>五分钟后，斯大林在一堆纸下找到了他的烟斗。<br>他叫贝利亚——『瞧，拉甫连季 · 巴甫洛维奇，我找到我的烟斗了。』<br>『太晚了。』贝利亚说，『代表团中的半数已经承认他们拿了你的烟斗，并且加入了「利用偷烟斗进行暗杀活动的托洛茨基组织」，而另外一半则在审讯中死掉了。』</p><p>30）<br>苏联 30 年代肃反扩大化时期。内务人民委员部的一间牢房里关了三个人，彼此间谈起坐牢的原因。<br>第一个人说：我是因为批评了拉狄克；<br>第二个人说：我是因为支持了拉狄克；<br>第三个人说：我就是卡尔 · 拉狄克。</p><p>31）<br>勃列日涅夫，杜布切克，艾登和尼克松 4 人乘坐气球。<br>气球漏气了，抬不动 4 人，开始下坠，必须有人牺牲自己跳出。<br>美国总统喊了声『为了自由世界！』，然后跳了出去。<br>气球下坠暂缓，但过一会儿漏气更多，下坠又加快，必须再跳出 1 人。<br>于是英国首相喊：『为了女王陛下！』，也跳了出去。<br>暂缓一会儿又不行了，于是列昂尼德同志喊道：『为了社会主义大家庭！』说着就把杜布切克扔出去了。</p><p>32）<br>一个苏联人在公众场合对着列昂尼德同志的肖像骂了句『白痴』，被克格勃逮捕，判了 5 年徒刑，他的罪名是：侮辱党和国家领导人判刑 1 年，泄露党和国家机密判刑 4 年。<br>不过听说他很快就被释放了，因为自从列昂尼德同志在联合国发表演说之后，那就不再是党和国家机密了。</p><p>33）<br>演讲人在做关于五年计划成就的报告：在列宁格勒新建了一个电站。<br>大厅里有人说：『我刚从那回来，那没有什么电站。』<br>演讲者没有回答，继续说：『在斯大林格勒已建成了一个化学厂。』<br>大厅里有人说：『一周前我在那里，那里没有什么化学厂。』<br>演讲人：『同志们，你们最好少东游西逛的，要多看一些报纸！比如《真理报》！』</p><p>34）<br>越战时期，河内物资奇缺，向苏联求救。<br>苏联电：勒紧腰带。<br>河内回电：请给腰带。</p><p>35）<br>一位美国历史学家和一位俄罗斯历史学家，讨论谁领导二十世纪的前半世纪。<br>『我投票赞成胡佛先生，』美国人说，『他尝试着教导我们美国人不再酗酒！』<br>『那个没什么了不起！』俄国人说，『我选择斯大林，他尝试教我们俄国人不再吃饭。』</p><p>36）<br>电报：莫斯科、克里姆林宫，列宁收。列宁同志，请帮助贫穷的犹太人吧！——拉宾诺维奇。第二天，拉宾诺维奇被带到了应去的地方。<br>问：你大脑还正常吗？你不知道，列宁很久以前就死了？<br>拉宾诺维奇：哼，你们总是这样，如果你需要，那他就是讲永生的；如果贫穷的犹太人需要，他就死了。<br>拉宾诺维奇看着标语：列宁死了，但是他的事业还活着。<br>拉宾诺维奇说：最好是列宁活着。</p><p>37）<br>一个苏联克格勃特工和一个美国中情局特工互相吹嘘各自的机构是如何的杰出。<br>那个克格勃特工首先发言说，『我们拥有你们美国过去 15 年里所有导弹发射的详细数据。』<br>中情局特工说：『这不算什么。我们中情局掌握着你们苏联未来 15 年里所有当选的中央委员名单。』</p><p>38）<br>三个囚犯被送到了古拉格。他们开始谈论为什么他们会来到这里。<br>『我来到这儿，是因为我上班总是迟到五分钟，他们指控我是在（以怠工来）破坏。』第一个说。<br>『我来到这儿，是因为我上班总是早到五分钟，他们指控我是间谍。』第二个说。<br>『我来到这儿，是因为我上班总是准时赶到。』第三个说，『他们指控我拥有一个西方制的手表。』</p><p>39）<br>当年的捷克斯洛伐克政府中，设立了一个『海军部』，苏联老大哥就对捷克人说：『你们是内陆国家，设什么海军部？』<br>捷克人回答说：『你们不是也设了文化部吗？』</p><p>40）<br>列昂尼德同志：『同志们，美国人登上了月球，我们不能再等了，党决定让你们上太阳。』<br>宇航员：『总书记同志，我们会被烧死的。』<br>列昂尼德同志：『没关系，同志们，党都替你们想好了，你们晚上去。』</p><p>41）<br>莫斯科地铁上：<br>『请问您是在克格勃工作的同志吗？？』<br>『不是。』<br>『那您有没有亲戚或朋友在克格勃工作呢？』<br>『没有。』<br>『那您是否跟克格勃有些交往或联系？』<br>『没有，你要干嘛啊？』<br>『干嘛，他妈的，你踩着我的脚了！』</p><p>42）<br>二战中，一个英国兵、一个法国兵和一个苏联兵被德国人俘虏了。他们被判处死刑。<br>行刑前，德国士兵问他们还有什么最后的要求吗？<br>英国人说：『我要一杯啤酒。』他得到一杯啤酒。<br>法国人说：『我想要喝杯葡萄酒。』——他的要求也得到了满足。<br>轮到苏联人了，他说：『请狠命踢我的屁股。』两个膀大腰圆的德国兵过来，狠狠的把他踢出老远。说时迟，那时快，苏联人突然神勇爆发，挥拳打倒边上几个德国兵，夺得一挺机枪，把一群德国人全撂倒，然后三个人死里逃生。<br>逃跑的路上，英国人和法国人说：『为什么不早点动手啊？我们差点都被枪毙了！』<br>苏联人回答：『要是没人踢屁股，我们苏联人可什么也干不了！』</p><p>43）<br>列宁表明该如何管理国家；<br>斯大林表明该如何不管理国家；<br>赫鲁晓夫试图表明谁都能管理国家；<br>勃列日涅夫正在表明国家是根本不需要管理的。</p><p>44）<br>两男一女在沉船后沦落荒岛。<br>如果两个男的是西班牙人，他们会用决斗来决定谁拥有那个女人；<br>如果他们是法国人，一个是女人的丈夫，另一个是她的情人；<br>如果他们是苏联人，则会把报告书塞入瓶子，让水流把它漂回祖国，请上级指示他们谁可以娶她为妻。</p><p>45）<br>苏联某地出土了一具古尸，科学家们使尽浑身解数也没能鉴定出他的年代。这时候来了两个自称是克格勃的年轻人，二话不说把古尸架进了间小屋。不大工夫，年轻人出来拍拍手说『2235 年前的』，科学家们大骇，忙追问克格勃究竟掌握了什么高技术手段。<br>『这很简单。』年轻人整整衣服说，『他自己招了。』</p><p>46）<br>外国领导人要来参观莫斯科幼儿园，问小朋友：『你们国家领导人是谁？』<br>答：『北极熊！』<br>『你们国家最有名的动物呢？』<br>答：『勃烈日涅夫！』<br>『莫斯科哪个地方最高？』<br>『当然是五百三十三米高的奥斯坦基诺电视塔了！』<br>『不，是卢比扬卡广场上克格勃大楼的地下室。从那儿能看清全国每个角落的一举一动。』</p><p>47）<br>一个美国人刚从莫斯科机场出来，他想打听一下时间。这时从身旁走过一位莫斯科人，手里拎着个沉重的箱子，很吃力的样子。美国人拦住了他，问他当地时间。莫斯科人放下箱子，抬手看了看表，一口气报出来现在的时间然后还有气压、温度、湿度等信息。美国人很吃惊，问道：『这块表的功能可真多，是苏联的技术生产的吗？』，莫斯科人自豪地回答：『是的，是我们苏联技术制造的。』然后又吃力地重新拎起那个箱子接着说道『就是电池重了点。』</p><p>48）<br>列昂尼德同志在冬季奥运会上阅读讲话稿：<br>『O-O-O-O-O。』<br>『不，』他的助理向他低声道，『那是奥运会的图标。』</p><p>49）<br>谁能把大象装进冰箱里呢？超级政治家能够办到。<br>第一步：抓一只猫，让猫在强烈的政治攻击下承认自己是大象。<br>第二步：公布计划：生产一种能装进大象的冰箱，动员国民捐款。实际上并不生产。<br>第三步：收买证人，证明大象已经被装进冰箱里。<br>第四步：利用媒体优势反复强调『猫是大象的祖先』这一理论，以防后患。</p><p>50）<br>苏联健康委员会向列昂尼德同志建议：从即日起，我们不打算再使用老鼠做医学实验，取而代之的是来自于克格勃的志愿者，所列的理由主要有三：<br>一、由于粮食紧缺，直接影响到老鼠的生存。而我国目前的克格勃成员要比老鼠多得多；<br>二、实验人员在对克格勃志愿者下手时的罪恶感要比对老鼠下手时小得多；<br>三、无论你怎样努力，有些事情老鼠还是不会去做的，而对克格勃来说没有他们不能去做的事情。</p><p>51）<br>二次大战时，罗斯福，丘吉尔，及斯大林三位巨头在雅尔塔开会。罗斯福，丘吉尔处处被动，因此两人合计着想算计斯大林一把。<br>丘吉尔首先开腔：『昨天我作了一个梦，梦见自己成了地球的主宰！』<br>罗斯福也接着说：『昨天我也作了一个梦，梦见自己成了宇宙的主宰！』<br>两人说完后，得意地瞧着斯大林。<br>斯大林微微一笑，说道：『昨天我也作了一个梦，梦见自己既没有批准对丘吉尔先生的任命，也没有批准对罗斯福先生的任命。』</p><p>52）<br>莫斯科卢比扬卡 9 号大楼外。<br>一个愁眉苦脸的男子一边走路一边自言自语：『肥皂没有，电池没有，袜子也没有……』<br>这时旁边走过来一个看起来象是便衣的人小声对他说：『公民同志，您要是再这样诋毁我们伟大的社会主义国家，我就要拿手枪把敲你的脑袋了！』<br>那个男子看看便衣警察，继续自言自语：『看看，连子弹也没有……』</p><p>53）<br>苏联社会变化在于，在斯大林时代，当有陌生人敲门的时候，屋子里的人都停止说政治笑话而把酒拿出来，到了 70 年代以后，还有陌生人敲门的话，他们会开始说政治笑话而把酒藏起来。</p><p>54）<br>苏联生产的彩电常常发生爆炸事故。<br>一次彩电爆炸事故发生以后，一个现场采访的记者气愤地说：<br>『这种彩电应该让敌人看！！』</p><p>55）<br>亚历山大、凯撤、拿破仑做为贵宾，参加红场阅兵。<br>我要是有苏联的坦克，我将是战无不胜的！——亚历山大说。<br>我要是有苏联的飞机，我将征服全世界！——凯撤说。<br>我要是有《真理报》，全世界现在也不会知道滑铁卢！——拿破仑说</p><p>56）<br>问：拉宾诺维奇，你经常读报纸吗？<br>答：当然，要不我怎么知道我们有幸福的生活？</p><p>问：消息报和真理报有什么区别？<br>答：在真理报上没有消息，在消息报上没有真理。<br>（注：《真理报》和《消息报》分别相当于苏联的《人民日报》和《参考消息》。）</p><p>问：工兵和报纸的编辑有什么共同之处？<br>答：他们不论是谁，一生只能错一次。</p><p>问：报纸和广播什么最有用？<br>答：当然是报纸。你不能用电视擦桌子，你不能用电视擦屁股。</p><p>问：可以把汽车卷到报纸里去吗？<br>答：要是上面有赫鲁晓夫同志的话。</p><p>57）<br>病人在挂号的地方要找眼耳科医生，人们对她说只有耳鼻喉科医生和眼科医生。<br>但是病人还是坚持说：『我还是想要耳科医生。』<br>医生问：『你到底是哪里不正常？』<br>病人：『看见的是一个，听见的又是一个。』</p><p>58）<br>问：广播电台总说，我们的食品充足，可是冰箱里却总是空的，这是为什么？<br>答：把广播连到冰箱上就好了。</p><p>59）<br>精神病院里播放着赫鲁晓夫的演讲。讲完一段，所有人都热烈鼓掌，只有一个人站着不动。<br>旁人问道：『你为什么不鼓掌？』<br>答：『因为我是医生。』</p><p>60）<br>问：悲观主义者和乐观主义者有什么区别？<br>答：悲观主义者是信息灵通的乐观主义者，而乐观主义者是经过很好引导的悲观主义者。</p><p>61）<br>问：为什么有人提出合理化建议，要在新型的电视机上安装活动刷，像汽车的风挡玻璃上的雨刷一样。<br>答：这是因为总是有人往上吐痰。</p><p>62）<br>问：英国的情报人员是怎样在伦敦抓到苏联间谍的，而这个间谍曾经认为根本不可能抓到？<br>答：我们只是得到命令要抓这样一个人，他从公共卫生间里出来的时候会一边走一边系裤扣。</p><p>63）<br>问：听说莫斯科奥运村的房子是由特殊材料制成的，请说一下，它的成份是什么？<br>答：是的，10% 的水泥和 90% 的麦克风。</p><p>64）<br>苏联举行十月革命节阅兵，沿着大街开来了炮兵、机械化步兵、坦克、自行火炮、战术导弹、战略核导弹，破坏力一个比一个大，可队列末尾却是两个带公文包的矮子。<br>在看台上勃列日涅夫惊讶地问：『这两个人破坏力比核导弹还大！他们是什么人？』<br>安德罗波夫说：『不是我的人。』<br>格列奇科说：『没见过他们。』<br>柯西金低声答道：『他们是国家计划经济委员会的……』<br>（注：安德罗波夫当时系克格勃主席，格列奇科系国防部长，柯西金系部长会议主席——即总理。）</p><p>65）<br>问：妻子怎样才能控制自己的丈夫？<br>答：德国女人让自己的男人事务缠身，法国女人用自己的身体来笼络自己的男人，苏联女人用党组织来控制自己的男人。</p><p>66）<br>说：曾经有法老和犹太人，法老灭绝了，犹太人活下来了；曾经有宗教裁判官和犹太人，前者都死绝了，后者活了下来；曾经有纳粹和犹太人，前者灭绝了，后者存活了下来；现在有共产主义者和犹太人。<br>问：你到底想说什么？<br>答：没什么，只是说犹太人可能活到最后。</p><p>67）<br>军事演习区，一位妇女驾车在大桥前被一名军官拦住：『对不起，公民，您现在不能过去。』<br>『为什么？』<br>『这座桥在一小时前被炸毁了。』<br>『您能告诉我这究竟是怎么回事吗？』<br>『很抱歉，不行，我本人已于 2 小时前阵亡。』</p><p>68）<br>在苏联的一次大会上，主持人突然说：下面请认为社会主义好的同志坐到会场的左边，认为资本主义好的同志坐到会场右边。大部分人坐到了左边，少数人坐到右边，只有一个人还坐在中间不动。<br>主持人：『那位同志，你到底认为社会主义好还是资本主义好？』<br>答：『我认为社会主义好，但是我的生活像是资本主义。』<br>主持人慌忙说：『那请您赶快坐到主席台上来。』</p><p>69）<br>苏联邮政局发行历届领导人纪念邮票。发行没 1 个月，邮政局宣布紧急停止使用该邮票，理由是：寄信人不知道往哪面吐唾沫。</p><p>70）<br>早年莫斯科修地铁，工程师将方案上报斯大林审批。不久，方案发下来，上面有斯大林的签字，细心的工程师发现图纸上多了一个圆型的茶杯印，于是莫斯科地铁就多了一条环形线。</p><p>71）<br>问：我们为什么不能两党制？<br>答：妈的，这一个党都养不起，还两个党，你疯了！</p><p>72）<br>卫国战争期间，一个级别较低的军官在最高统帅部向斯大林送呈文件，由于过分紧张，他打翻了办公桌上的墨水瓶，浓黑的墨水滴在了斯大林雪白的裤子上。低级军官立即吓的面无人色，浑身哆嗦，连话都说不出来。斯大林见他吓成这个样子，很不满的说：『你以为斯大林同志只有一条裤子吗？』</p><p>73）<br>『列昂尼德 · 伊里奇又住院了。』<br>『做什么手术？』<br>『扩胸手术。』<br>『为什么？』<br>『勋章没地方挂了。』</p><p>74）<br>列昂尼德同志同志当上苏共中央总书记之后，将在乡下的老母亲接到了莫斯科。老太太来了以后，列昂尼德同志得意洋洋地向老妈展示了一番自己的豪华别墅、高级汽车、名贵家具等等，展示完了后，列昂尼德同志问老太太这一切如何？老太太说：『儿啊，这一切都很好，但是——共产党来了你怎么办？』</p><p>75）<br>拉宾诺维奇在克里姆林宫里工作，他待在救世主塔楼前望着远方，以便在共产主义到来时及时发出信号。美国人想要引诱他为他们工作，让它在经济危机到来时发出警告。拉宾诺维奇回答说：『不，我需要一个固定的工作。』</p><p>76）<br>列宁对大家说：『我们的一只脚已经踏上社会主义，另一只脚则迈向共产主义。』<br>一个老大娘说：『要是时间太长，人就会变成拐子。』</p><p>77）<br>肃反时期<br>学生：『里海鳊是什么？』<br>老师：『这是鲸的一种，它能游到共产主义。』<br>学生：『真的吗？』<br>老师：『当然，如果你发现有哪只里海鳊游不到共产主义，那它就是反革命。』</p><p>78）<br>『兔子和赫鲁晓夫有什么区别？』<br>『兔子不喜欢瞎说。』</p><p>79）<br>『你已经储藏肥皂和洗衣粉了吗？』<br>『没有，怎么了？』<br>『哎，你怎么这样，要知道尼基塔同志要主管化学工业了！』</p><p>80）<br>『要是鳄鱼呑下列昂尼德同志，将会出现什么情况？』<br>『要两个星期才能消化徽章。』</p><p>81）<br>在勃列日涅夫的住宅里响起了电话铃声，妻子拿起了话筒，传来了一个女人的声音。<br>妻子：『你是哪位？』<br>女人：『我是他的中学同学。』<br>妻子：『你肯定不是他的中学同学，列昂尼德什么时候也没上过学校。』</p><p>82）<br>一位苏联女歌手预先就知道自己会成功，因为她将歌唱歌颂斯大林的歌曲。</p><p>83）<br>问：还存在个人崇拜吗？<br>答：崇拜还有，个人已经没有了。</p><p>84）<br>问：勃列日涅夫的眉毛是什么样的？<br>答：是斯大林的胡子，只是在更高的水平上。<br>（注：斯大林的胡子密，勃列日涅夫的眉毛浓。）</p><p>85）<br>法学家、外科医生、建筑师和共产主义者争论谁的职业更古老：<br>『当上帝把亚当和夏娃逐出伊甸园地，这就是法律行为。』——法学家说。<br>『请听我说，在这之前上帝用亚当的肋条造出夏娃时，这就是外科手术。』——外科医生说<br>『请听我说，比这更早的时候上帝创造了世界，在这之前完全是一片混乱。』——建筑师说。<br>『谁创造了混乱？当然是共产主义者。』——共产主义者叫道。</p><p>86）<br>三个人准备入党，但是都担心自己的非无产阶级出身：<br>『实话说，我爸爸有一个小工厂，当然不能和斯大林汽车厂相比。』——一个人说。<br>『实话说，我爸爸有一个小商店，当然不能和国营百货商店相比。』——另一人说。<br>『实话说，我妈妈有一个小妓院，当然不能和现在的相比。』——拉宾诺维奇说。</p><p>87）<br>问：为什么在苏联没有失业现象？<br>答：这是因为大家都在忙。一些人在建设，另一些人在破坏。</p><p>88）<br>问：拉宾诺维奇在流放到西伯利亚的时候都做了什么？<br>答：从事科学研究。娶楚克奇人为妻，培育抗寒的犹太人。</p><p>89）<br>问：在苏联什么是最永恒的事情？<br>答：暂时的困难。</p><p>90）<br>在集体农庄党的会议上将研究两个问题：建造木棚和建设共产主义。在没有木板的情况下，直接研究第二个问题。</p><p>91）<br>炮兵学院标语——我们的目标：共产主义。</p><p>92）<br>社会主义者、资本主义者、共产主义者商定要见一面。社会主义者过了约会的时间才到。<br>『对不起，我去排队买香肠来着。』社会主义者抱歉的说道<br>『什么是排队？』资本主义者问。<br>『什么是香肠？』共产主义者问。</p><p>93）<br>问：共产主义社会的人将会是什么样的？<br>答：有一双小手，因为他们什么都不用做，机器都替他们做了。他们有一双小脚，因为他们不用走，只是坐车、坐船、坐飞机。他们会有一个小肚子，因为吃的都是高热量的药丸。他们都有非常大的脑袋，他们要绞尽脑汁想方设法获得这种药丸。</p><p>94）<br>问：共产主义实现时警察还存在吗？<br>答：当然不。那时候所有公民都已经学会自己逮捕自己了。</p><p>95）<br>问：数学和科学社会主义有什么区别？<br>答：在数学上，如果给出什么东西，都需要证明。而科学共产主义什么都能证明，就什么也不能提供。</p><p>96）<br>问：共产主义还有会货币吗？<br>答：南斯拉夫的修正主义者会说有，中国的教条主义者说没有。我们的尼基塔同志认为应该辩证的看待这个问题：会有货币，但不是每人都有。</p><p>97）<br>斯大林做报告说：『…… 共产主义已经出现在苏联的地平线上了……』<br>老工人不知道什么是地平线，回家后问儿子。儿子说：『地平线就是能看到却永远走不到的一条线。』</p><p>98）<br>二战结束后，一个波兰农村老太看到街上贴着的照片就说像自己的外甥。<br>别人训斥她：『瞎说什么，这是斯大林同志。』<br>老太：『他是干什么的？』<br>答：『他赶跑了纳粹。』<br>老太急切地问：『他能不能把俄国人也赶跑啊？』</p><p>99）<br>列昂尼德同志访问印度时，大批印度人到机场欢迎。列昂尼德同志便问英迪拉先生：『你是用什么办法让这么多人来欢迎我的？』<br>回答：『凡是来欢迎你的人都能够得到 5 个卢比的奖励。』<br>后来英迪拉先生到苏联访问时，有成千上万的苏联人从机场到莫斯科市内的道路上夹道欢迎。英迪拉先生问列昂尼德同志：『你是用什么办法让这么多人来欢迎我的？』<br>回答：『凡是不来欢迎你的莫斯科人，每人罚款 5 卢布。』</p><p>100）<br>勃列日涅夫即将访问波兰，波兰当局命令一位著名画家创作一幅名为《勃列日涅夫在波兰》的大型油画作为献礼。很不情愿的画家在威逼下接受了工作。画完成后，波兰一高官前来验收，结果让他大吃一惊：画面上是一男一女在豪华的大床上极尽缠绵，窗外的风景是克里姆林宫。<br>『这是什么？这女的是谁？！』高官愤怒地问。<br>『勃列日涅夫的夫人。』画家答道。<br>『男的呢？！』<br>『勃列日涅夫的秘书。』<br>『可勃列日涅夫同志在哪里？』<br>『勃列日涅夫在波兰。』画家答道。</p><p>101）<br>一老者人行道闲溜，不慎落入道旁河中，遂高呼：『救命！』<br>一旁有两警察路过，可他们视若不见，仍边走边谈笑。老者情急生智，遂又高呼：『打倒勃列日涅夫！』两警察闻之大惊，急速跳入河中，将老者拖上岸来铐之。</p><p>102）<br>戈尔巴乔夫颁布限酒令后，想要买到酒只能在指定销售处排长队来买。一个莫斯科人排队排烦了，就嚷道：『我要到克里姆林宫把戈尔巴乔夫干掉。』然后转身离去。<br>一会儿他又回来了。旁边人问他：『已经干掉了吗？』<br>答：『干什么干啊！那里的队比这里还长。』</p><p>103）<br>问：可能在瑞典建成共产主义吗？<br>答：不能。列宁同志说了，『共产主义不在山那边』！</p><p>104）<br>问：可能在以色列建成共产主义吗？<br>答：为什么那么小的国家要有那么大的福气？</p><p>105）<br>问：可能在美国建成共产主义吗？<br>答：从原则上是可能的。但是那样的话我们到哪里买粮食？</p><p>106）<br>问：可能在瑞士建成共产主义吗？<br>答：可能的。但是为什么？瑞士哪得罪你了？</p><p>107）<br>工人说：『我们已经是共产主义了。』<br>有人问：『为什么？』<br>工人说：『我们实现了各尽所能、各取所需的分配原则。』<br>『什么？？？』<br>工人解释道：『你没看见我们工人各尽所能，我们的领导各取所需吗？』</p><p>108）<br>问：苏联人第六感的什么方面最发达？<br>答：高度的满足感。</p><p>109）<br>问：苏联制度的优越性在哪里？<br>答：成功地克服了在其它社会制度里不会存在的困难。</p><p>120）<br>问：假设你在酒吧里，而一个陌生人坐到你的身边并开始唉声叹气，你该怎么做？<br>答：立即去阻止这种反苏宣传！</p><p>121）<br>问：苏联和英国的童话有什么不同？<br>答：英国童话的开头通常是：『很久很久以前……』，而我们的则是：『不远了，不远了……』</p><p>122）<br>问：为什么我们执行总路线那么慢？<br>答：因为每次党代会转的弯太大。</p><p>123）<br>问：下次选举的结果会是怎样的？<br>答：没人知道。有人从中央委员会那里偷走了下次选举的确切结果。</p><p>124）<br>问：有 40 颗牙 4 条腿的是什么东西？<br>答：鳄鱼。<br>问：有 4 颗牙 40 条腿的是什么东西？<br>答：政治局。<br>（注：讽刺老人政治，20 个人只剩下 4 颗牙没掉了。）</p><p>125）<br>『同志，你对这个问题有什么意见吗？』党支书问道。<br>『对，我是有意见，但我不同意我的意见！』</p><p>126）<br>问：鸡和蛋哪个先有？<br>答：从前两个都有。</p><p>127）<br>问：是什么原因决定了我们能在西方国家买那么多小麦？<br>答：要知道资本主义的最大缺点就是生产过剩。</p><p>128）<br>一对夫妇生了一个孩子，如果长得像父母，那就是按反动的孟德尔 - 摩尔根基因学说生出来的；如果长得像他们的邻居，那就是按照李森科的革命的环境决定学说生出来的。</p><p>129）<br>复活了的马克思，在看了苏联的『现实社会主义』、『发达社会主义』后说：『全世界无产者，原谅我！』<br>列宁看了苏联实现了的那种社会主义后说：『我准备重返瑞士，以便从头做起。』</p><p>130）<br>有人问：『社会主义和资本主义与什么不同？』<br>回答说：『在资本主义人与人都是狼，而在社会主义人与人是狼同志。』<br>另一种回答：『在资本主义是人剥削人，而在社会主义刚好相反。』</p><p>131）<br>两个中学同学相遇然后寒暄。<br>『您现在在哪工作。』<br>『中学老师。您呢？』<br>『克格勃。』<br>『啊，您在克格勃具体干什么？』<br>『我们负责揪出那些对国家不满的家伙。』<br>『您的意思是…… 还有人比较满意？』<br>『那些人不归我们管——管他们的是纪委。』</p><p>132）<br>苏联穷兵黩武，军中物质紧缺。<br>军需处长在一名下士的陪同下到兵营视察物质供应情况。他们走到油料库附近，在地上发现一个烟头。军需处长不满的说：『这是谁的烟头？！』<br>下士看了看四周，欣喜的说：『看来谁的也不是，上校同志，赶快拣起来吧！』</p><p>133）<br>古巴举行盛大五一节游行，卡斯特罗率党和国家领导人全体出席，检阅游行队伍。就在游行队伍通过主席台的时候，卡斯特罗同志突然发现人群中有一个人掏出一块新手帕擦了擦鼻子，于是他马上对身边的一位政治局委员道：『我敢打赌，这个拿手帕擦鼻子的人里面没穿内裤！』委员不以为然，难道卡斯特罗同志真长了透视眼不成？他马上命令警卫把那个人叫道跟前，亲自询问，吃惊地发现，这人长裤里面果然是光着的。委员敬佩地问领袖：『卡斯特罗同志，您是如何知道透过外衣看见他没穿内裤的？』卡斯特罗回答：『我看见他掏出了新手帕，他的布票显然没用来买内裤嘛。』众人大惊，无不佩服领袖超凡的洞察力……</p><p>134）<br>勃列日涅夫发表广场演说，群众听见『…… 勃列日涅夫同志的逝世令我们非常难过……』，一片哗然。<br>勃列日涅夫似乎发现了什么，把手伸进口袋摸了一下。『同志们，对不起，离开政治局的时候，我穿了安德罗波夫同志的西装。』</p><p>135）<br>匈牙利的政治笑话：<br>学生问：『为什么苏联好？』<br>老师答：『因为苏联红军解放了我们。』<br>学生问：『为什么美国不好？』<br>老师答：『因为美国还没有来解放我们。』</p><p>136）<br>一位苏联外交家和他的女朋友见面，女友问：『在你们那儿，人们通常是怎样约会的？』<br>『在我们那儿，人们通常会更快地熟悉对方……』<br>『真的？』<br>『因为男女见面之初，总是要互相搜索对方的身体，看有没有藏着窃听器！』</p><p>137）<br>在政治局会议上，勃烈日涅夫兴致勃勃地说：『同志们都说我那三本回忆录写得好，哪天给我弄一套，我也读一读。』<br>（注：勃列日涅夫获得了列宁文学奖的三本回忆录《小地》、《复兴》、《垦荒地》在其死后被揭露系捉刀之作。）</p><p>138）<br>某日，戈尔巴乔夫召开国民大会。<br>『同志们，目前国内形势有些紧张，望大家谅解！』<br>一工人站起曰：『我们保证按时上班。』<br>戈尔巴乔夫大悦，继续说：『再过些时日，大家会更紧张，也许会有人挨饿！』<br>工人又说：『我们可延长时间干！』<br>戈尔巴乔夫有些感动：『随时间发展，大概会有失业现象。』<br>工人回答：『不要紧，我们将加班玩命的工作。』<br>戈热泪盈眶：『谢谢，但是最后也许会有人饿死。』<br>工人大声说：『我们 24 小时连续工作，怎么样，总书记？！』<br>戈狂奔下主席台，紧紧握住该人的手，说：『… 我… 我该… 该… 我该怎么说呢，您从事何种职业？』<br>工人受宠若惊，面露难色说：『我…… 我… 我是火葬厂的。』</p><p>139）<br>一个美国人和一个苏联人坐在一起聊天。<br>美国人说：『在我们美国，工人一个月挣八百元。』<br>苏联人问：『在你们国家多少钱够生活一个月？』<br>『四百元。』<br>『那多出的四百元怎么办？』<br>『我们不管，那是他们自己的事。』<br>苏联人若有所思地说：『在我们俄国，工人一个月也挣八百元。』<br>『那多少钱才够生活？』<br>『一千二百元。』<br>『啊？那还差四百元怎么办？』<br>『我们不管，那是他们自己的事。』</p><p>140）<br>苏联人造卫星试验中动用了以下力量：<br>1、东德的火箭；<br>2、罗马尼亚的能源；<br>3、捷克的电子设备；<br>4、俄罗斯的狗。<br>（注：讽刺经互会，苏联的一切都是从东欧国家搞来的。事例为苏联用火箭将小狗莱卡送上太空。）</p><p>141）<br>勃列日涅夫出访埃及。安瓦尔 · 萨达特总统请求苏联提供三笔经济援助。<br>『第一笔是 100 万吨煤。』安瓦尔说。<br>『没问题。』勃列日涅夫答道。<br>『还要 20 条远洋货轮。』<br>『完全可以！』<br>『最后是一个小小要求，我想要一辆自行车，送给我的孩子做生日礼物。』<br>『那可不成，』勃列日涅夫皱起了着眉头，『波兰人不生产自行车。』</p><p>142）<br>苏联式的选举：<br>第一次苏联式的选举是由上帝发明的。上帝把夏娃带到亚当面前，并宣布道：『选择你的妻子吧！孩子。』</p><p>143）<br>一艘苏联核潜艇和美国核潜艇在公海相遇。苏联潜艇又旧又破，满是锈斑，美国人的潜艇则非常整洁，苏联人邀请美国军官们到自己的艇上参观。<br>美国军官们经过通道来到潜艇主控室参观。突然，陪同他们的苏联艇长歇斯底里的暴怒起来：『他妈的！是哪个混蛋把这该死的靴子扔在控制台上的？？！』<br>美国人得意的说：『在我们美国潜艇上，从来没有……』<br>苏联艇长怒气冲冲的说：『美国？已经没有美国了！到底是哪个混蛋把这该死的靴子扔在控制台上的？？！』<br>（注：靴子扔到控制台上 - 导弹发射 - 没有美国了……）</p><p>144）<br>美国宇航员和苏联宇航员同时登上了月球。<br>『报告休斯顿，苏联人也登上了月球！』<br>『没关系。』<br>『报告休斯顿，苏联人正在把月球涂成红色！』<br>『没关系。』<br>于是，美国宇航员眼睁睁看着苏联人把整个月球漆成红色然后扬长而去。<br>『报告休斯顿，苏联人已经把月球涂成了红色！』<br>『那正好，就在上面加上 Coca Cola 的标志吧！』</p><p>145）<br>一次，前苏联诗人马雅可夫斯基正在发表演讲，一个矮胖的人走到讲台上来，指责诗人的演讲有极大的偏见，最后嚷道：『我应当提醒你，拿破仑有一句名言：「从伟大到可笑，只有一步之差」……』<br>马雅可夫斯基看了看那人同自己的距离，跨前到距那人一步，然后用赞同的口气说：『不错，从伟大到可笑，只有一步之差……』</p><p>146）<br>戈尔巴乔夫时期。一男子来到酒馆……<br>男子：『来瓶儿伏特加！』<br>侍者：『10 卢布。』<br>男子：『上次来还是 5 卢布，怎么……？』<br>侍者：『伏特加 5 卢布，另外 5 卢布是党的革命基金。』<br>男人不情愿地掏出 10 卢布递给侍者。奇怪，侍者又找了他 5 卢布。<br>男子：『怎么又找了 5 卢布？』<br>侍者：『酒都卖光了。』</p><p>147）<br>为了刺探苏联的战略情报，美国研制了 U-2 高空侦察机，无奈苏军打不着，因为 U-2 实在是飞的太高了！结果有一次还是把 U-2 打下了一架，只见美国飞行员（鲍威尔）手上戴了六只戒指！<br>赫鲁晓夫在联大上出示了被打下的飞行员照片，向世界展示，并问美国人：『你们的飞行员飞那么高干什么，还戴了六只戒指，难道想飞到火星上勾引那里的女人？！』</p><p>148）<br>谢尔盖中士带领他的小队完成了防核训练。<br>『小伙子们，你们还有什么问题？可以提出来。』<br>『请问，中士同志，当核武器爆炸时，我应该把武器放在什么地方？』<br>『伸长手臂，把你的机枪放在离身体尽可能远的地方。』<br>『那是为了什么？』<br>『免得武器熔化时，液态金属溅到军服上，使国家发给你使用的装备蒙受损失。』</p><p>149）<br>有一次，著名的歌唱家科兹洛夫斯基得知斯大林很赏识他，便向斯大林提出一个请求：『我从来没有去过国外，所以我想……』<br>『你不会出逃吧？』<br>『瞧您说的，斯大林同志！对我来说，家乡的村庄比外国可要亲得多。』<br>『不错，好样的！那你就回家乡去吧。』</p><p>150）<br>科学院院士博戈莫列茨发展了有关长寿的理论。他断言，人可以活到 150 岁。斯大林本人显然也对他的工作成果很感兴趣，所以非常关心他的工作。<br>博戈莫列茨任何要求均得到满足，被授予各种奖章和称号：科学院院士，斯大林奖金获得者，社会主义劳动英雄……<br>博戈莫列茨于 1946 年去世，终年 65 岁。斯大林得知这个消息后说：『这家伙把大家都骗了！』</p><p>151）<br>有一次，朱可夫从斯大林的办公室里出来时，怒气冲冲地说：『小胡子魔鬼！』<br>正在接待室的贝利亚听到了句话，他走进斯大林的办公室，把这话告诉了斯大林。<br>斯大林让人把朱可夫叫了回来。<br>『朱可夫同志，您从我办公室出去时，说了一句「小胡子魔鬼」，您是在说谁？』<br>『希特勒！我还能说准呢，斯大林同志？』<br>『贝利亚同志，而您又是在说谁呢？』</p><p>152）<br>克格勃审核。<br>『你爱你的太太吗？』主考官问。<br>『是的。』<br>『你爱你的国家吗？』主考官又问。<br>『是的。』<br>『那一个是你的最爱？』主考官问。<br>『国家。』<br>『好，我们将带你的老婆到这里，你拿这把枪到隔壁房去杀了她。』<br>这男子到了隔壁房，没多久便传出 6 声枪响，接着又传出压碎声持续着数分钟。此男子带着松垮的领带走出房间，他将手枪放在桌上。<br>主考官看着他，并问：『怎么了？』<br>他说：『你给我的枪都装着空包弹，我只好勒死她。』</p><p>153）<br>一天，办公中的苏斯洛夫忽然捧腹大笑起来。<br>安德罗波夫：『米哈伊尔 · 安德烈耶维奇同志，您想起了什么好笑的事情吗？』<br>苏斯洛夫：『忽然想到了昨天听到的一个关于勃列日涅夫的笑话…… 实在太好笑了。』<br>安德罗波夫：『哦？能说来听听吗？』<br>苏斯洛夫：『你疯了？！我刚把那个说笑话的送进精神病院！』<br>（注：苏斯洛夫系勃列日涅夫时期的意识形态权威和党内第二把手，素有『灰衣主教』之称，负责文化界的意识形态工作；苏联常将不同政见者送至精神病院进行『治疗』。）</p><p>154）<br>斯大林周围的人都非常怕他。一次，电影导演科津采夫为斯大林放映自己导演的一部电影。他想知道斯大林对影片的印象如何。这时，斯大林的助手波斯克利贝舍夫走了进来，交给斯大林一张字条，并打开了电灯。斯大林含糊地嘟哝了一句：『不好。』<br>科津采夫立即晕了过去。斯大林说：『等这个可怜虫醒过来后，你们告诉他，我说「不好」是说字条不好，不是说他的电影。整个西方都对斯大林同志说「不好」，斯大林可没有因此而晕过去。』</p><p>155）<br>美国总统访问莫斯科，并在一家工人家做客。这家有各种现代化电器，还有私家车，生活很是富裕。<br>访问即将结束时，美国总统问主人：『能告诉我你最想买的一件奢侈品吗？』<br>主人：『一双优质皮鞋。』</p><p>156）<br>书记：我们苏联皮鞋的产量是美国的两倍！<br>群众：而且重量也是他们的四倍！</p><p>157）<br>某干部去视察植树工作。只见两个青年，一个在挖树坑，另一个随后用土填上。<br>干部很奇怪，问他们在干什么。<br>一个青年说：『我和彼得、伊万是植树的，我负责挖树坑，彼得负责插树苗，伊万负责填土。今天彼得生病了不能来，可是我们还要坚持工作啊！这不，我和伊万来了……』</p><p>158）<br>一个领导在给集体农庄庄员训话：『生活在苏联，你们是多么幸福！你们有的吃，有的穿，而且每年能买一双新鞋子！』<br>后排的一个老太太立刻说『对！和沙皇时代差不多！』</p><p>159）<br>1936 年秋，西方盛传斯大林重病不治，溘然长逝。美国合众社驻莫斯科记者查尔斯 · 尼特想获得最权威的消息，就来到克里姆林宫门口，请秘书把他的信转交给斯大林。信中恳求斯大林对上述谣传予以证实或否定。斯大林的复信如下：<br>可敬的先生：<br>据我从外电外报获悉，我早已离开罪恶的人世，移居极乐世界。既然您不想从文明人名单中勾销，对外电外报倒是不能不笃信无疑的。敬请相信这些报道，务必不要打扰我在极乐世界的长眠。顺致敬意。<br>    约 · 斯大林<br>  1936 年 10 月 26 日</p><p>160）<br>列夫 · 梅赫利斯在苏联卫国战争期间曾任方面军军事委员会委员。有一次，他在向斯大林报告了前线形势后，顺便提起风流倜傥的罗科索夫斯基将军『有生活作风问题』。斯大林听了没做任何反应。<br>梅赫利斯不甘心，执意要打击这位春风得意的将军，临走时又向斯大林问道：『我们到底拿罗科索夫斯基同志怎么办？他搞女人搞得也太得意了！』斯大林不喜欢纠缠干部的枝节问题，更不爱听小报告。他反问梅赫利斯：『怎么办？你只能眼馋呗。』</p><p>161）<br>苏联海军元帅伊万 · 伊萨科夫于 1938 年起担任苏联副海军人民委员。1946 年的一天，斯大林打电话给他，说考虑任命他为海军参谋长。伊萨科夫回答：『斯大林同志，我得向您报告。我有严重缺陷，有一条腿在战争中受重伤被截掉。』<br>『这是您认为必须报告的唯一缺陷吗？』<br>『对。』<br>『我们原先那位参谋长连头脑都没有，还照样坚持工作。您不过就缺条腿，没什么了不起。』斯大林说。</p><p>162）<br>问：什么长达两公里并且老吃白菜？<br>案：莫斯科肉店前排的队。</p><p>163）<br>列宁说：『共产主义 = 苏维埃 + 电气化』。<br>所以：<br>苏维埃 = 共产主义 - 电气化<br>电气化 = 共产主义 - 苏维埃</p><p>164）<br>据外电报道，前苏联克格勃最近公开了一份绝密文件。该文件称，Windows 是克格勃精心炮制的软性核弹，在冷战时期企图用来摧毁美国的电子工业，拖垮全美经济。但出人意料的是，由于政府部门的官僚作风，误将 Windows 装进了前苏联的大多数计算机里，最终导致了前苏联的解体。<br>曾潜伏在微软的克格勃程序员阿里山说：『我曾警告苏联政府，千万不能使用 Windows，因为我在 Windows 的核心层中放置了逻辑炸弹，每当系统处理与国民经济有关的数据时，就会发生计算错误，使政府决策机构产生错误决策，使国民经济恶化。不幸的是，美国人却用了 Mac OS 来计算国民经济数据，结果弄巧成拙，害了苏联。』<br>上述新闻发布后，微软迅速在其网站上放置了修正这个错误的补丁程序。美国人却认为 Windows 功不可没，微软的股票当天涨了 25％。</p><p>165）<br>勃列日涅夫问罗马教皇：<br>『为什么人们相信罗马天主教的天堂，而不相信共产主义的天堂？』<br>『这是因为我们的天堂从来没有让别人看到。』</p><p>166）<br>问：德国在马克思那里继承了什么？<br>答：对于东德来说是《共产党宣言》，对于西德来说是资本主义。</p><p>167）<br>列宁说：共产主义就是苏维埃加上全国的电气化。<br>赫鲁晓夫说：共产主义就是苏维埃加上全国的玉米化。</p><p>168）<br>列宁时代像是在隧道里，周围一片黑暗，只是在前面有光；<br>在斯大林时代，像是在汽车里，一人领路，一半人在上坐着，另一半人在上颠簸；<br>在赫鲁哓夫时代，就像在参观团里一样，一个人表演，其他人在笑；<br>在勃列日涅夫时代，像看电影一样，大家都等着散场。</p><p>169）<br>拉宾诺维奇被开除出党，原因有三个。<br>甲：当政治局书记来到他的办公室的时候，那里还悬挂着赫鲁晓夫和勃列日涅夫的肖像：<br>『你为什么你到现在还没有摘掉这个傻瓜？』<br>『是哪一个？』<br>乙：看到政治局委员豪华的葬礼，拉宾诺维奇说：<br>『真是浪费钱财，用这些钱我能安葬所有的政治局委员。』<br>丙：书记问：『为什么没有参加最后一次党的会议？』<br>『我哪知道哪个是最后一次。』</p><p>170）<br>问：听说要授予勃列日涅夫同志大元帅称号？<br>答：真的。并且如果他要能读得出来那个词，还可以授予他人民艺术家的称号。</p><p>171）<br>发行了勃列日涅夫图像的邮票，但总是粘不上，一些人吐沫的方向不对，另一些人舔的方向不对。</p><p>172）<br>勃列日涅夫拿着发言稿，开始发言。<br>『犹太复国主义者同志们！』<br>听众疑惑不解，勃列日涅夫于是又瞄了发言稿一眼：<br>『犹太复国主义者！同志们，他们又在准备……』</p><p>173）<br>问：为什么勃列日涅夫能出国，安德罗波夫却不能？<br>答：因为前者安的是电池，后者接的是电线。<br>（注：勃列日涅夫用心脏起搏器，安德罗波夫用透析机。）</p><p>174）<br>勃列日涅夫问柯西金：<br>『那个击败拿破仑的独眼俄国元帅叫什么来着？』<br>『库图佐夫。』<br>『那个独眼的英国海军上将呢？』<br>『纳尔逊。』<br>『这个独眼的犹太人叫什么？』<br>『达扬。』<br>『为什么我们的元帅格列奇科到现在还有两个眼睛？』</p><p>175）<br>当尼克松访问苏联时，勃列日涅夫向他展示了一种最新式的可以通向地狱的电话，通话费是 27 戈比。回到美国后，尼克松讲了这件事。原来，美国的这种电话已经发明很长时间了。理查德先生于是和地狱通了一次电话。但这次能话的费用是一万二千美元！<br>理查德先生失望地说：『怎么会这样，那里才 27 戈比。』<br>人们向他解释说：『在那里是市话，从我们这里打是长途。』</p><p>176）<br>美国人、英国人、和苏联人夸口，说能给猫吃下芥茉。<br>美国人逮住猫，把芥茉塞到了猫嘴里。<br>『这是暴力！』苏联人抗议道。<br>英国人把芥茉放在两片香肠里，给猫吃下去。<br>『这是欺骗！』苏联人抗议道。<br>苏联人把芥茉抺在猫的尾巴上，猫敖敖叫着，用嘴去舔他的尾巴。<br>『请注意，他是自愿的，并且唱着歌！』</p><p>177）<br>访问苏联的尼克松问勃列日涅夫：<br>『为什么苏联工人不罢工？』<br>勃列日涅夫没有回答他，而是他带到了车间。他向工人们说道：<br>『从明天开始，你们将会缩减工资！』（掌声）<br>『将要提高工时！』（掌声）<br>『每十个人就要吊死一个！』（掌声，有人问，是自己准备绳子还是由工会提供？）</p><p>178）<br>在莫斯科，一个顾客走到书报摊前，问：『请问有没有「真理」？』<br>『我们这里没有「真理」，只有「消息」！』卖报纸的老太婆回答。</p><p>179）<br>有人问负责食品供应工作的官员：『在完成食品发展计划以后，将如何组织对苏联人民的食品供应工作？』<br>官员答道：『到那时对食品的供应工作将会又快，又准确，又高效。只要早上通过电话预订，晚上就会通过电视机供应到户！』</p><p>180）<br>赫鲁晓夫与肯尼迪会晤时互赠礼品。<br>肯尼迪说：『我决定赠您一枚小型原子弹，这是一枚真正的原子弹，要小心保管，一旦爆炸会产生毁灭性的后果！』<br>『我把我的农业部长赠送给您。』赫鲁晓夫说。『对他您也得小心点，如果您要任用他，也会产生毁灭性的后果……』</p><p>181）<br>在苏共 20 大上，赫鲁晓夫在做秘密报告前突然消失了。但是过了几分钟后他又回来了，并登上了主席台。<br>人们问他：『赫鲁晓夫同志，您刚才去哪了？』<br>『我去列宁墓里看了看，摸摸斯大林还有没有脉搏，以防万一。』</p><p>182）<br>工人代表问赫鲁晓夫：『为什么您拒绝实行 6 小时工作制？』<br>赫鲁晓夫答：『因为实行了 6 小时工作制后，你们就会有更多的时间来编讽刺我的笑话了。』</p><p>183）<br>赫鲁晓夫赠给卡斯特罗一辆新轿车，但是没有方向盘。卡斯特罗发给赫鲁晓夫一封电报：『请把方向盘寄来，否则我无法启动这辆车。』<br>赫鲁晓夫发电报答复说：『你只要坐上去，然后闭上眼睛就行了。我这里有遥控器。』<br>（注：在古巴导弹危机中赫鲁晓夫完全将古巴当做了手中的棋子。）</p><p>184）<br>赫鲁晓夫去集体农庄视察，一不小心掉到了青饲料储藏窖里。有个农民把他拖了上来。赫鲁晓夫对他说：『谢谢你，好兄弟。但是请不要对任何人说我掉到了窖里。』<br>『尼基塔同志，也请您不要对任何人说是我把您从地窖里救了上来。』</p><p>185）<br>有位经常讲笑话的人被捕了，并被押去见赫鲁晓夫，被捕者大喊：『我没有罪，我讲的笑话不过是说面包、香肠、家具…… 全都没有！』<br>赫鲁晓夫生气地说：『不许你讲笑话扰乱社会秩序！谁说我们没有这些东西？很快都会有的！每个家庭都会有！』<br>『赫鲁晓夫同志，您不许我讲笑话，可是您刚才怎么又讲笑话了？？』</p><p>186）<br>『现在进行最后一项议题。』勃列日涅夫向会议代表宣布说，『我们已经研究过了，由于苏斯洛夫同志的健康原因，决定派他去休养。同志们，他的老年病恶化了。』<br>『怎么发现的？』一位工人代表问。<br>『这很简单。不久前我在走廊里遇到他并对他说：「您好，苏斯洛夫同志。」他回答我说：「您好，勃列日涅夫同志。」然后，他又说：「但是，我不是苏斯洛夫，我是柯西金。」你们看，他连自己的名字都搞错了！』</p><p>187）<br>苏斯洛夫去世了。<br>亲朋好友都来参加悼念活动，医疗组的医生们也出席了。<br>其中一位医生突然发现勃列日涅夫神情恍惚，不大正常，就对同伴们说：『我们要记住，现在患大脑动脉硬化症的人不少，这个病已经成为我们的主要敌人了。』<br>『不对。』勃列日涅夫听到他们的议论后说，『现在我们的主要敌人不是大脑动脉硬化症，而是纪律涣散症。你们看，大家都等了半个多小时了，可是苏斯洛夫还没来！！』</p><p>188）<br>在记者招待会上，有人问勃列日涅夫：『列昂尼德 · 伊里奇，这什么苏联缺乏肉制品？』<br>『问题的原因在于，我们正在突飞猛进地奔向共产主义，而牲畜的生长却跟不上我们！』勃列日涅夫明确地回答。</p><p>189）<br>昨天莫斯科发生了地震，但学者们对此表示怀疑，因为莫斯科处在非地震带上。最后经过研究，并非是地震，而是勃列日涅夫同志佩有勋章的衣服掉在了地上。</p><p>190）<br>问：苏联农业面临的主要障碍是什么？<br>答：主要的障碍有 4 个：春天、夏天、秋天和冬天。</p><p>191）<br>『伊万，你喝半升酒以后还能工作吗？』<br>『能！』<br>『喝一升呢？』<br>『也能！』<br>『那么喝两升呢？』<br>『喝两升就要醉了，虽然不能工作了，但是还能担任领导。』</p><p>192）<br>克里姆林宫里，觥筹交错，酒池肉林，声色犬马，天昏地暗……<br>约瑟夫 · 斯大林大帅点的菜有浇汁爱沙尼亚，五香波兰，油闷比萨拉比亚等等，大块朵颐之际嘴里突然传出『咯崩』一声，2 颗门牙和一枚硬币掉到桌子上，只见硬币上刻有两个字——『芬兰』……</p><p>193）<br>『波兰人为什么怀念捷尔任斯基？』<br>『因为他比其他任何波兰人杀的俄国人都多得多。』<br>（注：捷尔任斯基系全俄肃清反革命和怠工分子委员会——简称肃反委员会 / 契卡——的第一位领导人，该组织后来演变为国家政治保安局 - 内务部 - 克格勃。）</p><p>194）<br>一个犹太人要办护照离开苏联定居以色列，民政官员问他理由。<br>『一共有两个原因让他不得不离开苏联去定居以色列。』<br>『哪两个？』<br>『第一条是，昨晚我听邻居说，一旦苏维埃政权完了，他们马上会像纳粹一样对待我们。』<br>『可我们的苏维埃政权永远不会完啊？』<br>『对啊，这是第二条理由。』</p><p>195）<br>某犹太人去办理签证离开苏联定居以色列，遇到民政官员，照样问理由。<br>『你为什么要离开苏联定居以色列？难道因为你是犹太人？』<br>『不是啊。我不想离开苏联，但我的妻子，丈母娘都要离开苏联。』<br>『这样吧，我给她们办签证，让她们去以色列，你留在苏联吧。』<br>『不行，只有我是犹太人，她们都不是。』</p><p>196）<br>一个匪徒试图劫持苏联民航飞机去伦敦，结果在飞机上就被一个英勇的阿塞拜疆的农民当场制止。记者采访这个阿塞拜疆农民何以如此勇敢，结果农民小声说：<br>——同志啊，我偷偷带了两箱卷心菜在飞机上，打算去莫斯科卖了，如果那混蛋带我们去伦敦，这两箱卷心菜就不值钱了。</p><p>197）<br>38 年的时候，某党员被清洗进了监狱。在牢房里，他发现有人在不断祷告上帝，感谢沙皇，一脸笑容。一打听，这位是某个隐藏了有年头的军官。他问这军官，为什么这么开心啊？<br>『感谢上帝啊，沙皇万岁，现在的监狱里关了这么多布尔什维克和犹太人了！』</p><p>198）<br>苏联的一个比喻，未必是笑话：<br>人生好比过马路，前半段往左看，后半段往右看。<br>苏联 70 年以后的中央委员大都 60 岁以上，后面的事情就可以知道了。</p><p>199）<br>据说，苏联出生的婴儿非常容易得神经紊乱，后来调查发现，这是因为苏联婴儿早在娘胎里就开始为一些很重要的问题而担心。<br>在娘胎的头三个月，他们担心他们的爸爸妈妈会不会把他们做掉。接下来三个月，他们又开始为他们的爸爸妈妈是不是会结婚而担心。最后几个月，他们又得考虑他们的外婆或者奶奶是否还健康——除了这二位，大概没人愿意照顾他们了。最后几个月，他们又得担心，妈妈是不是还记得爸爸到底是谁。</p><p>200）<br>苏联计算机技术明显落后于当时最先进水平，特别是在集成电路方面，即使是芯片，由于一贯俄罗斯笨重的风格，变得特别大。<br>于是，《真理报》只能这样报道：我国伟大的苏联制造出了世界上最大的芯片！</p><p>201）<br>莫斯科大学毕业四十年的同学聚会，柳德米拉一眼就认出了当年热恋过的瓦西里。旁人都问，怎么会这么快就从一堆老头中认出自己当年的情人？<br>『因为他还穿着当年的那件大衣！』</p><p>202）<br>苏联一直采取鼓励生育的政策，可孩子还是越来越少。经过调查，终于有人发现原因了：<br>——双人床的质量太差而伏特加的质量太好。</p><p>203）<br>关于苏联的乐队：<br>——对苏联而言，什么是一个乐队三重奏组合？<br>——那是去西方的旅行演出的一个四重奏组合刚刚回来。</p><p>204）<br>『捷尔任斯基爱孩子是真的吗？』<br>『是的，他只恨他们的父母……』</p><p>205）<br>毛泽东访苏，有人问艾思奇：『毛主席到莫斯科，斯大林为什么不去迎接？』艾说他也不知道，可以打听打听。第二天上课时，艾回答说：『斯大林去了，可是没接上。』</p><p>206）<br>列宁和卢那察尔斯基去参观未来派的前卫艺术展览会。<br>『我一点也不懂！』列宁说。<br>『我一点也不懂。』卢那察尔斯基说。<br>人们说，这是最后两个不懂艺术的苏联领导人。</p><p>207）<br>某天在克里姆林宫的宴会，赫鲁晓夫直接用手抓肉就吃下去，旁边的斯大林看了以后皱了皱眉头，告诉赫鲁晓夫：<br>『尼基塔 · 谢尔盖耶维奇，用刀子吧。』<br>赫鲁晓夫听到以后，马上拿了刀子就站起来——<br>『斯大林同志，请问您要干掉谁？』</p><p>208）<br>话说斯大林死后，因为被赫鲁晓夫视为禁忌，因此希望把斯大林的遗体葬在海外，于是苏联向各国征求意愿：<br>英：我们这边已经有丘吉尔，大战的英雄有一个就很够了。<br>德：我们这边已经有希特勒，独裁者有一个就太多了。<br>这时，以色列表明同意的意见。但是赫鲁晓夫马上脸色变青，拼命反对——<br>『靠！那里以前有人复活过啊！』</p><p>209）<br>一个持不同政见者被捕，罪名是在红场上散发传单。法庭。<br>法官问：克格勃公诉人，你指控被告散发发动传单，可在红场上散发的明明是空白纸张。<br>克格勃公诉人：谁都知道那上面该写什么。</p><p>210）<br>有一次赫鲁晓夫访问美国，他对艾森豪威尔说他看到许多美国人酗酒。艾森豪威尔对此感到吃惊，他并不认为美国的酗酒者比别的国家多。赫鲁晓夫坚持他的观点。于是，艾森豪威尔从办公桌抽屉里拿出一支手枪递给赫鲁晓夫说：『如果您遇到酗酒的醉鬼，我允许您向他开枪。』<br>赫鲁晓夫把手枪装在口袋里，来到了纽约。他在苏联驻联合国使馆过夜，第二天早晨在纽约市到处溜达。他在帕克路和八号街口碰到一个醉鬼，他向这个醉鬼开了一枪。然后，在麦迪逊路和八十二号街口向另一个醉鬼开了第二枪。到列克星顿路和八十四号街口又向第三个醉鬼开了枪。第二天，纽约各报都在头版用大标题刊登消息：『三个苏联外交官神秘地遭到暗杀。』</p><p>211）<br>一个美国人和一个苏联人被判下地狱。恶魔告诉他们：『你们有两个选择：美国式和苏联式的地狱。在美国式的地狱中，你们什么都可以做，但是每天早上必须吃一桶屎。而在苏联式的地狱中，也可以想干什么就干什么，不过每天早上得吃两桶屎。』<br>美国佬马上选了美国式的地狱。而苏联人则最终选择了自己的祖国。一周后他们又相遇了，苏联人问：『你那如何？』<br>美国人回答：『确实如恶魔说的那样。我的地狱还不错。就是每天一桶屎简直要我命。你那呢？』<br>『差不多和你那一样，不过吃不到屎，你知道的，苏联什么都短缺。』</p><p>212）<br>美苏两个国家意见一致时，没有联合国可以干的事；两个国家不一致时，联合国干不了什么事……</p><p>213）<br>中苏开战，第一天苏联俘虏了 500 万中国人，第二天苏联俘虏了 500 万中国人，第三天苏联俘虏了 500 万中国人，第四天苏联投降了。</p><p>214）<br>一天，在莫斯科的一个公墓里，有两个人在交谈着……<br>『你今天怎么愁眉苦脸的？』<br>『昨天一辆班车出了车祸，车上无人幸免。』<br>『哦，那是挺惨的，让我们一起为他们哀悼吧！』<br>『不，我才不是为这个难过呢！』<br>『那你……』<br>『那辆班车是克格勃的。』<br>『哦？那你还难过什么？』<br>『车上有 3 个座位是空的。』</p><p>215）<br>问：为什么在共产国际上没有新几内亚的代表？<br>答：没有找到愿意往自己的鼻子上穿孔套圏的犹太人。</p><p>216）<br>问：为什么俄罗斯联邦共和国称为РСФСР？<br>答：因为斯大林和托洛茨基的做法通常都是相反的，这样称呼他们俩都能一样读出来了。</p><p>217）<br>『唉！这些犹太人，为自己设计的是犹太复国主义，为别人设计的却是马克思主义！』</p><p>218）<br>新的公共汽车规则：违反一次，穿一个孔；违反两次，穿二个孔；要是三次的话，民族一栏改成犹太人。</p><p>219）<br>既然 BBC 有那样专业的素养，知道苏联的所有秘密，政治局决定再开会的时候，成员不许离开。可能有一次柯西金突然捂往的肚子，请求充许方便一下，但是人们不他走，过了几分钟，有人敲门，卫生员拿着桶进来了：<br>『刚刚听 BBC 说阿列克谢 · 尼古拉耶维奇出丑了！』</p><p>220）<br>我们知道世界的新闻<br>——从塔斯社的反驳和辟谣中。<br>（注：塔斯社系苏 / 俄官方通讯社。）</p><p>221）<br>问：拉宾诺维奇，你喜欢苏联的国歌吗？<br>答：是的，就是没有词。</p><p>222）<br>问：要是在列宁格勒发生了象塔什干那样的地震，会发生什么情况？<br>答：那可能就会只剩下彼得堡了！</p><p>223）<br>赫鲁晓夫把自己新出品的香肠送到国外去分析，不久就得到了结果：『赫鲁晓夫先生，在你的粪便里没有任何寄生虫。』</p><p>224）<br>在会议上，农庄主席在历数苏维埃政权给了普通人多少实惠：<br>『你们看玛丽亚 · 彼得洛夫娜，她原来是一个普通的农民，现在却管理一个俱乐部；你们看别拉捷娅 · 费道洛夫娜，原来也是一个普通的农民，现在管理一个图书馆；你看斯捷潘 · 米特拉发内奇，原来是一个十足的傻子，现在却是党组织的书记。』</p><p>225）<br>问：在苏联有穷人吗？<br>答：有啊。他们自己没有任何东西。住宅是国家的，别墅是国家的，汽车也是国家的。</p><p>226）<br>通过卫星发射到太空的狗这一事实科学地证明了，任何母狗都能升到不可思议的高度。<br>（注：母狗在俄语是骂人话：狗东西。）</p><p>227）<br>恰巴耶夫报考军事学院。<br>『瓦西里 · 伊万诺维奇，所有科目都通过了？』<br>『不，不是所有的，血液通过了，尿也通过了，可是数学不行。』</p><p>228）<br>问：什么是正派人？<br>答：就是为了小便宜不做过分卑鄙的勾当的人。</p><p>229）<br>农庄主席叫来了挤奶员：<br>『今天接到电话，说明天新闻中心要来人采访你。』<br>『采访什么？』<br>『具体情况不清楚，但在任何情况下你都要把脸洗洗。』<br>（注：脸上都是偷喝的牛奶。）</p><p>230）<br>幼儿园的阿姨对孩子们说：<br>『在苏联，每个人都吃得饱饱的，还能有漂亮的衣服；在苏联，人们生活在漂亮的住宅里；在苏联，所有的孩子都有许多玩具……』<br>『我要！我要！我要去苏联！』</p><p>231）<br>两个肠道寄生虫爬了出来：<br>『妈妈，那个大的，发光的东西是什么？』<br>『儿子，这是太阳。』<br>『妈妈，那波浪翻卷，闪着光的东西是什么？』<br>『儿子，是大海。』<br>『那绿色，散发着香味的地方是什么？』<br>『是森林，儿子。』<br>『有那么多好地方，我们为什么生活在屁股里？』<br>『孩子，那是我们的祖国啊！』</p><p>232）<br>在被遣送回亚美尼亚前，亚美尼亚人对留在西方的同伴商定，为了提防当局的书信检察，要是在苏联情况不好，我就用绿色的墨水给你写信。后来，很快就来信了，但是是用通常的墨水写的，上面说：一切都非常好，我有了自己的住宅，找到了很好的工作，什么都有，如果说有什么不足的话，那也微不足道，比如说，我们这里很难弄到绿墨水。</p><p>233）<br>在被遣送回亚美尼亚前，一家人和留在西方的朋友商定，为了提防当局的书信检察，要是一切都好的话，他就会给他们寄来照片，上面的人都是站着的，要是不好的话，就都坐着。不久，这家人真的来照片了，上面的人都是躺着的。</p><p>234）<br>『你为什么要去以色列？』<br>『我太烦了，什么事都有假日，香肠有假日，手纸也有假日。』<br>（注：假日即无货不卖。）</p><p>235）<br>勃列日涅夫上班时，他的秘书对他说：『列昂尼德 · 伊里奇，您的皮鞋一只是棕色的，一只是红色的。』<br>勃列日涅夫：『这有什么好奇怪的，我们家里还有一双这样的。』</p><p>236）<br>一个真正的共产党员死了。由于他是无神论者却又十分诚实，他被判每隔一年就在地狱和天堂间轮转。第一年他呆在地狱，一年后撒旦对上帝说：『你快把他带走吧。我得恢复秩序。他快把地狱里的小鬼们都发展成少先队啦。』又一年过去了，撒旦找到上帝说：『上帝啊，又轮到他到我那去了。』<br>上帝回答道：『首先，不要叫我上帝，你应该称呼我同志。其次，世界上没有上帝。最后，别耽搁我的工夫，我正赶着去参加党代会。』</p><p>237）<br>斯大林死后，在天堂受到上帝的欢迎。赫鲁晓夫去见上帝时，上帝却在位子上一动不动，赫鲁晓夫找了把椅子坐在上帝对面，问：『你为什么不起来迎接我？』上帝说：『我一离开位子，你就要抢去了。』</p><p>238）<br>肃反高潮阶段某晚<br>斯大林和几位政治局委员在后花园休息，为哪颗是天狼星争论起来。有人建议给天文台打电话问问清楚，不料经过大清洗，天文台只剩下了内务部派去的值班军官。于是那军官赶忙去一位被软禁的老专家的家中咨询。老专家半夜见到内务部的车子出现，惊恐万状，当场自杀……</p><p>239）<br>一个美国代表团要访问一个苏联的工厂，当局就预先教工人要怎样回答代表团的提问。代表团来后问一个老工人你每月的工资是多少，老工人回答有 3000 卢布；代表团又问他有多少存款，他回答有 10 万卢布；代表团问：你存了这么多钱准备干什么呢？老工人回答说：<br>『我准备买一双靴子。』</p><p>240）<br>1937 年苏联当局征求诗人普希金的逝世百年纪念铜像设计，佳作有以下三件：<br>站在高加索山上眺望远方的普希金；决斗时被子弹击中即将倒下的普希金；艺术女神替普希金戴上月桂冠。<br>但是，优胜作品是——<br>正在阅读普希金作品的斯大林同志。</p><p>241）<br>勃列日涅夫不懂足球。有人送给他一个足球，他说：『谢谢您的勋章。但它看起来很像赫鲁晓夫。』</p><p>242）<br>一个童年好友来列昂尼德 · 勃列日涅夫同志家做客。见到列昂尼德同志愁眉苦脸，就问他为什么。<br>列昂尼德同志说：唉，治理国家怎么就这么难，现在有三个困扰我的难题没有解决办法呀。<br>他的童年好友问：哪三个问题呀？<br>列昂尼德同志：就是住房问题，酗酒问题和信仰问题。建了那么多新住宅楼，可还是不够用，总有人没房子住。酒价已经上调了无数次，可酗酒者却不见少。十月革命都这么多年了，可还是有人不信共产主义而顽固地信上帝，你说可怎么办！<br>朋友哈哈大笑：这有什么难的，你去索契疗养一个月，把这些问题交给我解决吧！<br>列昂尼德同志将信将疑地照着朋友的话做了，自己去度假了。<br>一个月后列昂尼德同志回来，为了看看朋友到底做到了没有，还没回克里姆林宫，就先到街上了解情况。<br>在饭店里发现这样的招贴：『本人有两居室公寓一套欲免费赠送』，可是好象根本没人在意，列昂尼德同志开始高兴了：这家伙还真有两下子。<br>于是他又去商店，发现酒柜台的售货员在睡觉，成堆的酒在柜台里都挂了蜘蛛网也没人买。列昂尼德同志兴奋异常：厉害啊！这也办到了！<br>最后在回克里姆林宫的路上，经过一个教堂。列昂尼德同志发现，一个老太太打开教堂的门，朝里瞅了一眼，吐了口唾沫就走了。列昂尼德同志心想：我这个老朋友简直太不简单了！一定要重用才好。<br>回到克里姆林宫，列昂尼德同志兴高采烈地握着老朋友的手问他是怎么做到的，朋友告诉列昂尼德同志：<br>『这很简单啊！住房问题是这么解决的：我取消了出国的限制，谁想出国马上就可以拿到护照，结果 80％的人都跑到国外去了，剩下了一大堆空房子。关于酒么，我和你做得正相反，我把酒的价格降到 1 戈比，酒鬼们都疯狂买酒喝酒，结果都醉死了就没人买了。至于信仰么，那更简单了，我把教堂里的神像都送到博物馆了，把你的画像挂在了教堂。』</p><p>243）<br>有一天尼基塔同志给埃及安瓦尔（萨达特）先生打电话，等到安瓦尔先生的秘书接了之后，赫鲁晓夫说：『请找一下安瓦尔先生的遗孀。』<br>秘书莫名其妙于是就把电话给了萨达特夫人，夫人接电话之后，尼基塔同志说：『尊敬的夫人，我对安瓦尔先生的不幸去世深感悲痛。』<br>夫人说：『我不知道您在说什么，我丈夫并没有死呀！』<br>此时，电话那头就听到尼基塔同志对谢列平怒吼：『行动计划怎么推迟了！』</p><p>244）<br>苏联反犹主义者：『外国报纸全都是犹太人办的！』<br>苏联犹太人：『没错！所以外国报纸寄到这里时都给施了割礼。』<br>（注：指报纸内容被检查当局删减过。）</p><p>245）<br>列车员叫醒一个靠着窗口睡着了的旅客：『同志，你的票？』<br>『票？什么票？我没有票！』<br>『没票？那你打算去哪里？』<br>『我什么地方也不想去！』<br>『那你为什么上这列火车？』<br>『上车前，克格勃的同志们刚在大庭广众之下逮捕了一名间谍，大家都在看热闹，我也在看，后来其中一个领头的同志对着我叫到：「没什么好看的，快上车坐好！」于是我只好走进车厢……』</p><p>246）<br>斯大林钓鱼，可一直未见一条鱼上钩。他见别人频频得手，脸面上有些挂不住。贝利亚同志为他开脱道：『这里的鱼都是托洛茨基养的。』<br>斯大林不知何意，问：『何以见得？』<br>苏斯洛夫答道：『如果不是托洛茨基的鱼，为什么还怕您接见呢？』</p><p>247）<br>一个盲人在路上遇到了贝利亚同志。<br>『您好，贝利亚同志！』盲人抢先打招呼。<br>『怎么，您看得见我？』贝利亚很纳闷。<br>『不，贝利亚同志，那是因为给我引路的狗直往后退的缘故。』</p><p>248）<br>一位克格勃新人到审讯室实习，审讯一件谋杀案。他指着凶器问嫌疑人：『你见过这把刀吗？』<br>实习生反复向嫌疑人交待了政策，可嫌疑人仍然矢口否认。<br>审讯结束后，实习生回忆这次审讯，觉得自己态度不够严厉，缺乏威慑力量。于是，第二天审讯时，他紧皱双眉，圆睁双目，拍着桌子厉声问道：『说！见过这把刀吗？』<br>『见过。』嫌疑人低声回答。<br>实习生认为自己的威慑力发挥了作用，他又拍了一下桌子，问道：『说！什么时间？什么地点？』<br>『昨天，这里。』嫌疑人哆哆嗦嗦地答道。</p><p>249）<br>在苏联，一个人在职工大会上演讲。他卖力地讲苏联人民多么的富有……<br>这时拉宾诺维奇举起了手说：『我们的肉都到哪去了？』<br>第二天，那个人又来演讲。海默维奇举手问，『我不想知道肉到哪里去了，我只想知道拉宾诺维奇到哪里去了？』</p><p>250）<br>苏联外交<br>格拉尔德 · 福特，吉斯卡尔 · 德 · 爱斯坦丁，哈罗德 · 威尔逊和列昂尼德 · 勃列日涅夫去打猎。他们决定打破传统——他们将前往印度猎大象。<br>那么，他们这样做了，非常的第一天，夜幕降临，他们抓到了一头大象。现在，他们用它做什么呢？他们决定：把大象绑在树上并轮流护卫它。<br>首先是福特总统。他守了两个小时，然后交给吉斯卡尔，接着睡觉。吉斯卡尔也守了两个小时，然后交给威尔逊，接着睡觉。威尔逊站了两个小时，然后勃列日涅夫，接着睡觉。但是勃列日涅夫睡着了。<br>在早上，他们醒来时，大象没了。<br>『那里的大象呢？』他们问勃列日涅夫。<br>『什么大象？』<br>『你是什么意思？还「什么大象呢」？』其他的人愤慨地说。『我们不是来印度猎大象吗？』<br>『是的。』<br>『我们不是抓住了一头大象吗？』<br>『是的。』<br>『我们把它绑在了树上吧？』<br>『是的。』<br>『我们同意采取轮流守卫它吧？』<br>『是的。』<br>『当时福特站的岗，对吧？』<br>『是的。』<br>『他把大象给吉斯卡尔了，对吧？』<br>『是的。』<br>『然后吉斯卡尔站的岗，对吧？』<br>『是的。』<br>『他把大象给威尔逊了，对吧？』<br>『是的。』<br>『然后威尔逊站的岗，对吧？』<br>『是的。』<br>『他把大象给你了，对吧？』<br>『是的。』<br>『那么，大象在哪？』<br>『什么大象？』<br>（注：苏联外交就是装傻。）</p><p>251）<br>拉宾诺维奇出差，要到三个城市去，它们是：华沙，布拉格，还有巴黎。<br>到了华沙，他发给单位一封电报，写着：『自由的华沙万岁！拉宾诺维奇。』<br>到了布拉格，他发给单位一封电报，写着：『自由的布拉格万岁！拉宾诺维奇。』<br>到了巴黎，他又发给单位一封电报，写着：『巴黎万岁！自由的拉宾诺维奇。』</p><p>252）<br>赫鲁晓夫访问一所学校。他问一名学生：『你的父亲是谁？』<br>他回答说：『是共产主义！』<br>赫鲁晓夫很满意，他又问：『你的母亲是谁？』<br>他回答说：『是苏联！』<br>赫鲁晓夫又问：『你长大了想当什么？』<br>学生说：『孤儿。』</p><p>253）<br>列宁死了。电台发布了讣告。<br>电台广播：『尽管我们伟大的领袖列宁同志去世了，但是列宁主义却永远活着！』<br>老百姓听了都嘀咕说：让列宁活着，让列宁主义去死吧。</p><p>254）<br>赫鲁晓夫访问某集体农庄，谈到了乳品产量的问题。<br>赫鲁晓夫问道：『能不能上交更多的乳品，并且每年都确保增产，比如，百分之五？』<br>集体农庄主席回答：『可以！赫鲁晓夫同志！』<br>赫鲁晓夫很是高兴，继续问道：『百分之十呢？』<br>『可以！赫鲁晓夫同志！』<br>『百分之二十？』<br>『可以！』<br>『百分之五十？』<br>『可以！』<br>『百分之七十？』<br>『不可以！』<br>『为什么？』<br>『那样就只有水啦！』</p><p>255）<br>克格勃工作人员来到赫鲁晓夫的别墅，向赫鲁晓夫汇报市面上流传的讽刺他的笑话。在去别墅的路上工作人员对赫鲁晓夫精心照料的花园很是欣赏，于是开头就说：<br>『尼基塔 · 谢尔盖耶维奇，您生活的很好！』<br>『嗯，』赫鲁晓夫答道，『很快所有的苏联人都将这样生活。』<br>『请问，』克格勃工作人员惊讶地问道，『那么我们中谁来讲笑话呢？是您还是我？』</p><p>256）<br>赫鲁晓夫，苏斯洛夫，米高扬三人乘坐飞机在莫斯科上空游览视察。赫鲁晓夫看到有许多人正在排队争买面包，便说：『这时候如果我从飞机上投下大批面包和奶油，人们一定会拥护我。』苏斯洛夫看到有不少人在争购美国书报刊物，然后说：『这时候如果我从飞机上投下大量美国书报刊物，人们一定也会拥护我。』米高扬看到有许多人在排队争买猪肉时，就说：『我要是这时能从飞机上投下「米高扬肉类加工厂」的大量肉食品和香肠的话，人们一定更会拥护我。』然后三个人相窥而笑。这时听到他们议论的飞行员忍不住『嗤』的一下发出声来。<br>赫鲁晓夫便问道：『飞行员同志，你在笑什么？』<br>飞行员说：『我是在想……』<br>『你想什么？』赫鲁晓夫急切地问。<br>飞行员说：『我是想…… 我不敢讲。』<br>赫鲁晓夫，苏斯洛夫，米高扬三人很想知道飞行员的想法，便异口同声地说：『不碍事，你怎么想就怎么讲！你大胆讲，我们保证你这次讲什么都不问罪！』<br>这时驾驶员才慷慨说道：『我是在想，如果这时我把你们三个人一起从飞机上扔下去，人民一定会拥护的是我！』</p><p>257）<br>原来一直扮演斯大林的功勋演员，提着一个大皮箱去找赫鲁晓夫，说：『你把斯大林批臭了，我只好失业了。』演员走后，把皮包留在赫鲁晓夫办公室里．赫鲁晓夫好奇地打开一看，原来是扮演斯大林穿的大元帅服。他想，当年斯大林身着大元帅服好不威风啊，而且在人民中享有很高的威望，赫鲁晓夫就试着穿上元帅服，对着穿衣镜正上下打量。这时，米高扬轻轻推门进了赫鲁晓夫办公室，猛地一看，连忙跪倒在地求饶道：『斯大林同志，一切都不能怪我，全是赫鲁晓夫那家伙搞的鬼！』<br>赫鲁晓夫一转身，打了米高扬两记耳光，骂道：『睁大你的狗眼仔细看看我是谁？！』</p><p>258）<br>一个美国人和一个苏联人互相吹牛，夸耀自己的国家。美国人说道：『我的国家实在自由。你可以径直走进白宫，对总统说：「总统先生，我不同意你的现行对内政策！」』苏联人便答道：『嘿，这有什么！我的国家也很自由！你可以径直走进克里姆林宫，对总书记说：「总书记同志，我不同意美国总统的现行对内政策！」』</p><p>259）<br>在调查表上有这样一个问题：在执行总路线时你动摇过吗？<br>拉宾诺维奇回答道：『我和总路线一起动摇。』</p><p>260）<br>『同志，你对这个问题有什么意见吗？』党支书问道。<br>『对，我是有意见，但我不同意我的意见！』</p><p>261）<br>一个美国人和一个苏联人谈话。<br>美国人：『我敢在白宫外面大喊，里根下台，你敢吗？』<br>苏联人：『有什么不敢的？』<br>说完，苏联人走到克里姆林宫外大喊：『里根下台！』</p><p>262）<br>拉宾诺维奇到资本主义国家出差，在那里，他给单位拍了一个电报：『我选择了自由。』这事发生后，单位马上召集了党代会谴责拉宾诺维奇，并要做出组织结论。在会议中间，拉宾诺维奇突然走进了会场！全场哑然。拉宾诺维奇说道：『我非常感兴趣，你们是怎样理解自由的。』</p><p>263）<br>美国百万富翁买下苏联国家百货商场，并宣布要免费分发商品。<br>很快百货商店和通向这里的道路就开始堵塞，并有许多由于拥挤而死伤的人。人们问百万富翁：<br>『你为什么要这样做？』<br>『我非常感兴趣，当你们实行按需分配时会是什么样子。』</p><p>264）<br>问：为什么共产党员不能接受圣经？<br>答：根据圣经，先有混乱，然后根据上帝的计划引入秩序。共产主义的经验告诉我们，先有秩序，然后混乱就会到来。</p><p>265）<br>如果你是外交官，你可以一直在国外；<br>如果你是科学家，你可以每年出一次国；（学界年会）<br>如果你是运动员，你可以四年出一次国；（奥运会）<br>如果你是军人，你要 12 年才能出一次国。（44 年卫国战争反攻，56 年波匈事件，68 年布拉格之春，79 年阿富汗）</p><p>266）<br>问：什么时候共产主义能到来？<br>答：这件事将会在中央委员会全会的密信中宣布。</p><p>267）<br>问：怎么才能知道共产主义已经到来？<br>答：将在广播和报纸上宣布。如果那时还剩电视的话，还会通过电视宣布。</p><p>268）<br>问：听说在 1980 年在苏联会建成共产主义，这是真的吗？<br>答：不，现在换成举办奥林匹克运动会。</p><p>269）<br>考古学家在挖掘一个石器时代的山洞，在入口处有一标语：万岁，奴隶制度，全人类的光明未来。</p><p>270）<br>一个老布尔什维克对另一个说：『咱们活不到共产主义了，而孩子们…… 唉，他们真可怜。』</p><p>271）<br>请问，这就是共产主义，还是会更差劲。</p><p>272）<br>在共产主义的全盛时代，在食品店的门口贴着一个通知：今天没有需要食油的。<br>（注：按『需』分配……）</p><p>273）<br>问：听说在共产主义社会食品可通过电话订购，这是真的吗？<br>答：但是发放的时候要通过电视机。</p><p>274）<br>在苏兹达尔的考古发掘中发现了人们从来不知道的圣经的篇章：世界末日可以在单独的国家到来。</p><p>275）<br>一个乌克兰人被叫到克格勃。<br>问：请你解释一下，你为什么经常有从以色列来的邮件？<br>答：在战争时期，我曾藏匿过一个犹太人。<br>问：你做为一个苏联的乌克兰人，怎么能收这些犹太佬的邮包！你也不为自己的将来着想。<br>答：是，我想过，以后我还要藏中国人。</p><p>276）<br>著名的俄罗斯歌唱家维尔京斯基，还是在沙皇时代离开俄罗斯的，这次，他又返回了俄罗斯，他带着两个手提箱从车箱里走出来，他放下皮箱，亲吻着大地，看着周围的人：『俄罗斯啊，我都不认识你了！』后来，他一看，皮箱不见了。『俄罗斯哪，我认出你来了！』</p><p>277）<br>问：无价的东西可以买吗？<br>答：不可以，但是可以偷。</p><p>288）<br>问：在苏联有专门的小偷吗？<br>答：没有，人们都是自己偷。</p><p>289）<br>问：什么国家最富？<br>答：苏联。它已经被偷了五十多年了，但还没有被偷光。</p><p>290）<br>问：共产主义社会里有偷窍行为吗？<br>答：没有，我们只是在社会主义社会里偷。</p><p>291）<br>问：为什么在有苏联侨民的西方商店里会经常发生偷窃行为？<br>答：这是因为他们的意识里有共产主义的残余。</p><p>292）<br>捷克人先是建造一个东西，剩下的偷光；而苏联人先是偷得差不多了，余下的用来建造。</p><p>293）<br>苏联知识分子有五个规则：<br>1、什么都别去思考；<br>2、如果你一定要思考，不要说出来；<br>3、如果你又要思考又要说，那就别写出来；<br>4、如果你又思考又说还写，那么别签名；<br>5、如果以上规则你都不遵守，那你就别感到吃惊。</p><p>294）<br>苏联一个桥梁专家访问罗马尼亚时被邀到自己罗马尼亚的同事家做客。客人夸奖主人的别墅非常豪华。<br>主人把客人带到窗前：『你见到了那座桥了吗？』<br>苏联桥梁专家：『看见了。』<br>罗马尼亚工程师：『这就是原因所在！为了建造这座桥我节省了一些钱。』<br>过了一年，罗马尼亚工程师回访，他夸奖主人的别墅非常豪华。<br>主人把客人带到窗前：『你见到有桥了吗？』<br>罗马尼亚工程师：『没见到。』<br>苏联桥梁专家：『这你就能明白是怎么一回事了。』</p><p>295）<br>一个妇女在一个几家人合住的住宅的公用浴室里洗澡，而邻居站在走廊的一个小凳上通过门上的玻璃往里看。<br>这个妇女发现后说道：『看什么！没见过啊！』<br>邻居：『我得看看，你是在用谁的肥皂！』</p><p>296）<br>在合用住宅里住着一个不爱说话的中国人。邻居们用各种方法捉弄他：把灰尘扫到他的门里，在走廊的晾衣架上把他的扣子揪下来，把死老鼠往他的锅里放。最后，他们玩腻了这种捉弄人的游戏，向他承认了所做做为，并答应不再做这些事。这个中国人说：『非常好，我也不再往你们的茶里小便了。』</p><p>297）<br>问：在党的十二大上，关于住房问题有什么决议吗？<br>答：增加列宁同志的住房面积。</p><p>298）<br>问：能光屁股坐在刺猬身上吗？<br>答：可以，但只是在三种情况下：刺猬的刺被剃掉、是别人的屁股或者是党命令那样做。</p><p>299）<br>上帝赐给人三种品质：忠诚、聪明、党性，但是任何一个人不会两种。因为人如果是聪明和真诚的，他就没有党性；如果他是忠诚和有党性的，他就不是聪明的；如果一个人聪明和有党性，那他就不是真诚的。</p><p>300）<br>问：可以用收取的贿赂交党费吗？<br>答：如果你是一个真正的共产党员，那就可以。</p><p>301）<br>拉宾诺维奇在战斗开始前声明：如果我死了，就追认我有党员吧！如果没死，就不用了。</p><p>302）<br>问：犹太人要入党要有什么条件？<br>答：两个阿拉伯人的推荐。</p><p>303）<br>一个外国人在拥挤的公共汽车上问：『在车上和我们在一起的都是什么人？』<br>答：『他们是国家的主人。』<br>『而这是什么人开到前面去了？』他指着超过他们的『伏尔加』问道。<br>答：『这是人民的仆人。』</p><p>304）<br>问：听说苏联进军捷克斯洛伐克后，就会实现共产主义？是真的吗？<br>答：是的，电气化在那里已经实现很多年了。</p><p>305）<br>卡尔 · 马克思想在苏联发表广播演说。<br>勃列日涅夫对他说：『虽然您是人道主义的奠基人，但是我一个人不敢决定那么重大的问题。我们是集体领导。』<br>马克思说：『我只想说一句话！』<br>最后，勃列日涅夫只允许说一句话，并且要他自己负责。马克思凑近话筒，大声说道：『全世界的无产者，请原谅我！』</p><p>306）<br>问：为什么列宁穿皮鞋，斯大林穿靴子？<br>答：列宁时代俄罗斯只脏到脚脖子。</p><p>307）<br>在斯大林格勒更名为伏尔加格勒后，从另一个世界来了一封电报：『同意。约瑟夫 · 伏尔加。』</p><p>308）<br>问：为什么安德罗波夫，而后是契尔年科在党代会上被一致推选？<br>答：这是因为安德罗波夫的肾检验结果最差，契尔年科的心电图最差。</p><p>309）<br>一个公民来参加契尔年科的葬礼。有人向他要票，他答道：到这里来我用的是联票。</p><p>310）<br>问：什么事赫鲁哓夫打算做而来不及做？<br>答：嘉奖尼古拉二世，是他在俄罗斯创造了引发革命的条件。</p><p>311）<br>问：大家都知道，在赫鲁哓夫下台后的头一个十月革命节，人们把阿弗洛尔号巡洋舰沿运河运到莫斯科，这是为了什么？<br>答：向临时政府射击。</p><p>312）<br>在列宁格勒正在拍摄关于十月革命的电影。布尔什维克正在进攻，军人在射击。看热闹的人群中有人喊道：『亲爱的，坚持到最后！』</p><p>313）<br>一个年老的女演员想早一点获得国家演员的称号，人们就建议她入党。在入党仪式上人们问她怎么看共产主义。女演员说：所有东西都是充足的，不论是食品还是商品，还允许出国，总之，像在沙皇时代一样。</p><p>314）<br>在五一节的游行上，拉宾诺维奇举着这样一个牌子走过会场：感谢你，斯大林同志，是你给了我幸福的童年。<br>党代表找到他：『你在侮辱我们的常识吗？谁都知道当你在童年的时候我们的斯大林同志还没出生呢！』<br>拉宾诺维奇答道：『这就是我感谢他的原因。』</p><p>315）<br>一艘航行在大海上的轮船快要沉了，船长叫乘客赶紧跳海，但他喊了半天没有一个人跳，一个社会学家说我来喊，他去喊过之后所有的人都跳下海去了。船长觉得奇怪，问他是怎么喊的，社会学家回答说：我对法国人说这样跳下去很浪漫，我对西班牙人说这样跳下去很潇洒，我对英国人说这样跳下去是一种体育运动，我对美国人说这样跳下去有利可图，我对苏联人说这样跳下去是革命行动。</p><p>316）<br>苏共党员<br>2 万的时候：十月革命成功了；<br>200 万的时候：二战胜利了；<br>2000 万的时候：苏联解体了。</p><p>317）<br>苏斯洛夫同志和谢列平同志吵得面红耳赤，没有注意赫鲁晓夫同志就在旁边。<br>苏斯洛夫同志说：你是个大白痴！<br>谢列平同志说：我这辈子从没见过像你这么蠢的猪！<br>这时候赫鲁晓夫同志插口劝阻：两位同志请注意。你们忘了我在这里。</p><p>318）<br>米哈伊尔同志访美，罗纳德先生邀其享用米国最新科技成果：全自动超舒适马桶。用毕，米哈伊尔同志从心底赞叹，暗下决心：我国也要研制。回国后，一个攻关部门成立了，进展顺利。可是，罗纳德先生突然访苏，米哈伊尔同志措手不及，召开紧急会议，给攻关部门立下军令状：三天后必需制出。三天后，报曰：可也。<br>米哈伊尔同志遂与罗纳德先生会谈，久久不见罗纳德先生有便意，左右加巴豆于咖啡被里根饮，终于，罗纳德先生如厕。罗纳德先生端座马桶之上，事毕，感到的确舒适如意，心想，苏联的确厉害，这么短时间就研制出这幺舒适的马桶。不行，我得好好研究一下，为我国的发展提供第一手资料。于是，罗纳德先生又一次掀开马桶盖，扭了一下按钮，只见，马桶下伸出一只手，将罗纳德先生的脸仔仔细细地抹了一遍。</p><p>319）<br>尼基塔同志来华盛顿拜访约翰先生，约翰先生在白宫殷勤款待，<br>席间，厨房上了一道烤香肠，尼基塔同志吃了以后对其美味赞不绝口，约翰先生对尼基塔同志夸口说：『在我们美利坚农场，生产美味的香肠已经达到了完全自动化水平，你只要赶一头猪到香肠制造机的入口里去，过不多久机器的那一头就会自动出来一串一串的香肠……』<br>尼基塔同志边嚼着香肠边连连点头，约翰先生十分得意。<br>这时，坐在一旁的杰奎琳由于嫌香肠油脂多，吃了一点就吩咐把她的那份撤了。<br>尼基塔同志问约翰先生：『撤下去的香肠你们怎么办？』<br>约翰先生答道：『当垃圾倒掉呗！』<br>尼基塔同志摇了摇头，说：『在我们那里，吃剩的香肠只要往我们的香肠制造机出口扔进去，机器的那一头过不了多久就会跑出一头猪来……』</p><p>320）<br>在一位老专家的葬礼上，他生前的两位同事低声交谈着。<br>『伊万教授身体好好的怎么会突然就……』<br>『听说是自杀。』<br>『为什么？』<br>『那是因为一天晚上，斯大林同志好像要找他研究什么问题来着。』<br>『那也不至于自杀啊』<br>『关键是斯大林同志是叫贝利亚同志派车去接的。』<br>『那更不至于了！』<br>『问题是一开始贝利亚同志派了一辆克里姆林宫的专车去接的，没想到开到半路上车抛锚了，再派又来不及，于是贝利亚同志叫他的部下就近从内务部派了一辆专车去了……』</p><p>321）<br>法官：『你竟敢在大白天闯入人家行窃！』<br>被告：『您前次审判我时，也是这么气愤地说：「你竟敢在深更半夜潜入民宅行窃！」请问法官，我该什么时候工作合适呢？』</p><p>322）<br>尼基塔同志看民主德国因盛产啤酒而每年赚进大笔外汇，决定仿效，开始派人研究制造啤酒的技术。第一批啤酒制造出来后，尼基塔同志送了一些样品给民主德国鉴定品质。一个月后，民主德国的乌布利希回函给尼基塔：『恭喜，尼基塔同志，贵国的马很健康！』</p><p>323）<br>一位克格勃官员面授打字员给另一克格勃官员写封信。<br>『信的开头怎样写？』打字员问，『是尊敬的先生吗？』<br>『尊敬的？可他是一个十足的滑头和屠夫，不能这样称呼。要么就称亲爱的同行吧！』</p><p>324）<br>在一列火车上，同一车厢里坐着列昂尼德同志，菲德尔（卡斯特罗）先生，理查德先生和他的美国律师。<br>途中，列昂尼德同志取出一瓶伏特加酒，逐个给大家斟酒，然后将剩下的半瓶往窗外一甩。『你这样不太浪费了吗？』理查德先生惊奇地问。『苏联有的是伏特加，』列昂尼德同志非常骄傲地说，『我们根本喝不完。』<br>过了一会，菲德尔先生拿出几根哈瓦那雪茄分给同伴，他自己也点燃了一根，可没吸几口就把它扔出了窗外。<br>理查德先生又奇怪地问：『我想古巴的经济并不怎么景气，为何这么好的雪茄就给扔了呢？』<br>菲德尔先生满不在乎地说：『在古巴，我们有的是雪茄，怎么也抽不完。』<br>理查德先生沉默了一会儿，突然站起来，抱起身边的律师，硬把他塞出了窗外……</p><p>325）<br>一次军事演习正在进行，一位指挥官的吉普车陷进了泥里。他看见附近几个士兵正懒洋洋地坐在地上。便叫他们来帮忙。<br>『很抱歉，指挥官同志，我们已经阵亡了，什么也不能干。』<br>指挥官转向他们的司机：『司机同志！赶快从这些死尸里拖两具出来填到轮子底下，好让我们快点上路。』<br>士兵们马上从地上跳了起来。</p><p>326）<br>『我那在部队的儿子由于干活太卖力气，反被关了 8 天禁闭。』<br>『那是怎么回事呢？』<br>『那天，头儿要他去挖战壕，他便拼命干起来，直到把那个坑挖得老深。他希望能得到头儿的赞赏，谁知头儿看后斥责他贪生怕死。』</p><p>327）<br>作家应征入伍，列队开始编班。班长问：『你念过书吗？』<br>作家立刻骄傲而自负地说：『念过。我念过中学，而且在大学取得 3 个学位，还有写作……』<br>班长望他一眼，点点头，手中高举一块橡皮印章在他名下盖了：『识字』。</p><p>328）<br>斯塔西审问一个经常去做礼拜的教徒：『你是否承认，你经常去教堂？』<br>『是的。』<br>『你是否还承认，你亲吻了钉在十字架上的耶稣的脚？』<br>『是的。』<br>『你也会亲吻我们昂内克同志的脚吗？』<br>『当然，只要他也钉死在那里！』</p><p>329）<br>昂内克死后敲开彼得的大门，后者看着他问到：『你是不是走错了？到地狱去！』<br>半年后，两个小鬼敲开彼得的门。<br>彼得：『你们不属于这里！』<br>他们回答说：『不，我们是第一批难民！』</p><p>330）<br>一架东德国内航班的飞机被劫持到科隆 - 波恩机场。<br>飞机在跑道上被西德 GSG9 特种反恐部队监控起来。东德中央委员会开了两个小时会议，研究该如何应对。最后得出了一个决定，问一下劫持者，到底有什么要求。<br>劫持者是一个父亲，育有两个孩子，他提了三个要求：<br>1、他想要预订的卫星牌汽车能够最终交货，为此他已经等了 14 年；<br>2、他想给他的家庭要一个三居室的房子；<br>3、他想要今年去波罗的海度假。<br>谈判人员向中央委员会汇报了上述愿望。委员们又了几个小时的会议，讨论是否应该屈服他的要求。米尔克（注：斯塔西头目）警告说，鉴于有人会效仿，最好不要让步。<br>然后有人建议，最好先弄清楚，如果不满足劫匪的要求的话，他会用什么来威胁他们。<br>谈判人员又被送回科隆 - 波恩机场。<br>劫匪响亮地回答说：『那么我每个小时就释放两名人质……』</p><p>331）<br>如果撒哈拉变成社会主义会发生什么？<br>第一个十年没有什么变化，但是此后沙子会逐渐短缺。</p><p>332）<br>埃里克 · 昂内克在卡尔 · 马克思市视察一个幼儿园。孩子事先情绪高地做了准备。<br>现在埃里克问小汉斯：『好，我的小家伙，谁是你的爸爸？』<br>『你，埃里克叔叔！』<br>埃里克很高兴，又接着问：『现在你告诉我，那么谁是你的妈妈呢？』<br>『德意志民主共和国，埃里克叔叔！』<br>埃里克听了又很开心，于是继续问：『那你想成为什么样的人呢，我的小家伙？』<br>『我想变成孤儿，埃里克叔叔！』</p><p>333）<br>昂内克早晨站在阳台上：『早上好，亲爱的太阳！』<br>太阳回答说：『早上好，昂内克同志！』<br>昂内克中午站在阳台上：『中午好，亲爱的太阳！』<br>太阳回答说：『中午好，昂内克同志！』<br>昂内克晚上站在阳台上：『晚上好，亲爱的太阳！』<br>太阳回答说：『去死吧，我现在在西德！』</p><p>334）<br>东德的爱森纳赫（依发牌瓦尔特堡汽车厂所在地）人听说日本人这样测试汽车的密封性：他们把一只猫关进车里，三天之后，如果这猫窒息而死，那么零部件的密封性能判定合格。凡事爱争第一的爱森纳赫人决定效仿，用同样的方法来测试瓦尔特堡汽车。三天之后，如果这猫还呆在汽车里没有跑掉的话，那么零部件就被判定密封性合格。</p><p>335）<br>一个法国人、一个美国人和一个德国人坐火车从波恩到东柏林。<br>突然他们发现有有一个魔鬼追赶列车。他们都吓坏了。法国人抓起他所有的法郎，扔出窗外。他说：『也许这能让魔鬼知足的。』<br>魔鬼继续紧追不舍。美国抓起他所有的美元扔出去，魔鬼依然追个不停。<br>东德人把头伸出窗外，在风中喊了些什么。魔鬼突然停止下来，开始向相反方向逃跑。<br>『你都说了些什么呀？』他的同伴问。『我告诉他，如果他再继续跟着跑的话，马上就要进入东德了。』</p><p>336）<br>一天晚上，埃里希 · 昂内克和情人在豪华寝室里说着枕边悄悄话。他心情舒畅，慷慨地许诺她一个礼物，要什么都行。<br>她想了一会，回答说：『哦，埃里希，如果让你一定要为我做一件事的话，我希望是：开放柏林墙，一天就够了。』<br>昂内克说：『当然没问题，亲爱的。』不过他对她这样的请求有些不解，就问，『为什么要我做这样一件事呢？』<br>情人回答说：『我只想和你单独享受二人世界。』</p><p>337）<br>昂内克遇到毛泽东先生便问他：『在中国，您有多少个政敌？』<br>毛回答说：『我估计有 1700 万。』<br>昂内克说：『哦，和我的情况几乎完全一样。』<br>（注：东德居民人数是 1700 万。）</p><p>338）<br>问：弗拉基米尔 · 马雅可夫斯基真的是自杀的吗？<br>答：是的，确实是的，甚至他的临终遗言还保存下来了呢：不要开枪，同志们！</p><p>339）<br>埃里希 · 昂内克随外交使团在奥地利。东德和奥地利的政府各个部长被一一介绍。最后，当一个人被介绍是奥地利的海军部长的时候，昂内克忍不住哈哈大笑：『但是你们连海岸线都没有！』<br>奥地利人被激怒了，反驳说：『介绍德意志民主共和国贸易部长的时候，我们可是表现得很有礼貌！』</p><p>340）<br>问：美国的摩天楼真是全世界最高的吗？<br>答：是的。但是苏联制造的晶体管是全世界最大的。</p><p>341）<br>问：将军的儿子能成为元帅吗？<br>答：不可能。元帅都有儿子。</p><p>342）<br>问：为什么我国不急着登月？<br>答：如果宇航员拒绝回来怎么办？</p><p>343）<br>有人喜欢说笑话；有人喜欢收集笑话去说笑话；有人喜欢收集说笑话的人。</p><p>344）<br>老师问：『弗里茨，为什么你总是说成「我们的苏维埃兄弟」？应该说成「苏维埃朋友」才对。』<br>弗里茨回应道：『好吧，但是朋友的话，你是可以选择的。』</p><p>345）<br>问：苏联人民真的不需要立体音响设备吗？<br>答：原则上，是的。人们从各个方向听到的东西几乎都是一模一样的。</p><p>346）<br>问：我们劳动营的条件真的是很棒吗？<br>答：原则上，是的。五年前，我们的一个听众对此抱有怀疑，所以他被派去实地调查。他看来真的很喜欢那里，到现在也没有回来。</p><p>347）<br>问：共产主义的地狱，资本主义的地狱，哪个好些？<br>答：共产主义的地狱。大部分的炉子都不能正常运转，因为那里严重缺乏燃油。</p><p>348）<br>两个东德警察站在柏林墙附近聊天。<br>一个问：『你觉得我们的政权如何？』<br>另一个回答说：『和你的看法一样。』<br>『这样的话，我就有责任逮捕你！』</p><p>349）<br>撒切尔、科尔、昂内克和契尔年科在高峰会议的间隙坐在一个酒吧里谈话。<br>起先，契尔年科站起来，撕破自己的衬衣，骄傲地指着自己毛绒绒的胸膛说：『这就是俄罗斯的针叶林带！』<br>撒切尔夫人不甘示弱，也撕破自己的衣服说：『看这里，先生们，这是两个优质的英镑！』<br>科尔做出一个不屑一顾的手势和一副意味深长的表情，他脱下裤子，露出屁股说：『这里，你们看到的是分裂的德国。』<br>其他的人都惊呆了，迄今无人知道德国是如此硕大。<br>现在，昂内克倍感压力，他站起来，扣紧了自己的裤裆，巧妙地回击科尔说：『这里是隔栏，我向你们发誓，这玩意儿不会再变高了。』</p><p>350）<br>一名观光客在列宁格勒旅行时，途中因为滑了跤而跌入正在施工的水沟中，满身肮脏的美国人气愤地向导游说：<br>『在美国，危险场所都会竖起红旗，才可以避免危险啊！』<br>『我国也是一样啊！』导游说：『难道你在入境时没看见竖起着大红旗吗？』</p><p>351）<br>列宁格勒涅瓦河的桥上聚集了许多群众，当民警前来察看时，看见一名犹太老人很认真地朗读着希伯来文的课文。<br>『喂！老先生，你在这儿做什么？』警察询问道。<br>『我只是在这里念希伯来文而已。』<br>『你念这个东西做什么呢？』<br>『你看也知道我都这么老了，就不久于人世了。因为我想到死后会遇见上帝，所以得先学会上帝的语言啊！』<br>警察听了讽刺地笑着说：『你怎么知道你会上天堂？』<br>老人点头答道：『我是不知道自己是不是上天堂啦，但若不是上天堂那就更不用担心了，因为另一边一定是讲俄文的！』</p><p>352）<br>斯大林找来拉狄克：<br>『我知道你在传播关于我的笑话。这很无礼。』<br>『为什么？』<br>『因为我是全体人民的伟大领袖、导师和朋友。』<br>『天地良心，我没和任何人讲过这个笑话。』</p><p>353）<br>问：克里姆林宫如何处理耗子呢？<br>答：很简单，我们竖一块『集体农庄』的标志牌，然后一半老鼠会挨饿，另一半会跑路。</p><p>354）<br>『勃列日涅夫同志，听说您收集政治笑话，是真的么？』<br>『是的。』<br>「那么您现在收集了多少了呢？』<br>『三座半劳改营。』</p><p>355）<br>『他被判了 3 年，幸运的是，坐牢五年后他被提前释放了。』</p><p>356）<br>问：美国和苏联宪法有什么区别？不是都保证言论自由吗？<br>答：当然，不过美国宪法也保证言论后的自由。</p><p>367）<br>问：苏联是世界上进步最快的国家吗？<br>答：当然！生活在昨天就已经比明天好了！</p><p>368）<br>在内战期间，由挨饿农民组成的代表团前往斯莫尔尼宫递交请愿：<br>『我们都开始像马一样吃青草了。』一个代表团成员说。<br>『很快我们就会像马一样叫了！』<br>『得了吧，别担心！』列宁肯定地说，『我们在这儿喝着加蜂蜜的茶，也没像蜜蜂一样嗡嗡叫，不是么？』</p><p>369）<br>一个老师领着她的学生经过公园，路上看到了一只小白兔。他的学生都是城里人，没见过白兔。<br>『你们知道这是什么么？』老师问。没人知道。<br>『孩子们，』老师试图引导学生的思路，『他是我们常读的许多故事、歌曲和诗歌中的角色。』<br>一个学生赶忙向小兔敬礼，恭敬地说：『原来您长这样，列宁爷爷！』</p><p>370）<br>斯大林去看一场苏联喜剧电影的首映式。在影片播放时他一直快活地大笑，不过在电影结束之时他突然问道：<br>『好吧，我喜欢这电影。可为什么那个丑角的小胡子和我的一样？』<br>所有人都噤若寒蝉，只有一人怯怯地提议道：『斯大林同志，要不要让演员把胡子剃了？』<br>斯大林答道：『好主意，枪毙前先把胡子剃了。』</p><p>371）<br>斯大林在党代会上作报告。突然有人打了个喷嚏。<br>『谁打喷嚏了？』<br>寂静。<br>『第一排起立！把他们毙了！』<br>第一排的人都被毙了。斯大林又问：<br>『谁打喷嚏了？』<br>还是没人回答。<br>『第二排起立！把他们毙了！』<br>第二排也都被枪毙了。<br>『谁打喷嚏了？』<br>最后，大厅里响起了一个哽咽的声音：『是我，是我！』<br>斯大林说：『小心身体，同志，别感冒！』</p><p>372）<br>一个老妇人等了两个小时才挤上汽车。当她终于上车之后，她擦了擦她的额头，说：『终于上来了，感谢上帝！』<br>司机说：『大娘，你不能这么说。你必须说「感谢斯大林同志」。』<br>『抱歉，同志。』老夫人答道，『我就是个落后的老女人。我会从现在开始按你说的说的。』<br>过了一会儿，她又问道：『抱歉，同志，我很老很笨。如果不让说上帝，斯大林死了，那我该怎么说？』<br>『好吧，到那时候你就可以说「感谢上帝」了！』</p><p>373）<br>演讲后，勃列日涅夫向秘书抱怨：『我让你准备 15 分钟的讲稿，你的稿子却让我讲了 45 分钟！』<br>秘书：『我给了您三份讲稿……』</p><p>374）<br>勃列日涅夫在路上看到一个人扛着西瓜回家。他停下车，招呼那人，要那人把西瓜卖给他。<br>『好吧，勃列日涅夫同志。』那人说，『您选一个吧。』<br>『可只有一个西瓜啊。』<br>『我们选您的时候就是这样。』</p><p>375）<br>1978 年勃列日涅夫建议乌尔霍 · 吉科宁总统（芬兰总统）取消苏芬两国的边境线。吉科宁最初很感兴趣，不过后来拒绝了，因为他认为自己太老，管理那么大个国家有些难度。</p><p>376）<br>塔斯社通讯：今天，由于健康状况恶化且没有恢复意识，康斯坦丁 · 乌斯季诺维奇 · 契尔年科同志接任总书记职务。<br>塔斯社通讯：今天，由于健康状况恶化且没有恢复意识，列昂尼德 · 伊里奇 · 勃列日涅夫同志恢复担任总书记职务。</p><p>377）<br>另一则塔斯社通讯：同志们，你们该开心了，因为苏联共产党和全苏联今天【又一次】遭受了严重的损失。</p><p>378）<br>监狱里两个囚犯正交流经验。<br>『你是因为政治犯罪被捕的么？』<br>『当然。我是个管子工，被党委员会叫去修下水管。我看了看，说，「整个体系都该换换了」，于是我就被判了 7 年。』</p><p>379）<br>新来的苏联移民正在回答记者的问题：<br>『在苏联生活如何？』<br>『没的抱怨。』<br>『在那儿你的工作如何？』<br>『没的抱怨。』<br>『孩子上学如何？』<br>『没的抱怨。』<br>『所以说，你在苏联快乐么？』<br>『没的抱怨。』<br>『好吧。』记者继续道，『那你为什么要移民来以色列？』<br>『因为在这儿我可以抱怨！』</p><p>380）<br>一个男的在报亭买了一份真理报。<br>摊主好奇地问道：『同志，每天早上你都在我这儿买真理报，可连翻都不翻开就扔掉，为什么？』<br>男人答道：『我只对头版感兴趣。我在等一份讣告。』<br>摊主奇怪了：『可是头版上没有讣告部分啊？』<br>男人答道：『我向您保证，我想看的讣告会上头版的。』</p><p>381）<br>『我的妻子已经在厨艺学校学了三年了。』<br>『哇，那她的厨艺一定很好咯？』<br>『没有，她们刚学习到苏共第二十次代表大会。』</p><p>382）<br>『爸，您能给我套车钥匙么？』<br>『好，别丢了，儿子，七年之后我们就会领到车！』</p><p>383）<br>『我想预定一辆小汽车。需要多久？』<br>『从今天开始正好十年。』<br>『上午还是下午？』<br>『有区别么？』<br>『那天上午我们还请了管子工。』</p><p>384）<br>问：资本主义和社会主义贸易的区别是什么？<br>答：资本主义下什么都有卖，社会主义下什么都要买。</p><p>385）<br>『这是亚美尼亚广播电台，有听众来信问为什么我们停播了很久。事实上，我们不得不对我们的员工进行调整。我们之前那个播音员在阅读「社会主义一无是处——相较于共产主义而言」的时候，在破折号那里停顿了太长时间。』</p><p>386）<br>『这是亚美尼亚广播电台，有听众问如果苏联开放了西方边境该如何。我们建议，赶快朝西伯利亚跑，否则会被人群踩死的。』</p><p>387）<br>『这是亚美尼亚广播电台，有听众问「如果突然感到渴望工作怎么办」。我们建议，在沙发上躺一会儿，会过去的。』</p><p>388）<br>『这是亚美尼亚广播电台，有听众问解释「共产主义」最简单的途径是什么。我们的回答是：用拳头。』</p><p>389）<br>『这是亚美尼亚广播电台，有听众问社会主义国家的工作时间是什么。这是回答：当然是八时工作日：早八点到晚八点。』</p><p>390）<br>问：哪里的茶好？中国的还是苏联的？<br>答：不要混淆强权之间的斗争。喝咖啡。</p><p>391）<br>问：尼克松来莫斯科时，他和赫鲁晓夫绕克里姆林宫赛并跑了第一，我们该怎么报道？<br>答：『在国际长跑比赛中，我们的第一书记同志获得了光荣的第二名，尼克松先生则为倒数第二。』</p><p>392）<br>问：第三次世界大战会爆发吗？<br>答：不会，不过为和平而进行的斗争到很可能会让全世界寸草不生。</p><p>393）<br>问：如果社会主义在格陵兰建成会怎样？<br>答：首先，雪只有在有配给票时才会下，其次它只会被分配给克格勃军官和他们的家属。</p><p>394）<br>问：共产主义是什么？<br>答：商店里应有尽有。换句话说，就像尼古拉二世时代那样。</p><p>395）<br>问：什么单词以 R 开头且没有结尾？<br>答：改革（Reorganization）。</p><p>396）<br>问：有没有可能在一国建成社会主义？<br>答：可能，不过最好去别的国家生活。</p><p>397）<br>问：有没有可能解决没有解决方法的问题？<br>答：我们不回答有关农业的问题。</p><p>398）<br>问：什么被允许，什么被禁止？<br>答：在英国被允许的被允许，被禁止的被禁止；在美国不被禁止的都被允许；在德国不被允许的都被禁止；在法国什么都被允许，包括被禁止的；在苏联什么都被禁止，包括被允许的。</p><p>399）<br>问：什么是最短的笑话？<br>答：共产主义。</p><p>400）<br>问：什么是最长的笑话？<br>答：赫鲁晓夫在党代会上的讲话。</p><p>401）<br>问：为什么索尔仁尼琴、布科夫斯基、博洛茨基等不同政见者都被流放到外国去了？<br>答：你不知道一类品用于出口么？</p><p>402）<br>问：其他星球上的生活如何？<br>答：也是民不聊生。</p><p>403）<br>问：我们的敌人是用什么方法来对抗社会主义政权的呢？<br>答：这个问题我们将在『合理化建议』栏目中讨论。</p><p>404）<br>问：有什么问题你不能回答？<br>答：没有。我们根据马克思的辩证法来完成工作。任何问题我们都能给出答案。</p><p>405）<br>一只兔子在街上狂奔。<br>『你跑得这么快，慌什么？』熊问。<br>『你不知道么？他们现在在逮捕所有的骆驼，还要阉割他们。』<br>『可你是兔子不是骆驼啊。』<br>『对，不过假设他们逮到你，在他们阉掉你之后你就能证明你不是骆驼了！』</p><p>406）<br>一个犹太人申请移民去以色列。据他说，他的哥哥在以色列病得很重，需要帮助。办公室的官员问他：<br>『那为什么不让你的哥哥来这里，而要你亲自过去？』<br>『我的哥哥是得了病，但还没有得精神病。』</p><p>407）<br>为了解决黄油短缺问题，政治局要求苏联科学家研究技术，把粪便做成黄油，并在十月革命周年纪念期间完成。在六个月的工作之后，政治局要求进展报告。科学家报告称他们实现了 50% 的成功。政治局要求解释，答复如下：<br>『人们已经可以把它涂在面包上，但尚不会去吃。』</p><p>408）<br>2010 年。莫斯科。<br>男孩问：『爷爷，队列是什么？』<br>『你要知道，在 20 年前，商店里没有足够的肉，因此人们不得不在商店门前排长长的队伍等着买肉。这就叫队列。懂了么？』<br>『是的，爷爷。不过肉是什么？』</p><p>409）<br>在奥运会上，苏联掷链球（注：在英文中链球实为『锤子』，Hammer）选手打破了世界纪录。记者采访他问：<br>『你是怎么把锤子抛的那么远的？』<br>『如果再搭上个镰刀，我能扔出两倍远。』</p><p>410）<br>苏联社会七大谜题：<br>1、总是没人工作，计划却总是完成；<br>2、计划总是完成，可（商店）柜台总是空的；<br>3、柜台总是空的，可却没人挨饿；<br>4、没人挨饿，可所有人都不高兴；<br>5、所有人都不高兴，可是没人抱怨；<br>6、没人抱怨，可是天天有人上街游行；<br>7、天天有人上街游行，可政府却总是以 99.9% 的得票率当选。</p><p>411）<br>一人走进党的区委会问道：『我想入党。该从哪里开始？』<br>『看精神病医生。』</p><p>412）<br>问：你相信随着时间的推移，政治笑话正被重新认识吗？<br>答：当然。过去一个笑话判 15 年，现在只判 3 年。</p><p>413）<br>一个人把自己的车停在了莫斯科红场上。警察赶快跑来，向他怒吼：<br>『你疯了么？这是政府所在地！』<br>『没问题。』那人答道，『我的锁很结实。』</p><p>414）<br>一个妇女走进食品商店。<br>『你们卖肉吗？』<br>『没有。』<br>『牛奶呢？』<br>『我们这儿只处理肉，对面那家才是没有牛奶的。』</p><p>415）<br>一个卫兵问政治犯：<br>『刑期多久？』<br>『十年。』<br>『犯了什么罪？』<br>『没犯罪。』<br>『你撒谎！没犯罪他们只给判 5 年！』</p><p>416）<br>一个日本工人被派到俄罗斯维修日本产的机械。日本人每天工作 8 小时，不和别人说话。一个月后他的工作期满。在他返回日本之前，日本人眼含泪水地对大家说：『我道歉，我的好工人同志们。我知道工人们应该团结起来，但我有合同在身，我不得不工作，我为没有参与你们的长期罢工而向你们正式道歉！』</p><p>417）<br>苏联人、法国人和美国人争论什么是最勇敢的人。<br>美国人说：『举例来讲，我们有十辆汽车，其中一辆没有刹车。我们抽签，每人搭一辆开山路。最后我们中的一个人住院，另外九个去看他。』<br>『这不算什么。』法国人说，『我们选 10 个女孩，其中有 1 个有艾滋病。我们抽签，一人找一个女孩。最后一个人住院，另外九个去看他。』<br>苏联人说：『我们聚在公寓里，即便知道我们中有一个告密者。我们讲了一晚上政治笑话，然后九个人进了监狱，另外一个去看他们。』</p><p>418）<br>一个外国代表团突击访问了一个集体农庄。没时间准备。代表团走后，集体农庄主席拉过区党委书记说：<br>『你们没提前告诉我，所以他们都看见了。牛栏的废墟，那些灰尘，我们的贫穷。』<br>『别担心。』党书记说道。<br>『不过他们现在就能传的满世界都知道啊。』<br>『那就让他们沉浸在一贯的造谣中伤里吧。』党书记答道。</p><p>419）<br>在格鲁吉亚共和国的学校中，老师正在让学生说说自己的父亲。<br>『图拉什维里，说说你的父亲。』<br>『我爸爸种橘子。他把它们带到莫斯科销售，赚了不少钱。』<br>『你了，布里泽。』<br>『我爸爸种月桂叶。他把它们带到莫斯科销售，赚了不少钱。』<br>『你了，克里维泽。』<br>『我爸爸在反贪污和投机倒把分局工作。每次布里泽和图拉什维里的爸爸去莫斯科的时候都回去看看我爸爸。因此他赚了不少钱。』<br>『你了，查维查瓦泽。』<br>『我爸爸是生物工程师。』<br>全班大笑。<br>『孩子们。』老师严肃地说，『不要把快乐建立在别人的悲伤之上。』</p><p>420）<br>全世界进行对关于大象的最佳书籍的评奖大赛。<br>法国人递交了一册精装的《大象家庭内的三角恋研究》<br>英国人提交了一套《大象与世界贸易》<br>德国人提交了 24 卷本的一套《大象学综介》<br>美国发放了一百万份传单，上面写着：『赢大象，不需购买。』<br>苏联提交了三卷书，题目如下：<br>《第 1 卷：大象在伟大的十月社会主义革命中的作用》<br>《第 2 卷：大象在世界上最进步的苏联社会的光芒中的快乐生活》<br>《第 3 卷：苏联——大象的祖国》</p><p>421）<br>在入党审批过程中有一个问题是：『你怎么看待苏联政府？』<br>一人回答：『就像看待我妻子一样。』<br>『怎么解释？』<br>『第一，我爱她；第二，我怕她；第三，我想换一个。』</p><p>422）<br>在莫斯科红场，人们正排队参观列宁墓卫兵换岗。一个小孩问：<br>『爸爸，为什么他们总是要看守这陵墓？』<br>『他们不是一直说吗？』父亲答道，『列宁是永生的。如果他看不下去了决定出来怎么办？』</p><p>423）<br>斯大林招来著名作家肖洛霍夫。<br>『我已经读了你的小说《新垦地》。写得非常好，我喜欢。我想，你为啥不写一篇文章，就叫《敌人不投降，就叫他灭亡》？』<br>『我害怕我写不好，斯大林同志。最近我的健康状况不好。』<br>『我们会帮你的。我们会把你送到格鲁吉亚去，那里有酒有葡萄。』<br>『好吧，斯大林同志。那请让我和家人道个别。』<br>『为什么？』<br>『我怕我的文章不成功。』</p><p>424）<br>问：能够用香蕉当指南针吗？<br>答：可以。把香蕉放在柏林墙上，香蕉被从哪边抽走哪边就是东边。</p><p>425）<br>『奶奶，列宁好吗？』<br>『当然，孙子，他很好。』<br>『斯大林呢？他坏吗？』<br>『坏，当然坏。』<br>『赫鲁晓夫呢？他怎么样？』<br>『等他死了，我们就知道了。』</p><p>426）<br>党代会。斯大林发言：<br>『今天我们有两个问题要讨论。第一，我们需要枪毙所有的政治局委员。第二，我们需要把列宁墓涂成亮绿色。』<br>观众席中传来了一个怯怯的声音：<br>『为什么涂成亮绿色？』<br>『很好，我就知道大家对问题一没有不同意见。』</p><p>427）<br>斯大林想要测试一下党员的忠诚性。他召来一个俄罗斯人，一个乌克兰人和一个犹太人，要求他们从十层楼窗台上跳下去。<br>俄罗斯人往窗外看了一眼，哀求道：<br>『斯大林同志，求求您，我有家人、孩子……』<br>『逮捕他！』斯大林下令。<br>乌克兰人往窗外看了一眼，跪了下来：<br>『斯大林同志，行行好！我得独自支撑整个家庭！』<br>『逮捕他！』斯大林下令。<br>拉宾诺维奇脱掉夹克、裤子，摘下手表，都交给斯大林：『求求您，把这些交给我妻子。』然后转身跳出窗外。<br>当然了，斯大林只是开玩笑，拉宾诺维奇被下面的网子接住，并没摔成碎片。他被带回斯大林的办公室，斯大林感动地说：『我的好朋友，拉宾诺维奇同志，您已经证明了您是一位忠诚的共产党员，您会因此获得勋章和更好的工作。我只是有一点不解：您的勇气是哪里来的？这对我们是万分珍贵的。』<br>拉宾诺维奇答道：『说实话吧，斯大林同志，死了都比现在的生活要好。』</p><p>428）<br>尼克松先生访问莫斯科，赫鲁晓夫带着他参观首都，尤其是各个新建住宅区。<br>『那些是什么？』尼克松突然问道。<br>『你什么意思啊？』赫鲁晓夫傲慢地反问，『电视机。』<br>『好啊！』尼克松赞叹道，『你们不只已经赶上了我们，在一些地方甚至已经超过了我们。』<br>『哪里？』赫鲁晓夫欣喜若狂。<br>『比如说吧，我们从不在猪圈里安装电视机。』</p><p>429）<br>为了测试玉米的营养，赫鲁晓夫招来一个俄罗斯人，一个乌克兰人和一个犹太人，让他们只吃玉米三个月。<br>最后俄罗斯人掉了 20 公斤体重，乌克兰人掉了 10 公斤，犹太人则长了 5 公斤。<br>赫鲁晓夫很高兴：『拉宾诺维奇同志，告诉我们你是怎么做到的？』<br>『很简单，赫鲁晓夫同志，我用母鸡过滤了一下玉米。』</p><p>430）<br>斯大林就要死了，他把赫鲁晓夫招来：<br>『尼基塔 · 谢尔盖耶维奇，我知道你会继承我并超越我，』斯大林说，『我给你准备了两封信。如果你遇到了危机，就拆开第一封；如果再遇到，就拆开第二封。』<br>赫鲁晓夫拿走了两封信。1956 年，他遇到了匈牙利和苏伊士危机。于是赫鲁晓夫拆开了第一封信，上面写着：『都怪在我头上！』于是苏共二十大召开，斯大林主义终结了。<br>1964 年，赫鲁晓夫又碰上了勃列日涅夫和柯西金的政变，于是他拆开第二个，只见上面写着：<br>『准备两封信。』</p><p>431）<br>科学家联名要求赫鲁晓夫去领导一个癌症治疗所。赫鲁晓夫推脱道：『谢谢同志们的支持，但我对癌症一窍不通啊。』<br>科学家们纷纷说道：『赫鲁晓夫同志，您只要应用一下您在农业问题上的经验就好了！您一负责，粮食就全不见了！』</p><p>432）<br>问：为什么在斯大林的遗体被移出列宁墓后，陵墓的看守反而加倍了？<br>答：因为他们发现赫鲁晓夫曾经抱着铺盖卷在附近晃悠。</p><p>433）<br>『列昂尼德 · 伊里奇！』<br>『哎呀，在同志之间不用这么正式嘛，叫我伊里奇。』<br>（『两个伊里奇』）</p><p>434）<br>电话铃响了，勃列日涅夫拿起听筒：<br>『您好，这是亲爱的列昂尼德 · 伊里奇……』<br>（苏联官方常称勃列日涅夫为『亲爱的列昂尼德 · 伊里奇』）</p><p>435）<br>塔斯社通讯：<br>『…… 昨天在莫斯科发生了一起针对勃列日涅夫同志的失败暗杀事件。子弹穿透汽车的防弹玻璃，击中勃列日涅夫同志胸前的勋章，随后反弹并打死了司机。』</p><p>436）<br>科学家发明了一种电脑，能够计算出与共产主义的距离。在勃列日涅夫的监督下，科学家输入了所有的信息，计算机开始计算。一天、两天，三天…… 最终计算机得出了结果并打在了卡带上：18 千米。<br>科学家十分震惊。肯定是算错了！他们重来了一次，还是这个数字！<br>学院的锅炉工突然懂了什么：<br>『同志们，朋友们，数据没有错！勃列日涅夫同志告诉过我们，每一个五年计划都能让我们向共产主义迈进一步！』</p><p>437）<br>勃列日涅夫在电视上对公众讲话：<br>『近日在莫斯科有恶毒的流言说我的警卫开的车里不是我而是个假人。我必须得说这是相当肮脏的谎言！他们在给我开车，而不是假人！』</p><p>438）<br>勃列日涅夫在一位重要政治人物的葬礼上讲话：<br>『同志们，我能理解你们的表情为什么这么难看。我能理解你们的着装为什么这么没品位。不过我不能理解的是你们的教养怎么这么糟糕！音乐响了这么久，就我一个人知道要邀请女士跳舞！』</p><p>439）<br>勃列日涅夫在向工人们讲话：<br>『很快我们就能生活得更好！』<br>台下传来一个声音：<br>『我们怎么办？』</p><p>440）<br>勃列日涅夫坐车在莫斯科街头闲逛，突然看到一座纪念碑。<br>『这座纪念碑是谁的？』<br>『契诃夫的，列昂尼德 · 伊里奇。』<br>『哦，很好。我读过他的《姆姆》。』<br>『抱歉，列昂尼德 · 伊里奇，《姆姆》不是契诃夫写的，而是屠格涅夫。』<br>『哦，真的么？那这可真蠢。』勃列日涅夫评论道，『《姆姆》是屠格涅夫写的，可契诃夫却得到了纪念碑！』</p><p>441）<br>勃列日涅夫给尼克松打电话，说他昨天晚上做了个梦：一面红旗飘扬在白宫上空。<br>第二天尼克松给勃列日涅夫讲他的梦：<br>『列昂尼德，我梦到一面红旗飘扬在克里姆林宫上空！』<br>『不过现在就是这样啊？』<br>『不见得…… 我梦里那面红旗上貌似写着中文……』</p><p>442）<br>勃列日涅夫的噩梦：<br>捷克人坐在红场上吃犹太薄饼——用筷子。</p><p>443）<br>问：沙俄和苏维埃政权的主要区别是什么？<br>答：沙俄政权由老头子传给儿子，现在是从老头子传给老头子。</p><p>444）<br>有人给克里姆林宫打电话：<br>『你们现在在找苏共的新总书记吗？』<br>『不！你是谁？傻瓜吗？』<br>『对，病入膏肓的老傻瓜！』</p><p>445）<br>问：世界上最豪华的老人院是什么？<br>答：克里姆林宫。</p><p>446）<br>两个人在莫斯科街上走。一个人突然问：<br>『现在是完全的共产主义了吗？我们终于通过社会主义到达共产主义了吗？』<br>另一人答道：<br>『天哪，没有。事情还没那么糟糕。』</p><p>447）<br>戈尔巴乔夫在别墅与赖莎一起度假。早上，戈尔巴乔夫穿着条内裤走到阳台上呼吸新鲜空气。<br>『亲爱的，回来穿上睡衣。』赖莎喊道。<br>『赖莎，你是怎么隔着两间屋子看到我的？』<br>『不，我在听自由欧洲电台。』</p><p>448）<br>一天晚间。完成了一天的工作，雅科夫 · 米哈伊洛维奇 · 斯维尔德洛夫来弗拉基米尔 · 列宁的书房小坐。<br>『弗拉基米尔 · 伊里奇，我们要么开一瓶？』斯维尔德洛夫问。<br>『不干。我绝不再这样了！』列宁断然拒绝，『绝不！』<br>『得了吧，弗拉基米尔 · 伊里奇！就我们两个！…… 上次我们开了两瓶，什么也没发生啊？』<br>『还什么都没发生呢！你和捷尔仁斯基回去睡觉去了，可我却爬到辆装甲车顶上，扯了一顿屁话……』</p><p>449）<br>苏联的家具厂生产一种新型号的床：『共产主义型号』。床能轻松塞下三个人，而床沿上则刻着标语：『列宁总与你同在！』</p><p>450）<br>一艘苏联货船被食人族海盗劫持，海盗准备把所有的海员吃掉。船长问道：<br>『亲爱的食人族同志，你们有过集体化吗？』<br>『没有！』<br>『你们有过个人崇拜吗？』<br>『没有！』<br>『你们有过十月节吗？』<br>『没有！』<br>『好吧，那我就真的不能理解你们为什么这么残忍了……』</p><p>451）<br>一个熟人在莫斯科街头遇见了拉宾诺维奇。他很奇怪地问：『拉宾诺维奇，你为什么没移民以色列？』<br>『为什么？在这儿我也能感受到悲惨！』</p><p>452）<br>一个美国男孩和一个苏联男孩对话：<br>『我们有巧克力。』<br>『我们有斯大林。』<br>『我们也可以有斯大林。』<br>『可那样的话你们就不会有巧克力了……』</p><p>453）<br>问：想象斯大林、政治局委员和他们的全体跟班都在涅瓦河的一艘蒸汽船上。突然船进水，迅速沉没，谁会得救？<br>答：全体苏联人民。</p><p>454）<br>『打倒犹太人和骑自行车的！』<br>『骑自行车的怎么着你了……』</p><p>455）<br>问：可以批判希特勒吗？<br>答：可以，就像你批判斯大林的方法一样。你把把自己锁在屋里，蒙上两层，最好三层被子，在脸上蒙上一个，最好两个枕头，然后就可以畅所欲言了。记住，时间要严格限定在 5 分钟以内。</p><p>456）<br>问：为什么柜台上的黄油都不见了？<br>答：全在苏维埃制度光芒的照耀下融化了。</p><p>457）<br>问：什么是社会主义制度下的各民族团结？<br>答：就是亚美尼亚人、俄罗斯人、乌克兰人等苏联一切民族如兄弟一般团结起来，共同胖揍阿塞拜疆人。</p><p>458）<br>问：最高苏维埃是什么？<br>答：最高苏维埃是苏联的最高权力机构。它由两个人群组成：什么都不能干的人和什么都能干的人。</p><p>459）<br>问：猪可以是秃顶吗？<br>答：我们不回答政治问题。</p><p>460）<br>问：什么是乐观主义者和悲观主义者？<br>答：乐观主义者学英文；悲观主义者学中文。</p><p>461）<br>问：是说在苏联没有立体声系统吗？<br>答：的确，你听到的全都来自一个方面。</p><p>462）<br>埃里希 · 昂内克想人民是如何看待他的，所以他化妆微服私访。他在大街上问一个人：『打搅一下，请问您觉得昂内克怎么样？』这个人把他引到一个辅路上，确认四下无人能听见他说话，他贴着埃里希的耳朵小声说：『我支持昂内克！』</p><p>463）<br>学校里，老师提问：『社会主义最重要的东西是什么？』<br>学生们陷入思考，小弗里茨回答说：『社会主义最重要的东西是人！』<br>老师说：『这个回答不错，弗里茨，我打算给 B 等成绩。』<br>弗里茨并不满意，他果断地做出反应：『如果我告诉您这个人的名字，您可以给我一个 A 吗？』</p><p>464）<br>为什么西德的生活水平比我们高？<br>因为共产主义者得不到那边的工作许可。</p><p>465）<br>问：为什么市面上没有面粉卖？<br>答：因为他们开始往面包加面粉了。</p><p>466）<br>问：原子弹会摧毁我们美丽的家园埃里温吗？这里的建筑多么壮观，花园多么优美！<br>答：原则上，是的。不过莫斯科是一个漂亮得多的城市！</p><p>467）<br>问：什么是混乱？<br>答：我们对国民经济不做评论。</p><p>468）<br>东德的士兵正在接受训练。在完成与数不清敌人的无数次交锋之后，每一个人都变得敌友不分了。指挥官正在测试他的士兵。<br>指挥官：『舒尔茨！』<br>士兵舒尔茨：『是，长官！』<br>指挥官：『如果你遇到一个美国士兵和一个俄国士兵，你会杀死哪个？』<br>士兵舒尔茨：『俄国人！』<br>指挥官：『不对，你个白痴！如果我是你的话，我会杀死美国人！』<br>士兵舒尔茨：『您看，长官先生，您还是把俄国人留给我来解决了吧？』</p><p>469）<br>两个囚徒在监狱里相遇。<br>一个人问：『什么原因进来的？』<br>『我是一个自行车零售商，呼吁过让埃里克 · 昂内克下台。你以前是干什么的？』<br>『我用望远镜观察了埃里克 · 昂内克。』<br>『这没什么呀！』<br>『是的，很好，不过我在望远镜下安装了一把步枪……』</p><p>470）<br>冬天，一个男人看见两个男孩拿着一个雪橇，就问道：『你们干吗呢？』<br>『我们在玩德苏友谊的游戏。』<br>『怎么玩？』<br>『非常简单，他把我推上山顶，然后我就滑下去。』</p><p>471）<br>东德人对西德人说：『我们是一个民族！』<br>西德人回应说：『我们也是。』</p><p>472）<br>问：为什么东德经济已经低到膝盖以下了？<br>答：因为她想先蹲下再跳起来超过资本主义经济。</p><p>473）<br>社会主义阵营经济的四根支柱是什么？蒙古的电台、苏联农业的成就、波兰工人的勤劳、东德的统计年鉴。</p><p>474）<br>谁是世界上最伟大的外科医生？当然是瓦尔特 · 乌布利希。他把欧洲的心脏改造成世界的屁股！</p><p>475）<br>昂内克和电车的区别是什么？<br>电车有更多的追随者（拖车）。</p><p>476）<br>医生在精神病院巡视。『这里有一个格外严重的病例，』医生指着一个病人叹息道，『他居然在昂内克废话的时候没有关掉收音机！』</p><p>477）<br>问：为什么东德没有实行全国性的计划生育？<br>答：因为生儿育女的生产资料掌握在私人手里。</p><p>478）<br>问：什么是不信任？<br>答：东德的边防人员在波兰边境来自苏联的石油管道凿一个洞，看看石油朝哪个方向流动。</p><p>479）<br>问：您能描述以下东德的地理特征吗？<br>答：一个充满各种瓶颈的平原。</p><p>480）<br>最后的卫星牌汽车在交付的没有装发动机——因为反正在东德一切都是往下滑的……</p><p>481）<br>卫星牌汽车源自马克思主义！因为《资本论》说：它有使用价值，但是没有价值。</p><p>482）<br>问：为什么社会主义把人民放在最中心的位置？<br>答：因为这样从各个方向都能方便地剥削他们。</p><p>483）<br>里根、勃列日涅夫和昂内克问亲爱的上帝，2000 年的时候世界会怎样。上帝对里根说：2000 年的时候美国会变成共产主义国家。里根扭过头去，失声痛哭。那么苏联呢？勃列日涅夫问。苏联嘛，上帝说，将不复存在。她将被伟大的中华帝国吞并。勃列日涅夫也扭过头去，失声痛哭。那么德意志民主共和国 2000 年的时候在哪里呢？昂内克问。上帝扭过头去，失声痛哭。</p><p>484）<br>女教师问学生，他们想象中的德意志民主共和国可以描述成怎样一幅画。<br>一个学生说：『我想象的东德是一棵树，在社会主义国家联盟里根深叶茂，向上成长，越来越茂盛。』<br>第二个学生说：『我想象的东德是一辆拖着巨大犁耙的大型拖拉机，他耕耘过的每一个地方都繁荣昌盛。』<br>小弗里茨说：『我想象的东德是一艘豪华的巨轮，乘风破浪，站在甲板上的人们……』<br>女教师说：『很美的图画，小弗里茨。』『等等，我还没说完呢…… 站在甲板上的人们呕吐，呕吐，不停地呕吐。』</p><p>485）<br>埃里克 · 昂内克驾驶者一艘苏联的宇宙飞船在太空飞行，一个未知物体歪歪斜斜地靠近，撞上飞船，燃烧起来。透过窗户，埃里克看见一个天使，对他说：『我有能力拯救你，不过你先要大喊：资本主义万岁！』<br>埃里克当然不高兴地拒绝这个无理的要求，『那还不如让我去死！』『那好吧，如你所愿。』<br>过了一会，宇宙飞船完全失控了，天使又重复了他的要求。埃里克下定决心忠于自己的理想，并让天使滚的远远的。<br>又过了一会，飞船开始变得白热化，埃里克的额头开始冒汗，天使第三次从旁边经过。埃里克没有再犹豫了：『理想能够拯救我吗？好吧，我就妥协了吧。』于是他对着外面喊：『资本主义万岁！』<br>一个人狠狠撞了他的肋骨一下：『嘿，同志，你一开党会就睡觉也就算了，至少你得保持安静吧！』</p><p>486）<br>两个曾经的头头在一个牢房里碰面了。<br>『你以前是什么地方的头头？』<br>『我是马戏团的团长。』<br>『为什么进了这里？』<br>『最近的一个十月，我在马戏团挂了一个标语。』<br>『写的什么？』<br>『35 岁的民主德国——35 岁的全民马戏团！你呢？』<br>『我是一家纺织厂的厂长，我也挂了一个标语。』<br>『写的什么？』<br>『两个同志里就有一个是纺织工（疯子）！』<br>（译者注：纺织工和疯子、神经病、怪人共用一个单词。）</p><p>487）<br>一家金属加工厂生产出一种金属丝，它是如此之纤细，以致于东德没有哪个名牌测量仪器能测出它的厚度。一截金属丝被打包邮寄到日本，让他们测量一下厚度。不幸的是，经办人忘记附上说明函告诉日本人拿这金属丝做什么。三个月后，包裹寄回来了。德国社会主义统一党的全体高层聚集在一起，由党魁打开了包裹：『抱歉我们不知道拿这段金属丝作何用途，我们还是在它的内外表面都切上了螺纹。』</p><p>488）<br>小弗里茨坐在教室里，玩他的橡皮擦。突然它掉到地上去，于是小弗里茨蹲在地上找。<br>这时女教师向学生提问：『如果你们站在埃里克 · 昂内克的墓前，你们会说什么？』<br>学生甲：『他是一个伟大的人民领袖。』<br>学生乙：『他深受他的人民热爱和尊敬。』<br>女教师：『弗里茨，你想说什么呢？』<br>刚好这时候小弗里茨看见了他的橡皮擦，喊道：『这头猪在这里，不要动！』</p><p>489）<br>赫尔穆特 · 科尔下了地狱。魔鬼问他：『你这一生对你的人民撒过多少次谎？』<br>科尔不好意思地说：『刚好 10 次……』于是他被刺了 10 针作为惩罚。<br>戈尔巴乔夫也下了地狱。魔鬼也问他，对他的人民撒过多少次谎。<br>『100 次，』戈尔巴乔夫承认，于是他也被刺了 100 针作为惩罚。<br>突然隔壁的房间发出巨大的哒哒哒震响！科尔好奇地问魔鬼发生了什么事。<br>『噢，那是埃里克 · 昂内克，』魔鬼说，『这是我们第一次必须把一个人放在缝纫机下，刺击整整一个星期！』</p><p>490）<br>问：社会主义与性高潮的区别是什么？<br>答：在社会主义里人们呻吟的时间更长。</p><p>491）<br>问：民主与社会主义民主的区别是什么？<br>答：大概相当于椅子和电椅的区别。</p><p>492）<br>问：为什么东德人不可能由猿猴进化而来？<br>答：因为没有猿猴可以忍受 40 年不吃香蕉的日子。</p><p>493）<br>一个老奶奶问昂内克，卡尔 · 马克思从本质上说是科学家还是工人呢？昂内克想了好久，决定遵从党的正确路线，于是回答道：他是一个工人。<br>『我想也是，』老奶奶说，『当一个科学家想出新的发明理论时，总是先拿小白鼠做实验的。』</p><p>494）<br>丈夫将妻子和情夫捉奸在床。他震惊的嚷道：『你们两个蠢货居然还呆在家里！供销社里来橙子啦！！！』</p><p>495）<br>肉店里的对话：<br>『请问您有牛肉吗？』<br>『没有……』<br>『猪肉呢？』<br>『没有……』<br>『香肠呢？』<br>『也没有……』<br>『见鬼的你们到底有什么？！』<br>『到晚上六点半的营业时间。』</p><p>496）<br>老布什、戈尔巴乔夫和艾贡 · 克伦茨（昂内克接班人）对摆在各自面前的难题束手无策，遂都决定，暂且抛下一切，将自己冷藏 50 年。<br>50 年后他们被解冻，分别找来各自国家过去 50 年的报纸。<br>布什看了报纸的第一页遂倒地而亡，上面写着：通用汽车赢得社会主义生产竞赛冠军！<br>戈尔巴乔夫看了第一页后也紧跟着布什的脚步而去，报纸头条：波兰 – 中国边境线上再启争端！<br>艾贡 · 克伦茨没等读完第一页也抽搐而亡，上面的大字标题：热烈庆祝昂内克主席 130 岁生日！</p><p>497）<br>民主德国的监狱里，一个犯人向另一个解释他入狱的原因。<br>『都是因为我太懒了。』<br>『消极怠工？』<br>『不是，我和一个同事讨论了政治问题，我以为明天早上到斯塔西去告发他还来得及，谁想他比我先行一步。』</p><p>498）<br>一个美国人、一个苏联人和一个东德人坐在火车上。<br>美国人从兜里取出口香糖，在嘴里嚼了不到三下就吐出车窗外。面对别人惊奇的目光，他解释道：『噢，这个我们那儿有的是！』<br>苏联人随后打开一瓶伏特加，喝了一口后扔出窗外：『这个我们那儿也有的是。』<br>紧接着，东德人将苏联人掷出了窗外。</p><p>499）<br>一个民主德国的居民被掐掉了电话线，他跑去申诉并询问原因，有关部门告诉他：<br>『因为您诬蔑了国家安全部。』<br>『我怎么诬蔑的？』<br>『我们有记录：您曾多次在电话中声称，安全部窃听了您的通话。』</p><p>500）<br>昂内克私访民间，想知道他在民众中受爱戴的程度。他走到一户住在高楼里的人家摁了门铃，一个小姑娘来开门。<br>『你是谁啊，叔叔？』<br>『我嘛，我的孩子，我就是那个一直为你们的衣食住行操心，让你们过上好日子的那个人……』<br>『妈妈，妈妈，你快来，慕尼黑的彼特叔叔来看我们啦。』</p><p>501）<br>昂内克在罗斯托克海港散步，看见三只即将启航的船。<br>他向第一只船上的海员问到：『海员同志，这是要去哪里呀？』<br>『我们送肥料到莫桑比克去，然后运一船香蕉回来！』<br>『很好，继续努力！』<br>他走向第二只船:『同志，这是要去哪里呀？』<br>『我们送自行车到卡斯特罗同志那儿去，然后运一船蔗糖回来！』<br>『很好，继续努力！』<br>他走向第三只船:『同志，这是要去哪里呀？』<br>『我们送香蕉和蔗糖到列宁格勒去！』<br>『怎么回来的呀？』<br>『跟往常一样，坐火车回来的！』</p><p>502）<br>『想让卫星牌汽车的速度超过每小时 100 公里吗？把它推下悬崖吧。』</p><p>503）<br>问：一辆卫星牌汽车停在红灯前，灯变绿了，车却没动，是怎么回事？<br>答：地上有口香糖。</p><p>504）<br>问：当共产主义建成时，还会有犹太人和亚美尼亚人吗？<br>答：别担心，犹太人和亚美尼亚人能找到方法脱身的。</p><p>505）<br>问：肖洛霍夫现在在写什么？<br>答：一篇犯罪小说，名叫《我如何获得了诺贝尔文学奖》。</p><p>506）<br>问：在共产主义建成的时候人们都能学会游泳吗？<br>答：求您了…… 别拿共产主义和大洪水比……</p><p>507）<br>问：资本主义广告和共产主义宣传有何区别？<br>答：不知道，但我们都躲不开。</p><p>508）<br>问：为什么斯大林总在晚上工作？<br>答：你怎么这么幼稚？连小孩子都知道什么人只在夜间工作。</p><p>509）<br>问：是说柏林墙隔开了东方和西方吗？<br>答：不是。事实是它把东方从西方隔开了。</p><p>510）<br>问：是说每一个苏联士兵都想成为将军吗？<br>答：不，我们的士兵们没那么傻。他们知道将军在和平时期都有可能失踪。</p><p>511）<br>问：如果伏特加干扰了工作该怎么办？<br>答：停止工作。</p><p>512）<br>问：比年轻的悲观主义者更糟的是什么？<br>答：年老的乐观主义者。</p><p>513）<br>问：乐观主义者和悲观主义者有何区别？<br>答：悲观主义者相信事情已经不能再坏，乐观主义者觉得事情总还可以再坏！</p><p>514）<br>问：共产主义国家的领袖和西方的失业者有何共同点？<br>答：他们都不知道明天会如何。</p><p>515）<br>问：什么叫交换意见？<br>答：带着你的意见走进厂长的办公室，然后带着他的走出来。</p><p>516）<br>问：苏联有反犹主义么？<br>答：我们必须做出积极（肯定）的回答：没有！</p><p>517）<br>问：为什么商店货柜上的黄油都没了？<br>答：在苏联制度的万丈光芒之后融化了。</p><p>518）<br>问：犹太复国主义者和印象主义派有何区别？<br>答：我们不知道，但无论你认为你是其中哪个，你都最好移民。</p><p>519）<br>中苏边界发生了武装冲突，苏方三架轰炸机和中方三辆坦克参加了战斗。第二天，各国媒体发布了新闻。<br>苏联塔斯社：我方三架农用飞机在中苏边界附近播种，遭到中方坦克无端袭击！<br>中国新华社：我方三辆拖拉机在中苏边界耕作时，遭到苏联轰炸机无端攻击！<br>罗马尼亚新闻社：昨天，在中苏边界发生了一场有关农业问题的激烈讨论！</p><p>520）<br>一个男人去看精神病医生。<br>『救救我，大夫！』<br>『你怎么了？』<br>『我打开电视，里面出现齐奥塞斯库，我打开收音机，里面出现齐奥塞斯库。现在我面前有一一罐豆子，我该不该打开它？』<br>（共产时期，学校机关的任何房间内都必须有齐奥塞斯库的画像）</p><p>521）<br>在农业会议休息的间隙，两名集体农庄（或者说是农业合作社）的经理在聊天。<br>『你听说了吗？甘地被枪杀了，萨达特被枪杀了，肯尼迪也被枪杀了？』<br>『唉，我的朋友，我们无能为力啊，这就是我们集体农庄经理的命……』</p><p>522）<br>请问电流有几种类型？<br>嗯，有两种，直流电和交流电。但是交流电也分两种，连续的交流电和间断的交流电。而且，间断的交流电还能再分成两种，经常间断的交流电和偶尔间断的交流电。<br>（罗马尼亚能源紧缺，在寒冷的冬天经常停电）</p><p>523）<br>国家实行节能，违者处罚。测量家中温度的时候请把温度计放在被子下面，如果这样的话温度还能超过 16 度，你的被子将会被没收！</p><p>524）<br>如果你把手放在暖气片上，它会讲些什么？<br>天呐，你的手真是太暖和了。</p><p>525）<br>问：在罗马尼亚，比冷水还冷的是什么？<br>答：热水。</p><p>526）<br>问：我们所处的时代有哪两对最主要的矛盾？<br>答：资本主义制度和社会主义制度之间的矛盾，社会主义制度和神经系统之间的矛盾。<br>（罗马尼亚语中，资本主义、社会主义制度里的『制度』和神经系统的『系统』是一个词）。</p><p>527）<br>问：你怎么从一群警察里选出一个白痴？<br>答：随机选。</p><p>528）<br>问：如何停止正在前进的阿尔巴尼亚坦克？<br>答：打死正在推坦克的士兵。</p><p>529）<br>问：阿尔巴尼亚为什么橡皮筋短缺？<br>答：他们正计划发射一枚卫星。</p><p>530）<br>一个人看见街角排起了长队，他问队尾的人：这在卖什么？那人答：我不知道，你问前面的人吧。<br>于是他问队伍中间站着的人：这在卖什么？那人答：我不知道，你问队首那个人吧。<br>于是他问队首那个人：这在卖什么？那人答：没卖什么，我刚才不舒服，倚着墙休息一下。<br>『那你为什么还不走啊？』『我还从来没站在队首过呢，想多站会。』</p><p>531）<br>克林顿、叶利钦、伊利埃斯库（罗马尼亚领导人）被邀请参观一架纯金制造的飞机，他们只能看，不能拿走任何东西。<br>五分钟后，克林顿出来了，但是金属探测器响了起来，从克林顿身上搜出几个金的螺丝钉。<br>又五分钟，叶利钦出来了，金属探测器再次响了起来，从叶利钦身上搜出一把金的螺丝钉。<br>轮到伊利埃斯库上飞机了，又过了五分钟…… 五分钟…… 飞机起飞了。</p><p>532）<br>老师问同学们：三百米长，十米宽，素食的，是什么东西？<br>孩子们立刻答道：超市前排队买萨拉米香肠的人群！</p><p>533）<br>一名俄国克格勃特工、美国联邦调查局特工、一名罗马尼亚特工在一起聊天，比谁的国家保密工作做得好。<br>美国特工说，我老婆也在中情局上班，她不知道我做什么，我也不知她做什么！<br>俄国特工说，我的国家更厉害，我就跟我老婆在一个办公室里上班，我们相互谁也不知道谁做什么。<br>罗马尼亚特工说，还是我的国家最厉害，我一个人在一间办公室里上班，连我自己都不知道我在做什么！</p><p>534）<br>上帝和圣彼得在巡视世界，上帝手拿丰饶之角，号角中流出各种财富，所到之处备受恩泽，在阿拉伯半岛流出油田，在非洲流出金矿。<br>突然上帝转了一个急弯，丰饶之角掉了。『不好，真是糟糕，我把所有财富都掉在一个地方了。彼得，你快看看，那个地方是哪里？』<br>彼得看了看地球仪说：我的主啊，那里是罗马尼亚。<br>上帝于是生气的朝罗马尼亚喊道：诅咒你们，让你们什么都享受不到！！</p><p>535）<br>问：一个大大的、黑黑的、噪音大得惊人的、废气多的惊人的，能把胡萝卜切成五块的东西是什么？<br>答：是罗马尼亚制造的用来把胡萝卜切成四块的机器。</p><p>536）<br>一个罗马尼亚老头到药店买药。<br>您好，您有这些蓝色的，能让我很舒服的药么？<br>当然有了，大爷，这些是『伟哥』。<br>哦，不错，多少钱？<br>35000 列伊（罗马尼亚货币，大约 1 美元），大爷。<br>嗯…… 能坚持多久？<br>大概四小时。<br>啥？四小时，还要 35000？<br>是啊。<br>好吧，姑娘，我是不会为了额外的 15 分钟而花 35000 的！</p><p>537）<br>撒旦到地狱视察，每个大锅里面都有一个国家的人在受罪，旁边的魔鬼监视着，一旦有人想跑，魔鬼就用三叉戟刺他们。<br>撒旦发现，有一口锅没有魔鬼监视，他咆哮了，你们怎么能这么大意！<br>旁边的小鬼立刻答道，大人，不用担心，这些是罗马尼亚人，只要有一个罗马尼亚人想跑，周围的罗马尼亚人自然就会把他拉回去。</p><p>538）<br>美国大使前去拜会齐奥塞斯库，在等候时他跟两位罗马尼亚部长聊了几分钟。<br>等他见到齐奥塞斯库时，他发现自己的金表不见了，他把这件事告诉了齐奥塞斯库。<br>齐奥塞斯库说，放心吧，我来处理。<br>齐奥塞斯库离开房间，两分钟后回来了，拿着大使的表。<br>大使感谢道：真实谢谢您了，希望这没有影响您和他们的关系。<br>齐奥塞斯库答道：没事儿，他们根本没发现。</p><p>539）<br>在布加勒斯特，许多申请出国的人正在排队领取护照。其中一人回头看到他身后的人不是别人，而是齐奥塞斯库。齐奥塞斯库看到他吃惊的样子便说：『既然大家都要出国，那么我也走。』此人立即对齐奥塞斯库说：『如果你走的话，我们还有什么必要出国呢！』</p><p>540）<br>问：为什么说社会主义是一家？<br>答：因为齐奥塞斯库同志的所有亲属都是国家干部。</p><p>541）<br>当戴高乐的夫人伊冯娜走下舷梯，看到齐奥塞斯库身材之矮小时，情不自禁地说：『我的上帝啊』<br>这时会说流利法语的齐奥塞斯库的夫人埃列娜转向她的丈夫，美滋滋地说：『听啊，他们管你叫上帝呢。』</p><p>542）<br>为什么齐奥塞斯库要在五月一日举办群众集会？<br>他要看看在冬天过后，还可以活下来多少人。</p><p>543）<br>一个波兰人得到一盏神灯，灯神照例可以满足他三个愿望。<br>『我想让中国人入侵波兰。』这是第一个愿望。<br>灯神觉得有些奇怪，不过还是满足他了，中国人来了，把波兰劫掠毁坏一番，然后回家。<br>你的第二个愿望可以积极一些，灯神适时地提出了一些建议。<br>不，波兰人答道，我希望中国人再侵略波兰一次，然后回家。<br>没有办法，于是中国大军再次打进波兰。<br>灯神忍不住了，『如果你愿意，我可以让波兰恢复原样，或者成为更好的国家！』<br>波兰人拒绝了，再次要求中国人进攻波兰，然后回家。灯神不解的问，为什么？<br>『那样的话中国人就可以扫荡俄国六次了。』波兰人答道。</p><p>544）<br>总理访问一家工厂，他问经理：『你的工厂完成生产指标了吗？』<br>『完成了。』<br>『那你用奖金干嘛了？』<br>『我买了一艘游艇，其余的钱存在银行里。』<br>『很好。』<br>总理于是问总工程师：『你完成了个人生产指标嘛？』<br>『完成了。』<br>『你用奖金干嘛了？』<br>『我买了一辆摩托车，其余的钱存在银行里。』<br>总理于是问一名工人：『你也完成生产指标了吧？』<br>『没错。』<br>『你拿奖金干嘛了？』<br>『我买了一双鞋。』<br>『其余的钱呢？』<br>『你说其余的钱啊？我找我丈母娘借的。』工人答道。</p><p>545）<br>在商品提价的前几天，一家服装店快要关门的时候。<br>『怎么，衣服全卖出去了？』<br>『是的，经理先生，全卖出去了。』<br>『连在那儿挂了两年的那件衣服也卖出去了？』<br>『是的。』<br>『顾客说了些什么？』<br>『没说一句话，只是他的导盲犬汪汪叫了好几声。』</p><p>546）<br>一个警察偶然间得到一幅七巧板，他很感兴趣，每天都在玩。终于有一天他把七巧板还原了。他自豪地向同事们宣布：『我花了六个月就玩好了！上面写着「三到五年」！』<br>同事们投去钦佩的目光。<br>一个来办事的人很惊讶，看了上面的字——『三到五岁』。</p><p>547）<br>问：天使、魔鬼、笨警察、聪明警察在一座房子里。现在房子里丢了钱，是谁干的？<br>答：笨警察，其他三者其实都不存在。</p><p>548）<br>问：为什么有两个波兰工人推一辆独轮车？（按理一个人够了）<br>答：因为第三个人请病假了。</p><p>549）<br>问：为什么波兰反对许美国加入经互会？<br>答：因为波兰无力支撑两个超级大国的经济</p><p>550）<br>问：为什么波兰和美国在经济上和政治上相似？<br>答：因为在波兰任何东西都可以用美元交易，而且你大喊『我反对美国政府』，也不会被逮捕。</p><p>551）<br>问：为什么美国朋友那边拿到波兰的药失效了？<br>答：说明书上写的很清楚：『每天三餐后服用』。</p><p>552）<br>问：华沙哪里看景色最好？<br>答：华沙文化宫里最好，因为从那里你看不到华沙文化宫。<br>（华沙文化宫是苏联援建的建筑，绰号『斯大林的注射器』）</p><p>553）<br>问：资本主义和社会主义的区别在哪？<br>答：资本主义岌岌可危，走到了悬崖边缘。社会主义比它更领先了一步。</p><p>554）<br>问：在波兰换灯泡需要几个人？<br>答：十万零一个，一个人拿住灯泡，十万个人负责转动房子。</p><p>555）<br>孙子向爷爷抱怨：『爷爷你骗我，我去苏联了，根本没有金银财宝美女美食。完全是穷乡僻壤。』<br>『你跟谁一起去的？』爷爷问。<br>『国家安排的旅行。』孙子答。<br>『那就对了，我当年跟毕苏斯基元帅一起去的。』爷爷答道。</p><p>556）<br>问：作为一名军人，如果华约入侵波兰了，东德和苏联从两边打过来，你会先打死哪国的士兵？<br>答：东德的。工作第一，娱乐第二。</p><p>557）<br>问：斯大林死后苏联司法制度的最大进步是什么？<br>答：禁止在宣判前枪决被告。</p><p>558）<br>问：臭虫可能进行革命吗？<br>答：原则上是可以的。毕竟它们身上流的是工人和农民的血嘛。</p><p>559）<br>问：说苏联保持了潜艇最长潜航时间的记录是真的吗？<br>答：对。我们有两艘潜艇自打 1957 年起就一直在海底。</p><p>560）<br>问：我们苏联的农业可不可能取得值得夸奖的例外业绩？<br>答：原则上是可以的。我们可以在播种之后去加拿大收获。</p><p>561）<br>问：我们把我们最好的公牛送到古巴去配种，可它到了之后就在草坪上呆着，什么也不干，也不和母牛交配。<br>答：很遗憾我们也无能为力。我想那头公牛可能是以为自己去当顾问了。</p><p>562）<br>问：为什么要这么慢？<br>答：为了避免恐慌。</p><p>563）<br>问：如何能判断出一份死因诊断书是不是苏联大夫写的？<br>答：要是看到签名在『死因』一栏底下就是了。</p><p>564）<br>问：如何根绝秃顶？<br>答：我们不回答挑拨性的问题。</p><p>565）<br>塔斯社新闻：昨天伪装成农民的中国士兵在中苏边境上攻击了和平的苏联拖拉机，苏联拖拉机被迫反击，向中国士兵开炮，成功将其击退。<br>拖拉机所属的集体农庄代表伊万诺夫少将与记者见面时表示，耕作用垂直起降拖拉机『涅瓦河』以后仍将用于击退此类攻击。</p><p>566）<br>问：我要去西方国家开会，可是旅费不够。怎么办？<br>答：在原则上这不是问题。别买返程票就行。</p><p>567）<br>问：美国有科学家认为未来是不可见的，这是真的么？<br>答：从原则上是不对的。未来的五年计划总能实现，但看不见的是过去。</p><p>568）<br>问：在苏联哪个城市最重要？<br>答：当然是埃里温了！<br>问：要是美国人决定对苏联发动核攻击的话，埃里温就会被瞄准了啊。<br>答：莫斯科还是重要得多嘛。</p><p>569）<br>问：怀孕的八年级学生和卫星牌小汽车有什么共同点？<br>答：都是全家的耻辱。</p><p>570）<br>问：苏联入侵捷克斯洛伐克是为了什么？<br>答：为了寻找邀请他们介入的捷克斯洛伐克人民。</p><p>571）<br>问：听说苏军介入捷克斯洛伐克是应了捷克政府的请求？<br>答：原则上是对的。只不过回应的是 1938 年的请求。</p><p>572）<br>问：聪明的保加利亚人是怎么跟愚蠢的保加利亚人说话的？<br>答：从加拿大打电话来。</p><p>573）<br>问：可能在摩纳哥建成社会主义吗？<br>答：不可能。大规模灾害在小国很难发生。</p><p>574）<br>问：可能在罗马尼亚……<br>答：（打断问话）对，能，能。</p><p>574）<br>问：东德人，你们是想住在德国呢，还是苏联呢还是美国呢？<br>答：当时是德国了。西德才是德国嘛。</p><p>575）<br>问：世界上最大的国家是什么？<br>答：古巴。古巴的知识分子，佛罗里达的农民，莫斯科的政府，乌克兰的谷物农场，安哥拉的墓地。</p><p>576）<br>问：BBC 向电台提问：贵国的平均工资是多少？<br>答：…… 英国的气候最差了。</p><p>577）<br>问：苏联生产的汽车有可能在苏联的道路上跑到 120 千米每小时吗？<br>答：可能，但只能有一次。</p><p>578）<br>问：有可能避免切尔诺贝利的惨剧吗？<br>答：可能的，只要瑞典人不把什么都说出来……</p><p>579）<br>问：什么是俄罗斯式的生意？<br>答：偷一筐伏特加，卖掉，然后把钱买酒喝掉。</p><p>580）<br>问：第一批人类是什么？<br>答：我们都知道人是从猩猩演化而来的。所以我们必须承认第一批人类包括：猿人、犹太人、黑猩猩、格鲁吉亚人、大猩猩和俄罗斯人。</p><p>581）<br>问：有没有可能只靠工资就平衡收支？<br>答：不知道，我们没试过。</p><p>582）<br>在列宁的葬礼上，一个演讲者说道：『他让我们摆脱了资本主义的锁链。』<br>『没错，』拉宾诺维奇评论道，『我母亲就有个金的，叫他们给拿走了。』</p><p>583）<br>全体员工的会议在一家妓院召开。妓院的党支书发表讲话。他说：『同志们，我们企业很不幸没达到党给我们设定的指标。特别是我们没能提供足够的优秀人才入党。这和你们年轻工作者特别有关。比如吧，彼得罗夫同志，你十八岁了，你为什么不申请入党当个榜样呢？』<br>年轻人回答道：『哦，书记同志，你不知道我妈根本不同意我进这个妓院吗？』</p><p>584）<br>在革命博物馆，一个人看着斯大林母亲的照片。她摇着头说：『谁想得到呢？她看起来是个正经女人。她就不能流产么？』</p><p>585）<br>一个女人拎着一大包卫生纸在街上走。<br>一个过路人问道：『女士，这是哪儿买的？』<br>『买？你疯了？我现在能去哪儿买啊？这是五年前的，我刚从清洁工那儿讨回来。』</p><p>586）<br>党支书正在向工人们讲话：『同志们，我们的目标是赶上然后超越美国这个最先进的资本主义国家，有问题吗？』<br>『我有个建议。』一个工人说。<br>『好啊同志！党需要政治积极性。你有什么建议？』<br>『我建议我们赶上美国人，但别超过去。』<br>『为什么？』<br>『因为这样他们就会看到我们裤子后面的破洞……』</p><p>587）<br>一个犹太人申请一份工作但被拒绝了。<br>『这是反犹主义！』犹太人抗议道。<br>『不是啊。』工作人员解释道，『我们为什么要在明知你总是要移民到以色列的情况下还雇你呢？』<br>『不，我不打算移民。』<br>『那我们就更不收了。』<br>『为什么？』<br>『因为我们不要傻子。』</p><p>588）<br>部长会议正在讨论粮食问题，大家都一筹莫展。一个部长建议道：『要么我们跟美国打仗吧。让他们打败我们，然后他们养活我们。』<br>『你疯了吗？』另一个部长立刻反对，『你知道我们的将军们都多厉害么？万一他们打败了美国人怎么办？那我们该怎么解决粮食问题？』</p><p>589）<br>在列车上一个男人在看报。看着看着，他嘟囔了一句：『这生活猪狗不如。』<br>立刻对面有个男人站起身来，亮出红皮证件（注：KGB 的证件）让男人跟他走一趟。<br>『凭什么？！』看报纸的男人抗议道，『我读的是美国的新闻，我是说他们的人民的生活猪狗不如。』<br>『闭嘴吧。』克格勃军官说道，『谁都知道哪儿的生活猪狗不如。』</p><p>590）<br>在列宁格勒，政府的新决议宣布根据这些措施终于能保证每个居民的食品供应丰富。<br>列宁格勒电台的记者在大街上采访：<br>『您觉得党的关于食品供应丰富的新政策怎么样？』<br>女人答道：『嗯，我们活过了德国人的封锁，估计也能活过这个丰富。』</p><p>591）<br>大清洗时期。某日深夜一家门外骤然响起敲门声，全家老小惊慌失措地跳了起来。<br>门外传来一个声音，『是我，你的邻居，没什么大事儿，就是咱们的房子着火了。』</p><p>592）<br>在和中国签订友好条约 10 周年之际，一些中国家具出现在莫斯科的商店里。买家可以选择三种套件：<br>普通套件：一个装米的碗，一个草垫；<br>加强套件：一个装米的碗，两个草垫，两双筷子；<br>豪华套件：两个装米的碗，三个草垫，四双筷子，5 个毛主席像章。</p><p>593）<br>两个党员伊万诺夫和彼得罗夫去餐馆庆祝彼得罗夫的生日。他们喝了一瓶伏特加，然后伊万诺夫说：『我亲爱的朋友，你知道热爱着（注：这个热爱是友情上的）你，我为什么热爱你呢？不是因为你从办公室偷党的财产，不是因为你把丈母送进了精神病院，不是因为你每天打你的老婆，不是因为你强奸了了一个十三岁的盲女孩。不，不是因为这些。我热爱你是因为你是个好共产党员。』</p><p>594）<br>共产党垮台之后，一个男人走进报亭要一份共产党的报纸。<br>『我们已经不卖共产党的报纸了。』报亭老板说。<br>过了一会儿，那人又走来要买共产党的报纸。<br>『我们已经不卖共产党的报纸了。』<br>过了一会儿，那人又走来要买共产党的报纸。<br>『你听不懂吗？我们已经不卖共产党的报纸了！』老板很不高兴。<br>『我懂，但我就是爱听这个！再说一遍吧！再说一遍吧！』</p><p>595）<br>一个人走进商店发现柜台上空空如也。他愤怒地喊道：『这他妈什么烂政府？！什么都没有！』<br>两个便衣立刻上来给了他两下。<br>『你这喊什么呢？你在骂谁啊？！』便衣质问道。<br>『当然是在骂沙皇。』<br>『沙皇和这个有什么关系？！』<br>『当然有关系。』男人辩解道，『他们统治了 300 年，可只存了 70 年的粮食……』<br>（注：苏联的寿命是 74 年。）</p><p>596）<br>21 世纪，两个像是中国人的人走在莫斯科的毛泽东大街（原名高尔基大街）上。他们的名字叫莫喜和何耶。<br>『过得如何？』莫喜问道。<br>『挺好。』何耶答道。<br>『能说实话么？』<br>『挺好啊。』<br>『得，就像中国人对中国人说一样，你过得怎么样？』<br>『我挺习惯的，真的，就有一件事儿很烦，就是老得眯着眼睛。』<br>（注：眯眼是外国人对中国人印象的偏见，『莫喜』和『何耶』是两个典型的犹太人名字摩西和哈耶姆的『中文化』，而这种对话在什么情况下才会在莫斯科发生我想我也就不用说了。）</p><p>597）<br>在一个退休的克格勃将军向媒体披露了一些克格勃训练中的对苏联不利的细节之后，克格勃主席克留奇科夫找到戈尔巴乔夫：<br>『我们必须撤销那叛徒所有的荣誉和头衔。他是个骗子，他不诚实，他说的都是谎话！』<br>『你怎么证明呢？』戈尔巴乔夫问道。<br>『这还用证明吗，米哈伊尔 · 谢尔盖耶维奇？他是个克格勃啊！』</p><p>598）<br>契尔年科要死了。他用电话拨出了一个秘密的号码，接电话的是勃列日涅夫。<br>『我亲爱的列昂尼德 · 伊里奇。』契尔年科说道，『我就要找你去作伴了。告诉我，我该带点什么么？那儿有什么短缺么？』<br>『不，我们这儿什么都有，就像共产主义已经实现了一样。』勃列日涅夫答道，『不过或许你可以带一副刀叉？』<br>『什么？你们那儿刀叉不够？』<br>『我们这儿刀叉不缺。可是，轮到希特勒下厨的时候他会让所有的共产党员都用镰刀锤子吃饭。』</p><p>599）<br>在集体农庄里，一只母猪生了三只小猪。党支部讨论后认为报告只生了三只小猪可能会给区党委留下不好的印象。所以他们上报生了 5 只小猪。区党委向州党委报告那个集体农庄生了 7 只小猪。在州党委向农业部的报告中，他们宣称生产 12 只小猪的社会主义义务劳动成功完成。农业部向中央委员会的报告则称共产下 20 只小猪，提前完成任务。<br>『好极了。』勃列日涅夫同志评价道，『三只小猪送给列宁格勒的工人，三只送给英雄城市莫斯科，五只拿去出口，五只送给在挨饿的非洲孩子。剩下的储存起来当战略储备，谁也不准动！』</p><p>600）<br>两个骷髅相遇了，一个问另一个：<br>『你是死在戈尔巴乔夫的新粮食政策颁布之前还是之后？』<br>『我还活着。』另一个答道。</p><p>601）<br>区党委第一书记和他的人事部经理谈到：『听着，伊万诺夫同志，已经六个月在犹太教堂里找不到拉比了，可你看起来一点也不着急。意识形态工作在松弛啊，伊万诺夫同志。』<br>『是的，第一书记同志，我一直在尽力寻找适合当拉比的人，可到现在我还是找不到。那些候选人，您知道，不是共产党员就是犹太人……』</p><p>602）<br>在休斯敦，美国航空航天局的调查委员会在讨论航天飞机爆炸的原因：『我们从头到尾检查了一遍，可就是找不到左侧固体助推器爆炸的原因。』<br>在莫斯科，克格勃外事局的调查委员会同样在讨论航天飞机爆炸的原因：『我们从头到尾检查了一遍，可就是找不到左侧而不是预先设定的右侧固体助推器爆炸的原因。』</p><p>603）<br>士兵们问他们的指挥员：『少校同志，我们懂什么叫改革了。改革就是我们过去走两列现在走四列。可什么是公开化呢？』<br>『公开化就是你们可以任意批评我，但你们因此什么（惩罚）也不会得到。』指挥员解释道。<br>『什么也不会得到？』<br>『对。大衣啊，裤子啊，鞋啊……』</p><p>604）<br>一个孩子管父亲要一卢布说要捐献给非洲国家的挨饿的人。<br>『他们不需要我们的钱。』父亲解释道，『他们的气候很好，土地肥沃，他们肯定应有尽有。』<br>第二天孩子回来说：『爸爸，老师说这钱是要帮助非洲国家的共产党。』<br>『哦，』父亲答道，『他们既然有共产党，那肯定会有挨饿的人了。』</p><p>605）<br>爱沙尼亚向戈尔巴乔夫要求独立一个月，戈尔巴乔夫拒绝了；爱沙尼亚又要求独立一天，戈又拒绝了。爱沙尼亚于是又要求独立十分钟。戈尔巴乔夫的顾问建议同意他们的要求，因为独立十分钟也没什么害处，但对宣传工作非常有利。<br>独立的十分钟过去了，在爱沙尼亚的苏联间谍汇报：『在前五分钟里爱沙尼亚向芬兰宣战，在后五分钟里爱沙尼亚投降并宣布已被芬兰占领。』</p><p>606）<br>学校在对学生们进行调查。调查中的一个问题是：你将如何给苏联公民分类？<br>克格勃军官的儿子写道：『苏联公民可分为三类：去过监狱的，正在监狱里的，未来会进监狱的。』</p><p>607）<br>在提高伏特加价格之前，政府在工厂进行调查。<br>『伏特加提高到 20 卢布一瓶的话你们还会买吗？』<br>『会！』<br>『伏特加提高到 40 卢布一瓶的话你们还会买吗？』<br>『会！』<br>『伏特加提高到 150 卢布一瓶的话你们还会买吗？』<br>『不会！』工人答道，『我们的工资是 140 卢布，但如果能提高工资的话…… 我们会买……』</p><p>608）<br>向最佳政治笑话大赛获奖者颁奖：一等奖，二十五年；二等奖，二十年；还有两个三等奖，每个十五年。</p><p>609）<br>在教皇遭到枪击后西方媒体一致指责这是苏联克格勃的暗杀企图。为了终结这种流言，苏联政府组织了一个特别委员会进行了一次彻底的调查。委员会随后报告政府：『我们十分确信我们国家与此无关。』<br>『怎么证明呢？』<br>『我们已经认定是教皇先开枪的。』</p><p>610）<br>在红场中间有个老太太已经踱步了好几个小时，脚边是两个手提箱。一个警察走了过去。<br>『你在这儿干嘛？』<br>老太太答道：『我只是在等着马蒂斯 · 鲁斯特飞回德国。』</p><p>611）<br>俄罗斯移民在好莱坞开了家俄式餐馆叫『俄罗斯怀旧』。菜单：<br>第一道菜——罗宋汤；<br>第二道菜——油炸包；<br>甜点 - 猛敲一下顾客的脖子并怒吼：『滚出去犹太猪！』</p><p>612）<br>在莫斯科进行了一次审判，某人被判三年有期徒刑。罪名：在一次生日聚会上，当有人提到『以色列』这个词的时候他的表情仿佛很有兴趣。</p><p>613）<br>一个老人申请移民到英国去但被拒绝了。<br>『您又老又多病，可英国又天天下雨。最好再想想吧。』签证官员劝他。<br>两个小时后签证官员出去发现那人还在等候室里坐着。<br>『您这是又来了？』<br>『不，我没走。您跟我说了下雨的问题，我打算再想想。』<br>『那您决定了么？』<br>『不，我还没想好要不要带伞去英国。』</p><p>614）<br>为了解决地区的经济问题，敖德萨市党委决定开一家妓院。他们找来了一个因为善于张罗而出名的犹太人艾布拉莫维奇。艾布拉莫维奇拒绝打理妓院。<br>『为什么？』党的书记问道。<br>『因为我知道那意味着什么。听着，五张床留给市党委，三张床留给市苏维埃，给警察至少还得留三张；十个姑娘每年得去做三个月义务劳动，还有十个得去参加会议和政治集会；还有研讨会，这个那个的，你们是打算让我艾布拉莫维奇上床去完成生产定额吗？』</p><p>615）<br>一个意共代表团来参观集体农场。<br>『你们这儿的西红柿怎么样？』客人问道。<br>『西红柿不怎么长。』<br>『嗯。黄瓜呢？』<br>『还不如西红柿。根本不长。』<br>『嗯。那可能是你种的方式不对。』<br>『哦，要是我们种了的话本该能长的。』</p><p>616）<br>在苏联有两类人，黑的和红的。黑的人坐着黑色小汽车，吃着黑色鱼子酱，能免费得到所有只能在黑市上见到的玩意儿；红的人在日历上标红的日子里扛着红旗走过红场。</p><p>617）<br>一个工人被派去参加党的代表大会。他回到家后坐在桌前。妻子问道：『要汤吗？』他举起右手。妻子又问：『要土豆泥炸肉排吗？』他又举起右手。妻子又问：『要伏特加吗？』他站起来热烈地鼓起掌来。</p><p>618）<br>一个参加党代会的代表回到工厂。<br>『伊万，怎么样？』<br>『太棒了！我带回来件新西装。』<br>『你们在那儿决定什么了？』<br>『我们决定了重大问题。一切为了人的利益！一切都为了人们能过上好日子！』<br>『那你们投票了吗？』<br>『我们都一直投票给主要人物了。我亲眼看到那个人了！』</p><p>619）<br>一个法国人、一个美国人和一个苏联人遇到海难被冲到一个有食人族的小岛上。食人族酋长说道：『说出个我们这儿没有的东西来，我就饶了你。要是你说不出，我们就吃了你。』<br>『你们没有金发女郎。』法国人说。酋长笑了笑，带来了一个金发女孩。法国人于是被吃了。<br>『你们没有计算机。』美国人说。酋长笑了笑，当场造了个笔记本电脑，美国人于是也被吃了。<br>『你们有政治局吗？』苏联人问。酋长慌了神儿，半天才承认没有。<br>『你们既然没有政治局，』苏联人奇怪地问道，『那你们是怎么学会吃人的？』</p><p>620）<br>美国总统有一百个安全顾问，其中一个是克格勃特务，究竟是谁，正在调查；<br>赞比亚总统有一百个情人，其中一个有艾滋病，究竟是谁，正在调查；<br>苏联总统有一百个经济顾问，其中有一个懂经济学，究竟是谁，正在调查。</p><p>621）<br>党的宣传员在演讲中说道：『帝国主义者正在全世界范围内干涉苏联内政！』</p><p>622）<br>苏联式衰老：一个老人停在公寓门边上，手里拿着个空口袋想：『该怎么搞清楚我这究竟是正打算去食品商店还是刚从那儿回来呢？』</p><p>623）<br>老师在问学生未来的志向。沃瓦说：『我要当一个警察。』<br>『可是啊沃瓦，等你长大了的时候就不会需要警察了。到时候人们的觉悟会非常高，不会犯罪。』<br>『那我就当救火队员。』<br>『可是啊沃瓦，等你长大了的时候就不会有火灾了，因为人们都会非常小心谨慎……』<br>『那我就当军官。』<br>『可是啊沃瓦，等你长大了就不会有军队了，人们都开开心心没有战争，所有的国家都是共产主义。』<br>『您什么意思？您不能逼我去工作吧？！』</p><p>624）<br>一个老人和他的孙子在岸边看着眼前的河。<br>『爷爷，这个地方是叫切尔诺贝利吗？是说这儿以前有个核电站吗？』<br>『是的，我的孩子。』爷爷说着拍了拍孩子的头。<br>『是说它有一天爆炸了么？』<br>『是的，我的孩子。』爷爷说着拍了拍孩子的第二个头。</p><p>625）<br>『爷爷快看，那儿有个球在滚啊。』<br>『那不是球，那是切尔诺贝利的刺猬。』</p><p>626）<br>『爷爷快看，看那个灯泡！那蓝光真漂亮！』<br>『那不是灯泡。那是装了切尔诺贝利牛奶的瓶子。』</p><p>627）<br>『爷爷，谢谢您的这条宠物蛇礼物。』<br>『这不是蛇，孩子，这是切尔诺贝利的猫。』</p><p>628）<br>有人按了门铃。拉宾诺维奇开了门。<br>『拉宾诺维奇是在这儿生活吗？』<br>『不是，他不在这儿生活。』<br>一个小时之后，又是门铃响，拉宾诺维奇开了门。<br>『我跟你说了拉宾诺维奇没在这儿生活。』<br>『那你是谁？』<br>『拉宾诺维奇。』<br>『那你为什么说你不在这儿生活？！』<br>『你管这也叫生活？！』</p><p>629）<br>阿富汗。一个圣战者喊道：<br>『嘿，俄国佬，投降吧！』<br>沉默。<br>『嘿，俄国佬，别抵抗了！』<br>沉默。<br>『嘿，俄国佬，快投降！』<br>『这儿没俄国佬。你们纳乌兹别克人的降吗？』</p><p>630）<br>问：改革的前景是什么？<br>答：有两种可能的情况。现实的可能是火星人会降临地球帮我们打理一切，科幻的可能是我们能自己完成改革目标。</p><p>631）<br>1990 年。妻子问丈夫：『我在政治上很幼稚。你能不能给我解释一下，等我们最终实现了民主、公开化还有不论什么别的之后，我们苏联和美国还会有什么区别啊？』<br>『你不懂吗？要是在美国戈尔巴乔夫得是民选总统。』</p><p>632）<br>勃列日涅夫在莫斯科回见英迪拉 · 甘地。甘地夫人一下飞机，勃列日涅夫就开始讲话：『亲爱的撒切尔夫人……』<br>左右连忙提醒：『勃列日涅夫同志，这是英迪拉 · 甘地，不是撒切尔……』<br>勃列日涅夫皱皱眉头继续，『亲爱的撒切尔夫人……』<br>『列昂尼德 · 伊里奇，这是英迪拉 · 甘地。』<br>『闭嘴。』勃列日涅夫说道，『我当然知道这是英迪拉 · 甘地，可讲稿里明明是撒切尔……』</p><p>633）<br>勃列日涅夫的每日安排：<br>上午 9 点：复活<br>上午 10 点：早餐<br>上午 11 点：颁发勋章<br>中午 12 点：给电池充电<br>下午 2 点：正餐<br>下午 4 点：接受勋章<br>下午 6 点：签署重要文件<br>下午 8 点：临床死亡<br>次日上午九点：复活……</p><p>634）<br>在政治局会议上，勃列日涅夫说道：『同志们啊，这个不可容忍。有些政治局成员们的老年症又恶化了，开始玩起小孩子的游戏，跳木马。还有看啊，葛洛米柯同志抢走了我的锡兵（勃列日涅夫擦擦眼泪）还不肯还我……』</p><p>635）<br>一次勃列日涅夫正在阅读一份克格勃关于移民申请越来越多的报告。<br>勃列日涅夫转身跟柯西金说道，『要是我们把移民签证一直发下去，有一天这国家可得就剩下你我啦。』<br>柯西金回应道：『别把我算进去。』</p><p>636）<br>斯大林听到报告说亚美尼亚人和阿塞拜疆人的矛盾已经激化到接近开战了。『咱们得用布尔什维克的方式解决这个问题。』斯大林说，『我们给亚美尼亚和阿塞拜疆制定一个共同的首都吧。』<br>亚美尼亚的首都是埃里温，阿塞拜疆的则是巴库。双方问斯大林哪个首都会成为两个国家的共同首都：<br>『埃里温吗？』<br>『不。』<br>『巴库吗？』<br>『不。我们不想在这个问题上偏向哪个民族。』<br>『那是哪儿啊？』<br>『马加丹。』<br>（注：马加丹是西伯利亚科累马地区的中心，主要被用来作为科累马地区古拉格设施的人员集散地。）</p><p>637）<br>两个苏联元帅伏罗希洛夫和布琼尼在 1937 年见了面。<br>『你听说了吗，谢苗？』伏罗希洛夫说，『保安部门把所有的人不管谁都给抓去了。以后会怎么样？他们为什么不把我们俩也抓去？』<br>『不是所有人都被抓了。就抓聪明的。这跟咱俩就无关了。』</p><p>638）<br>斯大林在半夜打电话：<br>『莫洛托夫同志？告诉我，你还口吃吗？』<br>『是是的，斯大林同志，不过假设为了社会主义建设的需需要，我我……』<br>『不，莫洛托夫同志，没有需要。安心睡吧。』<br>他又拨了个号码：『米高扬同志？听着，你在巴库当政委的时候，在巴库一共有多少个政委？』<br>『二十七个，斯大林同志。』<br>『在 1920 年被杀掉了多少个？』<br>『二十六个，斯大林同志。』<br>『好吧，安心睡吧，我们在巴库的第二十七个政委同志。』<br>他又拨了个号码：『贝利亚同志？听着，你确定你把布哈林给枪毙了？』<br>『非常确信，斯大林同志。怎么了？』<br>『不，没事儿。安心睡吧，贝利亚同志。』<br>斯大林放下听筒，自言自语道：『好的。我终于把他们都给稳住了。现在我也可以睡觉了。』</p><p>639）<br>在敖德萨一间屋子的后院外传来了炮响。萨拉从窗户探出头去：『埃布拉姆，怎么了？是他们给商店送来肉了吗？』<br>『不是，是因为勃列日涅夫到敖德萨了。』<br>过了一会儿，礼炮声又响了。<br>『埃布拉姆，听到了吗？他们给商店送来肉了！』<br>『我说了，这是勃列日涅夫到了。』<br>『怎么会，他们第一下打偏了吗？』</p><p>640）<br>在勃列日涅夫访问英国时，首相撒切尔夫人问这客人：『您怎么看丘吉尔？』<br>『丘吉尔是谁？』勃列日涅夫反问。<br>回到大使馆，苏联大使评价道：『祝贺你，勃列日涅夫同志，你让撒切尔夫人老实了。她以后再也不敢问什么愚蠢的问题了。』<br>『撒切尔是谁？』勃列日涅夫反问。</p><p>641）<br>在莫斯科国际机场，一对即将移民到以色列的夫妇正等着飞机。广播突然响起：『注意，飞往特拉维夫的航班因为勃列日涅夫同志启程前往巴黎而被推迟。』<br>一小时后，又响起了广播：『注意，飞往特拉维夫的航班因为柯西金同志启程前往伦敦而被推迟。』<br>一小时后，又响起了广播：『注意，飞往特拉维夫的航班因为葛洛米柯同志启程前往纽约而被推迟。』<br>妻子于是说道：『你听到了吗，埃布拉姆？他们都走了。没了他们，我们为什么要走啊？去特拉维夫干什么？』</p><p>642）<br>政府宣布了纪念伟大的俄罗斯诗人普希金的雕塑获奖名单。三等奖为普希金正阅读着一本勃列日涅夫的著作，二等奖为勃列日涅夫阅读普希金著作，一等奖为勃列日涅夫正在阅读勃列日涅夫的著作。</p><p>643）<br>里根、密特朗和勃列日涅夫见了面。大家都打开了香烟盒。里根的金烟盒上刻着：『致亲爱的罗恩，来自好莱坞的朋友们。』<br>密特朗的烟盒上刻着：『致我亲爱的弗朗西斯，来自你忠诚的妻子。』<br>勃列日涅夫于是打开了他的烟盒，上面写着：『致普希金，来自维亚杰姆斯基。』</p><p>644）<br>一个美国人到苏联旅游，发现一个苏联工人很穷。游客于是告诉工人：『这么做就行。我就会到华盛顿的白宫门前吃干草，总统出来问我为什么做这么奇怪的事儿，我告诉总统我很穷买不起吃的，总统就帮了我，我现在什么都有了。』<br>苏联工人于是到莫斯科的红场上吃干草。赫鲁晓夫走过来问出了什么问题。工人解释了他的状况，赫鲁晓夫答道：『你最好把干草留到冬天，工人同志。估计这个冬天会非常寒冷艰苦，你现在还可以吃青草嘛！』</p><p>645）<br>赫鲁晓夫前来参观前卫派的美术展览。<br>『这对该死的绿点和黄点是什么？』<br>『这幅画，赫鲁晓夫同志，是表现我们英勇的农民在努力完成生产两亿吨谷物的计划。』<br>『啊…… 哦…… 那这堆黑三角和红条条呢？』<br>『这幅画描绘了工厂中我们英雄般的产业工人。』<br>『那这个长耳朵的肥屁股呢？』<br>『赫鲁晓夫同志，这不是画，是镜子。』</p><p>646）<br>赫鲁晓夫一次决定自己准备讲稿。他准备好后拿给了他的秘书看。<br>『这是个杰出的、精彩的演讲。』秘书答道。<br>赫鲁晓夫又把这讲稿给文化部长看，后者评论道：『赫鲁晓夫同志，这是个杰出的作品，是对马克思列宁主义的最好诠释。』<br>最后，赫鲁晓夫把他的讲稿拿给他女婿看。女婿和赫鲁晓夫不一样在于他上过学。女婿说：『你的讲稿没什么大问题，只不过「草他妈的」的「操」字不对，「蠢马户」的「马户」应该是一个字儿。』<br>（注：原文是说你的 fuckyou 应该加空格，ass hole 不该加……）</p><p>647）<br>十月革命后，上帝派了圣卢克、圣乔治和摩西三个观察员到苏俄，他们三个都给上帝发电报。<br>『我已经落入契卡手中了，圣卢克。』<br>『我已经落入契卡手中了，圣乔治。』<br>『一切都好，人民委员摩西。』</p><p>648）<br>十月革命后，两个警察正在查一个过路人的证件。那个过路人只找到了一张尿检分析报告。<br>第一个警察大声读到：『分析报告：蛋白，负；糖，负。』<br>第二个警察说：『没有糖。说明他不是投机倒把分子。走吧，公民！』</p><p>649）<br>人民委员会命令：由于燃料紧缺，所有温度计都应调高四度。</p><p>650）<br>『党里有多少犹太人？』<br>『没多少，大概 60%。』<br>『那剩下的是……？』<br>『犹太妇女。』</p><p>651）<br>娜杰日达 · 克鲁普斯卡娅见到了勃列日涅夫。她被介绍给总书记，但她心想勃列日涅夫肯定不知道她是谁。<br>『您好，列昂尼德 · 伊里奇，我是克鲁普斯卡娅，您应该知道我是谁，因为您知道我丈夫，您经常引用他的著作。』<br>『哦，非常欢迎，娜杰日达 · 康斯坦丁耶夫娜。我当然知道你是谁，还有你的丈夫。说起来克鲁普斯基近来如何？』</p><p>652）<br>勃列日涅夫访问中亚，受到了当地党政官员的欢迎。<br>『和平降临于你！』（注：这是阿拉伯语）<br>『和平降临于你！』按照工作人员之前告诉他的话，勃列日涅夫愉快地回应着。<br>『和平降临于你！』他们又说道。<br>『和平降临于你！』勃列日涅夫愉快地回应着。<br>突然，人群中有个持不同政见者喊道：『古拉格集中营！』<br>『古拉格集中营！』勃列日涅夫愉快地回应着。</p><p>653）<br>一个农民问勃列日涅夫共产主义是什么。<br>勃列日涅夫答道：『现在我们的电车是 15 分钟一趟，5 年后是 10 分钟一趟，15 年后每 5 分钟一趟，20 年后我们的电车一直在走。』</p><p>654）<br>勃列日涅夫听到有人在敲门。他迅速走到门前，从口袋中选出了一个纸条，读到：<br>『谁在那里？』</p><p>655）<br>1968 年 8 月捷克领导人被允许离开莫斯科后，勃列日涅夫对柯西金说：<br>『看呐，杜布切克的这只手表真精致啊！』<br>『让我看看，』柯西金说道。</p><p>656）<br>勃列日涅夫和他的孙子在散步。<br>『爷爷，等我长大了，能当上总书记吗？』<br>『你说什么啊，孩子，怎么能有两个总书记呢？』</p><p>657）<br>勃列日涅夫在发表讲说：<br>『昨天政治局决定改称我为皇帝，但我要负责的声明，他们会因此让我觉得很为难。因为我的名和父名分别是列昂尼德和伊里奇，今后不知是该叫我列昂尼德一世还是伊里奇二世。』</p><p>658）<br>『你听说勃列日涅夫同志的新书——《复兴》——被翻译成意大利语了吗？它是被当成文艺复兴时期达芬奇的作品出版的。』</p><p>659）<br>在 1970 年一个老布尔什维克的回忆录写道：<br>我记得 1917 年 10 月的一天，列宁和他的战友们在彼得格勒大街上边走边讨论该何时发动推翻临时政府的革命。就在这时，长着一对浓浓的眉毛的孩子出现在他们面前并说道：『25 日，叔叔，就 25 日好了。』『过来，孩子，你叫什么名字？』列宁问道。『巴列利纳。』（注：列昂尼德的小名）男孩答道。</p><p>660）<br>在 1970 年一个苏军老战士的回忆录写道：<br>在 1945 年 4 月的最后几天，朱可夫元帅指点斯大林，汇报说白俄罗斯第一方面军和乌克兰第一方面军将在未来的 4 天内攻下柏林，他请斯大林同意这个计划。斯大林答复道：『朱可夫同志，我认同你这个计划，但请给我十五分钟去听一下第十八集团军政委勃列日涅夫上校的意见。』</p><p>661）<br>勃列日涅夫在又一次获得勋章后发表讲话：<br>『有些人批评说我接受的勋章太多了，不能自觉地拒绝勋章。同志们！情况并不是这样。比如讲，我在不久之前就自觉地拒绝了布隆迪的国家最高荣誉奖章——挂在鼻子上的金环。』</p><p>662）<br>白宫的一个灯泡烧坏了，尼克松按了一下按钮，一个工作人员走进来换了个灯泡。尼克松给了他五美元。<br>克里姆林宫的一个灯泡坏了，勃列日涅夫的侍卫叫来一名工作人员换了一个灯泡。勃列日涅夫给了他一枚列宁奖章，也给了那名工作人员一枚列宁奖章。勃列日涅夫觉得不错，又给了自己一枚列宁奖章。</p><p>663）<br>问：新的五年计划将被命名为什么？<br>答：元帅计划。</p><p>664）<br>勃列日涅夫：我应该当元帅。<br>格列奇科：除非我死了。</p><p>665）<br>『听听这个不错的笑话。一个女清洁工走进勃列日涅夫的卧室，发现他死了。』<br>『然后呢。』<br>『然后忘了。你觉得开头怎么样？』</p><p>666）<br>勃列日涅夫死了，但他的身体会永垂不朽。</p><p>667）<br>『听说了吗？勃列日涅夫去世了。』<br>『真的？他是亲自去世的吗？』</p><p>668）<br>勃列日涅夫正牵着一只猴子散步。一人问道：<br>『跟一头蠢牛走在一块儿不觉得很别扭吗？』<br>勃列日涅夫：『它是猴子。』<br>农民：『我没跟你说话。』</p><p>669）<br>公元 2000 年。地铁车箱内的扬声器广播道：『这是到达列宁站的列宁线。下一站：列宁站。』</p><p>670）<br>1970 年。大学入学考试。一个老师试图让一个差生说出当前最突出的事件：<br>『今年我们在举办什么活动？』<br>『我不知道，课本里没有。』<br>『那你没看报纸和杂志吗？你没听收音机或者看电视吗？』<br>『我们镇子里没你们说的这些。』<br>『那你来自哪个镇？』<br>『阿夫托斯塔罗耶。』<br>老师对他的助教说：『你看这个夏天我们逃到那儿去怎么样？』<br>（注：该年是列宁诞辰一百周年。）</p><p>671）<br>两个学生决定去『列宁呆过的地方』旅游——去看看日内瓦、伦敦、布鲁塞尔、巴黎，这些都是列宁曾经移居过的地方。他们让他们的学校党委开介绍信。<br>学校的回复如下：『非常理解你们的愿望，但目前还是建议你们去参观辛比尔斯克、苏申斯克和列宁山。』<br>（注：都在苏联国内，分别是列宁的出生地、流放地和莫斯科大学所在地。）</p><p>672）<br>克格勃举办了一场关于列宁诞辰庆典活动的最佳笑话大奖赛：<br>一等奖：与列宁的一次会晤。<br>二等奖：政府出资的为其 7 年的住房。<br>三等奖：在列宁呆过的地方生活五年。</p><p>673）<br>新的纪念喷泉：列宁泉<br>香水：伊里奇的味道<br>药粉：列宁的骨灰<br>奶罩：列宁山<br>蛋：列宁的睾丸<br>小孩的玩具：带按钮的陵墓，一按按钮斯大林的棺材就会飞出去<br>公园的射击场：范尼 · 卡普兰<br>机车时钟：水晶棺材状，在整点时刻，列宁弹起来，郑重地说道：『同志们，布尔什维克所期待的无产阶级革命布谷鸟自鸣钟。』</p><p>674）<br>在革命博物馆李，导游向人们介绍瓦西里 · 伊万诺维奇 · 恰巴耶夫（即夏伯阳，苏俄内战英雄，被苏联广为宣传）的骨架。<br>『那他旁边的小骨架是谁的？』<br>『那是恰巴耶夫小时候的。』</p><p>675）<br>问：波德戈尔内为什么被开除了？<br>答：因为他在勃列日涅夫的生日宴会上赞扬他：『列昂尼德 · 伊里奇，你现在 70 岁，但看上去比 60 岁的苏联政权还要健康！』</p><p>676）<br>问：1982 年我们有什么梦想？<br>答：苏联政权已经 65 岁了，也许应该退休了。</p><p>677）<br>问：为什么最近看不到卖麝鼠帽的了？<br>答：因为麝鼠数量呈算术级增长，而显贵数量却成几何级增长，所以现在抓不到麝鼠了。</p><p>678）<br>在高加索的一次聚会上，主持人站起来祝酒说：<br>『我提议为勃列日涅夫同志干杯。但是我要做些解释。我并不是因为他是苏共中央总书记而为他干杯，他担任这项职务有工资。我也不是因为他是最高苏维埃主席而为他干杯，他担任这个职务也有第二份工资，我甚至也不是为了他是国家第一元帅而为他干杯，他担任这项职务还有第三份工资。我是为他第一个认识到在现实状况下靠一份工资难以生活而干杯。』</p><p>679）<br>外国人说：你们喝不到白兰地，真遗憾！<br>苏联工人说：不，我们已经通过政府的干部喝到了，他们是我们的代表嘛。</p><p>680）<br>『请问，你从哪儿弄到的厕纸？』<br>『我去干洗店干洗了一下，然后重新用。』</p><p>681）<br>一位《真理报》记者被派去采访村民。他的工作就是以教育性的谈话来向村民宣传党对国际事件的路线和政策。一晚上的谈话后，他做最后总结：『我们《真理报》就是为人民服务的，你们觉得我们还应该怎么改善报纸才能更有益于你们？』<br>大厅后面传来声音：『再少用点墨水。』</p><p>682）<br>工人问道：『勃列日涅夫同志，我们的国家正走在通向共产主义的大路上，可到处都缺少供应，人民没什么吃的，这该怎么理解？』<br>勃列日涅夫答道：『谁答应在路上供应吃的啦？』</p><p>683）<br>问：食品供给计划施行后怎么样？<br>答：还是有人活下来了。</p><p>684）<br>问：等我们到了共产主义之后，该怎么解决购物排队的问题？<br>答：很简单，到时候就已经没东西让你排队了。</p><p>685）<br>在理发馆，理发师一直在问勃列日涅夫波兰的问题。最终，烦躁的勃列日涅夫嚷了起来：『你为什么一直不断地问我波兰问题？！』<br>『这样有利于我工作。每次我问你的时候你都怒发冲冠。』</p><p>686）<br>一个捷克人在街上遇见了在边防部队当军官的朋友，于是问道，『你工作忙吗？』<br>『你知道，』朋友摇摇头，『我们捷克斯洛伐克是个没有国界的国家，我们还有什么事儿可干呢？』</p><p>687）<br>塔斯社：签署苏捷关系正常化的苏联领导人是勃列日涅夫同志、格列奇科同志和 T-64 同志。</p><p>688）<br>一个美国人和一个罗马尼亚人到苏联朋友家作客，他们发现这家人没有小汽车，就问为什么。<br>『我们有地铁。』苏联人答道。<br>『那你去走访朋友的时候怎么办？』美国人又问道。<br>『他们一般是坐坦克去的。』罗马尼亚人插嘴道。</p><p>689）<br>问：2000 年，一瓶伏特加多少钱？<br>答：五元。<br>（注：注意，不是卢布，是『元』……）</p><p>690）<br>现在苏联学校教两种外语，想离开的人学意地绪语（注：一种犹太人流行的语言），想留下的人学汉语。</p><p>691）<br>卡特和葛洛米柯从对面各自的房间出来，进了另一间房子。<br>『我们终于彻底裁军了。』卡特说。<br>『是啊，我们最终可以完全信任彼此了！』葛洛米柯说。<br>『谈的够多了，请回到你们自己的营房里吧！』一个中国卫兵说。</p><p>692）<br>六日战争爆发了，纳赛尔给勃列日涅夫拍电报求救：<br>『莫斯科。克里姆林宫。犹太人进攻。救援。苏联。』<br>（注：国名写在最后一般是国内电报。）</p><p>693）<br>在阿以战争期间，纳赛尔深受俄罗斯的影响，借用了库图佐夫对抗拿破仑的战术：他诱敌深入埃及腹地，并正在等待冬季封冻的到来。</p><p>694）<br>勃列日涅夫到西伯利亚铁路贝阿线的工程现场去参观，看到了几百名身穿条纹服装的囚犯劳力。<br>『你们好，海员同志们。』他向她们问候道。</p><p>695）<br>自治区党委员会大楼上的标语：『不劳动者不得食。』</p><p>696）<br>问：苏联的什么水平最为先进？<br>答：苏联在各个方面的瘫痪水平。</p><p>697）<br>十月革命前楚科奇人只感到寒冷和饥饿，现在他们感到寒冷、饥饿，还有对党深深的感激之情。</p><p>698）<br>一个楚科奇人从莫斯科访问回来，向他的家人解释革命是为了什么——『一切依靠人民，一切为了人民。』他深深地理解了现在的生活：『我终于知道人民指的是谁了。』</p><p>699）<br>问：勃列日涅夫为什么获得了最后一枚奖章？<br>答：从犹太人手中解放了敖德萨市。<br>（注：敖德萨是苏联的犹太聚居区，在勃列日涅夫时期有 1/4 的犹太人移民以色列。）</p><p>700）<br>地方的农业指导员在集体农庄会议上讲养鸡的好处，养一只鸡每年都能获得许多卢布。<br>一个农民打断他，说道：『如果犹太人离开，他们得为他们的教育付多少钱？』<br>（注：上缴相对高额的费用是苏联限制犹太人移民的手段之一。）<br>『四千卢布。别打岔，同志们。』他继续讲养羊的利润，但又被打断了。<br>『如果一个犹太工程师离开，他得付多少钱？』<br>『八千卢布。让我继续讲，同志们。』他继续讲养牛，但又被打断了。<br>『如果那犹太人上过大学呢？』<br>『两万卢布。但……』<br>『或许我们最好养犹太人。』</p><p>701）<br>警察对迷路的小孩说道：<br>『别哭了。我们将通过电台广播你的名字。很快你的妈妈就来接你回家了。』<br>『好啊。但你们最好通过 BBC，我的爸爸妈妈只听那个频道。』</p>]]></content>
      
      
      <categories>
          
          <category> 幽默 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>开源软件授权协议详解</title>
      <link href="/2017-11/%E5%BC%80%E6%BA%90%E8%BD%AF%E4%BB%B6%E6%8E%88%E6%9D%83%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"/>
      <url>/2017-11/%E5%BC%80%E6%BA%90%E8%BD%AF%E4%BB%B6%E6%8E%88%E6%9D%83%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<p>开源在今天的软件业已经很普遍，但开源是否意味着使用者可以对开源后的代码为所欲为呢?<br>答案当然是否定的。开源运动同样有自己的游戏规则和道德准则。不遵行这些规则不但损害开源运动的健康发展，也会对违规者造成名誉和市场上的损失，更可能陷入法律纠纷和赔偿。现今存在的开源协议很多，而经过 <a href="https://www.opensource.org/licenses/alphabetical" target="_blank" rel="noopener">Open Source Initiative</a> 组织通过批准的开源协议目前有 58 种。我们在常见的开源协议如 BSD，GPL，LGPL，MIT 等都是 OSI 批准的协议。如果要开源自己的代码，最好也是选择这些被批准的开源协议。首先借用一张相当直观清晰的图来划分各种协议：</p><p><img src="/images/2017-11/free_software_licenses.png" alt=""></p><a id="more"></a><p>以下是上述协议的简单介绍：</p><h2 id="强开源约束授权"><a href="#强开源约束授权" class="headerlink" title="强开源约束授权"></a>强开源约束授权</h2><p><a href="https://www.gnu.org/licenses/gpl-3.0.en.html" target="_blank" rel="noopener">GPL（GNU General Public License）</a><br>我们很熟悉的 Linux 就是采用了 GPL。GPL 协议和 BSD，Apache Licence 等鼓励代码重用的许可很不一样。<br>GPL 的出发点是代码的开源 / 免费使用和引用 / 修改 / 衍生代码的开源 / 免费使用，但不允许修改后和衍生的代码作为闭源的商业软件发布和销售。这也就是为什么我们能用免费的各种 linux，包括商业公司的 linux 和 linux 上各种各样的由个人，组织，以及商业软件公司开发的免费软件了。<br>GPL 协议的主要内容是只要在一个软件中使用(『使用』指类库引用，修改后的代码或者衍生代码)GPL 协议的产品，则该软件产品必须也采用 GPL 协议，既必须也是开源和免费。这就是所谓的『传染性』。<br>GPL 协议的产品作为一个单独的产品使用没有任何问题，还可以享受免费的优势。由于 GPL 严格要求使用了 GPL 类库的软件产品必须使用 GPL 协议，对于使用 GPL 协议的开源代码，商业软件或者对代码有保密要求的部门就不适合集成 / 采用作为类库和二次开发的基础。其它细节如再发布的时候需要伴随 GPL 协议等和 BSD/Apache 等类似。</p><h2 id="弱开源约束授权"><a href="#弱开源约束授权" class="headerlink" title="弱开源约束授权"></a>弱开源约束授权</h2><p><a href="https://www.mozilla.org/MPL/MPL-1.1.html" target="_blank" rel="noopener">MPL License（Mozilla Public License）</a><br>MPL 是 The Mozilla Public License 的简写，是 1998 年初 Netscape 的 Mozilla 小组为其开源软件项目设计的软件许可证。MPL 许可证出现的最重要原因就是，Netscape 公司认为 GPL 许可证没有很好地平衡开发者对源代码的需求和他们利用源代码获得的利益。同著名的 GPL 许可证和 BSD 许可证相比，MPL 在许多权利与义务的约定方面与它们相同（因为都是符合 OSIA 认定的开源软件许可证）。但是，相比而言 MPL 还有以下几个显著的不同之处：</p><ul><li>MPL 虽然要求对于经 MPL 许可证发布的源代码的修改也要以 MPL 许可证的方式再许可出来，以保证其他人可以在 MPL 的条款下共享源代码。但是，在 MPL 许可证中对『发布』的定义是『以源代码方式发布的文件』，这就意味着 MPL 允许一个企业在自己已有的源代码库上加一个接口，除了接口程序的源代码以 MPL 许可证的形式对外许可外，源代码库中的源代码就可以不用 MPL 许可证的方式强制对外许可。这些，就为借鉴别人的源代码用做自己商业软件开发的行为留了一个豁口。</li><li>MPL 许可证第三条第 7 款中允许被许可人将经过 MPL 许可证获得的源代码同自己其他类型的代码混合得到自己的软件程序。</li><li>对软件专利的态度，MPL 许可证不像 GPL 许可证那样明确表示反对软件专利，但是却明确要求源代码的提供者不能提供已经受专利保护的源代码（除非他博主是专利权人，并书面向公众免费许可这些源代码），也不能在将这些源代码以开放源代码许可证形式许可后再去申请与这些源代码有关的专利。</li><li>对源代码的定义。在 MPL（1.1 版本）许可证中，对源代码的定义是：『源代码指的是对作品进行修改最优先择取的形式，它包括:<br>所有模块的所有源程序，加上有关的接口的定义，加上控制可执行作品的安装和编译的原本（原文为 Script），或者不是与初始源代码显著不同的源代码就是被源代码贡献者选择的从公共领域可以得到的程序代码。』</li><li>MPL 许可证第 3 条有专门的一款是关于对源代码修改进行描述的规定，就是要求所有再发布者都得有一个专门的文件就对源代码程序修改的时间和修改的方式有描述。</li></ul><p>MPL 允许免费重发布、免费修改，但要求修改后的代码版权归软件的发起者。这种授权维护了商业软件的利益，它要求基于这种软件的修改无偿贡献版权给该软件。这样，围绕该软件的所有代码得版权都集中在发起开发人得手中。但 MPL 是允许修改，无偿使用的。<br>MPL 软件对链接没有要求。(要求假如你修改了一个基于 MPL 协议的源代码，则必须列入或公开你所做的修改，假如其他源代码不是基于 MPL 则不需要公开其源代码)</p><p><a href="https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html" target="_blank" rel="noopener">LGPL（GNU Lesser General Public License）</a><br>LGPL 是 GPL 的一个为主要为类库使用设计的开源协议。<br>和 GPL 要求任何使用 / 修改 / 衍生之 GPL 类库的的软件必须采用 GPL 协议不同，LGPL 允许商业软件通过类库引用 (link) 方式使用 LGPL 类库而不需要开源商业软件的代码。这使得采用 LGPL 协议的开源代码可以被商业软件作为类库引用并发布和销售。但是如果修改 LGPL 协议的代码或者衍生，则所有修改的代码，涉及修改部分的额外代码和衍生的代码都必须采用 LGPL 协议。<br>因此 LGPL 协议的开源代码很适合作为第三方类库被商业软件引用，但不适合希望以 LGPL 协议代码为基础，通过修改和衍生的方式做二次开发的商业软件采用。<br>GPL/LGPL 都保障原作者的知识产权，避免有人利用开源代码复制并开发类似的产品。</p><p><a href="https://mit-license.org" target="_blank" rel="noopener">MIT（MIT）</a><br>MIT 是和 BSD 一样宽范的许可协议，作者只想保留版权，而无任何其他了限制。也就是说，你必须在你的发行版里包含原许可协议的声明，无论你是以二进制发布的还是以源代码发布的。</p><h2 id="无开源约束授权"><a href="#无开源约束授权" class="headerlink" title="无开源约束授权"></a>无开源约束授权</h2><p><a href="http://www.bsdcertification.org" target="_blank" rel="noopener">BSD 开源协议</a><br>BSD 开源协议是一个给于使用者很大自由的协议。基本上使用者可以『为所欲为』，可以自由的使用，修改源代码，也可以将修改后的代码作为开源或者专有软件再发布。但『为所欲为』的前提当你发布使用了 BSD 协议的代码，或者以 BSD 协议代码为基础做二次开发自己的产品时，需要满足三个条件：</p><ul><li>如果再发布的产品中包含源代码，则在源代码中必须带有原来代码中的 BSD 协议。</li><li>如果再发布的只是二进制类库 / 软件，则需要在类库 / 软件的文档和版权声明中包含原来代码中的 BSD 协议。</li><li>不可以用开源代码的作者 / 机构名字和原来产品的名字做市场推广。</li></ul><p>BSD 代码鼓励代码共享，但需要尊重代码作者的著作权。<br>BSD 由于允许使用者修改和重新发布代码，也允许使用或在 BSD 代码上开发商业软件发布和销售，因此是对商业集成很友好的协议。<br>而很多的公司企业在选用开源产品的时候都首选 BSD 协议，因为可以完全控制这些第三方的代码，在必要的时候可以修改或者二次开发。</p><p><a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener">Apache Licence</a><br>Apache Licence 是著名的非盈利开源组织 Apache 采用的协议。<br>该协议和 BSD 类似，同样鼓励代码共享和尊重原作者的著作权，同样允许代码修改，再发布（作为开源或商业软件）。需要满足的条件也和 BSD 类似：</p><ul><li>需要给代码的用户一份 Apache Licence</li><li>如果你修改了代码，需要再被修改的文件中说明。</li><li>在延伸的代码中（修改和有源代码衍生的代码中）需要带有原来代码中的协议，商标，专利声明和其他原来作者规定需要包含的说明。</li><li>如果再发布的产品中包含一个 Notice 文件，则在 Notice 文件中需要带有 Apache Licence。你可以在 Notice 中增加自己的许可，但不可以表现为对 Apache Licence 构成更改。</li></ul><p>Apache Licence 也是对商业应用友好的许可。使用者也可以在需要的时候修改代码来满足需要并作为开源或商业产品发布 / 销售。</p><h2 id="其他开源约束授权"><a href="#其他开源约束授权" class="headerlink" title="其他开源约束授权"></a>其他开源约束授权</h2><p><a href="https://creativecommons.org" target="_blank" rel="noopener">Creative Commons（CC）</a><br>您在自己的作品上使用知识共享许可协议，并不意味着放弃您的著作权，而是在特定的条件下将您的部分权利授予公共领域内的使用者。<br>哪些特定的条件呢？您可以在此处看到所有知识共享许可协议及其简单的介绍。<br>所有的许可协议都要求您以作者或者许可人的名义署名。您可以将以下的选项进行组合、搭配，由此将构成我们的六套核心知识共享许可协议。</p><ul><li>是否允许他人对自己享有著作权的作品及演绎作品进行复制、发行、展览、表演、放映、广播或通过信息网络向公众传播，但在这些过程中对方必须保留您对原作品的署名。</li><li>是否允许他人对您享有著作权的作品及演绎作品进行复制、发行、展览、表演、放映、广播或通过信息网络向公众传播，但仅限于非商业性目的。</li><li>是否允许他人对您的作品原封不动地进行复制、发行、展览、表演、放映、广播或通过信息网络向公众传播，但不得进行演绎创作。</li><li>只有在他人对演绎作品使用与您的原作品相同的许可协议的情况下，您才允许他人发行其演绎作品。</li></ul><p>文章来源：《开源时代》2010.02 第十七期</p><p>相关文章：<br><a href="http://wenbois2000.iteye.com/blog/905850" target="_blank" rel="noopener">开源软件授权协议详解（GPL/MPL/LGPL/BSD/Apache Licence/Creative Commons/MIT）</a><br><a href="http://www.geek-workshop.com/thread-1860-1-1.html" target="_blank" rel="noopener">开源许可证 GPL、BSD、MIT、Mozilla、Apache 和 LGPL 的区别</a></p><p>图片来源：<a href="https://www.ruanyifeng.com/blog/2011/05/how_to_choose_free_software_licenses.html" target="_blank" rel="noopener">如何选择开源许可证？</a></p><p>拓展阅读：<br><a href="http://news.duowan.com/YD/ctm32" target="_blank" rel="noopener">由 psp 破解谈到中国伸手党式网民的心理</a><br><a href="https://www.gnu.org/proprietary/proprietary.html" target="_blank" rel="noopener">專有軟體常是惡意軟體</a><br><a href="https://www.gnu.org/philosophy/free-software-even-more-important.html" target="_blank" rel="noopener">自由软件现在更加重要</a></p>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>细思恐极</title>
      <link href="/2017-11/%E7%BB%86%E6%80%9D%E6%81%90%E6%9E%81/"/>
      <url>/2017-11/%E7%BB%86%E6%80%9D%E6%81%90%E6%9E%81/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/2017-11/IMG_4263.jpg" alt=""><br><img src="/images/2017-11/6592b5f47ee61115f25057554223beb3.jpg" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>WordPress 3.x 版本中的彩蛋</title>
      <link href="/2017-11/WordPress%203.x%E7%89%88%E6%9C%AC%E4%B8%AD%E7%9A%84%E5%BD%A9%E8%9B%8B/"/>
      <url>/2017-11/WordPress%203.x%E7%89%88%E6%9C%AC%E4%B8%AD%E7%9A%84%E5%BD%A9%E8%9B%8B/</url>
      
        <content type="html"><![CDATA[<p>今天博主在进行 WordPress 博客考古活动时，得知了一个彩蛋。来源见：<a href="http://www.kaisir.com/2010/02/the-egg-wordpress.html" target="_blank" rel="noopener">WordPress 的彩蛋</a>。<br>在 WordPress 文章中使用 Compare Revisions 功能，如果两个相比较的文章 ID 一致，就会触发彩蛋。其效果是显示文字：</p><blockquote><p>Wake up XXX… The matrix has you. Follow the white rabbit. Don’t let this happen again.</p></blockquote><p>这是一个致敬 The Matrix 的彩蛋。经过对 <a href="https://cn.wordpress.org/releases" target="_blank" rel="noopener">WordPress 历史版本</a> 的分析，发现该彩蛋已在 4.x 版本移除。通过分析 3.0.2 版本的文件，找到了该版本的 revision.php 和 revision-js.php 文件，并大致研究出了其实现方法。在 revision.php 中有这样一串代码：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// If we're comparing a revision to itself, redirect to the'view'page for that revision or the edit page for that post</span></span><br><span class="line"><span class="keyword">if</span> ( $left_revision-&gt;ID == $right_revision-&gt;ID ) &#123;</span><br><span class="line">    $redirect = get_edit_post_link( $left_revision-&gt;ID );</span><br><span class="line">    <span class="keyword">include</span>( <span class="string">'./js/revisions-js.php'</span> );</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>而在 revision-js.php 中，有一串经过了 eval 混淆的代码，用于向用户输出彩蛋内容。 目前博主正在尝试反混淆代码，并复现这个彩蛋。如果你有兴趣，也可以下载 revision-js.php 进行研究。</p><p>本文更新于 2017 年 11 月 11 日：<br>由于博主并不准备搭建旧版本 WordPress 的运行环境，于是决定从代码入手，分析这个彩蛋。<br>在 revisions-js.php 中定义的函数 dvortr()作用是使用一对一的替换来加密字符串，该文件中有两次调用此函数：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dvortr( <span class="string">"Erb-y n.y ydco dall.b aiacbv Wa ce]-irxajt- dp.u]-$-VIr XajtWzaVv"</span> )</span><br></pre></td></tr></table></figure></p><p>和<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dvortr( <span class="string">'Eabi.p!'</span> )</span><br></pre></td></tr></table></figure></p><p>经过解密，其输出分别为<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Don't let this happen again. <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">'goback'</span> <span class="attr">href</span>=<span class="string">'$'</span>&gt;</span>Go Back<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>和 <code>Danger!</code>。<br>而定义的变量 <code>$j</code> 作用是包含 jQuery 库，<code>$n</code> 是获取的当前用户名，<code>$d</code> 是 noscript 时的输出。通过替换掉一些 WordPress 中定义的函数，博主成功地使部分解码后的 php 文件在本地 Apache 服务器成功运行。并且，博主还重新制作了这个彩蛋，现在它已经可以在本站以某种方式触发～<br>下面附上整个解密过程中所用到的文件。其中 revision.php 和 revisions-js.php 是原文件，decode.php 是部分解密后的文件，decode.js 是浏览器获取的匿名 js 文件，decoder.html 是根据原文件的加密算法编写的加密、解密脚本。<br><a href="/files/WordPressEasterEgg.zip">WordPressEasterEgg</a></p>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WordPress </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在 WordPress 博客中使用 LaTeX</title>
      <link href="/2017-11/%E5%9C%A8WordPress%E5%8D%9A%E5%AE%A2%E4%B8%AD%E4%BD%BF%E7%94%A8LaTeX/"/>
      <url>/2017-11/%E5%9C%A8WordPress%E5%8D%9A%E5%AE%A2%E4%B8%AD%E4%BD%BF%E7%94%A8LaTeX/</url>
      
        <content type="html"><![CDATA[<p>上帝说，要有<br>\begin{eqnarray*}<br>\nabla\cdot\vec{E}&amp;=&amp;\frac{\rho}{\epsilon_0}\\<br>\nabla\cdot\vec{B}&amp;=&amp;0\\<br>\nabla\times\vec{E}&amp;=&amp;-\frac{\partial B}{\partial t}\\<br>\nabla\times\vec{B}&amp;=&amp;\mu_0\left(\vec{J}+\epsilon_0\frac{\partial E}{\partial t}\right)\\<br>\end{eqnarray*}<br>于是就有了光。<br><strong> 注：以上文字旨在测试 $\LaTeX$ 兼容情况。</strong><br>使用方法：在 HTML 页面中，通过<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-AMS-MML_HTMLorMML"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--config 后的参数可以根据需求自定义，默认为? config=default--&gt;</span></span><br></pre></td></tr></table></figure></p><p>即可加载 MathJax，该脚本将会把所有 $\LaTeX$ 公式正确显示出来。尽情的按照 $\LaTeX$ 语法插入公式就好啦！<br>如果要在 WordPress 中使用，可以通过在编辑文章界面，选择『文本』（如果使用『可视化』，字符将被转义，导致脚本无法加载），输入以上内容达到相同效果。<br>使用时请注意：<br>The default math delimiters are <code>$$...$$</code> and <code>\[...\]</code> for displayed mathematics, and <code>\(...\)</code> for in-line mathematics. Note in particular that the <code>$...$</code> in-line delimiters are <strong>not</strong> used by default.<br>也就是说，行内公式的 <code>$</code> 符号默认不会被识别。你可以在 HTML 页面中加入以下配置以启用之：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/x-mathjax-config"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">MathJax.Hub.Config(&#123;</span></span><br><span class="line"><span class="undefined">    tex2jax: &#123;</span></span><br><span class="line"><span class="undefined">        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],</span></span><br><span class="line"><span class="undefined">        processEscapes: true,</span></span><br><span class="line"><span class="undefined">        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    TeX: &#123;equationNumbers: &#123; autoNumber: "AMS" &#125;&#125;,</span></span><br><span class="line"><span class="undefined">    "HTML-CSS": &#123; linebreaks: &#123; automatic: true &#125;, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) &#125;,</span></span><br><span class="line"><span class="undefined">    SVG: &#123; linebreaks: &#123; automatic: true &#125;&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>其中 <code>linebreaks</code> 项会在屏幕宽度较小时自动使公式换行，而 <code>inlineMath</code> 项则启用了 <code>$</code> 符号标记的行内公式。</p><p>更多信息可以访问官方网站：<a href="https://www.mathjax.org" target="_blank" rel="noopener">MathJax</a></p><p>本文更新于 2018 年 5 月 20 日：<br>在 Hexo 中，如果使用了 NexT 主题，可以通过配置主题目录下的_config.yml 简单地使用 MathJax。在_config.yml 中找到 mathjax，将其子选项改为 <code>enable: true</code>，并在需要加载 MathJax 的文章头添加 <code>mathjax: true</code> 即可。</p><p>本文更新于 2018 年 10 月 3 日：<br>还有一种解决方案是调用知乎的 API：<code>https://www.zhihu.com/equation?tex=</code>，通过 GET 请求，就可以将你的 $\LaTeX$ 表达式转换为公式的图片。</p>]]></content>
      
      
      <categories>
          
          <category> 物理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WordPress </tag>
            
            <tag> LaTeX </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在 Mac 上通过 Sublime、Skim 编辑 LaTeX</title>
      <link href="/2017-11/%E5%9C%A8Mac%E4%B8%8A%E9%80%9A%E8%BF%87Sublime%E3%80%81Skim%E7%BC%96%E8%BE%91LaTeX/"/>
      <url>/2017-11/%E5%9C%A8Mac%E4%B8%8A%E9%80%9A%E8%BF%87Sublime%E3%80%81Skim%E7%BC%96%E8%BE%91LaTeX/</url>
      
        <content type="html"><![CDATA[<p>Sublime Text 是一款非常优秀的编辑器：速度快，界面简洁，插件众多；并且能够跨平台使用，在 Mac 和 Windows 上都发挥完美。虽然是一款付费软件，但作者很厚道地给了无限期的试用期限。这一切正如其官网广告词说的那样：The text editor you’ll fall in love with.<br>Skim 是一款免费轻量的 PDF 阅读、标注工具，布局贴心友好，与 OS X 自带的 Previewer 相比，Skim 能更好的注释 PDF 文件。<br>$\LaTeX$ 是一款权威的科技论文排版系统，不仅可以写论文，也可以处理日常的各种文档工作，甚至是做幻灯片。相比于 Microsoft Word，$\LaTeX$ 最大的优势是对于复杂公式的编辑与排版非常漂亮，并且用简单的命令就可以生成脚注、索引、目录和参考文献等复杂的结构。这一切优点都使得世界上众多的科学家们不再需要身兼作者与排版工两职，从而将更多的精力集中于文章内容本身。<br>本文的目的是将上述三种软件综合部署在 Mac 上。完成之后，你将可以在 Sublime Text 里面进行 $\LaTeX$ 代码编辑，用 Skim 预览生成的 PDF 文件。更重要的是，让你觉得，写论文也可以是一件很优美的事。</p><a id="more"></a><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ul><li>Mac 上至少 4GiB 的空余空间</li><li>高速的互联网连接</li></ul><h2 id="安装-MacTeX"><a href="#安装-MacTeX" class="headerlink" title="安装 MacTeX"></a>安装 MacTeX</h2><ul><li>进入 <a href="https://www.tug.org/mactex" target="_blank" rel="noopener">MacTeX 官网</a> 下载 <code>MacTeX.pkg</code> 文件。文件大约 3GB，需要一段时间才能完成下载，趁现在去喝杯咖啡吧。</li><li>下载完成之后，双击 <code>MacTeX.pkg</code> 进行安装。</li><li>安装完成之后，会看到许多与 TeX 有关的程序图标，暂时忽略它们。</li></ul><h2 id="安装-Sublime-Text"><a href="#安装-Sublime-Text" class="headerlink" title="安装 Sublime Text"></a>安装 Sublime Text</h2><ul><li>进入 <a href="https://www.sublimetext.com" target="_blank" rel="noopener">Sublime Text 官网</a> 下载最新版本的 Sublime Text 3。</li><li>下载完成之后，将文件拖入应用程序文件夹安装。</li></ul><h2 id="在-Sublime-Text-中安装-Package-Control"><a href="#在-Sublime-Text-中安装-Package-Control" class="headerlink" title="在 Sublime Text 中安装 Package Control"></a>在 Sublime Text 中安装 Package Control</h2><p>我们需要在 Sublime Text 中下载插件以便能够很好地操作与 $\LaTeX$ 有关的文件。而插件是通过 Package Control 下载的。</p><ul><li>进入 <a href="https://packagecontrol.io/installation" target="_blank" rel="noopener">Package Control 官网</a> 复制灰色区块的代码。</li><li>打开 Sublime Text。</li><li>使用快捷键 <code>control+~</code> 打开控制面板 Console。你会在 Sublime Text 的底部看到弹出一个白色窗口。</li><li>将刚才复制的代码粘贴到控制面板。</li><li>按下 <code>Enter</code> 回车键，等待安装。</li><li>安装完成后，退出并重启 Sublime Text。</li></ul><h2 id="安装-LaTeX-Tools"><a href="#安装-LaTeX-Tools" class="headerlink" title="安装 LaTeX Tools"></a>安装 LaTeX Tools</h2><ul><li>Sublime Text 重启后，按下 <code>Command+Shift+P</code> 打开命令托盘 Command pallet，这一步也可以通过 Tools 下拉菜单完成。</li><li>在命令托盘里输入 <code>Install Package</code>，按下 <code>Enter</code> 回车建。</li><li>完成之后，输入 <code>LaTeX Tools</code>，找到这一项并回车安装。</li><li>退出并重启 Sublime Text。</li></ul><h2 id="安装-Skim"><a href="#安装-Skim" class="headerlink" title="安装 Skim"></a>安装 Skim</h2><ul><li>进入 <a href="https://skim-app.sourceforge.io" target="_blank" rel="noopener">Skim 官网</a> 下载 Skim 并安装。</li><li>打开 Skim，在菜单栏中点击 <code>Skim &gt; Preference(选项) &gt; Sync(同步)</code>。</li><li>在预设菜单中选择 <code>Sublime Text</code>。</li><li>关闭上面这个窗口。</li></ul><h2 id="修改编译和中文环境"><a href="#修改编译和中文环境" class="headerlink" title="修改编译和中文环境"></a>修改编译和中文环境</h2><p>点击 Browse Package，然后打开编辑<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/Library/Application\ Support/Sublime\ Text/Packages/Users/LaTeX.sublime-settings</span><br></pre></td></tr></table></figure></p><p>将其中 builder 条目改为：<code>builder: simple</code><br>接着打开编辑<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/Library/Application\ Support/Sublime\ Text/Packages/LaTeXTools/builders/simpleBuilder.py</span><br></pre></td></tr></table></figure></p><p>找到其中大概第 41 行<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pdflatex = [<span class="string">"pdflatex"</span>, <span class="string">"-interaction=nonstopmode"</span>, <span class="string">"-synctex=1"</span>]</span><br></pre></td></tr></table></figure></p><p>修改为<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pdflatex = [<span class="string">"xelatex"</span>, <span class="string">"-interaction=nonstopmode"</span>, <span class="string">"-synctex=1"</span>]</span><br></pre></td></tr></table></figure></p><p>保存后关闭，重新编译一下，中文正常啦！</p><p>现在，我们已经做完了所有的步骤✌️，可以打开 Sublime Text，<code>Command+N</code> 新建文件并在里面编写 $\LaTeX$ 代码了，完成编辑之后，<code>Command+S</code> 保存文件，<code>Command+B</code> 编译并运行，这时就可以在 Skim 里面看到 PDF 预览了。<br>如果使用 LaTeX Tools 编译出现问题，可以尝试在命令行中直接进行编译：在第一步完成后，打开终端，cd 到 tex 所在到文件夹，使用 <code>xelatex *.tex</code>，编译 tex 文件为 pdf。如果成功，你可见将它添加到 Sublime Text 的 Build System 中，也可以实现一键编译。除此之外，还可以使用 Pandoc 等命令行工具将 tex 转为其他格式的文档。<br>在 Windows 上可以通过安装 TexLive 的方法配置 TeX 环境，过程是类似的。需要注意的是，tex 文件应采用 UTF-8 编码。</p><p>参考文章：<a href="https://blog.csdn.net/songrotek/article/details/46457571" target="_blank" rel="noopener">在 Mac OS X 下搭建 Latex 编辑环境</a></p><p>本文更新于 2018 年 5 月</p>]]></content>
      
      
      <categories>
          
          <category> 物理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
            <tag> LaTeX </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一些 HTML 与 JS 的小技巧</title>
      <link href="/2017-10/%E4%B8%80%E4%BA%9BHTML%E4%B8%8EJS%E7%9A%84%E5%B0%8F%E6%8A%80%E5%B7%A7/"/>
      <url>/2017-10/%E4%B8%80%E4%BA%9BHTML%E4%B8%8EJS%E7%9A%84%E5%B0%8F%E6%8A%80%E5%B7%A7/</url>
      
        <content type="html"><![CDATA[<p>最近博主在学习前端设计的时候，知道了很多实用的小技巧，于是决定写一篇文章总结一下。</p><h2 id="document-write"><a href="#document-write" class="headerlink" title="document.write"></a>document.write</h2><p>这个函数可以直接向 HTML 文档写入任何内容。比如，你需要根据屏幕宽度来加载不同 js 时，如果希望写入的内容是 <code>&lt;script src=&quot;main.js&quot;&gt;&lt;/script&gt;</code>，那么只要这样就可以了：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="handlebars"><span class="xml"> if (screen.width &gt;= 1200) document.write('<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"main.js"</span>&gt;</span><span class="handlebars"><span class="xml"><span class="tag">&lt;<span class="name">\</span>/<span class="attr">script</span>&gt;</span>'); </span></span></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>JavaScript 的字符串可以使用单引号或双引号表示，但是由于要写入的内容里有双引号，使用 document.write 时应该用单引号括起来，否则需要将双引号转义为 <code>\&quot;</code>，避免造成错误。如果有多层引号，应将最内层的引号改为 HTML 转义字符 <code>&amp;quot;</code>。而对于这里出现的 <code>/</code>，将其改写为了 <code>\/</code>，原因是浏览器会认为 <code>&lt;/script&gt;</code> 是闭合标签，造成代码解析错误。<br>通过 <code>document.write</code> 可以实现根据不同的条件向 HTML 写入不同的内容，但是要注意，如果这个时候页面已经加载完毕，<code>document.write</code> 会导致页面的内容被清空。实际使用时一定要注意。</p><h2 id="use-strict"><a href="#use-strict" class="headerlink" title="use strict"></a>use strict</h2><p>在一些脚本中，你或许会在最前面看到单独的一行 <code>&quot;use strict&quot;</code>，这是严格模式的声明。<br>严格模式对正常的 JavaScript 语义做了一些更改：</p><ul><li>严格模式通过抛出错误来消除了一些原有静默错误。</li><li>严格模式修复了一些导致 JavaScript 引擎难以执行优化的缺陷：有时候，相同的代码，严格模式可以比非严格模式下运行得更快。</li><li>严格模式禁用了在 ECMAScript 的未来版本中可能会定义的一些语法。</li></ul><h2 id="JavaScript-传递参数"><a href="#JavaScript-传递参数" class="headerlink" title="JavaScript 传递参数"></a>JavaScript 传递参数</h2><p>这是一种向外部 JS 文件传入参数的方法。在 HTML 中写入<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">tag1</span>=<span class="string">"1"</span> <span class="attr">src</span>=<span class="string">"example.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>在 <code>example.js</code> 中写入<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> scripts = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"script"</span>),</span><br><span class="line">    script_len = scripts.length,</span><br><span class="line">    script = scripts[script_len - <span class="number">1</span>],</span><br><span class="line">    tag1 = script.getAttribute(<span class="string">"tag1"</span>);</span><br></pre></td></tr></table></figure></p><p>这样即可获取 tag1 的值，可以说是非常的巧妙了。</p><h2 id="noscript-标签"><a href="#noscript-标签" class="headerlink" title="noscript 标签"></a>noscript 标签</h2><p>对于某些不支持 js 的上古浏览器，以及对于停用了 js 的用户，noscript 标签可能非常有用。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">noscript</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"background-color: #5C5C5C; position: fixed; bottom: 50px; left: 80px; opacity: 0.95; border-radius: 15px; color: #FFFFFF;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"margin: 15px; max-width: 400px;"</span>&gt;</span> 系统检测到您的浏览器禁用了或不支持 JavaScript。为了保障您的浏览体验，请启用 JavaScript 或 < span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">"_blank"</span> <span class="attr">href</span>=<span class="string">"http://browsehappy.com"</span> <span class="attr">class</span>=<span class="string">"a"</span> <span class="attr">style</span>=<span class="string">"color: rgba(239,178,75,1)"</span>&gt;</span> 升级浏览器 < span class="tag">&lt;/<span class="name">a</span>&gt;<span class="tag">&lt;/<span class="name">p</span>&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="IE-条件注释"><a href="#IE-条件注释" class="headerlink" title="IE 条件注释"></a>IE 条件注释</h2><p>以下类型的注释会被 IE9 及更早的版本读取，而被其他浏览器忽略：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Since Conditional Comments have been deprecated since Internet Explorer 10, the following script will be ignored, so only Internet Explorer 9 (and below) users will be redirected to a page asking to upgrade their browsers. --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--[if IE]&gt;</span></span><br><span class="line"><span class="comment">    &lt;script type="text/javascript" src="./js/upgrade_your_fucking_browser.js"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure></p><p>或者<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if lt IE 9]&gt;</span></span><br><span class="line"><span class="comment">    &lt;div class="notice chromeframe"&gt; 您的浏览器版本 & lt;strong&gt; 很旧很旧 & lt;/strong&gt;，为了正常地访问网站，请升级您的浏览器 & lt;a target="_blank" href="http://browsehappy.com"&gt; 立即升级 & lt;/a&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure></p><p>在『现代』浏览器占主导的今天，这种条件注释的一个用处是提醒 IE 用户升级浏览器。不过，IE10 及更新的 IE 不会读取这些条件注释。如果想要所有 IE 都看到提醒，可能还要靠别的办法，比如用 js 判断 User Agent。</p><a id="more"></a><h2 id="响应式页面的设计"><a href="#响应式页面的设计" class="headerlink" title="响应式页面的设计"></a>响应式页面的设计</h2><p>这个问题较为复杂。就说『屏幕宽度』，设备的物理分辨率、逻辑分辨率、出现滚动条时参数都各不相同。在 css 中使用<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">media</span> screen and (max-width: <span class="number">1200px</span>)</span><br></pre></td></tr></table></figure></p><p>这样的代码，识别的似乎是逻辑分辨率。而在 HTML 中使用以下代码<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"user-scalable=no, initial-scale=1.0, maximum-scale=1.0, width=device-width"</span>/&gt;</span></span><br></pre></td></tr></table></figure></p><p>在 Retina 屏幕的 iPhone 上缩放可能会出现问题，目前博主还在寻找通用的解决方案。</p><h2 id="a-标签的-download-属性"><a href="#a-标签的-download-属性" class="headerlink" title="a 标签的 download 属性"></a>a 标签的 download 属性</h2><p>设置 <code>&lt;a&gt;</code> 标签的 download 属性，可以在点击该链接时下载目标，即 href 属性指向的超链接。<br>该属性也可以设置一个值来规定下载文件的名称。所允许的值没有限制，浏览器将自动检测正确的文件扩展名并添加到文件。例如：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://www.example.com/images/example.jpg"</span> <span class="attr">download</span>=<span class="string">"logo"</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>正常情况下，浏览器会将其保存为 logo.jpg。</p><h2 id="为-console-log-添加样式"><a href="#为-console-log-添加样式" class="headerlink" title="为 console.log 添加样式"></a>为 console.log 添加样式</h2><p>在常见的 JavaScript 代码中，一般只会向 console 控制台输出简单的文字信息。但为了把信息输出得更优雅更便于阅读，除了 <code>cosole.log()</code> 方法外，还可以调用 <code>cosole.warn()</code> 来输出警告信息，在输出信息前面会有一个带感叹号的黄色三角警告符号。<br>另外经常用到的是输出错误信息，可以通过调用 <code>console.erro()</code> 来实现，信息前面会出现一个带叉的红色圆形图标。<br>在某些浏览器下，还可以按以下格式，为输出到 console 控制台的文字进行 CSS 控制，添加样式：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">"%c 需要输出的信息"</span>, <span class="string">"css 代码"</span>);</span><br></pre></td></tr></table></figure></p><p>这样可以显示缤纷的颜色，甚至图片，简直爽翻了。<br>下面是 Chrome 中 <code>console.log()</code> 的官方文档摘要，也适用于大部分主流浏览器：</p><table><thead><tr><th>Format Specifier</th><th>Description</th></tr></thead><tbody><tr><td>%s</td><td>Formats the value as a string.</td></tr><tr><td>%d or %i</td><td>Formats the value as an integer.</td></tr><tr><td>%f</td><td>Formats the value as a floating point value.</td></tr><tr><td>%o</td><td>Formats the value as an expandable DOM element (as in the Elements panel).</td></tr><tr><td>%O</td><td>Formats the value as an expandable JavaScript object.</td></tr><tr><td>%c</td><td>Formats the output string according to CSS styles you provide.</td></tr></tbody></table><p>下面是一些例子：</p><p><img src="/images/2017-10/2018-07-17.png" alt=""></p><h3 id="3D-Text"><a href="#3D-Text" class="headerlink" title="3D Text"></a>3D Text</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">"%c3D Text"</span>, <span class="string">"text-shadow: 0 1px 0 #ccc, 0 2px 0 #c9c9c9, 0 3px 0 #bbb, 0 4px 0 #b9b9b9, 0 5px 0 #aaa, 0 6px 1px rgba(0, 0, 0, .1), 0 0 5px rgba(0, 0, 0, .1), 0 1px 3px rgba(0, 0, 0, .3), 0 3px 5px rgba(0, 0, 0, .2), 0 5px 10px rgba(0, 0, 0, .25), 0 10px 10px rgba(0, 0, 0, .2), 0 20px 20px rgba(0, 0, 0, .15);\</span></span><br><span class="line"><span class="string">font-size: 5em;"</span>);</span><br></pre></td></tr></table></figure><h3 id="Colorful-CSS"><a href="#Colorful-CSS" class="headerlink" title="Colorful CSS"></a>Colorful CSS</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">"%cColorful CSS"</span>, <span class="string">"background: rgba(252, 234, 187, 1);\</span></span><br><span class="line"><span class="string">background: -moz-linear-gradient(left, rgba(252, 234, 187, 1) 0%, rgba(175, 250, 77, 1) 12%, rgba(0, 247, 49, 1) 28%, rgba(0, 210, 247, 1) 39%, rgba(0, 189, 247, 1) 51%, rgba(133, 108, 217, 1) 64%, rgba(177, 0, 247, 1) 78%, rgba(247, 0, 189, 1) 87%, rgba(245, 22, 52, 1) 100%);\</span></span><br><span class="line"><span class="string">background: -webkit-gradient(left top, right top, color-stop(0%, rgba(252, 234, 187, 1)), color-stop(12%, rgba(175, 250, 77, 1)), color-stop(28%, rgba(0, 247, 49, 1)), color-stop(39%, rgba(0, 210, 247, 1)), color-stop(51%, rgba(0, 189, 247, 1)), color-stop(64%, rgba(133, 108, 217, 1)), color-stop(78%, rgba(177, 0, 247, 1)), color-stop(87%, rgba(247, 0, 189, 1)), color-stop(100%, rgba(245, 22, 52, 1)));\</span></span><br><span class="line"><span class="string">background: -webkit-linear-gradient(left, rgba(252, 234, 187, 1) 0%, rgba(175, 250, 77, 1) 12%, rgba(0, 247, 49, 1) 28%, rgba(0, 210, 247, 1) 39%, rgba(0, 189, 247, 1) 51%, rgba(133, 108, 217, 1) 64%, rgba(177, 0, 247, 1) 78%, rgba(247, 0, 189, 1) 87%, rgba(245, 22, 52, 1) 100%);\</span></span><br><span class="line"><span class="string">background: -o-linear-gradient(left, rgba(252, 234, 187, 1) 0%, rgba(175, 250, 77, 1) 12%, rgba(0, 247, 49, 1) 28%, rgba(0, 210, 247, 1) 39%, rgba(0, 189, 247, 1) 51%, rgba(133, 108, 217, 1) 64%, rgba(177, 0, 247, 1) 78%, rgba(247, 0, 189, 1) 87%, rgba(245, 22, 52, 1) 100%);\</span></span><br><span class="line"><span class="string">background: -ms-linear-gradient(left, rgba(252, 234, 187, 1) 0%, rgba(175, 250, 77, 1) 12%, rgba(0, 247, 49, 1) 28%, rgba(0, 210, 247, 1) 39%, rgba(0, 189, 247, 1) 51%, rgba(133, 108, 217, 1) 64%, rgba(177, 0, 247, 1) 78%, rgba(247, 0, 189, 1) 87%, rgba(245, 22, 52, 1) 100%);\</span></span><br><span class="line"><span class="string">background: linear-gradient(to right, rgba(252, 234, 187, 1) 0%, rgba(175, 250, 77, 1) 12%, rgba(0, 247, 49, 1) 28%, rgba(0, 210, 247, 1) 39%, rgba(0, 189, 247, 1) 51%, rgba(133, 108, 217, 1) 64%, rgba(177, 0, 247, 1) 78%, rgba(247, 0, 189, 1) 87%, rgba(245, 22, 52, 1) 100%);\</span></span><br><span class="line"><span class="string">filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fceabb', endColorstr='#f51634', GradientType=1);\</span></span><br><span class="line"><span class="string">font-size: 5em;"</span>);</span><br></pre></td></tr></table></figure><h3 id="Rainbow-Text"><a href="#Rainbow-Text" class="headerlink" title="Rainbow Text"></a>Rainbow Text</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">"%cRainbow Text"</span>, <span class="string">"background-image:-webkit-gradient( linear, left top, right top, color-stop(0, #f22), color-stop(0.15, #f2f), color-stop(0.3, #22f), color-stop(0.45, #2ff), color-stop(0.6, #2f2), color-stop(0.75, #2f2), color-stop(0.9, #ff2), color-stop(1, #f22));\</span></span><br><span class="line"><span class="string">color: transparent;\</span></span><br><span class="line"><span class="string">-webkit-background-clip: text;\</span></span><br><span class="line"><span class="string">font-size: 5em;"</span>);</span><br></pre></td></tr></table></figure><h3 id="Image"><a href="#Image" class="headerlink" title="Image"></a>Image</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">"%c"</span>, <span class="string">"padding: 50px 300px; line-height: 120px; background: url('/images/icon.gif') no-repeat;"</span>);</span><br></pre></td></tr></table></figure><p>更多内容可以参考 <a href="https://www.cnblogs.com/Wayou/p/chrome_dev_tool_style_console.html" target="_blank" rel="noopener">Chrome 控制台新玩法 - console 显示图片以及为文字加样式</a>。</p><h2 id="Range-对象的使用"><a href="#Range-对象的使用" class="headerlink" title="Range 对象的使用"></a>Range 对象的使用</h2><h3 id="什么是-Range-对象"><a href="#什么是-Range-对象" class="headerlink" title="什么是 Range 对象"></a>什么是 Range 对象</h3><p>Range 是指 html 文档中的区域，如用户用鼠标拖动选中的区域，如下图：</p><p><img src="/images/2017-10/3386824149-594a3500b37f4.png" alt=""></p><p>通过 Range 对象，可以获取用户选中的区域，或者指定选中区域，得到 Range 的起点和终点、修改或者复制里边的文本，甚至是 html。在富文本编辑器开发中，经常会使用到这些功能。</p><h3 id="获取当前的选区"><a href="#获取当前的选区" class="headerlink" title="获取当前的选区"></a>获取当前的选区</h3><p>由于兼容性的问题, 需要区分 ie 浏览器，<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> selection, range;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.getSelection) &#123; </span><br><span class="line">    <span class="comment">// 现代浏览器 </span></span><br><span class="line">    selection = <span class="built_in">window</span>.getSelection();</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.selection) &#123; </span><br><span class="line">    <span class="comment">//IE</span></span><br><span class="line">    selection = <span class="built_in">document</span>.selection.createRange();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Range 对象 </span></span><br><span class="line">range = selection.getRangeAt(<span class="number">0</span>);</span><br></pre></td></tr></table></figure></p><h3 id="Range-对象的属性"><a href="#Range-对象的属性" class="headerlink" title="Range 对象的属性"></a>Range 对象的属性</h3><ul><li>collapsed 如果范围的开始点和结束点在文档的同一位置，则为 true，即范围是空的，或折叠的。</li><li>commonAncestorContainer 范围的开始点和结束点的（即它们的祖先节点）、嵌套最深的 Document 节点。</li><li>endContainer 包含范围的结束点的 Document 节点。</li><li>endOffset endContainer 中的结束点位置。</li><li>startContainer 包含范围的开始点的 Document 节点。</li><li>startOffset startContainer 中的开始点位置。</li></ul><h3 id="Range-对象的操作"><a href="#Range-对象的操作" class="headerlink" title="Range 对象的操作"></a>Range 对象的操作</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 选中区域的文字 </span></span><br><span class="line"><span class="keyword">var</span> text = range.toString();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 选中区域的 Element 元素 </span></span><br><span class="line"><span class="keyword">var</span> elem = range.commonAncestorContainer;</span><br><span class="line"><span class="keyword">if</span> (elem.nodeType != <span class="number">1</span>) &#123;</span><br><span class="line">    elem = elem.parentNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 选中区域的 html</span></span><br><span class="line"><span class="keyword">var</span> span = <span class="built_in">document</span>.createElement(<span class="string">'SPAN'</span>);</span><br><span class="line">span.appendChild(range.cloneContents());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 选区是否为空 </span></span><br><span class="line"><span class="keyword">var</span> isSelectionEmpty = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span> (range.startContainer === range.endContainer) &#123;</span><br><span class="line">    <span class="keyword">if</span> (range.startOffset === range.endOffset) &#123;</span><br><span class="line">        isSelectionEmpty = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="其它的一些技巧"><a href="#其它的一些技巧" class="headerlink" title="其它的一些技巧"></a>其它的一些技巧</h2><p>在 <code>&lt;script&gt;</code> 标签中的代码会被浏览器顺序执行，而函数大括号 <code>{}</code> 内的代码，在函数被调用时才会执行。如果要直接运行一个匿名函数，可以使用 <code>(function(){})();</code> 或者 <code>!function(){}();</code>，这样可以有效地避免全局变量名污染。<br>如果需要调用 <code>getElementById</code> 之类的函数，务必把 <code>&lt;script&gt;</code> 标签放到对应的元素后面，否则会找不到对象。<br>将 body 标签写为 <code>&lt;body onload=&quot;main()&quot;&gt;</code>，那么 main 函数会在页面加载完成后直接运行，通过 <code>window.addEventListener(&quot;load&quot;, main)</code> 也能达到类似的效果。</p><h2 id="关于-Safari-4-0-的一些回忆"><a href="#关于-Safari-4-0-的一些回忆" class="headerlink" title="关于 Safari 4.0 的一些回忆"></a>关于 Safari 4.0 的一些回忆</h2><p>为了测试网站对不同浏览器的友好程度，博主下载了 Oracle 和 Firefox，看到首次打开 Firefox 的欢迎动画时，突然想到多年之前，在 Windows 上首次运行 Safari 时看到的极为惊艳的动画。经过推断，那是 2010 年左右，版本是 Safari 4.0，欢迎动画展示了 HTML5 的诸多新特性。查找各大论坛后，找到了这个 Safari 欢迎动画的网址：<code>http://www.apple.com/safari/welcome/</code> 可惜年代久远，它（可能）已经永远地从苹果的服务器上消失了。非常遗憾，那个时候的我还 too young，沉迷于制作逐帧 flash 动画，丝毫没有了解 html 的奇妙世界。当今天我的回忆再一次被唤起时，Safari for Windows 已经凉了，<a href="https://www.apple.com/hotnews/thoughts-on-flash" target="_blank" rel="noopener">Flash 已经凉了</a>，Safari for macOS 已经是 11.0 版本。互联网时代的高速发展实在是令人感慨万千。</p><p>参考文章：<a href="https://segmentfault.com/a/1190000009875696" target="_blank" rel="noopener">JS Range 对象的使用</a></p><p>本文更新于 2018 年 6 月 21 日</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>伟安生，不玩蛇</title>
      <link href="/2017-10/%E4%BC%9F%E5%AE%89%E7%94%9F%EF%BC%8C%E4%B8%8D%E7%8E%A9%E8%9B%87/"/>
      <url>/2017-10/%E4%BC%9F%E5%AE%89%E7%94%9F%EF%BC%8C%E4%B8%8D%E7%8E%A9%E8%9B%87/</url>
      
        <content type="html"><![CDATA[<p>安德罗妮：这不是我说的。</p><p><img src="/images/2017-10/SNAKE.jpg" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 电子游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 炉石传说 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MacBook 使用一块移动硬盘做 Win To Go 及 Time Machine 备份</title>
      <link href="/2017-10/MacBook%E4%BD%BF%E7%94%A8%E4%B8%80%E5%9D%97%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E5%81%9AWin%20To%20Go%E5%8F%8ATime%20Machine%E5%A4%87%E4%BB%BD/"/>
      <url>/2017-10/MacBook%E4%BD%BF%E7%94%A8%E4%B8%80%E5%9D%97%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E5%81%9AWin%20To%20Go%E5%8F%8ATime%20Machine%E5%A4%87%E4%BB%BD/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/2017-10/macbookair.png" alt=""></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>博主使用的 MacBook Air，256G 闪存，可用空间约 251G，曾经的分区表为：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/dev/disk0 (internal, physical):</span><br><span class="line">   <span class="comment">#:                       TYPE NAME                    SIZE       IDENTIFIER</span></span><br><span class="line">   0:      GUID_partition_scheme                        *251.0 GB   disk0</span><br><span class="line">   1:                        EFI EFI                     209.7 MB   disk0s1</span><br><span class="line">   2:                 Apple_APFS Container disk1         215.4 GB   disk0s2</span><br><span class="line">   3:                   Bootcamp                         35.2 GB    disk0s3</span><br><span class="line">   4:            Winows Recovery                         212.4 MB   disk0s3</span><br><span class="line"></span><br><span class="line">/dev/disk1 (synthesized):</span><br><span class="line">   <span class="comment">#:                       TYPE NAME                    SIZE       IDENTIFIER</span></span><br><span class="line">   0:      APFS Container Scheme –                      +215.4 GB   disk1</span><br><span class="line">                                 Physical Store disk0s2</span><br><span class="line">   1:                APFS Volume Macintosh HD            152.3 GB   disk1s1</span><br><span class="line">   2:                APFS Volume Preboot                 20.1 MB    disk1s2</span><br><span class="line">   3:                APFS Volume Recovery                520.0 MB   disk1s3</span><br><span class="line">   4:                APFS Volume VM                      3.2 GB     disk1s4</span><br></pre></td></tr></table></figure></p><p>（这是使用 <code>diskutil list</code> 命令输出的结果）</p><a id="more"></a><p>GUID 分区表，共四个分区，分别是 EFI 引导分区、APFS 的 Mac 主分区（在更新 macOS 10.13 之前为 HFS+）、NTFS 的 Bootcamp 分区以及 Windows Recovery 分区。<br>在最初安装 Bootcamp 时，考虑到 Windows 系统只是用来运行某些没有 macOS 版本或无法移植到 macOS 的程序（例如《红色警戒 2》），Bootcamp 分区的大小仅分配了 35G。然而，在 8 月中旬昆特牌国服开启公测后，入坑的博主发现 Bootcamp 分区的大小似乎不够用了（来把昆特牌吧）。<br>由于 Bootcamp 是磁盘上靠后的分区，并不能用常规操作向前扩充，吞并 APFS 分区的空间（DiskGenius 使用计算器 + 手动改分区表数据似乎属于非常规操作，且面临着分区出现问题的危险），所以只能考虑备份 Bootcamp 分区内容，然后将其移除，并在主硬盘上重新划分 Bootcamp 分区。<br>不过，新的问题又产生了：Mac 主分区的大小也很有限（毕竟是安装了 Adobe 全家桶、Autodesk Maya、XCode 等程序的），并不足以重新划分出较大的 Bootcamp 分区以安装 Windows。于是只得寻求其他解决方案。比较显而易见的解决方案有：</p><ul><li>换个 Mac（超出预算，并且没有了信仰灯）</li><li>换个硬盘（MacBook Air 的闪存是 BGA 封装的，并不能像 SATA 的 SSD 那样直接拆）</li><li>装个 SD 卡（高性能大容量的 SD 卡价格感人，并且不适合 NTFS 文件系统）</li></ul><p>这些都不是最优解。在综合了各方面的考虑后，最终选定了如下方案：</p><ul><li>使用移动硬盘，一个分区做 Win To Go，另一个分区做 Time Machine 备份。其中移动硬盘选择的是西数 Elements 500G。</li></ul><h2 id="安装方法"><a href="#安装方法" class="headerlink" title="安装方法"></a>安装方法</h2><h3 id="准备必要的硬件"><a href="#准备必要的硬件" class="headerlink" title="准备必要的硬件"></a>准备必要的硬件</h3><ul><li>MacBook Air</li><li>移动硬盘（安装时会全盘格式化，请务必备份好全部数据）</li><li>可以运行 Windows 的 PC</li></ul><h3 id="下载必要的文件"><a href="#下载必要的文件" class="headerlink" title="下载必要的文件"></a>下载必要的文件</h3><ul><li><a href="https://msdn.itellyou.cn" target="_blank" rel="noopener">Windows 镜像</a>（请选择 Windows 10 的 ISO 镜像文件）</li><li><a href="http://dl.luobotou.org/wtga4800.zip" target="_blank" rel="noopener">Win To Go 安装工具</a></li><li><a href="https://pan.baidu.com/s/1jIJ0hfS" target="_blank" rel="noopener">Bootcamp 驱动程序</a></li></ul><h3 id="创建-Win-To-Go"><a href="#创建-Win-To-Go" class="headerlink" title="创建 Win To Go"></a>创建 Win To Go</h3><p>使用系统自带工具或下载第三方软件，将 Windows 镜像装载到虚拟光驱。将移动硬盘连接到 PC 上。在 PC 上打开 Win To Go 安装工具，如图所示（目前已更新到 4.8.0.0）。</p><p><img src="/images/2017-10/4500.png" alt=""></p><p>点击『浏览』，在虚拟光驱中找到 install.wim 文件并选中；在下方选择目标磁盘，即需要安装的移动硬盘。右侧高级选项中，『常用』栏下选择 VHD，以及 UEFI+GPT，『分区』栏下手动输入第二个分区的大小，单位为 MB；程序会自动调整第一个分区的大小；第三个分区若无需要，填 0 即可。第一个分区即作为 Win To Go 分区，第二个分区作为 Time Machine 备份分区。请再次确认移动硬盘上所有分区的文件都已备份。接下来点击『创建』，就将进行全盘格式化，并建立引导，创建 Win To Go 相关文件。</p><h3 id="配置-Windows"><a href="#配置-Windows" class="headerlink" title="配置 Windows"></a>配置 Windows</h3><p>完成上一步后，将移动硬盘接入 Mac。重新启动系统，按住 option/alt 键，进入引导磁盘选项。选择 EFI 分区，启动后按照提示完成 Windows 系统的配置即可。配置完 Windows 系统后，安装 Bootcamp 驱动。重新启动后即可应用更改。<br>注：在 macOS 与 Windows 下，触控板滚动方向是相反的，这一点可能会使用户感到不适，解决方案是修改注册表：<br>在 Windos 下通过 Win+R 打开『运行』，输入 regedit，在打开的注册表编辑器中，依次选择 <code>\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Enum\HID</code>，即可查看所有可用的键盘、鼠标。对于每个输入设备，点开下级目录，查看其 Device Parameters 下是否具有属性 FlipFlopWheel，若有，将其数据值由 0 改为 1 即可。</p><h3 id="配置-Time-Machine"><a href="#配置-Time-Machine" class="headerlink" title="配置 Time Machine"></a>配置 Time Machine</h3><p>此时再进入 macOS 系统，使用磁盘工具（在应用程序 - 实用工具目录中），选择移动硬盘，将其第二个分区（如果显示了 EFI 引导分区，则是第三个分区）格式化为 macOS 日志式。如果已经开启了 Time Machine，系统将会提示你将此硬盘作为 Time Machine 备份硬盘。接下来打开 Time Machine 进行初次备份即可。<br>完成这些操作后，便成功地使一块移动硬盘成为 Win To Go 启动盘及 Time Machine 备份盘。<br>附现在的分区表：</p><p><img src="/images/2017-10/diskutillist.png" alt=""></p><p>本文更新于 2018 年 5 月</p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C 语言控制台程序清除输入缓冲区</title>
      <link href="/2017-10/C%E8%AF%AD%E8%A8%80%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%A8%8B%E5%BA%8F%E6%B8%85%E9%99%A4%E8%BE%93%E5%85%A5%E7%BC%93%E5%86%B2%E5%8C%BA/"/>
      <url>/2017-10/C%E8%AF%AD%E8%A8%80%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%A8%8B%E5%BA%8F%E6%B8%85%E9%99%A4%E8%BE%93%E5%85%A5%E7%BC%93%E5%86%B2%E5%8C%BA/</url>
      
        <content type="html"><![CDATA[<p>编写 C 语言控制台程序时，如果使用 <code>scanf()</code> 函数作为输入，往往需要解决非法输入的问题。比如以下情况：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">"输入一个 0~9 的整数 a\n"</span>);</span><br><span class="line"><span class="keyword">int</span> a;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a);</span><br></pre></td></tr></table></figure></p><p>此时可能出现如下几种典型的非法输入：</p><ul><li>123</li><li>123xyz</li><li>xyz123</li></ul><p>对于第一种，使用 if 判断 a 的范围是否满足要求即可。第二种和第三种则较为复杂，因为其中涉及到了字符的输入。第二种情况，<code>scanf()</code> 会将 123 存入 a，而 xyz 留在了输入缓冲区；第三种情况，<code>scanf()</code> 不会读取任何数据，xyz123 都留在了输入缓冲区。<br>如果只是判断这一次输入的合法性，可以利用 <code>scanf()</code> 的返回值。如果输入有效，<code>scanf()</code> 会返回 1，否则返回 0。由此可以排除 <code>scanf()</code> 无法读取的输入。</p><a id="more"></a><p>然而，仅仅这样做是不够的。假设之后继续运行如下代码：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">"输入一个整数 b\n"</span>);</span><br><span class="line"><span class="keyword">int</span> b;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;b);</span><br></pre></td></tr></table></figure></p><p>如果在输入 a 时，非法输入的 xyz 或 xyz123 留在了输入缓冲区，那么当 <code>scanf()</code> 再次执行时，并不会直接读取你第二次输入的数据，而是从上一次输入在输入缓冲区留下的数据开始。即使你在输入 b 时给出了合法的输入，也不会被正确读取。同理，使用 <code>getchar()</code> 得到的也是缓冲区中的第一个字符。<br>所以，问题的本质是：如果有多次输入，需要在每次输入之前，清除输入缓冲区。否则，之前由于非法输入导致留在输入缓冲区中的数据，会直接影响到这次输入。<br>而解决办法，通过查找各类论坛，总结出来有如下几种：</p><ul><li><code>setbuf(stdin, NULL)</code></li><li><code>fflush(stdin)</code></li><li><code>scanf(&quot;%*[^\n]%*c&quot;)</code></li><li><code>rewind(stdin)</code></li></ul><p>其原理各不相同，但经过测试，像 <code>fflush(stdin)</code> 这样的函数，在 VC 中可以清除输入缓冲区，但在 XCode（或 gcc）中不起作用。而 <code>scanf(&quot;%*[^\n]%*c&quot;)</code> 原理是读取输入缓冲区的所有字符，达到清除输入缓冲区的目的；这似乎也不能解决某些形式的非法输入。<br>经研究，最为有效的办法是在每次接受输入前加一句 <code>rewind(stdin)</code>，其效果是坠吼的。</p>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Minecraft 存档 Galaxy City 地铁图（前瞻版）</title>
      <link href="/2017-10/Minecraft%E5%AD%98%E6%A1%A3Galaxy%20City%E5%9C%B0%E9%93%81%E5%9B%BE%EF%BC%88%E5%89%8D%E7%9E%BB%E7%89%88%EF%BC%89/"/>
      <url>/2017-10/Minecraft%E5%AD%98%E6%A1%A3Galaxy%20City%E5%9C%B0%E9%93%81%E5%9B%BE%EF%BC%88%E5%89%8D%E7%9E%BB%E7%89%88%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/2017-10/GalaxyCity.svg" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 电子游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 我的世界 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C 语言程序 Power of Logic</title>
      <link href="/2017-10/C%E8%AF%AD%E8%A8%80%E7%A8%8B%E5%BA%8FPower%20of%20Logic/"/>
      <url>/2017-10/C%E8%AF%AD%E8%A8%80%E7%A8%8B%E5%BA%8FPower%20of%20Logic/</url>
      
        <content type="html"><![CDATA[<p>Power of Logic 是一个推理游戏，玩家的任务是用尽可能少的时间和步骤解开密码序列。当你输入不同的数字序列时，系统会给出提示，指示你输入的数字序列中，有多少个数字正确但位置错误，又有多少个数字和位置都正确。运行效果如图：</p><p><img src="/images/2017-10/PoL.png" alt=""></p><p>下面附上最终版本的代码。<br><a id="more"></a><br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Power of Logic for Macintosh,Powered by Mimi 1984,Copyright(C)Mimi 1984\n"</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Version 0.9.0Beta2 CHEAT 0000 DEBUG 1111 INFO 2222\n"</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Thanks for using the Beta version!\n\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">game</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j, n, ref[<span class="number">8</span>], a[<span class="number">4</span>], b[<span class="number">4</span>], times = <span class="number">0</span>;</span><br><span class="line">    srand((<span class="keyword">unsigned</span> <span class="keyword">int</span>) time(<span class="number">0</span>));</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) ref[i] = i;</span><br><span class="line">    i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        n = rand() % <span class="number">8</span>;</span><br><span class="line">        <span class="keyword">if</span> (ref[n] != <span class="number">-1</span>) &#123;</span><br><span class="line">            a[i] = n;</span><br><span class="line">            ref[n] = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">if</span> (++i == <span class="number">4</span>) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="comment">// 随机数生成，存入 a[4]作为答案 </span></span><br><span class="line">input: <span class="built_in">printf</span>(<span class="string">"Input your answer\n"</span>); <span class="comment">// 返回点 input</span></span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>, y = <span class="number">0</span>, error = <span class="number">0</span>;</span><br><span class="line">    rewind(<span class="built_in">stdin</span>); <span class="comment">// 清除键盘缓冲区</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> check = <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;b[i]); <span class="comment">// 输入数据 b[4]</span></span><br><span class="line">        <span class="keyword">if</span> (check != <span class="number">1</span>) error += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (error != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"ERROR:Invalid input.\n"</span>);</span><br><span class="line">        <span class="keyword">goto</span> input;</span><br><span class="line">    &#125; <span class="comment">// 判断 b[4] 是否合法 (整数)</span></span><br><span class="line">    <span class="keyword">if</span> (b[<span class="number">0</span>] == <span class="number">0</span> &amp;&amp; b[<span class="number">1</span>] == <span class="number">0</span> &amp;&amp; b[<span class="number">2</span>] == <span class="number">0</span> &amp;&amp; b[<span class="number">3</span>] == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"The correct answer is:"</span>);</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d"</span>, a[i]);</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">3</span>) <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">goto</span> output;</span><br><span class="line">    &#125; <span class="comment">// 输入作弊码 0000，输出答案 a[4]，结束程序</span></span><br><span class="line">    <span class="keyword">if</span> (b[<span class="number">0</span>] == <span class="number">1</span> &amp;&amp; b[<span class="number">1</span>] == <span class="number">1</span> &amp;&amp; b[<span class="number">2</span>] == <span class="number">1</span> &amp;&amp; b[<span class="number">3</span>] == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"DEBUG MODE.\nThe correct answer is:"</span>);</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d"</span>, a[i]);</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">3</span>) <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">goto</span> input;</span><br><span class="line">    &#125; <span class="comment">// 输入调试码 1111，输出答案 a[4], 进入调试模式</span></span><br><span class="line">    <span class="keyword">if</span> (b[<span class="number">0</span>] == <span class="number">2</span> &amp;&amp; b[<span class="number">1</span>] == <span class="number">2</span> &amp;&amp; b[<span class="number">2</span>] == <span class="number">2</span> &amp;&amp; b[<span class="number">3</span>] == <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Sorry.No English Version Provided.\n"</span>);</span><br><span class="line">        <span class="keyword">goto</span> input;</span><br><span class="line">    &#125; <span class="comment">// 输入帮助码 2222，查看帮助</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = i + <span class="number">1</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (b[i] == b[j]) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"ERROR:No duplicate numbers allowed.\n"</span>);</span><br><span class="line">                <span class="keyword">goto</span> input;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="comment">// 判断 b[4] 是否合法 (重复数)</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (b[i] &lt;= <span class="number">-1</span> || b[i] &gt;= <span class="number">8</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"ERROR:Only number 0~7 are allowed.\n"</span>);</span><br><span class="line">            <span class="keyword">goto</span> input;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="comment">// 判断 b[4] 是否合法(范围 0~7)</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] == b[i]) x++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d"</span>, x); <span class="comment">// 数字正确，位置正确的个数 x</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[i] == b[j]) y++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    y -= x;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, y); <span class="comment">// 数字正确，位置不正确的个数 y</span></span><br><span class="line">    <span class="keyword">if</span> (times == <span class="number">10</span>) <span class="built_in">printf</span>(<span class="string">"Come On!You have guessed for too many times!\n"</span>);</span><br><span class="line">    <span class="keyword">if</span> (times == <span class="number">15</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Oh Fuck!You have guessed for TOO many times!\nThe correct answer is:"</span>);</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d"</span>, a[i]);</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">3</span>) <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">goto</span> output;</span><br><span class="line">    &#125; <span class="comment">// 猜测次数检查</span></span><br><span class="line">    <span class="keyword">if</span> (x == <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Bingo!\n"</span>);</span><br><span class="line">        times += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        times += <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">goto</span> input;</span><br><span class="line">    &#125; <span class="comment">// 全部猜对，结束程序，否则重猜</span></span><br><span class="line">output: <span class="built_in">printf</span>(<span class="string">"Have Fun!\n"</span>); <span class="comment">// 返回点 output</span></span><br><span class="line">    <span class="keyword">return</span> times; <span class="comment">// 猜测次数作为返回值</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">time_t</span> start, end;</span><br><span class="line">    <span class="keyword">int</span> cost, times, score; <span class="comment">// 花费时间，猜测次数，得分</span></span><br><span class="line">    print();</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Press Enter To Start The Game.\n"</span>);</span><br><span class="line">        getchar();</span><br><span class="line">        time(&amp;start); <span class="comment">// 计时开始</span></span><br><span class="line">        times = game();</span><br><span class="line">        time(&amp;end); <span class="comment">// 计时结束</span></span><br><span class="line">        cost = difftime(end, start);</span><br><span class="line">        score = <span class="number">100</span> - cost / <span class="number">10</span> - times * <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (score &lt;= <span class="number">0</span>) score = <span class="number">0</span>; <span class="comment">// 负分归零系统</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Run Time:%d Seconds\n"</span>, cost);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Times You Guessed:%d\n"</span>, times);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Your Score:%d\n\n"</span>, score);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>本文更新于 2017 年 10 月 21 日：<br>得益于 C 与 JavaScript 的某些相似性，博主成功将 Power of Logic 移植到 Web 端，制作了 JavaScript 版本。目前该游戏已经可以通过 <a href="https://galaxymimi.com/app/logic.html" target="_blank" rel="noopener">主站&gt; 应用&gt;原创游戏 &gt; Logic</a>访问。移植过程全面深化了博主对于 JavaScript 与 HTML5 某些机制的理解，包括从网页实时读取内容与输出内容、通过按钮触发函数实现响应以及 <code>setInterval()</code> 和 <code>clearInterval()</code> 的用法等。</p><p><img src="/images/2017-10/poweroflogic.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2017-10/Hello%20World/"/>
      <url>/2017-10/Hello%20World/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 系统日志 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
